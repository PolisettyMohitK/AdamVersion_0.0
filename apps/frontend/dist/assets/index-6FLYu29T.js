function iF(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function ld(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var lP={exports:{}},q0={},cP={exports:{}},Xt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zh=Symbol.for("react.element"),sF=Symbol.for("react.portal"),oF=Symbol.for("react.fragment"),aF=Symbol.for("react.strict_mode"),lF=Symbol.for("react.profiler"),cF=Symbol.for("react.provider"),uF=Symbol.for("react.context"),dF=Symbol.for("react.forward_ref"),fF=Symbol.for("react.suspense"),hF=Symbol.for("react.memo"),pF=Symbol.for("react.lazy"),yb=Symbol.iterator;function mF(n){return n===null||typeof n!="object"?null:(n=yb&&n[yb]||n["@@iterator"],typeof n=="function"?n:null)}var uP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dP=Object.assign,fP={};function cd(n,e,t){this.props=n,this.context=e,this.refs=fP,this.updater=t||uP}cd.prototype.isReactComponent={};cd.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};cd.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function hP(){}hP.prototype=cd.prototype;function hS(n,e,t){this.props=n,this.context=e,this.refs=fP,this.updater=t||uP}var pS=hS.prototype=new hP;pS.constructor=hS;dP(pS,cd.prototype);pS.isPureReactComponent=!0;var _b=Array.isArray,pP=Object.prototype.hasOwnProperty,mS={current:null},mP={key:!0,ref:!0,__self:!0,__source:!0};function gP(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)pP.call(e,r)&&!mP.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:zh,type:n,key:s,ref:o,props:i,_owner:mS.current}}function gF(n,e){return{$$typeof:zh,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function gS(n){return typeof n=="object"&&n!==null&&n.$$typeof===zh}function vF(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var xb=/\/+/g;function i_(n,e){return typeof n=="object"&&n!==null&&n.key!=null?vF(""+n.key):e.toString(36)}function Fg(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case zh:case sF:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+i_(o,0):r,_b(i)?(t="",n!=null&&(t=n.replace(xb,"$&/")+"/"),Fg(i,e,t,"",function(c){return c})):i!=null&&(gS(i)&&(i=gF(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(xb,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",_b(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+i_(s,a);o+=Fg(s,e,t,l,i)}else if(l=mF(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+i_(s,a++),o+=Fg(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function um(n,e,t){if(n==null)return n;var r=[],i=0;return Fg(n,r,"","",function(s){return e.call(t,s,i++)}),r}function yF(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var ri={current:null},kg={transition:null},_F={ReactCurrentDispatcher:ri,ReactCurrentBatchConfig:kg,ReactCurrentOwner:mS};Xt.Children={map:um,forEach:function(n,e,t){um(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return um(n,function(){e++}),e},toArray:function(n){return um(n,function(e){return e})||[]},only:function(n){if(!gS(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Xt.Component=cd;Xt.Fragment=oF;Xt.Profiler=lF;Xt.PureComponent=hS;Xt.StrictMode=aF;Xt.Suspense=fF;Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_F;Xt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=dP({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=mS.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)pP.call(e,l)&&!mP.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:zh,type:n.type,key:i,ref:s,props:r,_owner:o}};Xt.createContext=function(n){return n={$$typeof:uF,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:cF,_context:n},n.Consumer=n};Xt.createElement=gP;Xt.createFactory=function(n){var e=gP.bind(null,n);return e.type=n,e};Xt.createRef=function(){return{current:null}};Xt.forwardRef=function(n){return{$$typeof:dF,render:n}};Xt.isValidElement=gS;Xt.lazy=function(n){return{$$typeof:pF,_payload:{_status:-1,_result:n},_init:yF}};Xt.memo=function(n,e){return{$$typeof:hF,type:n,compare:e===void 0?null:e}};Xt.startTransition=function(n){var e=kg.transition;kg.transition={};try{n()}finally{kg.transition=e}};Xt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Xt.useCallback=function(n,e){return ri.current.useCallback(n,e)};Xt.useContext=function(n){return ri.current.useContext(n)};Xt.useDebugValue=function(){};Xt.useDeferredValue=function(n){return ri.current.useDeferredValue(n)};Xt.useEffect=function(n,e){return ri.current.useEffect(n,e)};Xt.useId=function(){return ri.current.useId()};Xt.useImperativeHandle=function(n,e,t){return ri.current.useImperativeHandle(n,e,t)};Xt.useInsertionEffect=function(n,e){return ri.current.useInsertionEffect(n,e)};Xt.useLayoutEffect=function(n,e){return ri.current.useLayoutEffect(n,e)};Xt.useMemo=function(n,e){return ri.current.useMemo(n,e)};Xt.useReducer=function(n,e,t){return ri.current.useReducer(n,e,t)};Xt.useRef=function(n){return ri.current.useRef(n)};Xt.useState=function(n){return ri.current.useState(n)};Xt.useSyncExternalStore=function(n,e,t){return ri.current.useSyncExternalStore(n,e,t)};Xt.useTransition=function(){return ri.current.useTransition()};Xt.version="18.2.0";cP.exports=Xt;var C=cP.exports;const q=ld(C),xF=iF({__proto__:null,default:q},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EF=C,SF=Symbol.for("react.element"),AF=Symbol.for("react.fragment"),wF=Object.prototype.hasOwnProperty,MF=EF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bF={key:!0,ref:!0,__self:!0,__source:!0};function vP(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)wF.call(e,r)&&!bF.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:SF,type:n,key:s,ref:o,props:i,_owner:MF.current}}q0.Fragment=AF;q0.jsx=vP;q0.jsxs=vP;lP.exports=q0;var N=lP.exports,Zx={},yP={exports:{}},Fi={},_P={exports:{}},xP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(H,Y){var V=H.length;H.push(Y);e:for(;0<V;){var ee=V-1>>>1,ie=H[ee];if(0<i(ie,Y))H[ee]=Y,H[V]=ie,V=ee;else break e}}function t(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var Y=H[0],V=H.pop();if(V!==Y){H[0]=V;e:for(var ee=0,ie=H.length,oe=ie>>>1;ee<oe;){var he=2*(ee+1)-1,Ce=H[he],be=he+1,Te=H[be];if(0>i(Ce,V))be<ie&&0>i(Te,Ce)?(H[ee]=Te,H[be]=V,ee=be):(H[ee]=Ce,H[he]=V,ee=he);else if(be<ie&&0>i(Te,V))H[ee]=Te,H[be]=V,ee=be;else break e}}return Y}function i(H,Y){var V=H.sortIndex-Y.sortIndex;return V!==0?V:H.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,p=3,m=!1,v=!1,_=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(H){for(var Y=t(c);Y!==null;){if(Y.callback===null)r(c);else if(Y.startTime<=H)r(c),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=t(c)}}function w(H){if(_=!1,E(H),!v)if(t(l)!==null)v=!0,re(T);else{var Y=t(c);Y!==null&&ae(w,Y.startTime-H)}}function T(H,Y){v=!1,_&&(_=!1,g(B),B=-1),m=!0;var V=p;try{for(E(Y),h=t(l);h!==null&&(!(h.expirationTime>Y)||H&&!F());){var ee=h.callback;if(typeof ee=="function"){h.callback=null,p=h.priorityLevel;var ie=ee(h.expirationTime<=Y);Y=n.unstable_now(),typeof ie=="function"?h.callback=ie:h===t(l)&&r(l),E(Y)}else r(l);h=t(l)}if(h!==null)var oe=!0;else{var he=t(c);he!==null&&ae(w,he.startTime-Y),oe=!1}return oe}finally{h=null,p=V,m=!1}}var b=!1,R=null,B=-1,P=5,I=-1;function F(){return!(n.unstable_now()-I<P)}function $(){if(R!==null){var H=n.unstable_now();I=H;var Y=!0;try{Y=R(!0,H)}finally{Y?Z():(b=!1,R=null)}}else b=!1}var Z;if(typeof S=="function")Z=function(){S($)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,j=U.port2;U.port1.onmessage=$,Z=function(){j.postMessage(null)}}else Z=function(){y($,0)};function re(H){R=H,b||(b=!0,Z())}function ae(H,Y){B=y(function(){H(n.unstable_now())},Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,re(T))},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(H){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var V=p;p=Y;try{return H()}finally{p=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(H,Y){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var V=p;p=H;try{return Y()}finally{p=V}},n.unstable_scheduleCallback=function(H,Y,V){var ee=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?ee+V:ee):V=ee,H){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=V+ie,H={id:d++,callback:Y,priorityLevel:H,startTime:V,expirationTime:ie,sortIndex:-1},V>ee?(H.sortIndex=V,e(c,H),t(l)===null&&H===t(c)&&(_?(g(B),B=-1):_=!0,ae(w,V-ee))):(H.sortIndex=ie,e(l,H),v||m||(v=!0,re(T))),H},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(H){var Y=p;return function(){var V=p;p=Y;try{return H.apply(this,arguments)}finally{p=V}}}})(xP);_P.exports=xP;var CF=_P.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EP=C,Oi=CF;function Fe(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var SP=new Set,eh={};function uc(n,e){zu(n,e),zu(n+"Capture",e)}function zu(n,e){for(eh[n]=e,n=0;n<e.length;n++)SP.add(e[n])}var Ho=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qx=Object.prototype.hasOwnProperty,TF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Eb={},Sb={};function RF(n){return Qx.call(Sb,n)?!0:Qx.call(Eb,n)?!1:TF.test(n)?Sb[n]=!0:(Eb[n]=!0,!1)}function PF(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function IF(n,e,t,r){if(e===null||typeof e>"u"||PF(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ii(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Tr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Tr[n]=new ii(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Tr[e]=new ii(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Tr[n]=new ii(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Tr[n]=new ii(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Tr[n]=new ii(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Tr[n]=new ii(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Tr[n]=new ii(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Tr[n]=new ii(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Tr[n]=new ii(n,5,!1,n.toLowerCase(),null,!1,!1)});var vS=/[\-:]([a-z])/g;function yS(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(vS,yS);Tr[e]=new ii(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(vS,yS);Tr[e]=new ii(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(vS,yS);Tr[e]=new ii(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Tr[n]=new ii(n,1,!1,n.toLowerCase(),null,!1,!1)});Tr.xlinkHref=new ii("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Tr[n]=new ii(n,1,!1,n.toLowerCase(),null,!0,!0)});function _S(n,e,t,r){var i=Tr.hasOwnProperty(e)?Tr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(IF(e,t,i,r)&&(t=null),r||i===null?RF(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Zo=EP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dm=Symbol.for("react.element"),uu=Symbol.for("react.portal"),du=Symbol.for("react.fragment"),xS=Symbol.for("react.strict_mode"),qx=Symbol.for("react.profiler"),AP=Symbol.for("react.provider"),wP=Symbol.for("react.context"),ES=Symbol.for("react.forward_ref"),e1=Symbol.for("react.suspense"),t1=Symbol.for("react.suspense_list"),SS=Symbol.for("react.memo"),Ea=Symbol.for("react.lazy"),MP=Symbol.for("react.offscreen"),Ab=Symbol.iterator;function Kd(n){return n===null||typeof n!="object"?null:(n=Ab&&n[Ab]||n["@@iterator"],typeof n=="function"?n:null)}var zn=Object.assign,s_;function Pf(n){if(s_===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);s_=e&&e[1]||""}return`
`+s_+n}var o_=!1;function a_(n,e){if(!n||o_)return"";o_=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{o_=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Pf(n):""}function LF(n){switch(n.tag){case 5:return Pf(n.type);case 16:return Pf("Lazy");case 13:return Pf("Suspense");case 19:return Pf("SuspenseList");case 0:case 2:case 15:return n=a_(n.type,!1),n;case 11:return n=a_(n.type.render,!1),n;case 1:return n=a_(n.type,!0),n;default:return""}}function n1(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case du:return"Fragment";case uu:return"Portal";case qx:return"Profiler";case xS:return"StrictMode";case e1:return"Suspense";case t1:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case wP:return(n.displayName||"Context")+".Consumer";case AP:return(n._context.displayName||"Context")+".Provider";case ES:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case SS:return e=n.displayName||null,e!==null?e:n1(n.type)||"Memo";case Ea:e=n._payload,n=n._init;try{return n1(n(e))}catch{}}return null}function BF(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return n1(e);case 8:return e===xS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ga(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function bP(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function DF(n){var e=bP(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function fm(n){n._valueTracker||(n._valueTracker=DF(n))}function CP(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=bP(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function a0(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function r1(n,e){var t=e.checked;return zn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function wb(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Ga(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function TP(n,e){e=e.checked,e!=null&&_S(n,"checked",e,!1)}function i1(n,e){TP(n,e);var t=Ga(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?s1(n,e.type,t):e.hasOwnProperty("defaultValue")&&s1(n,e.type,Ga(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Mb(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function s1(n,e,t){(e!=="number"||a0(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var If=Array.isArray;function Ru(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Ga(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function o1(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Fe(91));return zn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function bb(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Fe(92));if(If(t)){if(1<t.length)throw Error(Fe(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Ga(t)}}function RP(n,e){var t=Ga(e.value),r=Ga(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function Cb(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function PP(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function a1(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?PP(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var hm,IP=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(hm=hm||document.createElement("div"),hm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=hm.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function th(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Nf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},OF=["Webkit","ms","Moz","O"];Object.keys(Nf).forEach(function(n){OF.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Nf[e]=Nf[n]})});function LP(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Nf.hasOwnProperty(n)&&Nf[n]?(""+e).trim():e+"px"}function BP(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=LP(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var NF=zn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function l1(n,e){if(e){if(NF[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Fe(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Fe(62))}}function c1(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var u1=null;function AS(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var d1=null,Pu=null,Iu=null;function Tb(n){if(n=Vh(n)){if(typeof d1!="function")throw Error(Fe(280));var e=n.stateNode;e&&(e=iv(e),d1(n.stateNode,n.type,e))}}function DP(n){Pu?Iu?Iu.push(n):Iu=[n]:Pu=n}function OP(){if(Pu){var n=Pu,e=Iu;if(Iu=Pu=null,Tb(n),e)for(n=0;n<e.length;n++)Tb(e[n])}}function NP(n,e){return n(e)}function FP(){}var l_=!1;function kP(n,e,t){if(l_)return n(e,t);l_=!0;try{return NP(n,e,t)}finally{l_=!1,(Pu!==null||Iu!==null)&&(FP(),OP())}}function nh(n,e){var t=n.stateNode;if(t===null)return null;var r=iv(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Fe(231,e,typeof t));return t}var f1=!1;if(Ho)try{var Zd={};Object.defineProperty(Zd,"passive",{get:function(){f1=!0}}),window.addEventListener("test",Zd,Zd),window.removeEventListener("test",Zd,Zd)}catch{f1=!1}function FF(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(d){this.onError(d)}}var Ff=!1,l0=null,c0=!1,h1=null,kF={onError:function(n){Ff=!0,l0=n}};function UF(n,e,t,r,i,s,o,a,l){Ff=!1,l0=null,FF.apply(kF,arguments)}function zF(n,e,t,r,i,s,o,a,l){if(UF.apply(this,arguments),Ff){if(Ff){var c=l0;Ff=!1,l0=null}else throw Error(Fe(198));c0||(c0=!0,h1=c)}}function dc(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function UP(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Rb(n){if(dc(n)!==n)throw Error(Fe(188))}function HF(n){var e=n.alternate;if(!e){if(e=dc(n),e===null)throw Error(Fe(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return Rb(i),n;if(s===r)return Rb(i),e;s=s.sibling}throw Error(Fe(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(Fe(189))}}if(t.alternate!==r)throw Error(Fe(190))}if(t.tag!==3)throw Error(Fe(188));return t.stateNode.current===t?n:e}function zP(n){return n=HF(n),n!==null?HP(n):null}function HP(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=HP(n);if(e!==null)return e;n=n.sibling}return null}var GP=Oi.unstable_scheduleCallback,Pb=Oi.unstable_cancelCallback,GF=Oi.unstable_shouldYield,VF=Oi.unstable_requestPaint,Zn=Oi.unstable_now,WF=Oi.unstable_getCurrentPriorityLevel,wS=Oi.unstable_ImmediatePriority,VP=Oi.unstable_UserBlockingPriority,u0=Oi.unstable_NormalPriority,$F=Oi.unstable_LowPriority,WP=Oi.unstable_IdlePriority,ev=null,qs=null;function jF(n){if(qs&&typeof qs.onCommitFiberRoot=="function")try{qs.onCommitFiberRoot(ev,n,void 0,(n.current.flags&128)===128)}catch{}}var Ts=Math.clz32?Math.clz32:YF,XF=Math.log,JF=Math.LN2;function YF(n){return n>>>=0,n===0?32:31-(XF(n)/JF|0)|0}var pm=64,mm=4194304;function Lf(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function d0(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=Lf(a):(s&=o,s!==0&&(r=Lf(s)))}else o=t&~i,o!==0?r=Lf(o):s!==0&&(r=Lf(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Ts(e),i=1<<t,r|=n[t],e&=~i;return r}function KF(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ZF(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Ts(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=KF(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function p1(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function $P(){var n=pm;return pm<<=1,!(pm&4194240)&&(pm=64),n}function c_(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Hh(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Ts(e),n[e]=t}function QF(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Ts(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function MS(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Ts(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var dn=0;function jP(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var XP,bS,JP,YP,KP,m1=!1,gm=[],Ia=null,La=null,Ba=null,rh=new Map,ih=new Map,Ma=[],qF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ib(n,e){switch(n){case"focusin":case"focusout":Ia=null;break;case"dragenter":case"dragleave":La=null;break;case"mouseover":case"mouseout":Ba=null;break;case"pointerover":case"pointerout":rh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ih.delete(e.pointerId)}}function Qd(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Vh(e),e!==null&&bS(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function ek(n,e,t,r,i){switch(e){case"focusin":return Ia=Qd(Ia,n,e,t,r,i),!0;case"dragenter":return La=Qd(La,n,e,t,r,i),!0;case"mouseover":return Ba=Qd(Ba,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return rh.set(s,Qd(rh.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ih.set(s,Qd(ih.get(s)||null,n,e,t,r,i)),!0}return!1}function ZP(n){var e=Dl(n.target);if(e!==null){var t=dc(e);if(t!==null){if(e=t.tag,e===13){if(e=UP(t),e!==null){n.blockedOn=e,KP(n.priority,function(){JP(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ug(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=g1(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);u1=r,t.target.dispatchEvent(r),u1=null}else return e=Vh(t),e!==null&&bS(e),n.blockedOn=t,!1;e.shift()}return!0}function Lb(n,e,t){Ug(n)&&t.delete(e)}function tk(){m1=!1,Ia!==null&&Ug(Ia)&&(Ia=null),La!==null&&Ug(La)&&(La=null),Ba!==null&&Ug(Ba)&&(Ba=null),rh.forEach(Lb),ih.forEach(Lb)}function qd(n,e){n.blockedOn===e&&(n.blockedOn=null,m1||(m1=!0,Oi.unstable_scheduleCallback(Oi.unstable_NormalPriority,tk)))}function sh(n){function e(i){return qd(i,n)}if(0<gm.length){qd(gm[0],n);for(var t=1;t<gm.length;t++){var r=gm[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Ia!==null&&qd(Ia,n),La!==null&&qd(La,n),Ba!==null&&qd(Ba,n),rh.forEach(e),ih.forEach(e),t=0;t<Ma.length;t++)r=Ma[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Ma.length&&(t=Ma[0],t.blockedOn===null);)ZP(t),t.blockedOn===null&&Ma.shift()}var Lu=Zo.ReactCurrentBatchConfig,f0=!0;function nk(n,e,t,r){var i=dn,s=Lu.transition;Lu.transition=null;try{dn=1,CS(n,e,t,r)}finally{dn=i,Lu.transition=s}}function rk(n,e,t,r){var i=dn,s=Lu.transition;Lu.transition=null;try{dn=4,CS(n,e,t,r)}finally{dn=i,Lu.transition=s}}function CS(n,e,t,r){if(f0){var i=g1(n,e,t,r);if(i===null)__(n,e,r,h0,t),Ib(n,r);else if(ek(i,n,e,t,r))r.stopPropagation();else if(Ib(n,r),e&4&&-1<qF.indexOf(n)){for(;i!==null;){var s=Vh(i);if(s!==null&&XP(s),s=g1(n,e,t,r),s===null&&__(n,e,r,h0,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else __(n,e,r,null,t)}}var h0=null;function g1(n,e,t,r){if(h0=null,n=AS(r),n=Dl(n),n!==null)if(e=dc(n),e===null)n=null;else if(t=e.tag,t===13){if(n=UP(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return h0=n,null}function QP(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(WF()){case wS:return 1;case VP:return 4;case u0:case $F:return 16;case WP:return 536870912;default:return 16}default:return 16}}var Ta=null,TS=null,zg=null;function qP(){if(zg)return zg;var n,e=TS,t=e.length,r,i="value"in Ta?Ta.value:Ta.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return zg=i.slice(n,1<r?1-r:void 0)}function Hg(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function vm(){return!0}function Bb(){return!1}function ki(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?vm:Bb,this.isPropagationStopped=Bb,this}return zn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=vm)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=vm)},persist:function(){},isPersistent:vm}),e}var ud={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},RS=ki(ud),Gh=zn({},ud,{view:0,detail:0}),ik=ki(Gh),u_,d_,ef,tv=zn({},Gh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:PS,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ef&&(ef&&n.type==="mousemove"?(u_=n.screenX-ef.screenX,d_=n.screenY-ef.screenY):d_=u_=0,ef=n),u_)},movementY:function(n){return"movementY"in n?n.movementY:d_}}),Db=ki(tv),sk=zn({},tv,{dataTransfer:0}),ok=ki(sk),ak=zn({},Gh,{relatedTarget:0}),f_=ki(ak),lk=zn({},ud,{animationName:0,elapsedTime:0,pseudoElement:0}),ck=ki(lk),uk=zn({},ud,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),dk=ki(uk),fk=zn({},ud,{data:0}),Ob=ki(fk),hk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gk(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=mk[n])?!!e[n]:!1}function PS(){return gk}var vk=zn({},Gh,{key:function(n){if(n.key){var e=hk[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Hg(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?pk[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:PS,charCode:function(n){return n.type==="keypress"?Hg(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Hg(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),yk=ki(vk),_k=zn({},tv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nb=ki(_k),xk=zn({},Gh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:PS}),Ek=ki(xk),Sk=zn({},ud,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ak=ki(Sk),wk=zn({},tv,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Mk=ki(wk),bk=[9,13,27,32],IS=Ho&&"CompositionEvent"in window,kf=null;Ho&&"documentMode"in document&&(kf=document.documentMode);var Ck=Ho&&"TextEvent"in window&&!kf,eI=Ho&&(!IS||kf&&8<kf&&11>=kf),Fb=" ",kb=!1;function tI(n,e){switch(n){case"keyup":return bk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nI(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var fu=!1;function Tk(n,e){switch(n){case"compositionend":return nI(e);case"keypress":return e.which!==32?null:(kb=!0,Fb);case"textInput":return n=e.data,n===Fb&&kb?null:n;default:return null}}function Rk(n,e){if(fu)return n==="compositionend"||!IS&&tI(n,e)?(n=qP(),zg=TS=Ta=null,fu=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return eI&&e.locale!=="ko"?null:e.data;default:return null}}var Pk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ub(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!Pk[n.type]:e==="textarea"}function rI(n,e,t,r){DP(r),e=p0(e,"onChange"),0<e.length&&(t=new RS("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Uf=null,oh=null;function Ik(n){pI(n,0)}function nv(n){var e=mu(n);if(CP(e))return n}function Lk(n,e){if(n==="change")return e}var iI=!1;if(Ho){var h_;if(Ho){var p_="oninput"in document;if(!p_){var zb=document.createElement("div");zb.setAttribute("oninput","return;"),p_=typeof zb.oninput=="function"}h_=p_}else h_=!1;iI=h_&&(!document.documentMode||9<document.documentMode)}function Hb(){Uf&&(Uf.detachEvent("onpropertychange",sI),oh=Uf=null)}function sI(n){if(n.propertyName==="value"&&nv(oh)){var e=[];rI(e,oh,n,AS(n)),kP(Ik,e)}}function Bk(n,e,t){n==="focusin"?(Hb(),Uf=e,oh=t,Uf.attachEvent("onpropertychange",sI)):n==="focusout"&&Hb()}function Dk(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return nv(oh)}function Ok(n,e){if(n==="click")return nv(e)}function Nk(n,e){if(n==="input"||n==="change")return nv(e)}function Fk(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Ps=typeof Object.is=="function"?Object.is:Fk;function ah(n,e){if(Ps(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!Qx.call(e,i)||!Ps(n[i],e[i]))return!1}return!0}function Gb(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Vb(n,e){var t=Gb(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Gb(t)}}function oI(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?oI(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function aI(){for(var n=window,e=a0();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=a0(n.document)}return e}function LS(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function kk(n){var e=aI(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&oI(t.ownerDocument.documentElement,t)){if(r!==null&&LS(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=Vb(t,s);var o=Vb(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Uk=Ho&&"documentMode"in document&&11>=document.documentMode,hu=null,v1=null,zf=null,y1=!1;function Wb(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;y1||hu==null||hu!==a0(r)||(r=hu,"selectionStart"in r&&LS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),zf&&ah(zf,r)||(zf=r,r=p0(v1,"onSelect"),0<r.length&&(e=new RS("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=hu)))}function ym(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var pu={animationend:ym("Animation","AnimationEnd"),animationiteration:ym("Animation","AnimationIteration"),animationstart:ym("Animation","AnimationStart"),transitionend:ym("Transition","TransitionEnd")},m_={},lI={};Ho&&(lI=document.createElement("div").style,"AnimationEvent"in window||(delete pu.animationend.animation,delete pu.animationiteration.animation,delete pu.animationstart.animation),"TransitionEvent"in window||delete pu.transitionend.transition);function rv(n){if(m_[n])return m_[n];if(!pu[n])return n;var e=pu[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in lI)return m_[n]=e[t];return n}var cI=rv("animationend"),uI=rv("animationiteration"),dI=rv("animationstart"),fI=rv("transitionend"),hI=new Map,$b="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qa(n,e){hI.set(n,e),uc(e,[n])}for(var g_=0;g_<$b.length;g_++){var v_=$b[g_],zk=v_.toLowerCase(),Hk=v_[0].toUpperCase()+v_.slice(1);Qa(zk,"on"+Hk)}Qa(cI,"onAnimationEnd");Qa(uI,"onAnimationIteration");Qa(dI,"onAnimationStart");Qa("dblclick","onDoubleClick");Qa("focusin","onFocus");Qa("focusout","onBlur");Qa(fI,"onTransitionEnd");zu("onMouseEnter",["mouseout","mouseover"]);zu("onMouseLeave",["mouseout","mouseover"]);zu("onPointerEnter",["pointerout","pointerover"]);zu("onPointerLeave",["pointerout","pointerover"]);uc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));uc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));uc("onBeforeInput",["compositionend","keypress","textInput","paste"]);uc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));uc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));uc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bf));function jb(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,zF(r,e,void 0,n),n.currentTarget=null}function pI(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;jb(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;jb(i,a,c),s=l}}}if(c0)throw n=h1,c0=!1,h1=null,n}function En(n,e){var t=e[A1];t===void 0&&(t=e[A1]=new Set);var r=n+"__bubble";t.has(r)||(mI(e,n,2,!1),t.add(r))}function y_(n,e,t){var r=0;e&&(r|=4),mI(t,n,r,e)}var _m="_reactListening"+Math.random().toString(36).slice(2);function lh(n){if(!n[_m]){n[_m]=!0,SP.forEach(function(t){t!=="selectionchange"&&(Gk.has(t)||y_(t,!1,n),y_(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[_m]||(e[_m]=!0,y_("selectionchange",!1,e))}}function mI(n,e,t,r){switch(QP(e)){case 1:var i=nk;break;case 4:i=rk;break;default:i=CS}t=i.bind(null,e,t,n),i=void 0,!f1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function __(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Dl(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}kP(function(){var c=s,d=AS(t),h=[];e:{var p=hI.get(n);if(p!==void 0){var m=RS,v=n;switch(n){case"keypress":if(Hg(t)===0)break e;case"keydown":case"keyup":m=yk;break;case"focusin":v="focus",m=f_;break;case"focusout":v="blur",m=f_;break;case"beforeblur":case"afterblur":m=f_;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Db;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=ok;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Ek;break;case cI:case uI:case dI:m=ck;break;case fI:m=Ak;break;case"scroll":m=ik;break;case"wheel":m=Mk;break;case"copy":case"cut":case"paste":m=dk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Nb}var _=(e&4)!==0,y=!_&&n==="scroll",g=_?p!==null?p+"Capture":null:p;_=[];for(var S=c,E;S!==null;){E=S;var w=E.stateNode;if(E.tag===5&&w!==null&&(E=w,g!==null&&(w=nh(S,g),w!=null&&_.push(ch(S,w,E)))),y)break;S=S.return}0<_.length&&(p=new m(p,v,null,t,d),h.push({event:p,listeners:_}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==u1&&(v=t.relatedTarget||t.fromElement)&&(Dl(v)||v[Go]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=t.relatedTarget||t.toElement,m=c,v=v?Dl(v):null,v!==null&&(y=dc(v),v!==y||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(_=Db,w="onMouseLeave",g="onMouseEnter",S="mouse",(n==="pointerout"||n==="pointerover")&&(_=Nb,w="onPointerLeave",g="onPointerEnter",S="pointer"),y=m==null?p:mu(m),E=v==null?p:mu(v),p=new _(w,S+"leave",m,t,d),p.target=y,p.relatedTarget=E,w=null,Dl(d)===c&&(_=new _(g,S+"enter",v,t,d),_.target=E,_.relatedTarget=y,w=_),y=w,m&&v)t:{for(_=m,g=v,S=0,E=_;E;E=Pc(E))S++;for(E=0,w=g;w;w=Pc(w))E++;for(;0<S-E;)_=Pc(_),S--;for(;0<E-S;)g=Pc(g),E--;for(;S--;){if(_===g||g!==null&&_===g.alternate)break t;_=Pc(_),g=Pc(g)}_=null}else _=null;m!==null&&Xb(h,p,m,_,!1),v!==null&&y!==null&&Xb(h,y,v,_,!0)}}e:{if(p=c?mu(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var T=Lk;else if(Ub(p))if(iI)T=Nk;else{T=Dk;var b=Bk}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(T=Ok);if(T&&(T=T(n,c))){rI(h,T,t,d);break e}b&&b(n,p,c),n==="focusout"&&(b=p._wrapperState)&&b.controlled&&p.type==="number"&&s1(p,"number",p.value)}switch(b=c?mu(c):window,n){case"focusin":(Ub(b)||b.contentEditable==="true")&&(hu=b,v1=c,zf=null);break;case"focusout":zf=v1=hu=null;break;case"mousedown":y1=!0;break;case"contextmenu":case"mouseup":case"dragend":y1=!1,Wb(h,t,d);break;case"selectionchange":if(Uk)break;case"keydown":case"keyup":Wb(h,t,d)}var R;if(IS)e:{switch(n){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else fu?tI(n,t)&&(B="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(B="onCompositionStart");B&&(eI&&t.locale!=="ko"&&(fu||B!=="onCompositionStart"?B==="onCompositionEnd"&&fu&&(R=qP()):(Ta=d,TS="value"in Ta?Ta.value:Ta.textContent,fu=!0)),b=p0(c,B),0<b.length&&(B=new Ob(B,n,null,t,d),h.push({event:B,listeners:b}),R?B.data=R:(R=nI(t),R!==null&&(B.data=R)))),(R=Ck?Tk(n,t):Rk(n,t))&&(c=p0(c,"onBeforeInput"),0<c.length&&(d=new Ob("onBeforeInput","beforeinput",null,t,d),h.push({event:d,listeners:c}),d.data=R))}pI(h,e)})}function ch(n,e,t){return{instance:n,listener:e,currentTarget:t}}function p0(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=nh(n,t),s!=null&&r.unshift(ch(n,s,i)),s=nh(n,e),s!=null&&r.push(ch(n,s,i))),n=n.return}return r}function Pc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Xb(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=nh(t,s),l!=null&&o.unshift(ch(t,l,a))):i||(l=nh(t,s),l!=null&&o.push(ch(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var Vk=/\r\n?/g,Wk=/\u0000|\uFFFD/g;function Jb(n){return(typeof n=="string"?n:""+n).replace(Vk,`
`).replace(Wk,"")}function xm(n,e,t){if(e=Jb(e),Jb(n)!==e&&t)throw Error(Fe(425))}function m0(){}var _1=null,x1=null;function E1(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var S1=typeof setTimeout=="function"?setTimeout:void 0,$k=typeof clearTimeout=="function"?clearTimeout:void 0,Yb=typeof Promise=="function"?Promise:void 0,jk=typeof queueMicrotask=="function"?queueMicrotask:typeof Yb<"u"?function(n){return Yb.resolve(null).then(n).catch(Xk)}:S1;function Xk(n){setTimeout(function(){throw n})}function x_(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),sh(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);sh(e)}function Da(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Kb(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var dd=Math.random().toString(36).slice(2),Qs="__reactFiber$"+dd,uh="__reactProps$"+dd,Go="__reactContainer$"+dd,A1="__reactEvents$"+dd,Jk="__reactListeners$"+dd,Yk="__reactHandles$"+dd;function Dl(n){var e=n[Qs];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Go]||t[Qs]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Kb(n);n!==null;){if(t=n[Qs])return t;n=Kb(n)}return e}n=t,t=n.parentNode}return null}function Vh(n){return n=n[Qs]||n[Go],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function mu(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Fe(33))}function iv(n){return n[uh]||null}var w1=[],gu=-1;function qa(n){return{current:n}}function wn(n){0>gu||(n.current=w1[gu],w1[gu]=null,gu--)}function xn(n,e){gu++,w1[gu]=n.current,n.current=e}var Va={},Hr=qa(Va),yi=qa(!1),ql=Va;function Hu(n,e){var t=n.type.contextTypes;if(!t)return Va;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function _i(n){return n=n.childContextTypes,n!=null}function g0(){wn(yi),wn(Hr)}function Zb(n,e,t){if(Hr.current!==Va)throw Error(Fe(168));xn(Hr,e),xn(yi,t)}function gI(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Fe(108,BF(n)||"Unknown",i));return zn({},t,r)}function v0(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Va,ql=Hr.current,xn(Hr,n),xn(yi,yi.current),!0}function Qb(n,e,t){var r=n.stateNode;if(!r)throw Error(Fe(169));t?(n=gI(n,e,ql),r.__reactInternalMemoizedMergedChildContext=n,wn(yi),wn(Hr),xn(Hr,n)):wn(yi),xn(yi,t)}var To=null,sv=!1,E_=!1;function vI(n){To===null?To=[n]:To.push(n)}function Kk(n){sv=!0,vI(n)}function el(){if(!E_&&To!==null){E_=!0;var n=0,e=dn;try{var t=To;for(dn=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}To=null,sv=!1}catch(i){throw To!==null&&(To=To.slice(n+1)),GP(wS,el),i}finally{dn=e,E_=!1}}return null}var vu=[],yu=0,y0=null,_0=0,qi=[],es=0,ec=null,Lo=1,Bo="";function Rl(n,e){vu[yu++]=_0,vu[yu++]=y0,y0=n,_0=e}function yI(n,e,t){qi[es++]=Lo,qi[es++]=Bo,qi[es++]=ec,ec=n;var r=Lo;n=Bo;var i=32-Ts(r)-1;r&=~(1<<i),t+=1;var s=32-Ts(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Lo=1<<32-Ts(e)+i|t<<i|r,Bo=s+n}else Lo=1<<s|t<<i|r,Bo=n}function BS(n){n.return!==null&&(Rl(n,1),yI(n,1,0))}function DS(n){for(;n===y0;)y0=vu[--yu],vu[yu]=null,_0=vu[--yu],vu[yu]=null;for(;n===ec;)ec=qi[--es],qi[es]=null,Bo=qi[--es],qi[es]=null,Lo=qi[--es],qi[es]=null}var Li=null,Pi=null,Tn=!1,Ms=null;function _I(n,e){var t=is(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function qb(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Li=n,Pi=Da(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Li=n,Pi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=ec!==null?{id:Lo,overflow:Bo}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=is(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Li=n,Pi=null,!0):!1;default:return!1}}function M1(n){return(n.mode&1)!==0&&(n.flags&128)===0}function b1(n){if(Tn){var e=Pi;if(e){var t=e;if(!qb(n,e)){if(M1(n))throw Error(Fe(418));e=Da(t.nextSibling);var r=Li;e&&qb(n,e)?_I(r,t):(n.flags=n.flags&-4097|2,Tn=!1,Li=n)}}else{if(M1(n))throw Error(Fe(418));n.flags=n.flags&-4097|2,Tn=!1,Li=n}}}function eC(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Li=n}function Em(n){if(n!==Li)return!1;if(!Tn)return eC(n),Tn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!E1(n.type,n.memoizedProps)),e&&(e=Pi)){if(M1(n))throw xI(),Error(Fe(418));for(;e;)_I(n,e),e=Da(e.nextSibling)}if(eC(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Fe(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Pi=Da(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Pi=null}}else Pi=Li?Da(n.stateNode.nextSibling):null;return!0}function xI(){for(var n=Pi;n;)n=Da(n.nextSibling)}function Gu(){Pi=Li=null,Tn=!1}function OS(n){Ms===null?Ms=[n]:Ms.push(n)}var Zk=Zo.ReactCurrentBatchConfig;function Ss(n,e){if(n&&n.defaultProps){e=zn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var x0=qa(null),E0=null,_u=null,NS=null;function FS(){NS=_u=E0=null}function kS(n){var e=x0.current;wn(x0),n._currentValue=e}function C1(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Bu(n,e){E0=n,NS=_u=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(gi=!0),n.firstContext=null)}function ls(n){var e=n._currentValue;if(NS!==n)if(n={context:n,memoizedValue:e,next:null},_u===null){if(E0===null)throw Error(Fe(308));_u=n,E0.dependencies={lanes:0,firstContext:n}}else _u=_u.next=n;return e}var Ol=null;function US(n){Ol===null?Ol=[n]:Ol.push(n)}function EI(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,US(e)):(t.next=i.next,i.next=t),e.interleaved=t,Vo(n,r)}function Vo(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Sa=!1;function zS(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function SI(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Fo(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Oa(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Qt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Vo(n,t)}return i=r.interleaved,i===null?(e.next=e,US(r)):(e.next=i.next,i.next=e),r.interleaved=e,Vo(n,t)}function Gg(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,MS(n,t)}}function tC(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function S0(n,e,t,r){var i=n.updateQueue;Sa=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,_=a;switch(p=e,m=t,_.tag){case 1:if(v=_.payload,typeof v=="function"){h=v.call(m,h,p);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=_.payload,p=typeof v=="function"?v.call(m,h,p):v,p==null)break e;h=zn({},h,p);break e;case 2:Sa=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=h):d=d.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);nc|=o,n.lanes=o,n.memoizedState=h}}function nC(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Fe(191,i));i.call(r)}}}var AI=new EP.Component().refs;function T1(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:zn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var ov={isMounted:function(n){return(n=n._reactInternals)?dc(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=ti(),i=Fa(n),s=Fo(r,i);s.payload=e,t!=null&&(s.callback=t),e=Oa(n,s,i),e!==null&&(Rs(e,n,i,r),Gg(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=ti(),i=Fa(n),s=Fo(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Oa(n,s,i),e!==null&&(Rs(e,n,i,r),Gg(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=ti(),r=Fa(n),i=Fo(t,r);i.tag=2,e!=null&&(i.callback=e),e=Oa(n,i,r),e!==null&&(Rs(e,n,r,t),Gg(e,n,r))}};function rC(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ah(t,r)||!ah(i,s):!0}function wI(n,e,t){var r=!1,i=Va,s=e.contextType;return typeof s=="object"&&s!==null?s=ls(s):(i=_i(e)?ql:Hr.current,r=e.contextTypes,s=(r=r!=null)?Hu(n,i):Va),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ov,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function iC(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&ov.enqueueReplaceState(e,e.state,null)}function R1(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=AI,zS(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ls(s):(s=_i(e)?ql:Hr.current,i.context=Hu(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(T1(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ov.enqueueReplaceState(i,i.state,null),S0(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function tf(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Fe(309));var r=t.stateNode}if(!r)throw Error(Fe(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===AI&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Fe(284));if(!t._owner)throw Error(Fe(290,n))}return n}function Sm(n,e){throw n=Object.prototype.toString.call(e),Error(Fe(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function sC(n){var e=n._init;return e(n._payload)}function MI(n){function e(g,S){if(n){var E=g.deletions;E===null?(g.deletions=[S],g.flags|=16):E.push(S)}}function t(g,S){if(!n)return null;for(;S!==null;)e(g,S),S=S.sibling;return null}function r(g,S){for(g=new Map;S!==null;)S.key!==null?g.set(S.key,S):g.set(S.index,S),S=S.sibling;return g}function i(g,S){return g=ka(g,S),g.index=0,g.sibling=null,g}function s(g,S,E){return g.index=E,n?(E=g.alternate,E!==null?(E=E.index,E<S?(g.flags|=2,S):E):(g.flags|=2,S)):(g.flags|=1048576,S)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,S,E,w){return S===null||S.tag!==6?(S=T_(E,g.mode,w),S.return=g,S):(S=i(S,E),S.return=g,S)}function l(g,S,E,w){var T=E.type;return T===du?d(g,S,E.props.children,w,E.key):S!==null&&(S.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Ea&&sC(T)===S.type)?(w=i(S,E.props),w.ref=tf(g,S,E),w.return=g,w):(w=Jg(E.type,E.key,E.props,null,g.mode,w),w.ref=tf(g,S,E),w.return=g,w)}function c(g,S,E,w){return S===null||S.tag!==4||S.stateNode.containerInfo!==E.containerInfo||S.stateNode.implementation!==E.implementation?(S=R_(E,g.mode,w),S.return=g,S):(S=i(S,E.children||[]),S.return=g,S)}function d(g,S,E,w,T){return S===null||S.tag!==7?(S=$l(E,g.mode,w,T),S.return=g,S):(S=i(S,E),S.return=g,S)}function h(g,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return S=T_(""+S,g.mode,E),S.return=g,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case dm:return E=Jg(S.type,S.key,S.props,null,g.mode,E),E.ref=tf(g,null,S),E.return=g,E;case uu:return S=R_(S,g.mode,E),S.return=g,S;case Ea:var w=S._init;return h(g,w(S._payload),E)}if(If(S)||Kd(S))return S=$l(S,g.mode,E,null),S.return=g,S;Sm(g,S)}return null}function p(g,S,E,w){var T=S!==null?S.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return T!==null?null:a(g,S,""+E,w);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case dm:return E.key===T?l(g,S,E,w):null;case uu:return E.key===T?c(g,S,E,w):null;case Ea:return T=E._init,p(g,S,T(E._payload),w)}if(If(E)||Kd(E))return T!==null?null:d(g,S,E,w,null);Sm(g,E)}return null}function m(g,S,E,w,T){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(E)||null,a(S,g,""+w,T);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case dm:return g=g.get(w.key===null?E:w.key)||null,l(S,g,w,T);case uu:return g=g.get(w.key===null?E:w.key)||null,c(S,g,w,T);case Ea:var b=w._init;return m(g,S,E,b(w._payload),T)}if(If(w)||Kd(w))return g=g.get(E)||null,d(S,g,w,T,null);Sm(S,w)}return null}function v(g,S,E,w){for(var T=null,b=null,R=S,B=S=0,P=null;R!==null&&B<E.length;B++){R.index>B?(P=R,R=null):P=R.sibling;var I=p(g,R,E[B],w);if(I===null){R===null&&(R=P);break}n&&R&&I.alternate===null&&e(g,R),S=s(I,S,B),b===null?T=I:b.sibling=I,b=I,R=P}if(B===E.length)return t(g,R),Tn&&Rl(g,B),T;if(R===null){for(;B<E.length;B++)R=h(g,E[B],w),R!==null&&(S=s(R,S,B),b===null?T=R:b.sibling=R,b=R);return Tn&&Rl(g,B),T}for(R=r(g,R);B<E.length;B++)P=m(R,g,B,E[B],w),P!==null&&(n&&P.alternate!==null&&R.delete(P.key===null?B:P.key),S=s(P,S,B),b===null?T=P:b.sibling=P,b=P);return n&&R.forEach(function(F){return e(g,F)}),Tn&&Rl(g,B),T}function _(g,S,E,w){var T=Kd(E);if(typeof T!="function")throw Error(Fe(150));if(E=T.call(E),E==null)throw Error(Fe(151));for(var b=T=null,R=S,B=S=0,P=null,I=E.next();R!==null&&!I.done;B++,I=E.next()){R.index>B?(P=R,R=null):P=R.sibling;var F=p(g,R,I.value,w);if(F===null){R===null&&(R=P);break}n&&R&&F.alternate===null&&e(g,R),S=s(F,S,B),b===null?T=F:b.sibling=F,b=F,R=P}if(I.done)return t(g,R),Tn&&Rl(g,B),T;if(R===null){for(;!I.done;B++,I=E.next())I=h(g,I.value,w),I!==null&&(S=s(I,S,B),b===null?T=I:b.sibling=I,b=I);return Tn&&Rl(g,B),T}for(R=r(g,R);!I.done;B++,I=E.next())I=m(R,g,B,I.value,w),I!==null&&(n&&I.alternate!==null&&R.delete(I.key===null?B:I.key),S=s(I,S,B),b===null?T=I:b.sibling=I,b=I);return n&&R.forEach(function($){return e(g,$)}),Tn&&Rl(g,B),T}function y(g,S,E,w){if(typeof E=="object"&&E!==null&&E.type===du&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case dm:e:{for(var T=E.key,b=S;b!==null;){if(b.key===T){if(T=E.type,T===du){if(b.tag===7){t(g,b.sibling),S=i(b,E.props.children),S.return=g,g=S;break e}}else if(b.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Ea&&sC(T)===b.type){t(g,b.sibling),S=i(b,E.props),S.ref=tf(g,b,E),S.return=g,g=S;break e}t(g,b);break}else e(g,b);b=b.sibling}E.type===du?(S=$l(E.props.children,g.mode,w,E.key),S.return=g,g=S):(w=Jg(E.type,E.key,E.props,null,g.mode,w),w.ref=tf(g,S,E),w.return=g,g=w)}return o(g);case uu:e:{for(b=E.key;S!==null;){if(S.key===b)if(S.tag===4&&S.stateNode.containerInfo===E.containerInfo&&S.stateNode.implementation===E.implementation){t(g,S.sibling),S=i(S,E.children||[]),S.return=g,g=S;break e}else{t(g,S);break}else e(g,S);S=S.sibling}S=R_(E,g.mode,w),S.return=g,g=S}return o(g);case Ea:return b=E._init,y(g,S,b(E._payload),w)}if(If(E))return v(g,S,E,w);if(Kd(E))return _(g,S,E,w);Sm(g,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,S!==null&&S.tag===6?(t(g,S.sibling),S=i(S,E),S.return=g,g=S):(t(g,S),S=T_(E,g.mode,w),S.return=g,g=S),o(g)):t(g,S)}return y}var Vu=MI(!0),bI=MI(!1),Wh={},eo=qa(Wh),dh=qa(Wh),fh=qa(Wh);function Nl(n){if(n===Wh)throw Error(Fe(174));return n}function HS(n,e){switch(xn(fh,e),xn(dh,n),xn(eo,Wh),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:a1(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=a1(e,n)}wn(eo),xn(eo,e)}function Wu(){wn(eo),wn(dh),wn(fh)}function CI(n){Nl(fh.current);var e=Nl(eo.current),t=a1(e,n.type);e!==t&&(xn(dh,n),xn(eo,t))}function GS(n){dh.current===n&&(wn(eo),wn(dh))}var Nn=qa(0);function A0(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var S_=[];function VS(){for(var n=0;n<S_.length;n++)S_[n]._workInProgressVersionPrimary=null;S_.length=0}var Vg=Zo.ReactCurrentDispatcher,A_=Zo.ReactCurrentBatchConfig,tc=0,Un=null,ar=null,vr=null,w0=!1,Hf=!1,hh=0,Qk=0;function Br(){throw Error(Fe(321))}function WS(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Ps(n[t],e[t]))return!1;return!0}function $S(n,e,t,r,i,s){if(tc=s,Un=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vg.current=n===null||n.memoizedState===null?nU:rU,n=t(r,i),Hf){s=0;do{if(Hf=!1,hh=0,25<=s)throw Error(Fe(301));s+=1,vr=ar=null,e.updateQueue=null,Vg.current=iU,n=t(r,i)}while(Hf)}if(Vg.current=M0,e=ar!==null&&ar.next!==null,tc=0,vr=ar=Un=null,w0=!1,e)throw Error(Fe(300));return n}function jS(){var n=hh!==0;return hh=0,n}function Zs(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vr===null?Un.memoizedState=vr=n:vr=vr.next=n,vr}function cs(){if(ar===null){var n=Un.alternate;n=n!==null?n.memoizedState:null}else n=ar.next;var e=vr===null?Un.memoizedState:vr.next;if(e!==null)vr=e,ar=n;else{if(n===null)throw Error(Fe(310));ar=n,n={memoizedState:ar.memoizedState,baseState:ar.baseState,baseQueue:ar.baseQueue,queue:ar.queue,next:null},vr===null?Un.memoizedState=vr=n:vr=vr.next=n}return vr}function ph(n,e){return typeof e=="function"?e(n):e}function w_(n){var e=cs(),t=e.queue;if(t===null)throw Error(Fe(311));t.lastRenderedReducer=n;var r=ar,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((tc&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Un.lanes|=d,nc|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Ps(r,e.memoizedState)||(gi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,Un.lanes|=s,nc|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function M_(n){var e=cs(),t=e.queue;if(t===null)throw Error(Fe(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Ps(s,e.memoizedState)||(gi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function TI(){}function RI(n,e){var t=Un,r=cs(),i=e(),s=!Ps(r.memoizedState,i);if(s&&(r.memoizedState=i,gi=!0),r=r.queue,XS(LI.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||vr!==null&&vr.memoizedState.tag&1){if(t.flags|=2048,mh(9,II.bind(null,t,r,i,e),void 0,null),_r===null)throw Error(Fe(349));tc&30||PI(t,e,i)}return i}function PI(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Un.updateQueue,e===null?(e={lastEffect:null,stores:null},Un.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function II(n,e,t,r){e.value=t,e.getSnapshot=r,BI(e)&&DI(n)}function LI(n,e,t){return t(function(){BI(e)&&DI(n)})}function BI(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Ps(n,t)}catch{return!0}}function DI(n){var e=Vo(n,1);e!==null&&Rs(e,n,1,-1)}function oC(n){var e=Zs();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ph,lastRenderedState:n},e.queue=n,n=n.dispatch=tU.bind(null,Un,n),[e.memoizedState,n]}function mh(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Un.updateQueue,e===null?(e={lastEffect:null,stores:null},Un.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function OI(){return cs().memoizedState}function Wg(n,e,t,r){var i=Zs();Un.flags|=n,i.memoizedState=mh(1|e,t,void 0,r===void 0?null:r)}function av(n,e,t,r){var i=cs();r=r===void 0?null:r;var s=void 0;if(ar!==null){var o=ar.memoizedState;if(s=o.destroy,r!==null&&WS(r,o.deps)){i.memoizedState=mh(e,t,s,r);return}}Un.flags|=n,i.memoizedState=mh(1|e,t,s,r)}function aC(n,e){return Wg(8390656,8,n,e)}function XS(n,e){return av(2048,8,n,e)}function NI(n,e){return av(4,2,n,e)}function FI(n,e){return av(4,4,n,e)}function kI(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function UI(n,e,t){return t=t!=null?t.concat([n]):null,av(4,4,kI.bind(null,e,n),t)}function JS(){}function zI(n,e){var t=cs();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&WS(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function HI(n,e){var t=cs();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&WS(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function GI(n,e,t){return tc&21?(Ps(t,e)||(t=$P(),Un.lanes|=t,nc|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,gi=!0),n.memoizedState=t)}function qk(n,e){var t=dn;dn=t!==0&&4>t?t:4,n(!0);var r=A_.transition;A_.transition={};try{n(!1),e()}finally{dn=t,A_.transition=r}}function VI(){return cs().memoizedState}function eU(n,e,t){var r=Fa(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},WI(n))$I(e,t);else if(t=EI(n,e,t,r),t!==null){var i=ti();Rs(t,n,r,i),jI(t,e,r)}}function tU(n,e,t){var r=Fa(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(WI(n))$I(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Ps(a,o)){var l=e.interleaved;l===null?(i.next=i,US(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=EI(n,e,i,r),t!==null&&(i=ti(),Rs(t,n,r,i),jI(t,e,r))}}function WI(n){var e=n.alternate;return n===Un||e!==null&&e===Un}function $I(n,e){Hf=w0=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function jI(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,MS(n,t)}}var M0={readContext:ls,useCallback:Br,useContext:Br,useEffect:Br,useImperativeHandle:Br,useInsertionEffect:Br,useLayoutEffect:Br,useMemo:Br,useReducer:Br,useRef:Br,useState:Br,useDebugValue:Br,useDeferredValue:Br,useTransition:Br,useMutableSource:Br,useSyncExternalStore:Br,useId:Br,unstable_isNewReconciler:!1},nU={readContext:ls,useCallback:function(n,e){return Zs().memoizedState=[n,e===void 0?null:e],n},useContext:ls,useEffect:aC,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Wg(4194308,4,kI.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Wg(4194308,4,n,e)},useInsertionEffect:function(n,e){return Wg(4,2,n,e)},useMemo:function(n,e){var t=Zs();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Zs();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=eU.bind(null,Un,n),[r.memoizedState,n]},useRef:function(n){var e=Zs();return n={current:n},e.memoizedState=n},useState:oC,useDebugValue:JS,useDeferredValue:function(n){return Zs().memoizedState=n},useTransition:function(){var n=oC(!1),e=n[0];return n=qk.bind(null,n[1]),Zs().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Un,i=Zs();if(Tn){if(t===void 0)throw Error(Fe(407));t=t()}else{if(t=e(),_r===null)throw Error(Fe(349));tc&30||PI(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,aC(LI.bind(null,r,s,n),[n]),r.flags|=2048,mh(9,II.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=Zs(),e=_r.identifierPrefix;if(Tn){var t=Bo,r=Lo;t=(r&~(1<<32-Ts(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=hh++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=Qk++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},rU={readContext:ls,useCallback:zI,useContext:ls,useEffect:XS,useImperativeHandle:UI,useInsertionEffect:NI,useLayoutEffect:FI,useMemo:HI,useReducer:w_,useRef:OI,useState:function(){return w_(ph)},useDebugValue:JS,useDeferredValue:function(n){var e=cs();return GI(e,ar.memoizedState,n)},useTransition:function(){var n=w_(ph)[0],e=cs().memoizedState;return[n,e]},useMutableSource:TI,useSyncExternalStore:RI,useId:VI,unstable_isNewReconciler:!1},iU={readContext:ls,useCallback:zI,useContext:ls,useEffect:XS,useImperativeHandle:UI,useInsertionEffect:NI,useLayoutEffect:FI,useMemo:HI,useReducer:M_,useRef:OI,useState:function(){return M_(ph)},useDebugValue:JS,useDeferredValue:function(n){var e=cs();return ar===null?e.memoizedState=n:GI(e,ar.memoizedState,n)},useTransition:function(){var n=M_(ph)[0],e=cs().memoizedState;return[n,e]},useMutableSource:TI,useSyncExternalStore:RI,useId:VI,unstable_isNewReconciler:!1};function $u(n,e){try{var t="",r=e;do t+=LF(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function b_(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function P1(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var sU=typeof WeakMap=="function"?WeakMap:Map;function XI(n,e,t){t=Fo(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){C0||(C0=!0,z1=r),P1(n,e)},t}function JI(n,e,t){t=Fo(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){P1(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){P1(n,e),typeof r!="function"&&(Na===null?Na=new Set([this]):Na.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function lC(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new sU;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=_U.bind(null,n,e,t),e.then(n,n))}function cC(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function uC(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Fo(-1,1),e.tag=2,Oa(t,e,1))),t.lanes|=1),n)}var oU=Zo.ReactCurrentOwner,gi=!1;function Zr(n,e,t,r){e.child=n===null?bI(e,null,t,r):Vu(e,n.child,t,r)}function dC(n,e,t,r,i){t=t.render;var s=e.ref;return Bu(e,i),r=$S(n,e,t,r,s,i),t=jS(),n!==null&&!gi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Wo(n,e,i)):(Tn&&t&&BS(e),e.flags|=1,Zr(n,e,r,i),e.child)}function fC(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!nA(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,YI(n,e,s,r,i)):(n=Jg(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:ah,t(o,r)&&n.ref===e.ref)return Wo(n,e,i)}return e.flags|=1,n=ka(s,r),n.ref=e.ref,n.return=e,e.child=n}function YI(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(ah(s,r)&&n.ref===e.ref)if(gi=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(gi=!0);else return e.lanes=n.lanes,Wo(n,e,i)}return I1(n,e,t,r,i)}function KI(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xn(Eu,Ci),Ci|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,xn(Eu,Ci),Ci|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,xn(Eu,Ci),Ci|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,xn(Eu,Ci),Ci|=r;return Zr(n,e,i,t),e.child}function ZI(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function I1(n,e,t,r,i){var s=_i(t)?ql:Hr.current;return s=Hu(e,s),Bu(e,i),t=$S(n,e,t,r,s,i),r=jS(),n!==null&&!gi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Wo(n,e,i)):(Tn&&r&&BS(e),e.flags|=1,Zr(n,e,t,i),e.child)}function hC(n,e,t,r,i){if(_i(t)){var s=!0;v0(e)}else s=!1;if(Bu(e,i),e.stateNode===null)$g(n,e),wI(e,t,r),R1(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=ls(c):(c=_i(t)?ql:Hr.current,c=Hu(e,c));var d=t.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&iC(e,o,r,c),Sa=!1;var p=e.memoizedState;o.state=p,S0(e,r,o,i),l=e.memoizedState,a!==r||p!==l||yi.current||Sa?(typeof d=="function"&&(T1(e,t,d,r),l=e.memoizedState),(a=Sa||rC(e,t,a,r,p,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,SI(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ss(e.type,a),o.props=c,h=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=ls(l):(l=_i(t)?ql:Hr.current,l=Hu(e,l));var m=t.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&iC(e,o,r,l),Sa=!1,p=e.memoizedState,o.state=p,S0(e,r,o,i);var v=e.memoizedState;a!==h||p!==v||yi.current||Sa?(typeof m=="function"&&(T1(e,t,m,r),v=e.memoizedState),(c=Sa||rC(e,t,c,r,p,v,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return L1(n,e,t,r,s,i)}function L1(n,e,t,r,i,s){ZI(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Qb(e,t,!1),Wo(n,e,s);r=e.stateNode,oU.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=Vu(e,n.child,null,s),e.child=Vu(e,null,a,s)):Zr(n,e,a,s),e.memoizedState=r.state,i&&Qb(e,t,!0),e.child}function QI(n){var e=n.stateNode;e.pendingContext?Zb(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Zb(n,e.context,!1),HS(n,e.containerInfo)}function pC(n,e,t,r,i){return Gu(),OS(i),e.flags|=256,Zr(n,e,t,r),e.child}var B1={dehydrated:null,treeContext:null,retryLane:0};function D1(n){return{baseLanes:n,cachePool:null,transitions:null}}function qI(n,e,t){var r=e.pendingProps,i=Nn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),xn(Nn,i&1),n===null)return b1(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=uv(o,r,0,null),n=$l(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=D1(t),e.memoizedState=B1,n):YS(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return aU(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ka(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ka(a,s):(s=$l(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?D1(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=B1,r}return s=n.child,n=s.sibling,r=ka(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function YS(n,e){return e=uv({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Am(n,e,t,r){return r!==null&&OS(r),Vu(e,n.child,null,t),n=YS(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function aU(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=b_(Error(Fe(422))),Am(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=uv({mode:"visible",children:r.children},i,0,null),s=$l(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Vu(e,n.child,null,o),e.child.memoizedState=D1(o),e.memoizedState=B1,s);if(!(e.mode&1))return Am(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Fe(419)),r=b_(s,r,void 0),Am(n,e,o,r)}if(a=(o&n.childLanes)!==0,gi||a){if(r=_r,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Vo(n,i),Rs(r,n,i,-1))}return tA(),r=b_(Error(Fe(421))),Am(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=xU.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,Pi=Da(i.nextSibling),Li=e,Tn=!0,Ms=null,n!==null&&(qi[es++]=Lo,qi[es++]=Bo,qi[es++]=ec,Lo=n.id,Bo=n.overflow,ec=e),e=YS(e,r.children),e.flags|=4096,e)}function mC(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),C1(n.return,e,t)}function C_(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function eL(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Zr(n,e,r.children,t),r=Nn.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&mC(n,t,e);else if(n.tag===19)mC(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(xn(Nn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&A0(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),C_(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&A0(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}C_(e,!0,t,null,s);break;case"together":C_(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $g(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Wo(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),nc|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Fe(153));if(e.child!==null){for(n=e.child,t=ka(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=ka(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function lU(n,e,t){switch(e.tag){case 3:QI(e),Gu();break;case 5:CI(e);break;case 1:_i(e.type)&&v0(e);break;case 4:HS(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;xn(x0,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(xn(Nn,Nn.current&1),e.flags|=128,null):t&e.child.childLanes?qI(n,e,t):(xn(Nn,Nn.current&1),n=Wo(n,e,t),n!==null?n.sibling:null);xn(Nn,Nn.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return eL(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),xn(Nn,Nn.current),r)break;return null;case 22:case 23:return e.lanes=0,KI(n,e,t)}return Wo(n,e,t)}var tL,O1,nL,rL;tL=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};O1=function(){};nL=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,Nl(eo.current);var s=null;switch(t){case"input":i=r1(n,i),r=r1(n,r),s=[];break;case"select":i=zn({},i,{value:void 0}),r=zn({},r,{value:void 0}),s=[];break;case"textarea":i=o1(n,i),r=o1(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=m0)}l1(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(eh.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(eh.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&En("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};rL=function(n,e,t,r){t!==r&&(e.flags|=4)};function nf(n,e){if(!Tn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Dr(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function cU(n,e,t){var r=e.pendingProps;switch(DS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dr(e),null;case 1:return _i(e.type)&&g0(),Dr(e),null;case 3:return r=e.stateNode,Wu(),wn(yi),wn(Hr),VS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Em(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ms!==null&&(V1(Ms),Ms=null))),O1(n,e),Dr(e),null;case 5:GS(e);var i=Nl(fh.current);if(t=e.type,n!==null&&e.stateNode!=null)nL(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Fe(166));return Dr(e),null}if(n=Nl(eo.current),Em(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Qs]=e,r[uh]=s,n=(e.mode&1)!==0,t){case"dialog":En("cancel",r),En("close",r);break;case"iframe":case"object":case"embed":En("load",r);break;case"video":case"audio":for(i=0;i<Bf.length;i++)En(Bf[i],r);break;case"source":En("error",r);break;case"img":case"image":case"link":En("error",r),En("load",r);break;case"details":En("toggle",r);break;case"input":wb(r,s),En("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},En("invalid",r);break;case"textarea":bb(r,s),En("invalid",r)}l1(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&xm(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&xm(r.textContent,a,n),i=["children",""+a]):eh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&En("scroll",r)}switch(t){case"input":fm(r),Mb(r,s,!0);break;case"textarea":fm(r),Cb(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=m0)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=PP(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Qs]=e,n[uh]=r,tL(n,e,!1,!1),e.stateNode=n;e:{switch(o=c1(t,r),t){case"dialog":En("cancel",n),En("close",n),i=r;break;case"iframe":case"object":case"embed":En("load",n),i=r;break;case"video":case"audio":for(i=0;i<Bf.length;i++)En(Bf[i],n);i=r;break;case"source":En("error",n),i=r;break;case"img":case"image":case"link":En("error",n),En("load",n),i=r;break;case"details":En("toggle",n),i=r;break;case"input":wb(n,r),i=r1(n,r),En("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=zn({},r,{value:void 0}),En("invalid",n);break;case"textarea":bb(n,r),i=o1(n,r),En("invalid",n);break;default:i=r}l1(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?BP(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&IP(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&th(n,l):typeof l=="number"&&th(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(eh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&En("scroll",n):l!=null&&_S(n,s,l,o))}switch(t){case"input":fm(n),Mb(n,r,!1);break;case"textarea":fm(n),Cb(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Ga(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Ru(n,!!r.multiple,s,!1):r.defaultValue!=null&&Ru(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=m0)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Dr(e),null;case 6:if(n&&e.stateNode!=null)rL(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Fe(166));if(t=Nl(fh.current),Nl(eo.current),Em(e)){if(r=e.stateNode,t=e.memoizedProps,r[Qs]=e,(s=r.nodeValue!==t)&&(n=Li,n!==null))switch(n.tag){case 3:xm(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&xm(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Qs]=e,e.stateNode=r}return Dr(e),null;case 13:if(wn(Nn),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Tn&&Pi!==null&&e.mode&1&&!(e.flags&128))xI(),Gu(),e.flags|=98560,s=!1;else if(s=Em(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(Fe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Fe(317));s[Qs]=e}else Gu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Dr(e),s=!1}else Ms!==null&&(V1(Ms),Ms=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Nn.current&1?ur===0&&(ur=3):tA())),e.updateQueue!==null&&(e.flags|=4),Dr(e),null);case 4:return Wu(),O1(n,e),n===null&&lh(e.stateNode.containerInfo),Dr(e),null;case 10:return kS(e.type._context),Dr(e),null;case 17:return _i(e.type)&&g0(),Dr(e),null;case 19:if(wn(Nn),s=e.memoizedState,s===null)return Dr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)nf(s,!1);else{if(ur!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=A0(n),o!==null){for(e.flags|=128,nf(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return xn(Nn,Nn.current&1|2),e.child}n=n.sibling}s.tail!==null&&Zn()>ju&&(e.flags|=128,r=!0,nf(s,!1),e.lanes=4194304)}else{if(!r)if(n=A0(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),nf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Tn)return Dr(e),null}else 2*Zn()-s.renderingStartTime>ju&&t!==1073741824&&(e.flags|=128,r=!0,nf(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Zn(),e.sibling=null,t=Nn.current,xn(Nn,r?t&1|2:t&1),e):(Dr(e),null);case 22:case 23:return eA(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ci&1073741824&&(Dr(e),e.subtreeFlags&6&&(e.flags|=8192)):Dr(e),null;case 24:return null;case 25:return null}throw Error(Fe(156,e.tag))}function uU(n,e){switch(DS(e),e.tag){case 1:return _i(e.type)&&g0(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Wu(),wn(yi),wn(Hr),VS(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return GS(e),null;case 13:if(wn(Nn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Fe(340));Gu()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return wn(Nn),null;case 4:return Wu(),null;case 10:return kS(e.type._context),null;case 22:case 23:return eA(),null;case 24:return null;default:return null}}var wm=!1,kr=!1,dU=typeof WeakSet=="function"?WeakSet:Set,nt=null;function xu(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){$n(n,e,r)}else t.current=null}function N1(n,e,t){try{t()}catch(r){$n(n,e,r)}}var gC=!1;function fU(n,e){if(_1=f0,n=aI(),LS(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=n,p=null;t:for(;;){for(var m;h!==t||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===n)break t;if(p===t&&++c===i&&(a=o),p===s&&++d===r&&(l=o),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(x1={focusedElem:n,selectionRange:t},f0=!1,nt=e;nt!==null;)if(e=nt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,nt=n;else for(;nt!==null;){e=nt;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var _=v.memoizedProps,y=v.memoizedState,g=e.stateNode,S=g.getSnapshotBeforeUpdate(e.elementType===e.type?_:Ss(e.type,_),y);g.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Fe(163))}}catch(w){$n(e,e.return,w)}if(n=e.sibling,n!==null){n.return=e.return,nt=n;break}nt=e.return}return v=gC,gC=!1,v}function Gf(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&N1(e,t,s)}i=i.next}while(i!==r)}}function lv(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function F1(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function iL(n){var e=n.alternate;e!==null&&(n.alternate=null,iL(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Qs],delete e[uh],delete e[A1],delete e[Jk],delete e[Yk])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function sL(n){return n.tag===5||n.tag===3||n.tag===4}function vC(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||sL(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function k1(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=m0));else if(r!==4&&(n=n.child,n!==null))for(k1(n,e,t),n=n.sibling;n!==null;)k1(n,e,t),n=n.sibling}function U1(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(U1(n,e,t),n=n.sibling;n!==null;)U1(n,e,t),n=n.sibling}var Sr=null,ws=!1;function ca(n,e,t){for(t=t.child;t!==null;)oL(n,e,t),t=t.sibling}function oL(n,e,t){if(qs&&typeof qs.onCommitFiberUnmount=="function")try{qs.onCommitFiberUnmount(ev,t)}catch{}switch(t.tag){case 5:kr||xu(t,e);case 6:var r=Sr,i=ws;Sr=null,ca(n,e,t),Sr=r,ws=i,Sr!==null&&(ws?(n=Sr,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Sr.removeChild(t.stateNode));break;case 18:Sr!==null&&(ws?(n=Sr,t=t.stateNode,n.nodeType===8?x_(n.parentNode,t):n.nodeType===1&&x_(n,t),sh(n)):x_(Sr,t.stateNode));break;case 4:r=Sr,i=ws,Sr=t.stateNode.containerInfo,ws=!0,ca(n,e,t),Sr=r,ws=i;break;case 0:case 11:case 14:case 15:if(!kr&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&N1(t,e,o),i=i.next}while(i!==r)}ca(n,e,t);break;case 1:if(!kr&&(xu(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){$n(t,e,a)}ca(n,e,t);break;case 21:ca(n,e,t);break;case 22:t.mode&1?(kr=(r=kr)||t.memoizedState!==null,ca(n,e,t),kr=r):ca(n,e,t);break;default:ca(n,e,t)}}function yC(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new dU),e.forEach(function(r){var i=EU.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function gs(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Sr=a.stateNode,ws=!1;break e;case 3:Sr=a.stateNode.containerInfo,ws=!0;break e;case 4:Sr=a.stateNode.containerInfo,ws=!0;break e}a=a.return}if(Sr===null)throw Error(Fe(160));oL(s,o,i),Sr=null,ws=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){$n(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)aL(e,n),e=e.sibling}function aL(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(gs(e,n),Xs(n),r&4){try{Gf(3,n,n.return),lv(3,n)}catch(_){$n(n,n.return,_)}try{Gf(5,n,n.return)}catch(_){$n(n,n.return,_)}}break;case 1:gs(e,n),Xs(n),r&512&&t!==null&&xu(t,t.return);break;case 5:if(gs(e,n),Xs(n),r&512&&t!==null&&xu(t,t.return),n.flags&32){var i=n.stateNode;try{th(i,"")}catch(_){$n(n,n.return,_)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&TP(i,s),c1(a,o);var c=c1(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?BP(i,h):d==="dangerouslySetInnerHTML"?IP(i,h):d==="children"?th(i,h):_S(i,d,h,c)}switch(a){case"input":i1(i,s);break;case"textarea":RP(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Ru(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Ru(i,!!s.multiple,s.defaultValue,!0):Ru(i,!!s.multiple,s.multiple?[]:"",!1))}i[uh]=s}catch(_){$n(n,n.return,_)}}break;case 6:if(gs(e,n),Xs(n),r&4){if(n.stateNode===null)throw Error(Fe(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(_){$n(n,n.return,_)}}break;case 3:if(gs(e,n),Xs(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{sh(e.containerInfo)}catch(_){$n(n,n.return,_)}break;case 4:gs(e,n),Xs(n);break;case 13:gs(e,n),Xs(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(QS=Zn())),r&4&&yC(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(kr=(c=kr)||d,gs(e,n),kr=c):gs(e,n),Xs(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!d&&n.mode&1)for(nt=n,d=n.child;d!==null;){for(h=nt=d;nt!==null;){switch(p=nt,m=p.child,p.tag){case 0:case 11:case 14:case 15:Gf(4,p,p.return);break;case 1:xu(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(_){$n(r,t,_)}}break;case 5:xu(p,p.return);break;case 22:if(p.memoizedState!==null){xC(h);continue}}m!==null?(m.return=p,nt=m):xC(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=LP("display",o))}catch(_){$n(n,n.return,_)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(_){$n(n,n.return,_)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gs(e,n),Xs(n),r&4&&yC(n);break;case 21:break;default:gs(e,n),Xs(n)}}function Xs(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(sL(t)){var r=t;break e}t=t.return}throw Error(Fe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(th(i,""),r.flags&=-33);var s=vC(n);U1(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=vC(n);k1(n,a,o);break;default:throw Error(Fe(161))}}catch(l){$n(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function hU(n,e,t){nt=n,lL(n)}function lL(n,e,t){for(var r=(n.mode&1)!==0;nt!==null;){var i=nt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||wm;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||kr;a=wm;var c=kr;if(wm=o,(kr=l)&&!c)for(nt=i;nt!==null;)o=nt,l=o.child,o.tag===22&&o.memoizedState!==null?EC(i):l!==null?(l.return=o,nt=l):EC(i);for(;s!==null;)nt=s,lL(s),s=s.sibling;nt=i,wm=a,kr=c}_C(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,nt=s):_C(n)}}function _C(n){for(;nt!==null;){var e=nt;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:kr||lv(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!kr)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Ss(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&nC(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}nC(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&sh(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Fe(163))}kr||e.flags&512&&F1(e)}catch(p){$n(e,e.return,p)}}if(e===n){nt=null;break}if(t=e.sibling,t!==null){t.return=e.return,nt=t;break}nt=e.return}}function xC(n){for(;nt!==null;){var e=nt;if(e===n){nt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,nt=t;break}nt=e.return}}function EC(n){for(;nt!==null;){var e=nt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{lv(4,e)}catch(l){$n(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){$n(e,i,l)}}var s=e.return;try{F1(e)}catch(l){$n(e,s,l)}break;case 5:var o=e.return;try{F1(e)}catch(l){$n(e,o,l)}}}catch(l){$n(e,e.return,l)}if(e===n){nt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,nt=a;break}nt=e.return}}var pU=Math.ceil,b0=Zo.ReactCurrentDispatcher,KS=Zo.ReactCurrentOwner,os=Zo.ReactCurrentBatchConfig,Qt=0,_r=null,rr=null,Mr=0,Ci=0,Eu=qa(0),ur=0,gh=null,nc=0,cv=0,ZS=0,Vf=null,hi=null,QS=0,ju=1/0,Co=null,C0=!1,z1=null,Na=null,Mm=!1,Ra=null,T0=0,Wf=0,H1=null,jg=-1,Xg=0;function ti(){return Qt&6?Zn():jg!==-1?jg:jg=Zn()}function Fa(n){return n.mode&1?Qt&2&&Mr!==0?Mr&-Mr:Zk.transition!==null?(Xg===0&&(Xg=$P()),Xg):(n=dn,n!==0||(n=window.event,n=n===void 0?16:QP(n.type)),n):1}function Rs(n,e,t,r){if(50<Wf)throw Wf=0,H1=null,Error(Fe(185));Hh(n,t,r),(!(Qt&2)||n!==_r)&&(n===_r&&(!(Qt&2)&&(cv|=t),ur===4&&ba(n,Mr)),xi(n,r),t===1&&Qt===0&&!(e.mode&1)&&(ju=Zn()+500,sv&&el()))}function xi(n,e){var t=n.callbackNode;ZF(n,e);var r=d0(n,n===_r?Mr:0);if(r===0)t!==null&&Pb(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&Pb(t),e===1)n.tag===0?Kk(SC.bind(null,n)):vI(SC.bind(null,n)),jk(function(){!(Qt&6)&&el()}),t=null;else{switch(jP(r)){case 1:t=wS;break;case 4:t=VP;break;case 16:t=u0;break;case 536870912:t=WP;break;default:t=u0}t=gL(t,cL.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function cL(n,e){if(jg=-1,Xg=0,Qt&6)throw Error(Fe(327));var t=n.callbackNode;if(Du()&&n.callbackNode!==t)return null;var r=d0(n,n===_r?Mr:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=R0(n,r);else{e=r;var i=Qt;Qt|=2;var s=dL();(_r!==n||Mr!==e)&&(Co=null,ju=Zn()+500,Wl(n,e));do try{vU();break}catch(a){uL(n,a)}while(!0);FS(),b0.current=s,Qt=i,rr!==null?e=0:(_r=null,Mr=0,e=ur)}if(e!==0){if(e===2&&(i=p1(n),i!==0&&(r=i,e=G1(n,i))),e===1)throw t=gh,Wl(n,0),ba(n,r),xi(n,Zn()),t;if(e===6)ba(n,r);else{if(i=n.current.alternate,!(r&30)&&!mU(i)&&(e=R0(n,r),e===2&&(s=p1(n),s!==0&&(r=s,e=G1(n,s))),e===1))throw t=gh,Wl(n,0),ba(n,r),xi(n,Zn()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(Fe(345));case 2:Pl(n,hi,Co);break;case 3:if(ba(n,r),(r&130023424)===r&&(e=QS+500-Zn(),10<e)){if(d0(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){ti(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=S1(Pl.bind(null,n,hi,Co),e);break}Pl(n,hi,Co);break;case 4:if(ba(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Ts(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Zn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*pU(r/1960))-r,10<r){n.timeoutHandle=S1(Pl.bind(null,n,hi,Co),r);break}Pl(n,hi,Co);break;case 5:Pl(n,hi,Co);break;default:throw Error(Fe(329))}}}return xi(n,Zn()),n.callbackNode===t?cL.bind(null,n):null}function G1(n,e){var t=Vf;return n.current.memoizedState.isDehydrated&&(Wl(n,e).flags|=256),n=R0(n,e),n!==2&&(e=hi,hi=t,e!==null&&V1(e)),n}function V1(n){hi===null?hi=n:hi.push.apply(hi,n)}function mU(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Ps(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ba(n,e){for(e&=~ZS,e&=~cv,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Ts(e),r=1<<t;n[t]=-1,e&=~r}}function SC(n){if(Qt&6)throw Error(Fe(327));Du();var e=d0(n,0);if(!(e&1))return xi(n,Zn()),null;var t=R0(n,e);if(n.tag!==0&&t===2){var r=p1(n);r!==0&&(e=r,t=G1(n,r))}if(t===1)throw t=gh,Wl(n,0),ba(n,e),xi(n,Zn()),t;if(t===6)throw Error(Fe(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Pl(n,hi,Co),xi(n,Zn()),null}function qS(n,e){var t=Qt;Qt|=1;try{return n(e)}finally{Qt=t,Qt===0&&(ju=Zn()+500,sv&&el())}}function rc(n){Ra!==null&&Ra.tag===0&&!(Qt&6)&&Du();var e=Qt;Qt|=1;var t=os.transition,r=dn;try{if(os.transition=null,dn=1,n)return n()}finally{dn=r,os.transition=t,Qt=e,!(Qt&6)&&el()}}function eA(){Ci=Eu.current,wn(Eu)}function Wl(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,$k(t)),rr!==null)for(t=rr.return;t!==null;){var r=t;switch(DS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&g0();break;case 3:Wu(),wn(yi),wn(Hr),VS();break;case 5:GS(r);break;case 4:Wu();break;case 13:wn(Nn);break;case 19:wn(Nn);break;case 10:kS(r.type._context);break;case 22:case 23:eA()}t=t.return}if(_r=n,rr=n=ka(n.current,null),Mr=Ci=e,ur=0,gh=null,ZS=cv=nc=0,hi=Vf=null,Ol!==null){for(e=0;e<Ol.length;e++)if(t=Ol[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}Ol=null}return n}function uL(n,e){do{var t=rr;try{if(FS(),Vg.current=M0,w0){for(var r=Un.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}w0=!1}if(tc=0,vr=ar=Un=null,Hf=!1,hh=0,KS.current=null,t===null||t.return===null){ur=1,gh=e,rr=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Mr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=cC(o);if(m!==null){m.flags&=-257,uC(m,o,a,s,e),m.mode&1&&lC(s,c,e),e=m,l=c;var v=e.updateQueue;if(v===null){var _=new Set;_.add(l),e.updateQueue=_}else v.add(l);break e}else{if(!(e&1)){lC(s,c,e),tA();break e}l=Error(Fe(426))}}else if(Tn&&a.mode&1){var y=cC(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),uC(y,o,a,s,e),OS($u(l,a));break e}}s=l=$u(l,a),ur!==4&&(ur=2),Vf===null?Vf=[s]:Vf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=XI(s,l,e);tC(s,g);break e;case 1:a=l;var S=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Na===null||!Na.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=JI(s,a,e);tC(s,w);break e}}s=s.return}while(s!==null)}hL(t)}catch(T){e=T,rr===t&&t!==null&&(rr=t=t.return);continue}break}while(!0)}function dL(){var n=b0.current;return b0.current=M0,n===null?M0:n}function tA(){(ur===0||ur===3||ur===2)&&(ur=4),_r===null||!(nc&268435455)&&!(cv&268435455)||ba(_r,Mr)}function R0(n,e){var t=Qt;Qt|=2;var r=dL();(_r!==n||Mr!==e)&&(Co=null,Wl(n,e));do try{gU();break}catch(i){uL(n,i)}while(!0);if(FS(),Qt=t,b0.current=r,rr!==null)throw Error(Fe(261));return _r=null,Mr=0,ur}function gU(){for(;rr!==null;)fL(rr)}function vU(){for(;rr!==null&&!GF();)fL(rr)}function fL(n){var e=mL(n.alternate,n,Ci);n.memoizedProps=n.pendingProps,e===null?hL(n):rr=e,KS.current=null}function hL(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=uU(t,e),t!==null){t.flags&=32767,rr=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ur=6,rr=null;return}}else if(t=cU(t,e,Ci),t!==null){rr=t;return}if(e=e.sibling,e!==null){rr=e;return}rr=e=n}while(e!==null);ur===0&&(ur=5)}function Pl(n,e,t){var r=dn,i=os.transition;try{os.transition=null,dn=1,yU(n,e,t,r)}finally{os.transition=i,dn=r}return null}function yU(n,e,t,r){do Du();while(Ra!==null);if(Qt&6)throw Error(Fe(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Fe(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(QF(n,s),n===_r&&(rr=_r=null,Mr=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Mm||(Mm=!0,gL(u0,function(){return Du(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=os.transition,os.transition=null;var o=dn;dn=1;var a=Qt;Qt|=4,KS.current=null,fU(n,t),aL(t,n),kk(x1),f0=!!_1,x1=_1=null,n.current=t,hU(t),VF(),Qt=a,dn=o,os.transition=s}else n.current=t;if(Mm&&(Mm=!1,Ra=n,T0=i),s=n.pendingLanes,s===0&&(Na=null),jF(t.stateNode),xi(n,Zn()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(C0)throw C0=!1,n=z1,z1=null,n;return T0&1&&n.tag!==0&&Du(),s=n.pendingLanes,s&1?n===H1?Wf++:(Wf=0,H1=n):Wf=0,el(),null}function Du(){if(Ra!==null){var n=jP(T0),e=os.transition,t=dn;try{if(os.transition=null,dn=16>n?16:n,Ra===null)var r=!1;else{if(n=Ra,Ra=null,T0=0,Qt&6)throw Error(Fe(331));var i=Qt;for(Qt|=4,nt=n.current;nt!==null;){var s=nt,o=s.child;if(nt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(nt=c;nt!==null;){var d=nt;switch(d.tag){case 0:case 11:case 15:Gf(8,d,s)}var h=d.child;if(h!==null)h.return=d,nt=h;else for(;nt!==null;){d=nt;var p=d.sibling,m=d.return;if(iL(d),d===c){nt=null;break}if(p!==null){p.return=m,nt=p;break}nt=m}}}var v=s.alternate;if(v!==null){var _=v.child;if(_!==null){v.child=null;do{var y=_.sibling;_.sibling=null,_=y}while(_!==null)}}nt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,nt=o;else e:for(;nt!==null;){if(s=nt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Gf(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,nt=g;break e}nt=s.return}}var S=n.current;for(nt=S;nt!==null;){o=nt;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,nt=E;else e:for(o=S;nt!==null;){if(a=nt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:lv(9,a)}}catch(T){$n(a,a.return,T)}if(a===o){nt=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,nt=w;break e}nt=a.return}}if(Qt=i,el(),qs&&typeof qs.onPostCommitFiberRoot=="function")try{qs.onPostCommitFiberRoot(ev,n)}catch{}r=!0}return r}finally{dn=t,os.transition=e}}return!1}function AC(n,e,t){e=$u(t,e),e=XI(n,e,1),n=Oa(n,e,1),e=ti(),n!==null&&(Hh(n,1,e),xi(n,e))}function $n(n,e,t){if(n.tag===3)AC(n,n,t);else for(;e!==null;){if(e.tag===3){AC(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Na===null||!Na.has(r))){n=$u(t,n),n=JI(e,n,1),e=Oa(e,n,1),n=ti(),e!==null&&(Hh(e,1,n),xi(e,n));break}}e=e.return}}function _U(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=ti(),n.pingedLanes|=n.suspendedLanes&t,_r===n&&(Mr&t)===t&&(ur===4||ur===3&&(Mr&130023424)===Mr&&500>Zn()-QS?Wl(n,0):ZS|=t),xi(n,e)}function pL(n,e){e===0&&(n.mode&1?(e=mm,mm<<=1,!(mm&130023424)&&(mm=4194304)):e=1);var t=ti();n=Vo(n,e),n!==null&&(Hh(n,e,t),xi(n,t))}function xU(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),pL(n,t)}function EU(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Fe(314))}r!==null&&r.delete(e),pL(n,t)}var mL;mL=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||yi.current)gi=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return gi=!1,lU(n,e,t);gi=!!(n.flags&131072)}else gi=!1,Tn&&e.flags&1048576&&yI(e,_0,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;$g(n,e),n=e.pendingProps;var i=Hu(e,Hr.current);Bu(e,t),i=$S(null,e,r,n,i,t);var s=jS();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_i(r)?(s=!0,v0(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,zS(e),i.updater=ov,e.stateNode=i,i._reactInternals=e,R1(e,r,n,t),e=L1(null,e,r,!0,s,t)):(e.tag=0,Tn&&s&&BS(e),Zr(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch($g(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=AU(r),n=Ss(r,n),i){case 0:e=I1(null,e,r,n,t);break e;case 1:e=hC(null,e,r,n,t);break e;case 11:e=dC(null,e,r,n,t);break e;case 14:e=fC(null,e,r,Ss(r.type,n),t);break e}throw Error(Fe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ss(r,i),I1(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ss(r,i),hC(n,e,r,i,t);case 3:e:{if(QI(e),n===null)throw Error(Fe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,SI(n,e),S0(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=$u(Error(Fe(423)),e),e=pC(n,e,r,t,i);break e}else if(r!==i){i=$u(Error(Fe(424)),e),e=pC(n,e,r,t,i);break e}else for(Pi=Da(e.stateNode.containerInfo.firstChild),Li=e,Tn=!0,Ms=null,t=bI(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Gu(),r===i){e=Wo(n,e,t);break e}Zr(n,e,r,t)}e=e.child}return e;case 5:return CI(e),n===null&&b1(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,E1(r,i)?o=null:s!==null&&E1(r,s)&&(e.flags|=32),ZI(n,e),Zr(n,e,o,t),e.child;case 6:return n===null&&b1(e),null;case 13:return qI(n,e,t);case 4:return HS(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Vu(e,null,r,t):Zr(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ss(r,i),dC(n,e,r,i,t);case 7:return Zr(n,e,e.pendingProps,t),e.child;case 8:return Zr(n,e,e.pendingProps.children,t),e.child;case 12:return Zr(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,xn(x0,r._currentValue),r._currentValue=o,s!==null)if(Ps(s.value,o)){if(s.children===i.children&&!yi.current){e=Wo(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Fo(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),C1(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Fe(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),C1(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Zr(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Bu(e,t),i=ls(i),r=r(i),e.flags|=1,Zr(n,e,r,t),e.child;case 14:return r=e.type,i=Ss(r,e.pendingProps),i=Ss(r.type,i),fC(n,e,r,i,t);case 15:return YI(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ss(r,i),$g(n,e),e.tag=1,_i(r)?(n=!0,v0(e)):n=!1,Bu(e,t),wI(e,r,i),R1(e,r,i,t),L1(null,e,r,!0,n,t);case 19:return eL(n,e,t);case 22:return KI(n,e,t)}throw Error(Fe(156,e.tag))};function gL(n,e){return GP(n,e)}function SU(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function is(n,e,t,r){return new SU(n,e,t,r)}function nA(n){return n=n.prototype,!(!n||!n.isReactComponent)}function AU(n){if(typeof n=="function")return nA(n)?1:0;if(n!=null){if(n=n.$$typeof,n===ES)return 11;if(n===SS)return 14}return 2}function ka(n,e){var t=n.alternate;return t===null?(t=is(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Jg(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")nA(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case du:return $l(t.children,i,s,e);case xS:o=8,i|=8;break;case qx:return n=is(12,t,e,i|2),n.elementType=qx,n.lanes=s,n;case e1:return n=is(13,t,e,i),n.elementType=e1,n.lanes=s,n;case t1:return n=is(19,t,e,i),n.elementType=t1,n.lanes=s,n;case MP:return uv(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case AP:o=10;break e;case wP:o=9;break e;case ES:o=11;break e;case SS:o=14;break e;case Ea:o=16,r=null;break e}throw Error(Fe(130,n==null?n:typeof n,""))}return e=is(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function $l(n,e,t,r){return n=is(7,n,r,e),n.lanes=t,n}function uv(n,e,t,r){return n=is(22,n,r,e),n.elementType=MP,n.lanes=t,n.stateNode={isHidden:!1},n}function T_(n,e,t){return n=is(6,n,null,e),n.lanes=t,n}function R_(n,e,t){return e=is(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function wU(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=c_(0),this.expirationTimes=c_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=c_(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function rA(n,e,t,r,i,s,o,a,l){return n=new wU(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=is(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},zS(s),n}function MU(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:uu,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function vL(n){if(!n)return Va;n=n._reactInternals;e:{if(dc(n)!==n||n.tag!==1)throw Error(Fe(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_i(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Fe(171))}if(n.tag===1){var t=n.type;if(_i(t))return gI(n,t,e)}return e}function yL(n,e,t,r,i,s,o,a,l){return n=rA(t,r,!0,n,i,s,o,a,l),n.context=vL(null),t=n.current,r=ti(),i=Fa(t),s=Fo(r,i),s.callback=e??null,Oa(t,s,i),n.current.lanes=i,Hh(n,i,r),xi(n,r),n}function dv(n,e,t,r){var i=e.current,s=ti(),o=Fa(i);return t=vL(t),e.context===null?e.context=t:e.pendingContext=t,e=Fo(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Oa(i,e,o),n!==null&&(Rs(n,i,o,s),Gg(n,i,o)),o}function P0(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function wC(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function iA(n,e){wC(n,e),(n=n.alternate)&&wC(n,e)}function bU(){return null}var _L=typeof reportError=="function"?reportError:function(n){console.error(n)};function sA(n){this._internalRoot=n}fv.prototype.render=sA.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Fe(409));dv(n,e,null,null)};fv.prototype.unmount=sA.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;rc(function(){dv(null,n,null,null)}),e[Go]=null}};function fv(n){this._internalRoot=n}fv.prototype.unstable_scheduleHydration=function(n){if(n){var e=YP();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Ma.length&&e!==0&&e<Ma[t].priority;t++);Ma.splice(t,0,n),t===0&&ZP(n)}};function oA(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function hv(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function MC(){}function CU(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=P0(o);s.call(c)}}var o=yL(e,r,n,0,null,!1,!1,"",MC);return n._reactRootContainer=o,n[Go]=o.current,lh(n.nodeType===8?n.parentNode:n),rc(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=P0(l);a.call(c)}}var l=rA(n,0,!1,null,null,!1,!1,"",MC);return n._reactRootContainer=l,n[Go]=l.current,lh(n.nodeType===8?n.parentNode:n),rc(function(){dv(e,l,t,r)}),l}function pv(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=P0(o);a.call(l)}}dv(e,o,n,i)}else o=CU(t,e,n,i,r);return P0(o)}XP=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Lf(e.pendingLanes);t!==0&&(MS(e,t|1),xi(e,Zn()),!(Qt&6)&&(ju=Zn()+500,el()))}break;case 13:rc(function(){var r=Vo(n,1);if(r!==null){var i=ti();Rs(r,n,1,i)}}),iA(n,1)}};bS=function(n){if(n.tag===13){var e=Vo(n,134217728);if(e!==null){var t=ti();Rs(e,n,134217728,t)}iA(n,134217728)}};JP=function(n){if(n.tag===13){var e=Fa(n),t=Vo(n,e);if(t!==null){var r=ti();Rs(t,n,e,r)}iA(n,e)}};YP=function(){return dn};KP=function(n,e){var t=dn;try{return dn=n,e()}finally{dn=t}};d1=function(n,e,t){switch(e){case"input":if(i1(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=iv(r);if(!i)throw Error(Fe(90));CP(r),i1(r,i)}}}break;case"textarea":RP(n,t);break;case"select":e=t.value,e!=null&&Ru(n,!!t.multiple,e,!1)}};NP=qS;FP=rc;var TU={usingClientEntryPoint:!1,Events:[Vh,mu,iv,DP,OP,qS]},rf={findFiberByHostInstance:Dl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},RU={bundleType:rf.bundleType,version:rf.version,rendererPackageName:rf.rendererPackageName,rendererConfig:rf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zo.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=zP(n),n===null?null:n.stateNode},findFiberByHostInstance:rf.findFiberByHostInstance||bU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bm.isDisabled&&bm.supportsFiber)try{ev=bm.inject(RU),qs=bm}catch{}}Fi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TU;Fi.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!oA(e))throw Error(Fe(200));return MU(n,e,null,t)};Fi.createRoot=function(n,e){if(!oA(n))throw Error(Fe(299));var t=!1,r="",i=_L;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=rA(n,1,!1,null,null,t,!1,r,i),n[Go]=e.current,lh(n.nodeType===8?n.parentNode:n),new sA(e)};Fi.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Fe(188)):(n=Object.keys(n).join(","),Error(Fe(268,n)));return n=zP(e),n=n===null?null:n.stateNode,n};Fi.flushSync=function(n){return rc(n)};Fi.hydrate=function(n,e,t){if(!hv(e))throw Error(Fe(200));return pv(null,n,e,!0,t)};Fi.hydrateRoot=function(n,e,t){if(!oA(n))throw Error(Fe(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=_L;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=yL(e,null,n,1,t??null,i,!1,s,o),n[Go]=e.current,lh(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new fv(e)};Fi.render=function(n,e,t){if(!hv(e))throw Error(Fe(200));return pv(null,n,e,!1,t)};Fi.unmountComponentAtNode=function(n){if(!hv(n))throw Error(Fe(40));return n._reactRootContainer?(rc(function(){pv(null,null,n,!1,function(){n._reactRootContainer=null,n[Go]=null})}),!0):!1};Fi.unstable_batchedUpdates=qS;Fi.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!hv(t))throw Error(Fe(200));if(n==null||n._reactInternals===void 0)throw Error(Fe(38));return pv(n,e,t,!1,r)};Fi.version="18.2.0-next-9e3b772b8-20220608";function xL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xL)}catch(n){console.error(n)}}xL(),yP.exports=Fi;var $h=yP.exports;const EL=ld($h);var bC=$h;Zx.createRoot=bC.createRoot,Zx.hydrateRoot=bC.hydrateRoot;function Hn(){return Hn=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Hn.apply(this,arguments)}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const fd="160",PU={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},IU={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},SL=0,W1=1,AL=2,LU=3,wL=0,mv=1,$f=2,As=3,so=0,ni=1,ns=2,BU=2,ko=0,jl=1,$1=2,j1=3,X1=4,ML=5,Ca=100,bL=101,CL=102,J1=103,Y1=104,TL=200,RL=201,PL=202,IL=203,I0=204,L0=205,LL=206,BL=207,DL=208,OL=209,NL=210,FL=211,kL=212,UL=213,zL=214,HL=0,GL=1,VL=2,vh=3,WL=4,$L=5,jL=6,XL=7,jh=0,JL=1,YL=2,to=0,KL=1,ZL=2,QL=3,aA=4,qL=5,e3=6,K1="attached",t3="detached",gv=300,oo=301,Wa=302,Xu=303,yh=304,hd=306,$a=1e3,Ar=1001,Ju=1002,jn=1003,_h=1004,DU=1004,Ou=1005,OU=1005,mn=1006,vv=1007,NU=1007,ao=1008,FU=1008,no=1009,n3=1010,r3=1011,yv=1012,lA=1013,Do=1014,wr=1015,qr=1016,cA=1017,uA=1018,Ua=1020,i3=1021,Ur=1023,s3=1024,o3=1025,za=1026,ic=1027,dA=1028,fA=1029,a3=1030,hA=1031,pA=1033,Yg=33776,Kg=33777,Zg=33778,Qg=33779,Z1=35840,Q1=35841,q1=35842,eE=35843,mA=36196,tE=37492,nE=37496,rE=37808,iE=37809,sE=37810,oE=37811,aE=37812,lE=37813,cE=37814,uE=37815,dE=37816,fE=37817,hE=37818,pE=37819,mE=37820,gE=37821,qg=36492,vE=36494,yE=36495,l3=36283,_E=36284,xE=36285,EE=36286,c3=2200,u3=2201,d3=2202,Yu=2300,sc=2301,e0=2302,Fl=2400,kl=2401,xh=2402,_v=2500,gA=2501,f3=0,vA=1,B0=2,yA=3e3,Ha=3001,h3=3200,p3=3201,tl=0,m3=1,Ri="",lr="srgb",lo="srgb-linear",xv="display-p3",Xh="display-p3-linear",Eh="linear",_n="srgb",Sh="rec709",Ah="p3",kU=0,Il=7680,UU=7681,zU=7682,HU=7683,GU=34055,VU=34056,WU=5386,$U=512,jU=513,XU=514,JU=515,YU=516,KU=517,ZU=518,SE=519,g3=512,v3=513,y3=514,_A=515,_3=516,x3=517,E3=518,S3=519,wh=35044,QU=35048,qU=35040,e4=35045,t4=35049,n4=35041,r4=35046,i4=35050,s4=35042,o4="100",AE="300 es",D0=1035,Cs=2e3,Ku=2001;let Qo=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}};const Or=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let CC=1234567;const Xl=Math.PI/180,Zu=180/Math.PI;function Bi(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Or[n&255]+Or[n>>8&255]+Or[n>>16&255]+Or[n>>24&255]+"-"+Or[e&255]+Or[e>>8&255]+"-"+Or[e>>16&15|64]+Or[e>>24&255]+"-"+Or[t&63|128]+Or[t>>8&255]+"-"+Or[t>>16&255]+Or[t>>24&255]+Or[r&255]+Or[r>>8&255]+Or[r>>16&255]+Or[r>>24&255]).toLowerCase()}function Xn(n,e,t){return Math.max(e,Math.min(t,n))}function xA(n,e){return(n%e+e)%e}function a4(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function l4(n,e,t){return n!==e?(t-n)/(e-n):0}function jf(n,e,t){return(1-t)*n+t*e}function c4(n,e,t,r){return jf(n,e,1-Math.exp(-t*r))}function u4(n,e=1){return e-Math.abs(xA(n,e*2)-e)}function d4(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function f4(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function h4(n,e){return n+Math.floor(Math.random()*(e-n+1))}function p4(n,e){return n+Math.random()*(e-n)}function m4(n){return n*(.5-Math.random())}function g4(n){n!==void 0&&(CC=n);let e=CC+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function v4(n){return n*Xl}function y4(n){return n*Zu}function wE(n){return(n&n-1)===0&&n!==0}function _4(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function O0(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function x4(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+r)/2),d=o((e+r)/2),h=s((e-r)/2),p=o((e-r)/2),m=s((r-e)/2),v=o((r-e)/2);switch(i){case"XYX":n.set(a*d,l*h,l*p,a*c);break;case"YZY":n.set(l*p,a*d,l*h,a*c);break;case"ZXZ":n.set(l*h,l*p,a*d,a*c);break;case"XZX":n.set(a*d,l*v,l*m,a*c);break;case"YXY":n.set(l*m,a*d,l*v,a*c);break;case"ZYZ":n.set(l*v,l*m,a*d,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function mi(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function kt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Mh={DEG2RAD:Xl,RAD2DEG:Zu,generateUUID:Bi,clamp:Xn,euclideanModulo:xA,mapLinear:a4,inverseLerp:l4,lerp:jf,damp:c4,pingpong:u4,smoothstep:d4,smootherstep:f4,randInt:h4,randFloat:p4,randFloatSpread:m4,seededRandom:g4,degToRad:v4,radToDeg:y4,isPowerOfTwo:wE,ceilPowerOfTwo:_4,floorPowerOfTwo:O0,setQuaternionFromProperEuler:x4,normalize:kt,denormalize:mi};class Re{constructor(e=0,t=0){Re.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Xn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class zt{constructor(e,t,r,i,s,o,a,l,c){zt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c)}set(e,t,r,i,s,o,a,l,c){const d=this.elements;return d[0]=e,d[1]=i,d[2]=a,d[3]=t,d[4]=s,d[5]=l,d[6]=r,d[7]=o,d[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],d=r[4],h=r[7],p=r[2],m=r[5],v=r[8],_=i[0],y=i[3],g=i[6],S=i[1],E=i[4],w=i[7],T=i[2],b=i[5],R=i[8];return s[0]=o*_+a*S+l*T,s[3]=o*y+a*E+l*b,s[6]=o*g+a*w+l*R,s[1]=c*_+d*S+h*T,s[4]=c*y+d*E+h*b,s[7]=c*g+d*w+h*R,s[2]=p*_+m*S+v*T,s[5]=p*y+m*E+v*b,s[8]=p*g+m*w+v*R,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8];return t*o*d-t*a*c-r*s*d+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],h=d*o-a*c,p=a*l-d*s,m=c*s-o*l,v=t*h+r*p+i*m;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const _=1/v;return e[0]=h*_,e[1]=(i*c-d*r)*_,e[2]=(a*r-i*o)*_,e[3]=p*_,e[4]=(d*t-i*l)*_,e[5]=(i*s-a*t)*_,e[6]=m*_,e[7]=(r*l-c*t)*_,e[8]=(o*t-r*s)*_,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(P_.makeScale(e,t)),this}rotate(e){return this.premultiply(P_.makeRotation(-e)),this}translate(e,t){return this.premultiply(P_.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const P_=new zt;function A3(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const E4={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Su(n,e){return new E4[n](e)}function bh(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function w3(){const n=bh("canvas");return n.style.display="block",n}const TC={};function Xf(n){n in TC||(TC[n]=!0,console.warn(n))}const RC=new zt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),PC=new zt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Cm={[lo]:{transfer:Eh,primaries:Sh,toReference:n=>n,fromReference:n=>n},[lr]:{transfer:_n,primaries:Sh,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[Xh]:{transfer:Eh,primaries:Ah,toReference:n=>n.applyMatrix3(PC),fromReference:n=>n.applyMatrix3(RC)},[xv]:{transfer:_n,primaries:Ah,toReference:n=>n.convertSRGBToLinear().applyMatrix3(PC),fromReference:n=>n.applyMatrix3(RC).convertLinearToSRGB()}},S4=new Set([lo,Xh]),un={enabled:!0,_workingColorSpace:lo,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!S4.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=Cm[e].toReference,i=Cm[t].fromReference;return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return Cm[n].primaries},getTransfer:function(n){return n===Ri?Eh:Cm[n].transfer}};function Nu(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function I_(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Ic;class EA{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Ic===void 0&&(Ic=bh("canvas")),Ic.width=e.width,Ic.height=e.height;const r=Ic.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Ic}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=bh("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Nu(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Nu(t[r]/255)*255):t[r]=Nu(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let A4=0;class Ul{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:A4++}),this.uuid=Bi(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(L_(i[o].image)):s.push(L_(i[o]))}else s=L_(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function L_(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?EA.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let w4=0;class Mn extends Qo{constructor(e=Mn.DEFAULT_IMAGE,t=Mn.DEFAULT_MAPPING,r=Ar,i=Ar,s=mn,o=ao,a=Ur,l=no,c=Mn.DEFAULT_ANISOTROPY,d=Ri){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:w4++}),this.uuid=Bi(),this.name="",this.source=new Ul(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Re(0,0),this.repeat=new Re(1,1),this.center=new Re(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new zt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof d=="string"?this.colorSpace=d:(Xf("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=d===Ha?lr:Ri),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==gv)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case $a:e.x=e.x-Math.floor(e.x);break;case Ar:e.x=e.x<0?0:1;break;case Ju:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case $a:e.y=e.y-Math.floor(e.y);break;case Ar:e.y=e.y<0?0:1;break;case Ju:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Xf("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===lr?Ha:yA}set encoding(e){Xf("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Ha?lr:Ri}}Mn.DEFAULT_IMAGE=null;Mn.DEFAULT_MAPPING=gv;Mn.DEFAULT_ANISOTROPY=1;class ln{constructor(e=0,t=0,r=0,i=1){ln.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,c=l[0],d=l[4],h=l[8],p=l[1],m=l[5],v=l[9],_=l[2],y=l[6],g=l[10];if(Math.abs(d-p)<.01&&Math.abs(h-_)<.01&&Math.abs(v-y)<.01){if(Math.abs(d+p)<.1&&Math.abs(h+_)<.1&&Math.abs(v+y)<.1&&Math.abs(c+m+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const E=(c+1)/2,w=(m+1)/2,T=(g+1)/2,b=(d+p)/4,R=(h+_)/4,B=(v+y)/4;return E>w&&E>T?E<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(E),i=b/r,s=R/r):w>T?w<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(w),r=b/i,s=B/i):T<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(T),r=R/s,i=B/s),this.set(r,i,s,t),this}let S=Math.sqrt((y-v)*(y-v)+(h-_)*(h-_)+(p-d)*(p-d));return Math.abs(S)<.001&&(S=1),this.x=(y-v)/S,this.y=(h-_)/S,this.z=(p-d)/S,this.w=Math.acos((c+m+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class M3 extends Qo{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new ln(0,0,e,t),this.scissorTest=!1,this.viewport=new ln(0,0,e,t);const i={width:e,height:t,depth:1};r.encoding!==void 0&&(Xf("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===Ha?lr:Ri),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:mn,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new Mn(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Ul(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Is extends M3{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class Ev extends Mn{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=jn,this.minFilter=jn,this.wrapR=Ar,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class M4 extends Is{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new Ev(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class SA extends Mn{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=jn,this.minFilter=jn,this.wrapR=Ar,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class b4 extends Is{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new SA(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class C4 extends Is{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class br{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],c=r[i+1],d=r[i+2],h=r[i+3];const p=s[o+0],m=s[o+1],v=s[o+2],_=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=d,e[t+3]=h;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=v,e[t+3]=_;return}if(h!==_||l!==p||c!==m||d!==v){let y=1-a;const g=l*p+c*m+d*v+h*_,S=g>=0?1:-1,E=1-g*g;if(E>Number.EPSILON){const T=Math.sqrt(E),b=Math.atan2(T,g*S);y=Math.sin(y*b)/T,a=Math.sin(a*b)/T}const w=a*S;if(l=l*y+p*w,c=c*y+m*w,d=d*y+v*w,h=h*y+_*w,y===1-a){const T=1/Math.sqrt(l*l+c*c+d*d+h*h);l*=T,c*=T,d*=T,h*=T}}e[t]=l,e[t+1]=c,e[t+2]=d,e[t+3]=h}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],d=r[i+3],h=s[o],p=s[o+1],m=s[o+2],v=s[o+3];return e[t]=a*v+d*h+l*m-c*p,e[t+1]=l*v+d*p+c*h-a*m,e[t+2]=c*v+d*m+a*p-l*h,e[t+3]=d*v-a*h-l*p-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),d=a(i/2),h=a(s/2),p=l(r/2),m=l(i/2),v=l(s/2);switch(o){case"XYZ":this._x=p*d*h+c*m*v,this._y=c*m*h-p*d*v,this._z=c*d*v+p*m*h,this._w=c*d*h-p*m*v;break;case"YXZ":this._x=p*d*h+c*m*v,this._y=c*m*h-p*d*v,this._z=c*d*v-p*m*h,this._w=c*d*h+p*m*v;break;case"ZXY":this._x=p*d*h-c*m*v,this._y=c*m*h+p*d*v,this._z=c*d*v+p*m*h,this._w=c*d*h-p*m*v;break;case"ZYX":this._x=p*d*h-c*m*v,this._y=c*m*h+p*d*v,this._z=c*d*v-p*m*h,this._w=c*d*h+p*m*v;break;case"YZX":this._x=p*d*h+c*m*v,this._y=c*m*h+p*d*v,this._z=c*d*v-p*m*h,this._w=c*d*h-p*m*v;break;case"XZY":this._x=p*d*h-c*m*v,this._y=c*m*h-p*d*v,this._z=c*d*v+p*m*h,this._w=c*d*h+p*m*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],d=t[6],h=t[10],p=r+a+h;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(d-l)*m,this._y=(s-c)*m,this._z=(o-i)*m}else if(r>a&&r>h){const m=2*Math.sqrt(1+r-a-h);this._w=(d-l)/m,this._x=.25*m,this._y=(i+o)/m,this._z=(s+c)/m}else if(a>h){const m=2*Math.sqrt(1+a-r-h);this._w=(s-c)/m,this._x=(i+o)/m,this._y=.25*m,this._z=(l+d)/m}else{const m=2*Math.sqrt(1+h-r-a);this._w=(o-i)/m,this._x=(s+c)/m,this._y=(l+d)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Xn(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,d=t._w;return this._x=r*d+o*a+i*c-s*l,this._y=i*d+o*l+s*a-r*c,this._z=s*d+o*c+r*l-i*a,this._w=o*d-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*r+t*this._x,this._y=m*i+t*this._y,this._z=m*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),d=Math.atan2(c,a),h=Math.sin((1-t)*d)/c,p=Math.sin(t*d)/c;return this._w=o*h+this._w*p,this._x=r*h+this._x*p,this._y=i*h+this._y*p,this._z=s*h+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(s),r*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class X{constructor(e=0,t=0,r=0){X.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(IC.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(IC.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*i-a*r),d=2*(a*t-s*i),h=2*(s*r-o*t);return this.x=t+l*c+o*h-a*d,this.y=r+l*d+a*c-s*h,this.z=i+l*h+s*d-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return B_.copy(this).projectOnVector(e),this.sub(B_)}reflect(e){return this.sub(B_.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Xn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const B_=new X,IC=new br;class Cr{constructor(e=new X(1/0,1/0,1/0),t=new X(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(vs.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(vs.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=vs.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,vs):vs.fromBufferAttribute(s,o),vs.applyMatrix4(e.matrixWorld),this.expandByPoint(vs);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Tm.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),Tm.copy(r.boundingBox)),Tm.applyMatrix4(e.matrixWorld),this.union(Tm)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,vs),vs.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(sf),Rm.subVectors(this.max,sf),Lc.subVectors(e.a,sf),Bc.subVectors(e.b,sf),Dc.subVectors(e.c,sf),ua.subVectors(Bc,Lc),da.subVectors(Dc,Bc),gl.subVectors(Lc,Dc);let t=[0,-ua.z,ua.y,0,-da.z,da.y,0,-gl.z,gl.y,ua.z,0,-ua.x,da.z,0,-da.x,gl.z,0,-gl.x,-ua.y,ua.x,0,-da.y,da.x,0,-gl.y,gl.x,0];return!D_(t,Lc,Bc,Dc,Rm)||(t=[1,0,0,0,1,0,0,0,1],!D_(t,Lc,Bc,Dc,Rm))?!1:(Pm.crossVectors(ua,da),t=[Pm.x,Pm.y,Pm.z],D_(t,Lc,Bc,Dc,Rm))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,vs).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(vs).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(xo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),xo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),xo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),xo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),xo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),xo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),xo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),xo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(xo),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const xo=[new X,new X,new X,new X,new X,new X,new X,new X],vs=new X,Tm=new Cr,Lc=new X,Bc=new X,Dc=new X,ua=new X,da=new X,gl=new X,sf=new X,Rm=new X,Pm=new X,vl=new X;function D_(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){vl.fromArray(n,s);const a=i.x*Math.abs(vl.x)+i.y*Math.abs(vl.y)+i.z*Math.abs(vl.z),l=e.dot(vl),c=t.dot(vl),d=r.dot(vl);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>a)return!1}return!0}const T4=new Cr,of=new X,O_=new X;class xr{constructor(e=new X,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):T4.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;of.subVectors(e,this.center);const t=of.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(of,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(O_.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(of.copy(e.center).add(O_)),this.expandByPoint(of.copy(e.center).sub(O_))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Eo=new X,N_=new X,Im=new X,fa=new X,F_=new X,Lm=new X,k_=new X;class pd{constructor(e=new X,t=new X(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Eo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Eo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Eo.copy(this.origin).addScaledVector(this.direction,t),Eo.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){N_.copy(e).add(t).multiplyScalar(.5),Im.copy(t).sub(e).normalize(),fa.copy(this.origin).sub(N_);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Im),a=fa.dot(this.direction),l=-fa.dot(Im),c=fa.lengthSq(),d=Math.abs(1-o*o);let h,p,m,v;if(d>0)if(h=o*l-a,p=o*a-l,v=s*d,h>=0)if(p>=-v)if(p<=v){const _=1/d;h*=_,p*=_,m=h*(h+o*p+2*a)+p*(o*h+p+2*l)+c}else p=s,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+c;else p=-s,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+c;else p<=-v?(h=Math.max(0,-(-o*s+a)),p=h>0?-s:Math.min(Math.max(-s,-l),s),m=-h*h+p*(p+2*l)+c):p<=v?(h=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+c):(h=Math.max(0,-(o*s+a)),p=h>0?s:Math.min(Math.max(-s,-l),s),m=-h*h+p*(p+2*l)+c);else p=o>0?-s:s,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,h),i&&i.copy(N_).addScaledVector(Im,p),m}intersectSphere(e,t){Eo.subVectors(e.center,this.origin);const r=Eo.dot(this.direction),i=Eo.dot(Eo)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const c=1/this.direction.x,d=1/this.direction.y,h=1/this.direction.z,p=this.origin;return c>=0?(r=(e.min.x-p.x)*c,i=(e.max.x-p.x)*c):(r=(e.max.x-p.x)*c,i=(e.min.x-p.x)*c),d>=0?(s=(e.min.y-p.y)*d,o=(e.max.y-p.y)*d):(s=(e.max.y-p.y)*d,o=(e.min.y-p.y)*d),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),h>=0?(a=(e.min.z-p.z)*h,l=(e.max.z-p.z)*h):(a=(e.max.z-p.z)*h,l=(e.min.z-p.z)*h),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Eo)!==null}intersectTriangle(e,t,r,i,s){F_.subVectors(t,e),Lm.subVectors(r,e),k_.crossVectors(F_,Lm);let o=this.direction.dot(k_),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;fa.subVectors(this.origin,e);const l=a*this.direction.dot(Lm.crossVectors(fa,Lm));if(l<0)return null;const c=a*this.direction.dot(F_.cross(fa));if(c<0||l+c>o)return null;const d=-a*fa.dot(k_);return d<0?null:this.at(d/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class _t{constructor(e,t,r,i,s,o,a,l,c,d,h,p,m,v,_,y){_t.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c,d,h,p,m,v,_,y)}set(e,t,r,i,s,o,a,l,c,d,h,p,m,v,_,y){const g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=i,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=c,g[6]=d,g[10]=h,g[14]=p,g[3]=m,g[7]=v,g[11]=_,g[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new _t().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Oc.setFromMatrixColumn(e,0).length(),s=1/Oc.setFromMatrixColumn(e,1).length(),o=1/Oc.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),d=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const p=o*d,m=o*h,v=a*d,_=a*h;t[0]=l*d,t[4]=-l*h,t[8]=c,t[1]=m+v*c,t[5]=p-_*c,t[9]=-a*l,t[2]=_-p*c,t[6]=v+m*c,t[10]=o*l}else if(e.order==="YXZ"){const p=l*d,m=l*h,v=c*d,_=c*h;t[0]=p+_*a,t[4]=v*a-m,t[8]=o*c,t[1]=o*h,t[5]=o*d,t[9]=-a,t[2]=m*a-v,t[6]=_+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*d,m=l*h,v=c*d,_=c*h;t[0]=p-_*a,t[4]=-o*h,t[8]=v+m*a,t[1]=m+v*a,t[5]=o*d,t[9]=_-p*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*d,m=o*h,v=a*d,_=a*h;t[0]=l*d,t[4]=v*c-m,t[8]=p*c+_,t[1]=l*h,t[5]=_*c+p,t[9]=m*c-v,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*c,v=a*l,_=a*c;t[0]=l*d,t[4]=_-p*h,t[8]=v*h+m,t[1]=h,t[5]=o*d,t[9]=-a*d,t[2]=-c*d,t[6]=m*h+v,t[10]=p-_*h}else if(e.order==="XZY"){const p=o*l,m=o*c,v=a*l,_=a*c;t[0]=l*d,t[4]=-h,t[8]=c*d,t[1]=p*h+_,t[5]=o*d,t[9]=m*h-v,t[2]=v*h-m,t[6]=a*d,t[10]=_*h+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(R4,e,P4)}lookAt(e,t,r){const i=this.elements;return Mi.subVectors(e,t),Mi.lengthSq()===0&&(Mi.z=1),Mi.normalize(),ha.crossVectors(r,Mi),ha.lengthSq()===0&&(Math.abs(r.z)===1?Mi.x+=1e-4:Mi.z+=1e-4,Mi.normalize(),ha.crossVectors(r,Mi)),ha.normalize(),Bm.crossVectors(Mi,ha),i[0]=ha.x,i[4]=Bm.x,i[8]=Mi.x,i[1]=ha.y,i[5]=Bm.y,i[9]=Mi.y,i[2]=ha.z,i[6]=Bm.z,i[10]=Mi.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],d=r[1],h=r[5],p=r[9],m=r[13],v=r[2],_=r[6],y=r[10],g=r[14],S=r[3],E=r[7],w=r[11],T=r[15],b=i[0],R=i[4],B=i[8],P=i[12],I=i[1],F=i[5],$=i[9],Z=i[13],U=i[2],j=i[6],re=i[10],ae=i[14],H=i[3],Y=i[7],V=i[11],ee=i[15];return s[0]=o*b+a*I+l*U+c*H,s[4]=o*R+a*F+l*j+c*Y,s[8]=o*B+a*$+l*re+c*V,s[12]=o*P+a*Z+l*ae+c*ee,s[1]=d*b+h*I+p*U+m*H,s[5]=d*R+h*F+p*j+m*Y,s[9]=d*B+h*$+p*re+m*V,s[13]=d*P+h*Z+p*ae+m*ee,s[2]=v*b+_*I+y*U+g*H,s[6]=v*R+_*F+y*j+g*Y,s[10]=v*B+_*$+y*re+g*V,s[14]=v*P+_*Z+y*ae+g*ee,s[3]=S*b+E*I+w*U+T*H,s[7]=S*R+E*F+w*j+T*Y,s[11]=S*B+E*$+w*re+T*V,s[15]=S*P+E*Z+w*ae+T*ee,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],d=e[2],h=e[6],p=e[10],m=e[14],v=e[3],_=e[7],y=e[11],g=e[15];return v*(+s*l*h-i*c*h-s*a*p+r*c*p+i*a*m-r*l*m)+_*(+t*l*m-t*c*p+s*o*p-i*o*m+i*c*d-s*l*d)+y*(+t*c*h-t*a*m-s*o*h+r*o*m+s*a*d-r*c*d)+g*(-i*a*d-t*l*h+t*a*p+i*o*h-r*o*p+r*l*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],h=e[9],p=e[10],m=e[11],v=e[12],_=e[13],y=e[14],g=e[15],S=h*y*c-_*p*c+_*l*m-a*y*m-h*l*g+a*p*g,E=v*p*c-d*y*c-v*l*m+o*y*m+d*l*g-o*p*g,w=d*_*c-v*h*c+v*a*m-o*_*m-d*a*g+o*h*g,T=v*h*l-d*_*l-v*a*p+o*_*p+d*a*y-o*h*y,b=t*S+r*E+i*w+s*T;if(b===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/b;return e[0]=S*R,e[1]=(_*p*s-h*y*s-_*i*m+r*y*m+h*i*g-r*p*g)*R,e[2]=(a*y*s-_*l*s+_*i*c-r*y*c-a*i*g+r*l*g)*R,e[3]=(h*l*s-a*p*s-h*i*c+r*p*c+a*i*m-r*l*m)*R,e[4]=E*R,e[5]=(d*y*s-v*p*s+v*i*m-t*y*m-d*i*g+t*p*g)*R,e[6]=(v*l*s-o*y*s-v*i*c+t*y*c+o*i*g-t*l*g)*R,e[7]=(o*p*s-d*l*s+d*i*c-t*p*c-o*i*m+t*l*m)*R,e[8]=w*R,e[9]=(v*h*s-d*_*s-v*r*m+t*_*m+d*r*g-t*h*g)*R,e[10]=(o*_*s-v*a*s+v*r*c-t*_*c-o*r*g+t*a*g)*R,e[11]=(d*a*s-o*h*s-d*r*c+t*h*c+o*r*m-t*a*m)*R,e[12]=T*R,e[13]=(d*_*i-v*h*i+v*r*p-t*_*p-d*r*y+t*h*y)*R,e[14]=(v*a*i-o*_*i-v*r*l+t*_*l+o*r*y-t*a*y)*R,e[15]=(o*h*i-d*a*i+d*r*l-t*h*l-o*r*p+t*a*p)*R,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,d=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,d*a+r,d*l-i*o,0,c*l-i*a,d*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,d=o+o,h=a+a,p=s*c,m=s*d,v=s*h,_=o*d,y=o*h,g=a*h,S=l*c,E=l*d,w=l*h,T=r.x,b=r.y,R=r.z;return i[0]=(1-(_+g))*T,i[1]=(m+w)*T,i[2]=(v-E)*T,i[3]=0,i[4]=(m-w)*b,i[5]=(1-(p+g))*b,i[6]=(y+S)*b,i[7]=0,i[8]=(v+E)*R,i[9]=(y-S)*R,i[10]=(1-(p+_))*R,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=Oc.set(i[0],i[1],i[2]).length();const o=Oc.set(i[4],i[5],i[6]).length(),a=Oc.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],ys.copy(this);const c=1/s,d=1/o,h=1/a;return ys.elements[0]*=c,ys.elements[1]*=c,ys.elements[2]*=c,ys.elements[4]*=d,ys.elements[5]*=d,ys.elements[6]*=d,ys.elements[8]*=h,ys.elements[9]*=h,ys.elements[10]*=h,t.setFromRotationMatrix(ys),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o,a=Cs){const l=this.elements,c=2*s/(t-e),d=2*s/(r-i),h=(t+e)/(t-e),p=(r+i)/(r-i);let m,v;if(a===Cs)m=-(o+s)/(o-s),v=-2*o*s/(o-s);else if(a===Ku)m=-o/(o-s),v=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=d,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,s,o,a=Cs){const l=this.elements,c=1/(t-e),d=1/(r-i),h=1/(o-s),p=(t+e)*c,m=(r+i)*d;let v,_;if(a===Cs)v=(o+s)*h,_=-2*h;else if(a===Ku)v=s*h,_=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*d,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=_,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const Oc=new X,ys=new _t,R4=new X(0,0,0),P4=new X(1,1,1),ha=new X,Bm=new X,Mi=new X,LC=new _t,BC=new br;class Jh{constructor(e=0,t=0,r=0,i=Jh.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],d=i[9],h=i[2],p=i[6],m=i[10];switch(t){case"XYZ":this._y=Math.asin(Xn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-d,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Xn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(Xn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-h,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Xn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Xn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,c),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-Xn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-d,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return LC.makeRotationFromQuaternion(e),this.setFromRotationMatrix(LC,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return BC.setFromEuler(this),this.setFromQuaternion(BC,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Jh.DEFAULT_ORDER="XYZ";class Jl{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let I4=0;const DC=new X,Nc=new br,So=new _t,Dm=new X,af=new X,L4=new X,B4=new br,OC=new X(1,0,0),NC=new X(0,1,0),FC=new X(0,0,1),D4={type:"added"},O4={type:"removed"};class jt extends Qo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:I4++}),this.uuid=Bi(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=jt.DEFAULT_UP.clone();const e=new X,t=new Jh,r=new br,i=new X(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new _t},normalMatrix:{value:new zt}}),this.matrix=new _t,this.matrixWorld=new _t,this.matrixAutoUpdate=jt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=jt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Jl,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Nc.setFromAxisAngle(e,t),this.quaternion.multiply(Nc),this}rotateOnWorldAxis(e,t){return Nc.setFromAxisAngle(e,t),this.quaternion.premultiply(Nc),this}rotateX(e){return this.rotateOnAxis(OC,e)}rotateY(e){return this.rotateOnAxis(NC,e)}rotateZ(e){return this.rotateOnAxis(FC,e)}translateOnAxis(e,t){return DC.copy(e).applyQuaternion(this.quaternion),this.position.add(DC.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(OC,e)}translateY(e){return this.translateOnAxis(NC,e)}translateZ(e){return this.translateOnAxis(FC,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(So.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Dm.copy(e):Dm.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),af.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?So.lookAt(af,Dm,this.up):So.lookAt(Dm,af,this.up),this.quaternion.setFromRotationMatrix(So),i&&(So.extractRotation(i.matrixWorld),Nc.setFromRotationMatrix(So),this.quaternion.premultiply(Nc.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(D4)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(O4)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),So.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),So.multiply(e.parent.matrixWorld)),e.applyMatrix4(So),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(af,e,L4),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(af,B4,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const s=t[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,d=l.length;c<d;c++){const h=l[c];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),d=o(e.images),h=o(e.shapes),p=o(e.skeletons),m=o(e.animations),v=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),d.length>0&&(r.images=d),h.length>0&&(r.shapes=h),p.length>0&&(r.skeletons=p),m.length>0&&(r.animations=m),v.length>0&&(r.nodes=v)}return r.object=i,r;function o(a){const l=[];for(const c in a){const d=a[c];delete d.metadata,l.push(d)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}jt.DEFAULT_UP=new X(0,1,0);jt.DEFAULT_MATRIX_AUTO_UPDATE=!0;jt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const _s=new X,Ao=new X,U_=new X,wo=new X,Fc=new X,kc=new X,kC=new X,z_=new X,H_=new X,G_=new X;let Om=!1;class pi{constructor(e=new X,t=new X,r=new X){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),_s.subVectors(e,t),i.cross(_s);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){_s.subVectors(i,t),Ao.subVectors(r,t),U_.subVectors(e,t);const o=_s.dot(_s),a=_s.dot(Ao),l=_s.dot(U_),c=Ao.dot(Ao),d=Ao.dot(U_),h=o*c-a*a;if(h===0)return s.set(0,0,0),null;const p=1/h,m=(c*l-a*d)*p,v=(o*d-a*l)*p;return s.set(1-m-v,v,m)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,wo)===null?!1:wo.x>=0&&wo.y>=0&&wo.x+wo.y<=1}static getUV(e,t,r,i,s,o,a,l){return Om===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Om=!0),this.getInterpolation(e,t,r,i,s,o,a,l)}static getInterpolation(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,wo)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,wo.x),l.addScaledVector(o,wo.y),l.addScaledVector(a,wo.z),l)}static isFrontFacing(e,t,r,i){return _s.subVectors(r,t),Ao.subVectors(e,t),_s.cross(Ao).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return _s.subVectors(this.c,this.b),Ao.subVectors(this.a,this.b),_s.cross(Ao).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return pi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return pi.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,s){return Om===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Om=!0),pi.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}getInterpolation(e,t,r,i,s){return pi.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return pi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return pi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;Fc.subVectors(i,r),kc.subVectors(s,r),z_.subVectors(e,r);const l=Fc.dot(z_),c=kc.dot(z_);if(l<=0&&c<=0)return t.copy(r);H_.subVectors(e,i);const d=Fc.dot(H_),h=kc.dot(H_);if(d>=0&&h<=d)return t.copy(i);const p=l*h-d*c;if(p<=0&&l>=0&&d<=0)return o=l/(l-d),t.copy(r).addScaledVector(Fc,o);G_.subVectors(e,s);const m=Fc.dot(G_),v=kc.dot(G_);if(v>=0&&m<=v)return t.copy(s);const _=m*c-l*v;if(_<=0&&c>=0&&v<=0)return a=c/(c-v),t.copy(r).addScaledVector(kc,a);const y=d*v-m*h;if(y<=0&&h-d>=0&&m-v>=0)return kC.subVectors(s,i),a=(h-d)/(h-d+(m-v)),t.copy(i).addScaledVector(kC,a);const g=1/(y+_+p);return o=_*g,a=p*g,t.copy(r).addScaledVector(Fc,o).addScaledVector(kc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const b3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},pa={h:0,s:0,l:0},Nm={h:0,s:0,l:0};function V_(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let je=class{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=lr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,un.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=un.workingColorSpace){return this.r=e,this.g=t,this.b=r,un.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=un.workingColorSpace){if(e=xA(e,1),t=Xn(t,0,1),r=Xn(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=V_(o,s,e+1/3),this.g=V_(o,s,e),this.b=V_(o,s,e-1/3)}return un.toWorkingColorSpace(this,i),this}setStyle(e,t=lr){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=lr){const r=b3[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Nu(e.r),this.g=Nu(e.g),this.b=Nu(e.b),this}copyLinearToSRGB(e){return this.r=I_(e.r),this.g=I_(e.g),this.b=I_(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=lr){return un.fromWorkingColorSpace(Nr.copy(this),e),Math.round(Xn(Nr.r*255,0,255))*65536+Math.round(Xn(Nr.g*255,0,255))*256+Math.round(Xn(Nr.b*255,0,255))}getHexString(e=lr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=un.workingColorSpace){un.fromWorkingColorSpace(Nr.copy(this),t);const r=Nr.r,i=Nr.g,s=Nr.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,c;const d=(a+o)/2;if(a===o)l=0,c=0;else{const h=o-a;switch(c=d<=.5?h/(o+a):h/(2-o-a),o){case r:l=(i-s)/h+(i<s?6:0);break;case i:l=(s-r)/h+2;break;case s:l=(r-i)/h+4;break}l/=6}return e.h=l,e.s=c,e.l=d,e}getRGB(e,t=un.workingColorSpace){return un.fromWorkingColorSpace(Nr.copy(this),t),e.r=Nr.r,e.g=Nr.g,e.b=Nr.b,e}getStyle(e=lr){un.fromWorkingColorSpace(Nr.copy(this),e);const t=Nr.r,r=Nr.g,i=Nr.b;return e!==lr?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(pa),this.setHSL(pa.h+e,pa.s+t,pa.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(pa),e.getHSL(Nm);const r=jf(pa.h,Nm.h,t),i=jf(pa.s,Nm.s,t),s=jf(pa.l,Nm.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Nr=new je;je.NAMES=b3;let N4=0;class ir extends Qo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:N4++}),this.uuid=Bi(),this.name="",this.type="Material",this.blending=jl,this.side=so,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=I0,this.blendDst=L0,this.blendEquation=Ca,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new je(0,0,0),this.blendAlpha=0,this.depthFunc=vh,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=SE,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Il,this.stencilZFail=Il,this.stencilZPass=Il,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==jl&&(r.blending=this.blending),this.side!==so&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==I0&&(r.blendSrc=this.blendSrc),this.blendDst!==L0&&(r.blendDst=this.blendDst),this.blendEquation!==Ca&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==vh&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==SE&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Il&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Il&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Il&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Ii extends ir{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new je(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=jh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Po=F4();function F4(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,d=0;for(;!(c&8388608);)c<<=1,d-=8388608;c&=-8388609,d+=947912704,s[l]=c|d}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function di(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Xn(n,-65504,65504),Po.floatView[0]=n;const e=Po.uint32View[0],t=e>>23&511;return Po.baseTable[t]+((e&8388607)>>Po.shiftTable[t])}function Df(n){const e=n>>10;return Po.uint32View[0]=Po.mantissaTable[Po.offsetTable[e]+(n&1023)]+Po.exponentTable[e],Po.floatView[0]}const zl={toHalfFloat:di,fromHalfFloat:Df},nr=new X,Fm=new Re;class Zt{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=wh,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=wr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)Fm.fromBufferAttribute(this,t),Fm.applyMatrix3(e),this.setXY(t,Fm.x,Fm.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)nr.fromBufferAttribute(this,t),nr.applyMatrix3(e),this.setXYZ(t,nr.x,nr.y,nr.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)nr.fromBufferAttribute(this,t),nr.applyMatrix4(e),this.setXYZ(t,nr.x,nr.y,nr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)nr.fromBufferAttribute(this,t),nr.applyNormalMatrix(e),this.setXYZ(t,nr.x,nr.y,nr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)nr.fromBufferAttribute(this,t),nr.transformDirection(e),this.setXYZ(t,nr.x,nr.y,nr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=mi(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=kt(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=mi(t,this.array)),t}setX(e,t){return this.normalized&&(t=kt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=mi(t,this.array)),t}setY(e,t){return this.normalized&&(t=kt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=mi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=kt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=mi(t,this.array)),t}setW(e,t){return this.normalized&&(t=kt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=kt(t,this.array),r=kt(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=kt(t,this.array),r=kt(r,this.array),i=kt(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=kt(t,this.array),r=kt(r,this.array),i=kt(i,this.array),s=kt(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==wh&&(e.usage=this.usage),e}}class k4 extends Zt{constructor(e,t,r){super(new Int8Array(e),t,r)}}class U4 extends Zt{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class z4 extends Zt{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class H4 extends Zt{constructor(e,t,r){super(new Int16Array(e),t,r)}}class AA extends Zt{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class G4 extends Zt{constructor(e,t,r){super(new Int32Array(e),t,r)}}class wA extends Zt{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class V4 extends Zt{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=Df(this.array[e*this.itemSize]);return this.normalized&&(t=mi(t,this.array)),t}setX(e,t){return this.normalized&&(t=kt(t,this.array)),this.array[e*this.itemSize]=di(t),this}getY(e){let t=Df(this.array[e*this.itemSize+1]);return this.normalized&&(t=mi(t,this.array)),t}setY(e,t){return this.normalized&&(t=kt(t,this.array)),this.array[e*this.itemSize+1]=di(t),this}getZ(e){let t=Df(this.array[e*this.itemSize+2]);return this.normalized&&(t=mi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=kt(t,this.array)),this.array[e*this.itemSize+2]=di(t),this}getW(e){let t=Df(this.array[e*this.itemSize+3]);return this.normalized&&(t=mi(t,this.array)),t}setW(e,t){return this.normalized&&(t=kt(t,this.array)),this.array[e*this.itemSize+3]=di(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=kt(t,this.array),r=kt(r,this.array)),this.array[e+0]=di(t),this.array[e+1]=di(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=kt(t,this.array),r=kt(r,this.array),i=kt(i,this.array)),this.array[e+0]=di(t),this.array[e+1]=di(r),this.array[e+2]=di(i),this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=kt(t,this.array),r=kt(r,this.array),i=kt(i,this.array),s=kt(s,this.array)),this.array[e+0]=di(t),this.array[e+1]=di(r),this.array[e+2]=di(i),this.array[e+3]=di(s),this}}class at extends Zt{constructor(e,t,r){super(new Float32Array(e),t,r)}}class W4 extends Zt{constructor(e,t,r){super(new Float64Array(e),t,r)}}let $4=0;const Yi=new _t,W_=new jt,Uc=new X,bi=new Cr,lf=new Cr,gr=new X;class Lt extends Qo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:$4++}),this.uuid=Bi(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(A3(e)?wA:AA)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new zt().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Yi.makeRotationFromQuaternion(e),this.applyMatrix4(Yi),this}rotateX(e){return Yi.makeRotationX(e),this.applyMatrix4(Yi),this}rotateY(e){return Yi.makeRotationY(e),this.applyMatrix4(Yi),this}rotateZ(e){return Yi.makeRotationZ(e),this.applyMatrix4(Yi),this}translate(e,t,r){return Yi.makeTranslation(e,t,r),this.applyMatrix4(Yi),this}scale(e,t,r){return Yi.makeScale(e,t,r),this.applyMatrix4(Yi),this}lookAt(e){return W_.lookAt(e),W_.updateMatrix(),this.applyMatrix4(W_.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Uc).negate(),this.translate(Uc.x,Uc.y,Uc.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new at(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Cr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new X(-1/0,-1/0,-1/0),new X(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];bi.setFromBufferAttribute(s),this.morphTargetsRelative?(gr.addVectors(this.boundingBox.min,bi.min),this.boundingBox.expandByPoint(gr),gr.addVectors(this.boundingBox.max,bi.max),this.boundingBox.expandByPoint(gr)):(this.boundingBox.expandByPoint(bi.min),this.boundingBox.expandByPoint(bi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new xr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new X,1/0);return}if(e){const r=this.boundingSphere.center;if(bi.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];lf.setFromBufferAttribute(a),this.morphTargetsRelative?(gr.addVectors(bi.min,lf.min),bi.expandByPoint(gr),gr.addVectors(bi.max,lf.max),bi.expandByPoint(gr)):(bi.expandByPoint(lf.min),bi.expandByPoint(lf.max))}bi.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)gr.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(gr));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,d=a.count;c<d;c++)gr.fromBufferAttribute(a,c),l&&(Uc.fromBufferAttribute(e,c),gr.add(Uc)),i=Math.max(i,r.distanceToSquared(gr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Zt(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],d=[];for(let I=0;I<a;I++)c[I]=new X,d[I]=new X;const h=new X,p=new X,m=new X,v=new Re,_=new Re,y=new Re,g=new X,S=new X;function E(I,F,$){h.fromArray(i,I*3),p.fromArray(i,F*3),m.fromArray(i,$*3),v.fromArray(o,I*2),_.fromArray(o,F*2),y.fromArray(o,$*2),p.sub(h),m.sub(h),_.sub(v),y.sub(v);const Z=1/(_.x*y.y-y.x*_.y);isFinite(Z)&&(g.copy(p).multiplyScalar(y.y).addScaledVector(m,-_.y).multiplyScalar(Z),S.copy(m).multiplyScalar(_.x).addScaledVector(p,-y.x).multiplyScalar(Z),c[I].add(g),c[F].add(g),c[$].add(g),d[I].add(S),d[F].add(S),d[$].add(S))}let w=this.groups;w.length===0&&(w=[{start:0,count:r.length}]);for(let I=0,F=w.length;I<F;++I){const $=w[I],Z=$.start,U=$.count;for(let j=Z,re=Z+U;j<re;j+=3)E(r[j+0],r[j+1],r[j+2])}const T=new X,b=new X,R=new X,B=new X;function P(I){R.fromArray(s,I*3),B.copy(R);const F=c[I];T.copy(F),T.sub(R.multiplyScalar(R.dot(F))).normalize(),b.crossVectors(B,F);const Z=b.dot(d[I])<0?-1:1;l[I*4]=T.x,l[I*4+1]=T.y,l[I*4+2]=T.z,l[I*4+3]=Z}for(let I=0,F=w.length;I<F;++I){const $=w[I],Z=$.start,U=$.count;for(let j=Z,re=Z+U;j<re;j+=3)P(r[j+0]),P(r[j+1]),P(r[j+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Zt(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let p=0,m=r.count;p<m;p++)r.setXYZ(p,0,0,0);const i=new X,s=new X,o=new X,a=new X,l=new X,c=new X,d=new X,h=new X;if(e)for(let p=0,m=e.count;p<m;p+=3){const v=e.getX(p+0),_=e.getX(p+1),y=e.getX(p+2);i.fromBufferAttribute(t,v),s.fromBufferAttribute(t,_),o.fromBufferAttribute(t,y),d.subVectors(o,s),h.subVectors(i,s),d.cross(h),a.fromBufferAttribute(r,v),l.fromBufferAttribute(r,_),c.fromBufferAttribute(r,y),a.add(d),l.add(d),c.add(d),r.setXYZ(v,a.x,a.y,a.z),r.setXYZ(_,l.x,l.y,l.z),r.setXYZ(y,c.x,c.y,c.z)}else for(let p=0,m=t.count;p<m;p+=3)i.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),d.subVectors(o,s),h.subVectors(i,s),d.cross(h),r.setXYZ(p+0,d.x,d.y,d.z),r.setXYZ(p+1,d.x,d.y,d.z),r.setXYZ(p+2,d.x,d.y,d.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)gr.fromBufferAttribute(e,t),gr.normalize(),e.setXYZ(t,gr.x,gr.y,gr.z)}toNonIndexed(){function e(a,l){const c=a.array,d=a.itemSize,h=a.normalized,p=new c.constructor(l.length*d);let m=0,v=0;for(let _=0,y=l.length;_<y;_++){a.isInterleavedBufferAttribute?m=l[_]*a.data.stride+a.offset:m=l[_]*d;for(let g=0;g<d;g++)p[v++]=c[m++]}return new Zt(p,d,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Lt,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let d=0,h=c.length;d<h;d++){const p=c[d],m=e(p,r);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],d=[];for(let h=0,p=c.length;h<p;h++){const m=c[h];d.push(m.toJSON(e.data))}d.length>0&&(i[l]=d,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const c in i){const d=i[c];this.setAttribute(c,d.clone(t))}const s=e.morphAttributes;for(const c in s){const d=[],h=s[c];for(let p=0,m=h.length;p<m;p++)d.push(h[p].clone(t));this.morphAttributes[c]=d}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,d=o.length;c<d;c++){const h=o[c];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const UC=new _t,yl=new pd,km=new xr,zC=new X,zc=new X,Hc=new X,Gc=new X,$_=new X,Um=new X,zm=new Re,Hm=new Re,Gm=new Re,HC=new X,GC=new X,VC=new X,Vm=new X,Wm=new X;class Qn extends jt{constructor(e=new Lt,t=new Ii){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){Um.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const d=a[l],h=s[l];d!==0&&($_.fromBufferAttribute(h,e),o?Um.addScaledVector($_,d):Um.addScaledVector($_.sub(t),d))}t.add(Um)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),km.copy(r.boundingSphere),km.applyMatrix4(s),yl.copy(e.ray).recast(e.near),!(km.containsPoint(yl.origin)===!1&&(yl.intersectSphere(km,zC)===null||yl.origin.distanceToSquared(zC)>(e.far-e.near)**2))&&(UC.copy(s).invert(),yl.copy(e.ray).applyMatrix4(UC),!(r.boundingBox!==null&&yl.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,yl)))}_computeIntersections(e,t,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,d=s.attributes.uv1,h=s.attributes.normal,p=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let v=0,_=p.length;v<_;v++){const y=p[v],g=o[y.materialIndex],S=Math.max(y.start,m.start),E=Math.min(a.count,Math.min(y.start+y.count,m.start+m.count));for(let w=S,T=E;w<T;w+=3){const b=a.getX(w),R=a.getX(w+1),B=a.getX(w+2);i=$m(this,g,e,r,c,d,h,b,R,B),i&&(i.faceIndex=Math.floor(w/3),i.face.materialIndex=y.materialIndex,t.push(i))}}else{const v=Math.max(0,m.start),_=Math.min(a.count,m.start+m.count);for(let y=v,g=_;y<g;y+=3){const S=a.getX(y),E=a.getX(y+1),w=a.getX(y+2);i=$m(this,o,e,r,c,d,h,S,E,w),i&&(i.faceIndex=Math.floor(y/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let v=0,_=p.length;v<_;v++){const y=p[v],g=o[y.materialIndex],S=Math.max(y.start,m.start),E=Math.min(l.count,Math.min(y.start+y.count,m.start+m.count));for(let w=S,T=E;w<T;w+=3){const b=w,R=w+1,B=w+2;i=$m(this,g,e,r,c,d,h,b,R,B),i&&(i.faceIndex=Math.floor(w/3),i.face.materialIndex=y.materialIndex,t.push(i))}}else{const v=Math.max(0,m.start),_=Math.min(l.count,m.start+m.count);for(let y=v,g=_;y<g;y+=3){const S=y,E=y+1,w=y+2;i=$m(this,o,e,r,c,d,h,S,E,w),i&&(i.faceIndex=Math.floor(y/3),t.push(i))}}}}function j4(n,e,t,r,i,s,o,a){let l;if(e.side===ni?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===so,a),l===null)return null;Wm.copy(a),Wm.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(Wm);return c<t.near||c>t.far?null:{distance:c,point:Wm.clone(),object:n}}function $m(n,e,t,r,i,s,o,a,l,c){n.getVertexPosition(a,zc),n.getVertexPosition(l,Hc),n.getVertexPosition(c,Gc);const d=j4(n,e,t,r,zc,Hc,Gc,Vm);if(d){i&&(zm.fromBufferAttribute(i,a),Hm.fromBufferAttribute(i,l),Gm.fromBufferAttribute(i,c),d.uv=pi.getInterpolation(Vm,zc,Hc,Gc,zm,Hm,Gm,new Re)),s&&(zm.fromBufferAttribute(s,a),Hm.fromBufferAttribute(s,l),Gm.fromBufferAttribute(s,c),d.uv1=pi.getInterpolation(Vm,zc,Hc,Gc,zm,Hm,Gm,new Re),d.uv2=d.uv1),o&&(HC.fromBufferAttribute(o,a),GC.fromBufferAttribute(o,l),VC.fromBufferAttribute(o,c),d.normal=pi.getInterpolation(Vm,zc,Hc,Gc,HC,GC,VC,new X),d.normal.dot(r.direction)>0&&d.normal.multiplyScalar(-1));const h={a,b:l,c,normal:new X,materialIndex:0};pi.getNormal(zc,Hc,Gc,h.normal),d.face=h}return d}class fc extends Lt{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],d=[],h=[];let p=0,m=0;v("z","y","x",-1,-1,r,t,e,o,s,0),v("z","y","x",1,-1,r,t,-e,o,s,1),v("x","z","y",1,1,e,r,t,i,o,2),v("x","z","y",1,-1,e,r,-t,i,o,3),v("x","y","z",1,-1,e,t,r,i,s,4),v("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new at(c,3)),this.setAttribute("normal",new at(d,3)),this.setAttribute("uv",new at(h,2));function v(_,y,g,S,E,w,T,b,R,B,P){const I=w/R,F=T/B,$=w/2,Z=T/2,U=b/2,j=R+1,re=B+1;let ae=0,H=0;const Y=new X;for(let V=0;V<re;V++){const ee=V*F-Z;for(let ie=0;ie<j;ie++){const oe=ie*I-$;Y[_]=oe*S,Y[y]=ee*E,Y[g]=U,c.push(Y.x,Y.y,Y.z),Y[_]=0,Y[y]=0,Y[g]=b>0?1:-1,d.push(Y.x,Y.y,Y.z),h.push(ie/R),h.push(1-V/B),ae+=1}}for(let V=0;V<B;V++)for(let ee=0;ee<R;ee++){const ie=p+ee+j*V,oe=p+ee+j*(V+1),he=p+(ee+1)+j*(V+1),Ce=p+(ee+1)+j*V;l.push(ie,oe,Ce),l.push(oe,he,Ce),H+=6}a.addGroup(m,H,P),m+=H,p+=ae}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Qu(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function Kr(n){const e={};for(let t=0;t<n.length;t++){const r=Qu(n[t]);for(const i in r)e[i]=r[i]}return e}function X4(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function C3(n){return n.getRenderTarget()===null?n.outputColorSpace:un.workingColorSpace}const T3={clone:Qu,merge:Kr};var J4=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Y4=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ls extends ir{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=J4,this.fragmentShader=Y4,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Qu(e.uniforms),this.uniformsGroups=X4(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class Yh extends jt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new _t,this.projectionMatrix=new _t,this.projectionMatrixInverse=new _t,this.coordinateSystem=Cs}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class cr extends Yh{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Zu*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Xl*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Zu*2*Math.atan(Math.tan(Xl*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Xl*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Vc=-90,Wc=1;class R3 extends jt{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new cr(Vc,Wc,e,t);i.layers=this.layers,this.add(i);const s=new cr(Vc,Wc,e,t);s.layers=this.layers,this.add(s);const o=new cr(Vc,Wc,e,t);o.layers=this.layers,this.add(o);const a=new cr(Vc,Wc,e,t);a.layers=this.layers,this.add(a);const l=new cr(Vc,Wc,e,t);l.layers=this.layers,this.add(l);const c=new cr(Vc,Wc,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===Cs)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Ku)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,d]=this.children,h=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const _=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,s),e.setRenderTarget(r,1,i),e.render(t,o),e.setRenderTarget(r,2,i),e.render(t,a),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,c),r.texture.generateMipmaps=_,e.setRenderTarget(r,5,i),e.render(t,d),e.setRenderTarget(h,p,m),e.xr.enabled=v,r.texture.needsPMREMUpdate=!0}}class Kh extends Mn{constructor(e,t,r,i,s,o,a,l,c,d){e=e!==void 0?e:[],t=t!==void 0?t:oo,super(e,t,r,i,s,o,a,l,c,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class MA extends Is{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];t.encoding!==void 0&&(Xf("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Ha?lr:Ri),this.texture=new Kh(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:mn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new fc(5,5,5),s=new Ls({name:"CubemapFromEquirect",uniforms:Qu(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:ni,blending:ko});s.uniforms.tEquirect.value=t;const o=new Qn(i,s),a=t.minFilter;return t.minFilter===ao&&(t.minFilter=mn),new R3(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}const j_=new X,K4=new X,Z4=new zt;class Aa{constructor(e=new X(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=j_.subVectors(r,t).cross(K4.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(j_),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||Z4.getNormalMatrix(e),i=this.coplanarPoint(j_).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const _l=new xr,jm=new X;class Zh{constructor(e=new Aa,t=new Aa,r=new Aa,i=new Aa,s=new Aa,o=new Aa){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=Cs){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],d=i[5],h=i[6],p=i[7],m=i[8],v=i[9],_=i[10],y=i[11],g=i[12],S=i[13],E=i[14],w=i[15];if(r[0].setComponents(l-s,p-c,y-m,w-g).normalize(),r[1].setComponents(l+s,p+c,y+m,w+g).normalize(),r[2].setComponents(l+o,p+d,y+v,w+S).normalize(),r[3].setComponents(l-o,p-d,y-v,w-S).normalize(),r[4].setComponents(l-a,p-h,y-_,w-E).normalize(),t===Cs)r[5].setComponents(l+a,p+h,y+_,w+E).normalize();else if(t===Ku)r[5].setComponents(a,h,_,E).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),_l.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),_l.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(_l)}intersectsSprite(e){return _l.center.set(0,0,0),_l.radius=.7071067811865476,_l.applyMatrix4(e.matrixWorld),this.intersectsSphere(_l)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(jm.x=i.normal.x>0?e.max.x:e.min.x,jm.y=i.normal.y>0?e.max.y:e.min.y,jm.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(jm)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function P3(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function Q4(n,e){const t=e.isWebGL2,r=new WeakMap;function i(c,d){const h=c.array,p=c.usage,m=h.byteLength,v=n.createBuffer();n.bindBuffer(d,v),n.bufferData(d,h,p),c.onUploadCallback();let _;if(h instanceof Float32Array)_=n.FLOAT;else if(h instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)_=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else _=n.UNSIGNED_SHORT;else if(h instanceof Int16Array)_=n.SHORT;else if(h instanceof Uint32Array)_=n.UNSIGNED_INT;else if(h instanceof Int32Array)_=n.INT;else if(h instanceof Int8Array)_=n.BYTE;else if(h instanceof Uint8Array)_=n.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)_=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:v,type:_,bytesPerElement:h.BYTES_PER_ELEMENT,version:c.version,size:m}}function s(c,d,h){const p=d.array,m=d._updateRange,v=d.updateRanges;if(n.bindBuffer(h,c),m.count===-1&&v.length===0&&n.bufferSubData(h,0,p),v.length!==0){for(let _=0,y=v.length;_<y;_++){const g=v[_];t?n.bufferSubData(h,g.start*p.BYTES_PER_ELEMENT,p,g.start,g.count):n.bufferSubData(h,g.start*p.BYTES_PER_ELEMENT,p.subarray(g.start,g.start+g.count))}d.clearUpdateRanges()}m.count!==-1&&(t?n.bufferSubData(h,m.offset*p.BYTES_PER_ELEMENT,p,m.offset,m.count):n.bufferSubData(h,m.offset*p.BYTES_PER_ELEMENT,p.subarray(m.offset,m.offset+m.count)),m.count=-1),d.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const d=r.get(c);d&&(n.deleteBuffer(d.buffer),r.delete(c))}function l(c,d){if(c.isGLBufferAttribute){const p=r.get(c);(!p||p.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const h=r.get(c);if(h===void 0)r.set(c,i(c,d));else if(h.version<c.version){if(h.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");s(h.buffer,c,d),h.version=c.version}}return{get:o,remove:a,update:l}}class Qh extends Lt{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),c=a+1,d=l+1,h=e/a,p=t/l,m=[],v=[],_=[],y=[];for(let g=0;g<d;g++){const S=g*p-o;for(let E=0;E<c;E++){const w=E*h-s;v.push(w,-S,0),_.push(0,0,1),y.push(E/a),y.push(1-g/l)}}for(let g=0;g<l;g++)for(let S=0;S<a;S++){const E=S+c*g,w=S+c*(g+1),T=S+1+c*(g+1),b=S+1+c*g;m.push(E,w,b),m.push(w,T,b)}this.setIndex(m),this.setAttribute("position",new at(v,3)),this.setAttribute("normal",new at(_,3)),this.setAttribute("uv",new at(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qh(e.width,e.height,e.widthSegments,e.heightSegments)}}var q4=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,ez=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,tz=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,nz=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,rz=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,iz=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,sz=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,oz=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,az=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,lz=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,cz=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,uz=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,dz=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,fz=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,hz=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,pz=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,mz=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,gz=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,vz=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,yz=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,_z=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,xz=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Ez=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Sz=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Az=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,wz=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Mz=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,bz=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Cz=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Tz=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Rz="gl_FragColor = linearToOutputTexel( gl_FragColor );",Pz=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,Iz=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Lz=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Bz=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Dz=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Oz=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Nz=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Fz=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,kz=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Uz=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,zz=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Hz=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Gz=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Vz=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Wz=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,$z=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,jz=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Xz=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Jz=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Yz=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Kz=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Zz=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Qz=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,qz=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,e5=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,t5=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,n5=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,r5=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,i5=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,s5=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,o5=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,a5=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,l5=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,c5=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,u5=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,d5=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,f5=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,h5=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,p5=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,m5=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,g5=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,v5=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,y5=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,_5=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,x5=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,E5=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,S5=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,A5=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,w5=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,M5=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,b5=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,C5=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,T5=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,R5=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,P5=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,I5=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,L5=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,B5=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,D5=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,O5=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,N5=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,F5=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,k5=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,U5=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,z5=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,H5=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,G5=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,V5=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,W5=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,$5=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color *= toneMappingExposure;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,j5=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,X5=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,J5=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Y5=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,K5=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Z5=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Q5=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,q5=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,eH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,tH=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,nH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,rH=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,iH=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,sH=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,oH=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,aH=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,lH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,cH=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,uH=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,dH=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,fH=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,hH=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pH=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mH=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gH=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,vH=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yH=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,_H=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,xH=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,EH=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,SH=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,AH=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wH=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,MH=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bH=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,CH=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,TH=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,RH=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,PH=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,IH=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Ft={alphahash_fragment:q4,alphahash_pars_fragment:ez,alphamap_fragment:tz,alphamap_pars_fragment:nz,alphatest_fragment:rz,alphatest_pars_fragment:iz,aomap_fragment:sz,aomap_pars_fragment:oz,batching_pars_vertex:az,batching_vertex:lz,begin_vertex:cz,beginnormal_vertex:uz,bsdfs:dz,iridescence_fragment:fz,bumpmap_pars_fragment:hz,clipping_planes_fragment:pz,clipping_planes_pars_fragment:mz,clipping_planes_pars_vertex:gz,clipping_planes_vertex:vz,color_fragment:yz,color_pars_fragment:_z,color_pars_vertex:xz,color_vertex:Ez,common:Sz,cube_uv_reflection_fragment:Az,defaultnormal_vertex:wz,displacementmap_pars_vertex:Mz,displacementmap_vertex:bz,emissivemap_fragment:Cz,emissivemap_pars_fragment:Tz,colorspace_fragment:Rz,colorspace_pars_fragment:Pz,envmap_fragment:Iz,envmap_common_pars_fragment:Lz,envmap_pars_fragment:Bz,envmap_pars_vertex:Dz,envmap_physical_pars_fragment:jz,envmap_vertex:Oz,fog_vertex:Nz,fog_pars_vertex:Fz,fog_fragment:kz,fog_pars_fragment:Uz,gradientmap_pars_fragment:zz,lightmap_fragment:Hz,lightmap_pars_fragment:Gz,lights_lambert_fragment:Vz,lights_lambert_pars_fragment:Wz,lights_pars_begin:$z,lights_toon_fragment:Xz,lights_toon_pars_fragment:Jz,lights_phong_fragment:Yz,lights_phong_pars_fragment:Kz,lights_physical_fragment:Zz,lights_physical_pars_fragment:Qz,lights_fragment_begin:qz,lights_fragment_maps:e5,lights_fragment_end:t5,logdepthbuf_fragment:n5,logdepthbuf_pars_fragment:r5,logdepthbuf_pars_vertex:i5,logdepthbuf_vertex:s5,map_fragment:o5,map_pars_fragment:a5,map_particle_fragment:l5,map_particle_pars_fragment:c5,metalnessmap_fragment:u5,metalnessmap_pars_fragment:d5,morphcolor_vertex:f5,morphnormal_vertex:h5,morphtarget_pars_vertex:p5,morphtarget_vertex:m5,normal_fragment_begin:g5,normal_fragment_maps:v5,normal_pars_fragment:y5,normal_pars_vertex:_5,normal_vertex:x5,normalmap_pars_fragment:E5,clearcoat_normal_fragment_begin:S5,clearcoat_normal_fragment_maps:A5,clearcoat_pars_fragment:w5,iridescence_pars_fragment:M5,opaque_fragment:b5,packing:C5,premultiplied_alpha_fragment:T5,project_vertex:R5,dithering_fragment:P5,dithering_pars_fragment:I5,roughnessmap_fragment:L5,roughnessmap_pars_fragment:B5,shadowmap_pars_fragment:D5,shadowmap_pars_vertex:O5,shadowmap_vertex:N5,shadowmask_pars_fragment:F5,skinbase_vertex:k5,skinning_pars_vertex:U5,skinning_vertex:z5,skinnormal_vertex:H5,specularmap_fragment:G5,specularmap_pars_fragment:V5,tonemapping_fragment:W5,tonemapping_pars_fragment:$5,transmission_fragment:j5,transmission_pars_fragment:X5,uv_pars_fragment:J5,uv_pars_vertex:Y5,uv_vertex:K5,worldpos_vertex:Z5,background_vert:Q5,background_frag:q5,backgroundCube_vert:eH,backgroundCube_frag:tH,cube_vert:nH,cube_frag:rH,depth_vert:iH,depth_frag:sH,distanceRGBA_vert:oH,distanceRGBA_frag:aH,equirect_vert:lH,equirect_frag:cH,linedashed_vert:uH,linedashed_frag:dH,meshbasic_vert:fH,meshbasic_frag:hH,meshlambert_vert:pH,meshlambert_frag:mH,meshmatcap_vert:gH,meshmatcap_frag:vH,meshnormal_vert:yH,meshnormal_frag:_H,meshphong_vert:xH,meshphong_frag:EH,meshphysical_vert:SH,meshphysical_frag:AH,meshtoon_vert:wH,meshtoon_frag:MH,points_vert:bH,points_frag:CH,shadow_vert:TH,shadow_frag:RH,sprite_vert:PH,sprite_frag:IH},Ge={common:{diffuse:{value:new je(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new zt},alphaMap:{value:null},alphaMapTransform:{value:new zt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new zt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new zt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new zt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new zt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new zt},normalScale:{value:new Re(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new zt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new zt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new zt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new zt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new je(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new je(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new zt},alphaTest:{value:0},uvTransform:{value:new zt}},sprite:{diffuse:{value:new je(16777215)},opacity:{value:1},center:{value:new Re(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new zt},alphaMap:{value:null},alphaMapTransform:{value:new zt},alphaTest:{value:0}}},bs={basic:{uniforms:Kr([Ge.common,Ge.specularmap,Ge.envmap,Ge.aomap,Ge.lightmap,Ge.fog]),vertexShader:Ft.meshbasic_vert,fragmentShader:Ft.meshbasic_frag},lambert:{uniforms:Kr([Ge.common,Ge.specularmap,Ge.envmap,Ge.aomap,Ge.lightmap,Ge.emissivemap,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.fog,Ge.lights,{emissive:{value:new je(0)}}]),vertexShader:Ft.meshlambert_vert,fragmentShader:Ft.meshlambert_frag},phong:{uniforms:Kr([Ge.common,Ge.specularmap,Ge.envmap,Ge.aomap,Ge.lightmap,Ge.emissivemap,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.fog,Ge.lights,{emissive:{value:new je(0)},specular:{value:new je(1118481)},shininess:{value:30}}]),vertexShader:Ft.meshphong_vert,fragmentShader:Ft.meshphong_frag},standard:{uniforms:Kr([Ge.common,Ge.envmap,Ge.aomap,Ge.lightmap,Ge.emissivemap,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.roughnessmap,Ge.metalnessmap,Ge.fog,Ge.lights,{emissive:{value:new je(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ft.meshphysical_vert,fragmentShader:Ft.meshphysical_frag},toon:{uniforms:Kr([Ge.common,Ge.aomap,Ge.lightmap,Ge.emissivemap,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.gradientmap,Ge.fog,Ge.lights,{emissive:{value:new je(0)}}]),vertexShader:Ft.meshtoon_vert,fragmentShader:Ft.meshtoon_frag},matcap:{uniforms:Kr([Ge.common,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.fog,{matcap:{value:null}}]),vertexShader:Ft.meshmatcap_vert,fragmentShader:Ft.meshmatcap_frag},points:{uniforms:Kr([Ge.points,Ge.fog]),vertexShader:Ft.points_vert,fragmentShader:Ft.points_frag},dashed:{uniforms:Kr([Ge.common,Ge.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ft.linedashed_vert,fragmentShader:Ft.linedashed_frag},depth:{uniforms:Kr([Ge.common,Ge.displacementmap]),vertexShader:Ft.depth_vert,fragmentShader:Ft.depth_frag},normal:{uniforms:Kr([Ge.common,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,{opacity:{value:1}}]),vertexShader:Ft.meshnormal_vert,fragmentShader:Ft.meshnormal_frag},sprite:{uniforms:Kr([Ge.sprite,Ge.fog]),vertexShader:Ft.sprite_vert,fragmentShader:Ft.sprite_frag},background:{uniforms:{uvTransform:{value:new zt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ft.background_vert,fragmentShader:Ft.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Ft.backgroundCube_vert,fragmentShader:Ft.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ft.cube_vert,fragmentShader:Ft.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ft.equirect_vert,fragmentShader:Ft.equirect_frag},distanceRGBA:{uniforms:Kr([Ge.common,Ge.displacementmap,{referencePosition:{value:new X},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ft.distanceRGBA_vert,fragmentShader:Ft.distanceRGBA_frag},shadow:{uniforms:Kr([Ge.lights,Ge.fog,{color:{value:new je(0)},opacity:{value:1}}]),vertexShader:Ft.shadow_vert,fragmentShader:Ft.shadow_frag}};bs.physical={uniforms:Kr([bs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new zt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new zt},clearcoatNormalScale:{value:new Re(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new zt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new zt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new zt},sheen:{value:0},sheenColor:{value:new je(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new zt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new zt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new zt},transmissionSamplerSize:{value:new Re},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new zt},attenuationDistance:{value:0},attenuationColor:{value:new je(0)},specularColor:{value:new je(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new zt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new zt},anisotropyVector:{value:new Re},anisotropyMap:{value:null},anisotropyMapTransform:{value:new zt}}]),vertexShader:Ft.meshphysical_vert,fragmentShader:Ft.meshphysical_frag};const Xm={r:0,b:0,g:0};function LH(n,e,t,r,i,s,o){const a=new je(0);let l=s===!0?0:1,c,d,h=null,p=0,m=null;function v(y,g){let S=!1,E=g.isScene===!0?g.background:null;E&&E.isTexture&&(E=(g.backgroundBlurriness>0?t:e).get(E)),E===null?_(a,l):E&&E.isColor&&(_(E,1),S=!0);const w=n.xr.getEnvironmentBlendMode();w==="additive"?r.buffers.color.setClear(0,0,0,1,o):w==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(n.autoClear||S)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),E&&(E.isCubeTexture||E.mapping===hd)?(d===void 0&&(d=new Qn(new fc(1,1,1),new Ls({name:"BackgroundCubeMaterial",uniforms:Qu(bs.backgroundCube.uniforms),vertexShader:bs.backgroundCube.vertexShader,fragmentShader:bs.backgroundCube.fragmentShader,side:ni,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(T,b,R){this.matrixWorld.copyPosition(R.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(d)),d.material.uniforms.envMap.value=E,d.material.uniforms.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,d.material.toneMapped=un.getTransfer(E.colorSpace)!==_n,(h!==E||p!==E.version||m!==n.toneMapping)&&(d.material.needsUpdate=!0,h=E,p=E.version,m=n.toneMapping),d.layers.enableAll(),y.unshift(d,d.geometry,d.material,0,0,null)):E&&E.isTexture&&(c===void 0&&(c=new Qn(new Qh(2,2),new Ls({name:"BackgroundMaterial",uniforms:Qu(bs.background.uniforms),vertexShader:bs.background.vertexShader,fragmentShader:bs.background.fragmentShader,side:so,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=E,c.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,c.material.toneMapped=un.getTransfer(E.colorSpace)!==_n,E.matrixAutoUpdate===!0&&E.updateMatrix(),c.material.uniforms.uvTransform.value.copy(E.matrix),(h!==E||p!==E.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,h=E,p=E.version,m=n.toneMapping),c.layers.enableAll(),y.unshift(c,c.geometry,c.material,0,0,null))}function _(y,g){y.getRGB(Xm,C3(n)),r.buffers.color.setClear(Xm.r,Xm.g,Xm.b,g,o)}return{getClearColor:function(){return a},setClearColor:function(y,g=1){a.set(y),l=g,_(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(y){l=y,_(a,l)},render:v}}function BH(n,e,t,r){const i=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=y(null);let c=l,d=!1;function h(U,j,re,ae,H){let Y=!1;if(o){const V=_(ae,re,j);c!==V&&(c=V,m(c.object)),Y=g(U,ae,re,H),Y&&S(U,ae,re,H)}else{const V=j.wireframe===!0;(c.geometry!==ae.id||c.program!==re.id||c.wireframe!==V)&&(c.geometry=ae.id,c.program=re.id,c.wireframe=V,Y=!0)}H!==null&&t.update(H,n.ELEMENT_ARRAY_BUFFER),(Y||d)&&(d=!1,B(U,j,re,ae),H!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(H).buffer))}function p(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function m(U){return r.isWebGL2?n.bindVertexArray(U):s.bindVertexArrayOES(U)}function v(U){return r.isWebGL2?n.deleteVertexArray(U):s.deleteVertexArrayOES(U)}function _(U,j,re){const ae=re.wireframe===!0;let H=a[U.id];H===void 0&&(H={},a[U.id]=H);let Y=H[j.id];Y===void 0&&(Y={},H[j.id]=Y);let V=Y[ae];return V===void 0&&(V=y(p()),Y[ae]=V),V}function y(U){const j=[],re=[],ae=[];for(let H=0;H<i;H++)j[H]=0,re[H]=0,ae[H]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:j,enabledAttributes:re,attributeDivisors:ae,object:U,attributes:{},index:null}}function g(U,j,re,ae){const H=c.attributes,Y=j.attributes;let V=0;const ee=re.getAttributes();for(const ie in ee)if(ee[ie].location>=0){const he=H[ie];let Ce=Y[ie];if(Ce===void 0&&(ie==="instanceMatrix"&&U.instanceMatrix&&(Ce=U.instanceMatrix),ie==="instanceColor"&&U.instanceColor&&(Ce=U.instanceColor)),he===void 0||he.attribute!==Ce||Ce&&he.data!==Ce.data)return!0;V++}return c.attributesNum!==V||c.index!==ae}function S(U,j,re,ae){const H={},Y=j.attributes;let V=0;const ee=re.getAttributes();for(const ie in ee)if(ee[ie].location>=0){let he=Y[ie];he===void 0&&(ie==="instanceMatrix"&&U.instanceMatrix&&(he=U.instanceMatrix),ie==="instanceColor"&&U.instanceColor&&(he=U.instanceColor));const Ce={};Ce.attribute=he,he&&he.data&&(Ce.data=he.data),H[ie]=Ce,V++}c.attributes=H,c.attributesNum=V,c.index=ae}function E(){const U=c.newAttributes;for(let j=0,re=U.length;j<re;j++)U[j]=0}function w(U){T(U,0)}function T(U,j){const re=c.newAttributes,ae=c.enabledAttributes,H=c.attributeDivisors;re[U]=1,ae[U]===0&&(n.enableVertexAttribArray(U),ae[U]=1),H[U]!==j&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](U,j),H[U]=j)}function b(){const U=c.newAttributes,j=c.enabledAttributes;for(let re=0,ae=j.length;re<ae;re++)j[re]!==U[re]&&(n.disableVertexAttribArray(re),j[re]=0)}function R(U,j,re,ae,H,Y,V){V===!0?n.vertexAttribIPointer(U,j,re,H,Y):n.vertexAttribPointer(U,j,re,ae,H,Y)}function B(U,j,re,ae){if(r.isWebGL2===!1&&(U.isInstancedMesh||ae.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;E();const H=ae.attributes,Y=re.getAttributes(),V=j.defaultAttributeValues;for(const ee in Y){const ie=Y[ee];if(ie.location>=0){let oe=H[ee];if(oe===void 0&&(ee==="instanceMatrix"&&U.instanceMatrix&&(oe=U.instanceMatrix),ee==="instanceColor"&&U.instanceColor&&(oe=U.instanceColor)),oe!==void 0){const he=oe.normalized,Ce=oe.itemSize,be=t.get(oe);if(be===void 0)continue;const Te=be.buffer,Xe=be.type,ct=be.bytesPerElement,et=r.isWebGL2===!0&&(Xe===n.INT||Xe===n.UNSIGNED_INT||oe.gpuType===lA);if(oe.isInterleavedBufferAttribute){const st=oe.data,te=st.stride,Pe=oe.offset;if(st.isInstancedInterleavedBuffer){for(let we=0;we<ie.locationSize;we++)T(ie.location+we,st.meshPerAttribute);U.isInstancedMesh!==!0&&ae._maxInstanceCount===void 0&&(ae._maxInstanceCount=st.meshPerAttribute*st.count)}else for(let we=0;we<ie.locationSize;we++)w(ie.location+we);n.bindBuffer(n.ARRAY_BUFFER,Te);for(let we=0;we<ie.locationSize;we++)R(ie.location+we,Ce/ie.locationSize,Xe,he,te*ct,(Pe+Ce/ie.locationSize*we)*ct,et)}else{if(oe.isInstancedBufferAttribute){for(let st=0;st<ie.locationSize;st++)T(ie.location+st,oe.meshPerAttribute);U.isInstancedMesh!==!0&&ae._maxInstanceCount===void 0&&(ae._maxInstanceCount=oe.meshPerAttribute*oe.count)}else for(let st=0;st<ie.locationSize;st++)w(ie.location+st);n.bindBuffer(n.ARRAY_BUFFER,Te);for(let st=0;st<ie.locationSize;st++)R(ie.location+st,Ce/ie.locationSize,Xe,he,Ce*ct,Ce/ie.locationSize*st*ct,et)}}else if(V!==void 0){const he=V[ee];if(he!==void 0)switch(he.length){case 2:n.vertexAttrib2fv(ie.location,he);break;case 3:n.vertexAttrib3fv(ie.location,he);break;case 4:n.vertexAttrib4fv(ie.location,he);break;default:n.vertexAttrib1fv(ie.location,he)}}}}b()}function P(){$();for(const U in a){const j=a[U];for(const re in j){const ae=j[re];for(const H in ae)v(ae[H].object),delete ae[H];delete j[re]}delete a[U]}}function I(U){if(a[U.id]===void 0)return;const j=a[U.id];for(const re in j){const ae=j[re];for(const H in ae)v(ae[H].object),delete ae[H];delete j[re]}delete a[U.id]}function F(U){for(const j in a){const re=a[j];if(re[U.id]===void 0)continue;const ae=re[U.id];for(const H in ae)v(ae[H].object),delete ae[H];delete re[U.id]}}function $(){Z(),d=!0,c!==l&&(c=l,m(c.object))}function Z(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:$,resetDefaultState:Z,dispose:P,releaseStatesOfGeometry:I,releaseStatesOfProgram:F,initAttributes:E,enableAttribute:w,disableUnusedAttributes:b}}function DH(n,e,t,r){const i=r.isWebGL2;let s;function o(d){s=d}function a(d,h){n.drawArrays(s,d,h),t.update(h,s,1)}function l(d,h,p){if(p===0)return;let m,v;if(i)m=n,v="drawArraysInstanced";else if(m=e.get("ANGLE_instanced_arrays"),v="drawArraysInstancedANGLE",m===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[v](s,d,h,p),t.update(h,s,p)}function c(d,h,p){if(p===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let v=0;v<p;v++)this.render(d[v],h[v]);else{m.multiDrawArraysWEBGL(s,d,0,h,0,p);let v=0;for(let _=0;_<p;_++)v+=h[_];t.update(v,s,1)}}this.setMode=o,this.render=a,this.renderInstances=l,this.renderMultiDraw=c}function OH(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const R=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(R){if(R==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";R="mediump"}return R==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),d=t.logarithmicDepthBuffer===!0,h=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),v=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),_=n.getParameter(n.MAX_VERTEX_ATTRIBS),y=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),g=n.getParameter(n.MAX_VARYING_VECTORS),S=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),E=p>0,w=o||e.has("OES_texture_float"),T=E&&w,b=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:d,maxTextures:h,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:v,maxAttributes:_,maxVertexUniforms:y,maxVaryings:g,maxFragmentUniforms:S,vertexTextures:E,floatFragmentTextures:w,floatVertexTextures:T,maxSamples:b}}function NH(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new Aa,a=new zt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,p){const m=h.length!==0||p||r!==0||i;return i=p,r=h.length,m},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,p){t=d(h,p,0)},this.setState=function(h,p,m){const v=h.clippingPlanes,_=h.clipIntersection,y=h.clipShadows,g=n.get(h);if(!i||v===null||v.length===0||s&&!y)s?d(null):c();else{const S=s?0:r,E=S*4;let w=g.clippingState||null;l.value=w,w=d(v,p,E,m);for(let T=0;T!==E;++T)w[T]=t[T];g.clippingState=w,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=S}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function d(h,p,m,v){const _=h!==null?h.length:0;let y=null;if(_!==0){if(y=l.value,v!==!0||y===null){const g=m+_*4,S=p.matrixWorldInverse;a.getNormalMatrix(S),(y===null||y.length<g)&&(y=new Float32Array(g));for(let E=0,w=m;E!==_;++E,w+=4)o.copy(h[E]).applyMatrix4(S,a),o.normal.toArray(y,w),y[w+3]=o.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=_,e.numIntersection=0,y}}function FH(n){let e=new WeakMap;function t(o,a){return a===Xu?o.mapping=oo:a===yh&&(o.mapping=Wa),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===Xu||a===yh)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new MA(l.height/2);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",i),t(c.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class md extends Yh{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=d*this.view.offsetY,l=a-d*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Au=4,WC=[.125,.215,.35,.446,.526,.582],Bl=20,X_=new md,$C=new je;let J_=null,Y_=0,K_=0;const Ll=(1+Math.sqrt(5))/2,$c=1/Ll,jC=[new X(1,1,1),new X(-1,1,1),new X(1,1,-1),new X(-1,1,-1),new X(0,Ll,$c),new X(0,Ll,-$c),new X($c,0,Ll),new X(-$c,0,Ll),new X(Ll,$c,0),new X(-Ll,$c,0)];class ME{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){J_=this._renderer.getRenderTarget(),Y_=this._renderer.getActiveCubeFace(),K_=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=YC(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=JC(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(J_,Y_,K_),e.scissorTest=!1,Jm(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===oo||e.mapping===Wa?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),J_=this._renderer.getRenderTarget(),Y_=this._renderer.getActiveCubeFace(),K_=this._renderer.getActiveMipmapLevel();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:mn,minFilter:mn,generateMipmaps:!1,type:qr,format:Ur,colorSpace:lo,depthBuffer:!1},i=XC(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=XC(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=kH(s)),this._blurMaterial=UH(s,e,t)}return i}_compileMaterial(e){const t=new Qn(this._lodPlanes[0],e);this._renderer.compile(t,X_)}_sceneToCubeUV(e,t,r,i){const a=new cr(90,1,t,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],d=this._renderer,h=d.autoClear,p=d.toneMapping;d.getClearColor($C),d.toneMapping=to,d.autoClear=!1;const m=new Ii({name:"PMREM.Background",side:ni,depthWrite:!1,depthTest:!1}),v=new Qn(new fc,m);let _=!1;const y=e.background;y?y.isColor&&(m.color.copy(y),e.background=null,_=!0):(m.color.copy($C),_=!0);for(let g=0;g<6;g++){const S=g%3;S===0?(a.up.set(0,l[g],0),a.lookAt(c[g],0,0)):S===1?(a.up.set(0,0,l[g]),a.lookAt(0,c[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,c[g]));const E=this._cubeSize;Jm(i,S*E,g>2?E:0,E,E),d.setRenderTarget(i),_&&d.render(v,a),d.render(e,a)}v.geometry.dispose(),v.material.dispose(),d.toneMapping=p,d.autoClear=h,e.background=y}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===oo||e.mapping===Wa;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=YC()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=JC());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Qn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;Jm(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,X_)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=jC[(i-1)%jC.length];this._blur(e,i-1,i,s,o)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,h=new Qn(this._lodPlanes[i],c),p=c.uniforms,m=this._sizeLods[r]-1,v=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*Bl-1),_=s/v,y=isFinite(s)?1+Math.floor(d*_):Bl;y>Bl&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${Bl}`);const g=[];let S=0;for(let R=0;R<Bl;++R){const B=R/_,P=Math.exp(-B*B/2);g.push(P),R===0?S+=P:R<y&&(S+=2*P)}for(let R=0;R<g.length;R++)g[R]=g[R]/S;p.envMap.value=e.texture,p.samples.value=y,p.weights.value=g,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:E}=this;p.dTheta.value=v,p.mipInt.value=E-r;const w=this._sizeLods[i],T=3*w*(i>E-Au?i-E+Au:0),b=4*(this._cubeSize-w);Jm(t,T,b,3*w,2*w),l.setRenderTarget(t),l.render(h,X_)}}function kH(n){const e=[],t=[],r=[];let i=n;const s=n-Au+1+WC.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-Au?l=WC[o-n+Au-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),d=-c,h=1+c,p=[d,d,h,d,h,h,d,d,h,h,d,h],m=6,v=6,_=3,y=2,g=1,S=new Float32Array(_*v*m),E=new Float32Array(y*v*m),w=new Float32Array(g*v*m);for(let b=0;b<m;b++){const R=b%3*2/3-1,B=b>2?0:-1,P=[R,B,0,R+2/3,B,0,R+2/3,B+1,0,R,B,0,R+2/3,B+1,0,R,B+1,0];S.set(P,_*v*b),E.set(p,y*v*b);const I=[b,b,b,b,b,b];w.set(I,g*v*b)}const T=new Lt;T.setAttribute("position",new Zt(S,_)),T.setAttribute("uv",new Zt(E,y)),T.setAttribute("faceIndex",new Zt(w,g)),e.push(T),i>Au&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function XC(n,e,t){const r=new Is(n,e,t);return r.texture.mapping=hd,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Jm(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function UH(n,e,t){const r=new Float32Array(Bl),i=new X(0,1,0);return new Ls({name:"SphericalGaussianBlur",defines:{n:Bl,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:bA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ko,depthTest:!1,depthWrite:!1})}function JC(){return new Ls({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:bA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ko,depthTest:!1,depthWrite:!1})}function YC(){return new Ls({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:bA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ko,depthTest:!1,depthWrite:!1})}function bA(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function zH(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===Xu||l===yh,d=l===oo||l===Wa;if(c||d)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let h=e.get(a);return t===null&&(t=new ME(n)),h=c?t.fromEquirectangular(a,h):t.fromCubemap(a,h),e.set(a,h),h.texture}else{if(e.has(a))return e.get(a).texture;{const h=a.image;if(c&&h&&h.height>0||d&&h&&i(h)){t===null&&(t=new ME(n));const p=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}else return null}}}return a}function i(a){let l=0;const c=6;for(let d=0;d<c;d++)a[d]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function HH(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function GH(n,e,t,r){const i={},s=new WeakMap;function o(h){const p=h.target;p.index!==null&&e.remove(p.index);for(const v in p.attributes)e.remove(p.attributes[v]);for(const v in p.morphAttributes){const _=p.morphAttributes[v];for(let y=0,g=_.length;y<g;y++)e.remove(_[y])}p.removeEventListener("dispose",o),delete i[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),r.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(h,p){return i[p.id]===!0||(p.addEventListener("dispose",o),i[p.id]=!0,t.memory.geometries++),p}function l(h){const p=h.attributes;for(const v in p)e.update(p[v],n.ARRAY_BUFFER);const m=h.morphAttributes;for(const v in m){const _=m[v];for(let y=0,g=_.length;y<g;y++)e.update(_[y],n.ARRAY_BUFFER)}}function c(h){const p=[],m=h.index,v=h.attributes.position;let _=0;if(m!==null){const S=m.array;_=m.version;for(let E=0,w=S.length;E<w;E+=3){const T=S[E+0],b=S[E+1],R=S[E+2];p.push(T,b,b,R,R,T)}}else if(v!==void 0){const S=v.array;_=v.version;for(let E=0,w=S.length/3-1;E<w;E+=3){const T=E+0,b=E+1,R=E+2;p.push(T,b,b,R,R,T)}}else return;const y=new(A3(p)?wA:AA)(p,1);y.version=_;const g=s.get(h);g&&e.remove(g),s.set(h,y)}function d(h){const p=s.get(h);if(p){const m=h.index;m!==null&&p.version<m.version&&c(h)}else c(h);return s.get(h)}return{get:a,update:l,getWireframeAttribute:d}}function VH(n,e,t,r){const i=r.isWebGL2;let s;function o(m){s=m}let a,l;function c(m){a=m.type,l=m.bytesPerElement}function d(m,v){n.drawElements(s,v,a,m*l),t.update(v,s,1)}function h(m,v,_){if(_===0)return;let y,g;if(i)y=n,g="drawElementsInstanced";else if(y=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",y===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[g](s,v,a,m*l,_),t.update(v,s,_)}function p(m,v,_){if(_===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let g=0;g<_;g++)this.render(m[g]/l,v[g]);else{y.multiDrawElementsWEBGL(s,v,0,a,m,0,_);let g=0;for(let S=0;S<_;S++)g+=v[S];t.update(g,s,1)}}this.setMode=o,this.setIndex=c,this.render=d,this.renderInstances=h,this.renderMultiDraw=p}function WH(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function $H(n,e){return n[0]-e[0]}function jH(n,e){return Math.abs(e[1])-Math.abs(n[1])}function XH(n,e,t){const r={},i=new Float32Array(8),s=new WeakMap,o=new ln,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,d,h){const p=c.morphTargetInfluences;if(e.isWebGL2===!0){const v=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,_=v!==void 0?v.length:0;let y=s.get(d);if(y===void 0||y.count!==_){let j=function(){Z.dispose(),s.delete(d),d.removeEventListener("dispose",j)};var m=j;y!==void 0&&y.texture.dispose();const E=d.morphAttributes.position!==void 0,w=d.morphAttributes.normal!==void 0,T=d.morphAttributes.color!==void 0,b=d.morphAttributes.position||[],R=d.morphAttributes.normal||[],B=d.morphAttributes.color||[];let P=0;E===!0&&(P=1),w===!0&&(P=2),T===!0&&(P=3);let I=d.attributes.position.count*P,F=1;I>e.maxTextureSize&&(F=Math.ceil(I/e.maxTextureSize),I=e.maxTextureSize);const $=new Float32Array(I*F*4*_),Z=new Ev($,I,F,_);Z.type=wr,Z.needsUpdate=!0;const U=P*4;for(let re=0;re<_;re++){const ae=b[re],H=R[re],Y=B[re],V=I*F*4*re;for(let ee=0;ee<ae.count;ee++){const ie=ee*U;E===!0&&(o.fromBufferAttribute(ae,ee),$[V+ie+0]=o.x,$[V+ie+1]=o.y,$[V+ie+2]=o.z,$[V+ie+3]=0),w===!0&&(o.fromBufferAttribute(H,ee),$[V+ie+4]=o.x,$[V+ie+5]=o.y,$[V+ie+6]=o.z,$[V+ie+7]=0),T===!0&&(o.fromBufferAttribute(Y,ee),$[V+ie+8]=o.x,$[V+ie+9]=o.y,$[V+ie+10]=o.z,$[V+ie+11]=Y.itemSize===4?o.w:1)}}y={count:_,texture:Z,size:new Re(I,F)},s.set(d,y),d.addEventListener("dispose",j)}let g=0;for(let E=0;E<p.length;E++)g+=p[E];const S=d.morphTargetsRelative?1:1-g;h.getUniforms().setValue(n,"morphTargetBaseInfluence",S),h.getUniforms().setValue(n,"morphTargetInfluences",p),h.getUniforms().setValue(n,"morphTargetsTexture",y.texture,t),h.getUniforms().setValue(n,"morphTargetsTextureSize",y.size)}else{const v=p===void 0?0:p.length;let _=r[d.id];if(_===void 0||_.length!==v){_=[];for(let w=0;w<v;w++)_[w]=[w,0];r[d.id]=_}for(let w=0;w<v;w++){const T=_[w];T[0]=w,T[1]=p[w]}_.sort(jH);for(let w=0;w<8;w++)w<v&&_[w][1]?(a[w][0]=_[w][0],a[w][1]=_[w][1]):(a[w][0]=Number.MAX_SAFE_INTEGER,a[w][1]=0);a.sort($H);const y=d.morphAttributes.position,g=d.morphAttributes.normal;let S=0;for(let w=0;w<8;w++){const T=a[w],b=T[0],R=T[1];b!==Number.MAX_SAFE_INTEGER&&R?(y&&d.getAttribute("morphTarget"+w)!==y[b]&&d.setAttribute("morphTarget"+w,y[b]),g&&d.getAttribute("morphNormal"+w)!==g[b]&&d.setAttribute("morphNormal"+w,g[b]),i[w]=R,S+=R):(y&&d.hasAttribute("morphTarget"+w)===!0&&d.deleteAttribute("morphTarget"+w),g&&d.hasAttribute("morphNormal"+w)===!0&&d.deleteAttribute("morphNormal"+w),i[w]=0)}const E=d.morphTargetsRelative?1:1-S;h.getUniforms().setValue(n,"morphTargetBaseInfluence",E),h.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function JH(n,e,t,r){let i=new WeakMap;function s(l){const c=r.render.frame,d=l.geometry,h=e.get(l,d);if(i.get(h)!==c&&(e.update(h),i.set(h,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const p=l.skeleton;i.get(p)!==c&&(p.update(),i.set(p,c))}return h}function o(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}class CA extends Mn{constructor(e,t,r,i,s,o,a,l,c,d){if(d=d!==void 0?d:za,d!==za&&d!==ic)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&d===za&&(r=Do),r===void 0&&d===ic&&(r=Ua),super(null,i,s,o,a,l,d,r,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:jn,this.minFilter=l!==void 0?l:jn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const I3=new Mn,L3=new CA(1,1);L3.compareFunction=_A;const B3=new Ev,D3=new SA,O3=new Kh,KC=[],ZC=[],QC=new Float32Array(16),qC=new Float32Array(9),eT=new Float32Array(4);function gd(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=KC[i];if(s===void 0&&(s=new Float32Array(i),KC[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function dr(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function fr(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function Sv(n,e){let t=ZC[e];t===void 0&&(t=new Int32Array(e),ZC[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function YH(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function KH(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(dr(t,e))return;n.uniform2fv(this.addr,e),fr(t,e)}}function ZH(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(dr(t,e))return;n.uniform3fv(this.addr,e),fr(t,e)}}function QH(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(dr(t,e))return;n.uniform4fv(this.addr,e),fr(t,e)}}function qH(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(dr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),fr(t,e)}else{if(dr(t,r))return;eT.set(r),n.uniformMatrix2fv(this.addr,!1,eT),fr(t,r)}}function eG(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(dr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),fr(t,e)}else{if(dr(t,r))return;qC.set(r),n.uniformMatrix3fv(this.addr,!1,qC),fr(t,r)}}function tG(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(dr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),fr(t,e)}else{if(dr(t,r))return;QC.set(r),n.uniformMatrix4fv(this.addr,!1,QC),fr(t,r)}}function nG(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function rG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(dr(t,e))return;n.uniform2iv(this.addr,e),fr(t,e)}}function iG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(dr(t,e))return;n.uniform3iv(this.addr,e),fr(t,e)}}function sG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(dr(t,e))return;n.uniform4iv(this.addr,e),fr(t,e)}}function oG(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function aG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(dr(t,e))return;n.uniform2uiv(this.addr,e),fr(t,e)}}function lG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(dr(t,e))return;n.uniform3uiv(this.addr,e),fr(t,e)}}function cG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(dr(t,e))return;n.uniform4uiv(this.addr,e),fr(t,e)}}function uG(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);const s=this.type===n.SAMPLER_2D_SHADOW?L3:I3;t.setTexture2D(e||s,i)}function dG(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||D3,i)}function fG(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||O3,i)}function hG(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||B3,i)}function pG(n){switch(n){case 5126:return YH;case 35664:return KH;case 35665:return ZH;case 35666:return QH;case 35674:return qH;case 35675:return eG;case 35676:return tG;case 5124:case 35670:return nG;case 35667:case 35671:return rG;case 35668:case 35672:return iG;case 35669:case 35673:return sG;case 5125:return oG;case 36294:return aG;case 36295:return lG;case 36296:return cG;case 35678:case 36198:case 36298:case 36306:case 35682:return uG;case 35679:case 36299:case 36307:return dG;case 35680:case 36300:case 36308:case 36293:return fG;case 36289:case 36303:case 36311:case 36292:return hG}}function mG(n,e){n.uniform1fv(this.addr,e)}function gG(n,e){const t=gd(e,this.size,2);n.uniform2fv(this.addr,t)}function vG(n,e){const t=gd(e,this.size,3);n.uniform3fv(this.addr,t)}function yG(n,e){const t=gd(e,this.size,4);n.uniform4fv(this.addr,t)}function _G(n,e){const t=gd(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function xG(n,e){const t=gd(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function EG(n,e){const t=gd(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function SG(n,e){n.uniform1iv(this.addr,e)}function AG(n,e){n.uniform2iv(this.addr,e)}function wG(n,e){n.uniform3iv(this.addr,e)}function MG(n,e){n.uniform4iv(this.addr,e)}function bG(n,e){n.uniform1uiv(this.addr,e)}function CG(n,e){n.uniform2uiv(this.addr,e)}function TG(n,e){n.uniform3uiv(this.addr,e)}function RG(n,e){n.uniform4uiv(this.addr,e)}function PG(n,e,t){const r=this.cache,i=e.length,s=Sv(t,i);dr(r,s)||(n.uniform1iv(this.addr,s),fr(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||I3,s[o])}function IG(n,e,t){const r=this.cache,i=e.length,s=Sv(t,i);dr(r,s)||(n.uniform1iv(this.addr,s),fr(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||D3,s[o])}function LG(n,e,t){const r=this.cache,i=e.length,s=Sv(t,i);dr(r,s)||(n.uniform1iv(this.addr,s),fr(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||O3,s[o])}function BG(n,e,t){const r=this.cache,i=e.length,s=Sv(t,i);dr(r,s)||(n.uniform1iv(this.addr,s),fr(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||B3,s[o])}function DG(n){switch(n){case 5126:return mG;case 35664:return gG;case 35665:return vG;case 35666:return yG;case 35674:return _G;case 35675:return xG;case 35676:return EG;case 5124:case 35670:return SG;case 35667:case 35671:return AG;case 35668:case 35672:return wG;case 35669:case 35673:return MG;case 5125:return bG;case 36294:return CG;case 36295:return TG;case 36296:return RG;case 35678:case 36198:case 36298:case 36306:case 35682:return PG;case 35679:case 36299:case 36307:return IG;case 35680:case 36300:case 36308:case 36293:return LG;case 36289:case 36303:case 36311:case 36292:return BG}}class OG{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=pG(t.type)}}class NG{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=DG(t.type)}}class FG{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const Z_=/(\w+)(\])?(\[|\.)?/g;function tT(n,e){n.seq.push(e),n.map[e.id]=e}function kG(n,e,t){const r=n.name,i=r.length;for(Z_.lastIndex=0;;){const s=Z_.exec(r),o=Z_.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===i){tT(t,c===void 0?new OG(a,n,e):new NG(a,n,e));break}else{let h=t.map[a];h===void 0&&(h=new FG(a),tT(t,h)),t=h}}}class t0{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);kG(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function nT(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const UG=37297;let zG=0;function HG(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}function GG(n){const e=un.getPrimaries(un.workingColorSpace),t=un.getPrimaries(n);let r;switch(e===t?r="":e===Ah&&t===Sh?r="LinearDisplayP3ToLinearSRGB":e===Sh&&t===Ah&&(r="LinearSRGBToLinearDisplayP3"),n){case lo:case Xh:return[r,"LinearTransferOETF"];case lr:case xv:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[r,"LinearTransferOETF"]}}function rT(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+HG(n.getShaderSource(e),o)}else return i}function VG(n,e){const t=GG(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function WG(n,e){let t;switch(e){case KL:t="Linear";break;case ZL:t="Reinhard";break;case QL:t="OptimizedCineon";break;case aA:t="ACESFilmic";break;case e3:t="AgX";break;case qL:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function $G(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(wu).join(`
`)}function jG(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(wu).join(`
`)}function XG(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function JG(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function wu(n){return n!==""}function iT(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function sT(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const YG=/^[ \t]*#include +<([\w\d./]+)>/gm;function bE(n){return n.replace(YG,ZG)}const KG=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function ZG(n,e){let t=Ft[e];if(t===void 0){const r=KG.get(e);if(r!==void 0)t=Ft[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return bE(t)}const QG=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function oT(n){return n.replace(QG,qG)}function qG(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function aT(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function e8(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===mv?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===$f?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===As&&(e="SHADOWMAP_TYPE_VSM"),e}function t8(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case oo:case Wa:e="ENVMAP_TYPE_CUBE";break;case hd:e="ENVMAP_TYPE_CUBE_UV";break}return e}function n8(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Wa:e="ENVMAP_MODE_REFRACTION";break}return e}function r8(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case jh:e="ENVMAP_BLENDING_MULTIPLY";break;case JL:e="ENVMAP_BLENDING_MIX";break;case YL:e="ENVMAP_BLENDING_ADD";break}return e}function i8(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function s8(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=e8(t),c=t8(t),d=n8(t),h=r8(t),p=i8(t),m=t.isWebGL2?"":$G(t),v=jG(t),_=XG(s),y=i.createProgram();let g,S,E=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(wu).join(`
`),g.length>0&&(g+=`
`),S=[m,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(wu).join(`
`),S.length>0&&(S+=`
`)):(g=[aT(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(wu).join(`
`),S=[m,aT(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+d:"",t.envMap?"#define "+h:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==to?"#define TONE_MAPPING":"",t.toneMapping!==to?Ft.tonemapping_pars_fragment:"",t.toneMapping!==to?WG("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Ft.colorspace_pars_fragment,VG("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(wu).join(`
`)),o=bE(o),o=iT(o,t),o=sT(o,t),a=bE(a),a=iT(a,t),a=sT(a,t),o=oT(o),a=oT(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(E=`#version 300 es
`,g=[v,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,S=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===AE?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===AE?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+S);const w=E+g+o,T=E+S+a,b=nT(i,i.VERTEX_SHADER,w),R=nT(i,i.FRAGMENT_SHADER,T);i.attachShader(y,b),i.attachShader(y,R),t.index0AttributeName!==void 0?i.bindAttribLocation(y,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y);function B($){if(n.debug.checkShaderErrors){const Z=i.getProgramInfoLog(y).trim(),U=i.getShaderInfoLog(b).trim(),j=i.getShaderInfoLog(R).trim();let re=!0,ae=!0;if(i.getProgramParameter(y,i.LINK_STATUS)===!1)if(re=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,y,b,R);else{const H=rT(i,b,"vertex"),Y=rT(i,R,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(y,i.VALIDATE_STATUS)+`

Program Info Log: `+Z+`
`+H+`
`+Y)}else Z!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Z):(U===""||j==="")&&(ae=!1);ae&&($.diagnostics={runnable:re,programLog:Z,vertexShader:{log:U,prefix:g},fragmentShader:{log:j,prefix:S}})}i.deleteShader(b),i.deleteShader(R),P=new t0(i,y),I=JG(i,y)}let P;this.getUniforms=function(){return P===void 0&&B(this),P};let I;this.getAttributes=function(){return I===void 0&&B(this),I};let F=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return F===!1&&(F=i.getProgramParameter(y,UG)),F},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=zG++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=b,this.fragmentShader=R,this}let o8=0;class a8{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new l8(e),t.set(e,r)),r}}class l8{constructor(e){this.id=o8++,this.code=e,this.usedTimes=0}}function c8(n,e,t,r,i,s,o){const a=new Jl,l=new a8,c=[],d=i.isWebGL2,h=i.logarithmicDepthBuffer,p=i.vertexTextures;let m=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(P){return P===0?"uv":`uv${P}`}function y(P,I,F,$,Z){const U=$.fog,j=Z.geometry,re=P.isMeshStandardMaterial?$.environment:null,ae=(P.isMeshStandardMaterial?t:e).get(P.envMap||re),H=ae&&ae.mapping===hd?ae.image.height:null,Y=v[P.type];P.precision!==null&&(m=i.getMaxPrecision(P.precision),m!==P.precision&&console.warn("THREE.WebGLProgram.getParameters:",P.precision,"not supported, using",m,"instead."));const V=j.morphAttributes.position||j.morphAttributes.normal||j.morphAttributes.color,ee=V!==void 0?V.length:0;let ie=0;j.morphAttributes.position!==void 0&&(ie=1),j.morphAttributes.normal!==void 0&&(ie=2),j.morphAttributes.color!==void 0&&(ie=3);let oe,he,Ce,be;if(Y){const qn=bs[Y];oe=qn.vertexShader,he=qn.fragmentShader}else oe=P.vertexShader,he=P.fragmentShader,l.update(P),Ce=l.getVertexShaderID(P),be=l.getFragmentShaderID(P);const Te=n.getRenderTarget(),Xe=Z.isInstancedMesh===!0,ct=Z.isBatchedMesh===!0,et=!!P.map,st=!!P.matcap,te=!!ae,Pe=!!P.aoMap,we=!!P.lightMap,Le=!!P.bumpMap,Ae=!!P.normalMap,ot=!!P.displacementMap,Ve=!!P.emissiveMap,G=!!P.metalnessMap,k=!!P.roughnessMap,de=P.anisotropy>0,De=P.clearcoat>0,fe=P.iridescence>0,me=P.sheen>0,Ue=P.transmission>0,Ne=de&&!!P.anisotropyMap,He=De&&!!P.clearcoatMap,lt=De&&!!P.clearcoatNormalMap,pt=De&&!!P.clearcoatRoughnessMap,Ie=fe&&!!P.iridescenceMap,Ht=fe&&!!P.iridescenceThicknessMap,Ct=me&&!!P.sheenColorMap,ft=me&&!!P.sheenRoughnessMap,Ye=!!P.specularMap,Ze=!!P.specularColorMap,gt=!!P.specularIntensityMap,wt=Ue&&!!P.transmissionMap,Rt=Ue&&!!P.thicknessMap,Bt=!!P.gradientMap,ve=!!P.alphaMap,le=P.alphaTest>0,We=!!P.alphaHash,$e=!!P.extensions,Et=!!j.attributes.uv1,mt=!!j.attributes.uv2,sn=!!j.attributes.uv3;let rn=to;return P.toneMapped&&(Te===null||Te.isXRRenderTarget===!0)&&(rn=n.toneMapping),{isWebGL2:d,shaderID:Y,shaderType:P.type,shaderName:P.name,vertexShader:oe,fragmentShader:he,defines:P.defines,customVertexShaderID:Ce,customFragmentShaderID:be,isRawShaderMaterial:P.isRawShaderMaterial===!0,glslVersion:P.glslVersion,precision:m,batching:ct,instancing:Xe,instancingColor:Xe&&Z.instanceColor!==null,supportsVertexTextures:p,outputColorSpace:Te===null?n.outputColorSpace:Te.isXRRenderTarget===!0?Te.texture.colorSpace:lo,map:et,matcap:st,envMap:te,envMapMode:te&&ae.mapping,envMapCubeUVHeight:H,aoMap:Pe,lightMap:we,bumpMap:Le,normalMap:Ae,displacementMap:p&&ot,emissiveMap:Ve,normalMapObjectSpace:Ae&&P.normalMapType===m3,normalMapTangentSpace:Ae&&P.normalMapType===tl,metalnessMap:G,roughnessMap:k,anisotropy:de,anisotropyMap:Ne,clearcoat:De,clearcoatMap:He,clearcoatNormalMap:lt,clearcoatRoughnessMap:pt,iridescence:fe,iridescenceMap:Ie,iridescenceThicknessMap:Ht,sheen:me,sheenColorMap:Ct,sheenRoughnessMap:ft,specularMap:Ye,specularColorMap:Ze,specularIntensityMap:gt,transmission:Ue,transmissionMap:wt,thicknessMap:Rt,gradientMap:Bt,opaque:P.transparent===!1&&P.blending===jl,alphaMap:ve,alphaTest:le,alphaHash:We,combine:P.combine,mapUv:et&&_(P.map.channel),aoMapUv:Pe&&_(P.aoMap.channel),lightMapUv:we&&_(P.lightMap.channel),bumpMapUv:Le&&_(P.bumpMap.channel),normalMapUv:Ae&&_(P.normalMap.channel),displacementMapUv:ot&&_(P.displacementMap.channel),emissiveMapUv:Ve&&_(P.emissiveMap.channel),metalnessMapUv:G&&_(P.metalnessMap.channel),roughnessMapUv:k&&_(P.roughnessMap.channel),anisotropyMapUv:Ne&&_(P.anisotropyMap.channel),clearcoatMapUv:He&&_(P.clearcoatMap.channel),clearcoatNormalMapUv:lt&&_(P.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:pt&&_(P.clearcoatRoughnessMap.channel),iridescenceMapUv:Ie&&_(P.iridescenceMap.channel),iridescenceThicknessMapUv:Ht&&_(P.iridescenceThicknessMap.channel),sheenColorMapUv:Ct&&_(P.sheenColorMap.channel),sheenRoughnessMapUv:ft&&_(P.sheenRoughnessMap.channel),specularMapUv:Ye&&_(P.specularMap.channel),specularColorMapUv:Ze&&_(P.specularColorMap.channel),specularIntensityMapUv:gt&&_(P.specularIntensityMap.channel),transmissionMapUv:wt&&_(P.transmissionMap.channel),thicknessMapUv:Rt&&_(P.thicknessMap.channel),alphaMapUv:ve&&_(P.alphaMap.channel),vertexTangents:!!j.attributes.tangent&&(Ae||de),vertexColors:P.vertexColors,vertexAlphas:P.vertexColors===!0&&!!j.attributes.color&&j.attributes.color.itemSize===4,vertexUv1s:Et,vertexUv2s:mt,vertexUv3s:sn,pointsUvs:Z.isPoints===!0&&!!j.attributes.uv&&(et||ve),fog:!!U,useFog:P.fog===!0,fogExp2:U&&U.isFogExp2,flatShading:P.flatShading===!0,sizeAttenuation:P.sizeAttenuation===!0,logarithmicDepthBuffer:h,skinning:Z.isSkinnedMesh===!0,morphTargets:j.morphAttributes.position!==void 0,morphNormals:j.morphAttributes.normal!==void 0,morphColors:j.morphAttributes.color!==void 0,morphTargetsCount:ee,morphTextureStride:ie,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numSpotLightMaps:I.spotLightMap.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numDirLightShadows:I.directionalShadowMap.length,numPointLightShadows:I.pointShadowMap.length,numSpotLightShadows:I.spotShadowMap.length,numSpotLightShadowsWithMaps:I.numSpotLightShadowsWithMaps,numLightProbes:I.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:P.dithering,shadowMapEnabled:n.shadowMap.enabled&&F.length>0,shadowMapType:n.shadowMap.type,toneMapping:rn,useLegacyLights:n._useLegacyLights,decodeVideoTexture:et&&P.map.isVideoTexture===!0&&un.getTransfer(P.map.colorSpace)===_n,premultipliedAlpha:P.premultipliedAlpha,doubleSided:P.side===ns,flipSided:P.side===ni,useDepthPacking:P.depthPacking>=0,depthPacking:P.depthPacking||0,index0AttributeName:P.index0AttributeName,extensionDerivatives:$e&&P.extensions.derivatives===!0,extensionFragDepth:$e&&P.extensions.fragDepth===!0,extensionDrawBuffers:$e&&P.extensions.drawBuffers===!0,extensionShaderTextureLOD:$e&&P.extensions.shaderTextureLOD===!0,extensionClipCullDistance:$e&&P.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:d||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:P.customProgramCacheKey()}}function g(P){const I=[];if(P.shaderID?I.push(P.shaderID):(I.push(P.customVertexShaderID),I.push(P.customFragmentShaderID)),P.defines!==void 0)for(const F in P.defines)I.push(F),I.push(P.defines[F]);return P.isRawShaderMaterial===!1&&(S(I,P),E(I,P),I.push(n.outputColorSpace)),I.push(P.customProgramCacheKey),I.join()}function S(P,I){P.push(I.precision),P.push(I.outputColorSpace),P.push(I.envMapMode),P.push(I.envMapCubeUVHeight),P.push(I.mapUv),P.push(I.alphaMapUv),P.push(I.lightMapUv),P.push(I.aoMapUv),P.push(I.bumpMapUv),P.push(I.normalMapUv),P.push(I.displacementMapUv),P.push(I.emissiveMapUv),P.push(I.metalnessMapUv),P.push(I.roughnessMapUv),P.push(I.anisotropyMapUv),P.push(I.clearcoatMapUv),P.push(I.clearcoatNormalMapUv),P.push(I.clearcoatRoughnessMapUv),P.push(I.iridescenceMapUv),P.push(I.iridescenceThicknessMapUv),P.push(I.sheenColorMapUv),P.push(I.sheenRoughnessMapUv),P.push(I.specularMapUv),P.push(I.specularColorMapUv),P.push(I.specularIntensityMapUv),P.push(I.transmissionMapUv),P.push(I.thicknessMapUv),P.push(I.combine),P.push(I.fogExp2),P.push(I.sizeAttenuation),P.push(I.morphTargetsCount),P.push(I.morphAttributeCount),P.push(I.numDirLights),P.push(I.numPointLights),P.push(I.numSpotLights),P.push(I.numSpotLightMaps),P.push(I.numHemiLights),P.push(I.numRectAreaLights),P.push(I.numDirLightShadows),P.push(I.numPointLightShadows),P.push(I.numSpotLightShadows),P.push(I.numSpotLightShadowsWithMaps),P.push(I.numLightProbes),P.push(I.shadowMapType),P.push(I.toneMapping),P.push(I.numClippingPlanes),P.push(I.numClipIntersection),P.push(I.depthPacking)}function E(P,I){a.disableAll(),I.isWebGL2&&a.enable(0),I.supportsVertexTextures&&a.enable(1),I.instancing&&a.enable(2),I.instancingColor&&a.enable(3),I.matcap&&a.enable(4),I.envMap&&a.enable(5),I.normalMapObjectSpace&&a.enable(6),I.normalMapTangentSpace&&a.enable(7),I.clearcoat&&a.enable(8),I.iridescence&&a.enable(9),I.alphaTest&&a.enable(10),I.vertexColors&&a.enable(11),I.vertexAlphas&&a.enable(12),I.vertexUv1s&&a.enable(13),I.vertexUv2s&&a.enable(14),I.vertexUv3s&&a.enable(15),I.vertexTangents&&a.enable(16),I.anisotropy&&a.enable(17),I.alphaHash&&a.enable(18),I.batching&&a.enable(19),P.push(a.mask),a.disableAll(),I.fog&&a.enable(0),I.useFog&&a.enable(1),I.flatShading&&a.enable(2),I.logarithmicDepthBuffer&&a.enable(3),I.skinning&&a.enable(4),I.morphTargets&&a.enable(5),I.morphNormals&&a.enable(6),I.morphColors&&a.enable(7),I.premultipliedAlpha&&a.enable(8),I.shadowMapEnabled&&a.enable(9),I.useLegacyLights&&a.enable(10),I.doubleSided&&a.enable(11),I.flipSided&&a.enable(12),I.useDepthPacking&&a.enable(13),I.dithering&&a.enable(14),I.transmission&&a.enable(15),I.sheen&&a.enable(16),I.opaque&&a.enable(17),I.pointsUvs&&a.enable(18),I.decodeVideoTexture&&a.enable(19),P.push(a.mask)}function w(P){const I=v[P.type];let F;if(I){const $=bs[I];F=T3.clone($.uniforms)}else F=P.uniforms;return F}function T(P,I){let F;for(let $=0,Z=c.length;$<Z;$++){const U=c[$];if(U.cacheKey===I){F=U,++F.usedTimes;break}}return F===void 0&&(F=new s8(n,I,P,s),c.push(F)),F}function b(P){if(--P.usedTimes===0){const I=c.indexOf(P);c[I]=c[c.length-1],c.pop(),P.destroy()}}function R(P){l.remove(P)}function B(){l.dispose()}return{getParameters:y,getProgramCacheKey:g,getUniforms:w,acquireProgram:T,releaseProgram:b,releaseShaderCache:R,programs:c,dispose:B}}function u8(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function r(s,o,a){n.get(s)[o]=a}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function d8(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function lT(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function cT(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(h,p,m,v,_,y){let g=n[e];return g===void 0?(g={id:h.id,object:h,geometry:p,material:m,groupOrder:v,renderOrder:h.renderOrder,z:_,group:y},n[e]=g):(g.id=h.id,g.object=h,g.geometry=p,g.material=m,g.groupOrder=v,g.renderOrder=h.renderOrder,g.z=_,g.group=y),e++,g}function a(h,p,m,v,_,y){const g=o(h,p,m,v,_,y);m.transmission>0?r.push(g):m.transparent===!0?i.push(g):t.push(g)}function l(h,p,m,v,_,y){const g=o(h,p,m,v,_,y);m.transmission>0?r.unshift(g):m.transparent===!0?i.unshift(g):t.unshift(g)}function c(h,p){t.length>1&&t.sort(h||d8),r.length>1&&r.sort(p||lT),i.length>1&&i.sort(p||lT)}function d(){for(let h=e,p=n.length;h<p;h++){const m=n[h];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:d,sort:c}}function f8(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new cT,n.set(r,[o])):i>=s.length?(o=new cT,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function h8(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new X,color:new je};break;case"SpotLight":t={position:new X,direction:new X,color:new je,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new X,color:new je,distance:0,decay:0};break;case"HemisphereLight":t={direction:new X,skyColor:new je,groundColor:new je};break;case"RectAreaLight":t={color:new je,position:new X,halfWidth:new X,halfHeight:new X};break}return n[e.id]=t,t}}}function p8(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Re};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Re};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Re,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let m8=0;function g8(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function v8(n,e){const t=new h8,r=p8(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let d=0;d<9;d++)i.probe.push(new X);const s=new X,o=new _t,a=new _t;function l(d,h){let p=0,m=0,v=0;for(let $=0;$<9;$++)i.probe[$].set(0,0,0);let _=0,y=0,g=0,S=0,E=0,w=0,T=0,b=0,R=0,B=0,P=0;d.sort(g8);const I=h===!0?Math.PI:1;for(let $=0,Z=d.length;$<Z;$++){const U=d[$],j=U.color,re=U.intensity,ae=U.distance,H=U.shadow&&U.shadow.map?U.shadow.map.texture:null;if(U.isAmbientLight)p+=j.r*re*I,m+=j.g*re*I,v+=j.b*re*I;else if(U.isLightProbe){for(let Y=0;Y<9;Y++)i.probe[Y].addScaledVector(U.sh.coefficients[Y],re);P++}else if(U.isDirectionalLight){const Y=t.get(U);if(Y.color.copy(U.color).multiplyScalar(U.intensity*I),U.castShadow){const V=U.shadow,ee=r.get(U);ee.shadowBias=V.bias,ee.shadowNormalBias=V.normalBias,ee.shadowRadius=V.radius,ee.shadowMapSize=V.mapSize,i.directionalShadow[_]=ee,i.directionalShadowMap[_]=H,i.directionalShadowMatrix[_]=U.shadow.matrix,w++}i.directional[_]=Y,_++}else if(U.isSpotLight){const Y=t.get(U);Y.position.setFromMatrixPosition(U.matrixWorld),Y.color.copy(j).multiplyScalar(re*I),Y.distance=ae,Y.coneCos=Math.cos(U.angle),Y.penumbraCos=Math.cos(U.angle*(1-U.penumbra)),Y.decay=U.decay,i.spot[g]=Y;const V=U.shadow;if(U.map&&(i.spotLightMap[R]=U.map,R++,V.updateMatrices(U),U.castShadow&&B++),i.spotLightMatrix[g]=V.matrix,U.castShadow){const ee=r.get(U);ee.shadowBias=V.bias,ee.shadowNormalBias=V.normalBias,ee.shadowRadius=V.radius,ee.shadowMapSize=V.mapSize,i.spotShadow[g]=ee,i.spotShadowMap[g]=H,b++}g++}else if(U.isRectAreaLight){const Y=t.get(U);Y.color.copy(j).multiplyScalar(re),Y.halfWidth.set(U.width*.5,0,0),Y.halfHeight.set(0,U.height*.5,0),i.rectArea[S]=Y,S++}else if(U.isPointLight){const Y=t.get(U);if(Y.color.copy(U.color).multiplyScalar(U.intensity*I),Y.distance=U.distance,Y.decay=U.decay,U.castShadow){const V=U.shadow,ee=r.get(U);ee.shadowBias=V.bias,ee.shadowNormalBias=V.normalBias,ee.shadowRadius=V.radius,ee.shadowMapSize=V.mapSize,ee.shadowCameraNear=V.camera.near,ee.shadowCameraFar=V.camera.far,i.pointShadow[y]=ee,i.pointShadowMap[y]=H,i.pointShadowMatrix[y]=U.shadow.matrix,T++}i.point[y]=Y,y++}else if(U.isHemisphereLight){const Y=t.get(U);Y.skyColor.copy(U.color).multiplyScalar(re*I),Y.groundColor.copy(U.groundColor).multiplyScalar(re*I),i.hemi[E]=Y,E++}}S>0&&(e.isWebGL2?n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ge.LTC_FLOAT_1,i.rectAreaLTC2=Ge.LTC_FLOAT_2):(i.rectAreaLTC1=Ge.LTC_HALF_1,i.rectAreaLTC2=Ge.LTC_HALF_2):n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ge.LTC_FLOAT_1,i.rectAreaLTC2=Ge.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Ge.LTC_HALF_1,i.rectAreaLTC2=Ge.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=p,i.ambient[1]=m,i.ambient[2]=v;const F=i.hash;(F.directionalLength!==_||F.pointLength!==y||F.spotLength!==g||F.rectAreaLength!==S||F.hemiLength!==E||F.numDirectionalShadows!==w||F.numPointShadows!==T||F.numSpotShadows!==b||F.numSpotMaps!==R||F.numLightProbes!==P)&&(i.directional.length=_,i.spot.length=g,i.rectArea.length=S,i.point.length=y,i.hemi.length=E,i.directionalShadow.length=w,i.directionalShadowMap.length=w,i.pointShadow.length=T,i.pointShadowMap.length=T,i.spotShadow.length=b,i.spotShadowMap.length=b,i.directionalShadowMatrix.length=w,i.pointShadowMatrix.length=T,i.spotLightMatrix.length=b+R-B,i.spotLightMap.length=R,i.numSpotLightShadowsWithMaps=B,i.numLightProbes=P,F.directionalLength=_,F.pointLength=y,F.spotLength=g,F.rectAreaLength=S,F.hemiLength=E,F.numDirectionalShadows=w,F.numPointShadows=T,F.numSpotShadows=b,F.numSpotMaps=R,F.numLightProbes=P,i.version=m8++)}function c(d,h){let p=0,m=0,v=0,_=0,y=0;const g=h.matrixWorldInverse;for(let S=0,E=d.length;S<E;S++){const w=d[S];if(w.isDirectionalLight){const T=i.directional[p];T.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(g),p++}else if(w.isSpotLight){const T=i.spot[v];T.position.setFromMatrixPosition(w.matrixWorld),T.position.applyMatrix4(g),T.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(g),v++}else if(w.isRectAreaLight){const T=i.rectArea[_];T.position.setFromMatrixPosition(w.matrixWorld),T.position.applyMatrix4(g),a.identity(),o.copy(w.matrixWorld),o.premultiply(g),a.extractRotation(o),T.halfWidth.set(w.width*.5,0,0),T.halfHeight.set(0,w.height*.5,0),T.halfWidth.applyMatrix4(a),T.halfHeight.applyMatrix4(a),_++}else if(w.isPointLight){const T=i.point[m];T.position.setFromMatrixPosition(w.matrixWorld),T.position.applyMatrix4(g),m++}else if(w.isHemisphereLight){const T=i.hemi[y];T.direction.setFromMatrixPosition(w.matrixWorld),T.direction.transformDirection(g),y++}}}return{setup:l,setupView:c,state:i}}function uT(n,e){const t=new v8(n,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(h){r.push(h)}function a(h){i.push(h)}function l(h){t.setup(r,h)}function c(h){t.setupView(r,h)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function y8(n,e){let t=new WeakMap;function r(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new uT(n,e),t.set(s,[l])):o>=a.length?(l=new uT(n,e),a.push(l)):l=a[o],l}function i(){t=new WeakMap}return{get:r,dispose:i}}class TA extends ir{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=h3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class RA extends ir{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const _8=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,x8=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function E8(n,e,t){let r=new Zh;const i=new Re,s=new Re,o=new ln,a=new TA({depthPacking:p3}),l=new RA,c={},d=t.maxTextureSize,h={[so]:ni,[ni]:so,[ns]:ns},p=new Ls({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Re},radius:{value:4}},vertexShader:_8,fragmentShader:x8}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const v=new Lt;v.setAttribute("position",new Zt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new Qn(v,p),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=mv;let g=this.type;this.render=function(b,R,B){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||b.length===0)return;const P=n.getRenderTarget(),I=n.getActiveCubeFace(),F=n.getActiveMipmapLevel(),$=n.state;$.setBlending(ko),$.buffers.color.setClear(1,1,1,1),$.buffers.depth.setTest(!0),$.setScissorTest(!1);const Z=g!==As&&this.type===As,U=g===As&&this.type!==As;for(let j=0,re=b.length;j<re;j++){const ae=b[j],H=ae.shadow;if(H===void 0){console.warn("THREE.WebGLShadowMap:",ae,"has no shadow.");continue}if(H.autoUpdate===!1&&H.needsUpdate===!1)continue;i.copy(H.mapSize);const Y=H.getFrameExtents();if(i.multiply(Y),s.copy(H.mapSize),(i.x>d||i.y>d)&&(i.x>d&&(s.x=Math.floor(d/Y.x),i.x=s.x*Y.x,H.mapSize.x=s.x),i.y>d&&(s.y=Math.floor(d/Y.y),i.y=s.y*Y.y,H.mapSize.y=s.y)),H.map===null||Z===!0||U===!0){const ee=this.type!==As?{minFilter:jn,magFilter:jn}:{};H.map!==null&&H.map.dispose(),H.map=new Is(i.x,i.y,ee),H.map.texture.name=ae.name+".shadowMap",H.camera.updateProjectionMatrix()}n.setRenderTarget(H.map),n.clear();const V=H.getViewportCount();for(let ee=0;ee<V;ee++){const ie=H.getViewport(ee);o.set(s.x*ie.x,s.y*ie.y,s.x*ie.z,s.y*ie.w),$.viewport(o),H.updateMatrices(ae,ee),r=H.getFrustum(),w(R,B,H.camera,ae,this.type)}H.isPointLightShadow!==!0&&this.type===As&&S(H,B),H.needsUpdate=!1}g=this.type,y.needsUpdate=!1,n.setRenderTarget(P,I,F)};function S(b,R){const B=e.update(_);p.defines.VSM_SAMPLES!==b.blurSamples&&(p.defines.VSM_SAMPLES=b.blurSamples,m.defines.VSM_SAMPLES=b.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),b.mapPass===null&&(b.mapPass=new Is(i.x,i.y)),p.uniforms.shadow_pass.value=b.map.texture,p.uniforms.resolution.value=b.mapSize,p.uniforms.radius.value=b.radius,n.setRenderTarget(b.mapPass),n.clear(),n.renderBufferDirect(R,null,B,p,_,null),m.uniforms.shadow_pass.value=b.mapPass.texture,m.uniforms.resolution.value=b.mapSize,m.uniforms.radius.value=b.radius,n.setRenderTarget(b.map),n.clear(),n.renderBufferDirect(R,null,B,m,_,null)}function E(b,R,B,P){let I=null;const F=B.isPointLight===!0?b.customDistanceMaterial:b.customDepthMaterial;if(F!==void 0)I=F;else if(I=B.isPointLight===!0?l:a,n.localClippingEnabled&&R.clipShadows===!0&&Array.isArray(R.clippingPlanes)&&R.clippingPlanes.length!==0||R.displacementMap&&R.displacementScale!==0||R.alphaMap&&R.alphaTest>0||R.map&&R.alphaTest>0){const $=I.uuid,Z=R.uuid;let U=c[$];U===void 0&&(U={},c[$]=U);let j=U[Z];j===void 0&&(j=I.clone(),U[Z]=j,R.addEventListener("dispose",T)),I=j}if(I.visible=R.visible,I.wireframe=R.wireframe,P===As?I.side=R.shadowSide!==null?R.shadowSide:R.side:I.side=R.shadowSide!==null?R.shadowSide:h[R.side],I.alphaMap=R.alphaMap,I.alphaTest=R.alphaTest,I.map=R.map,I.clipShadows=R.clipShadows,I.clippingPlanes=R.clippingPlanes,I.clipIntersection=R.clipIntersection,I.displacementMap=R.displacementMap,I.displacementScale=R.displacementScale,I.displacementBias=R.displacementBias,I.wireframeLinewidth=R.wireframeLinewidth,I.linewidth=R.linewidth,B.isPointLight===!0&&I.isMeshDistanceMaterial===!0){const $=n.properties.get(I);$.light=B}return I}function w(b,R,B,P,I){if(b.visible===!1)return;if(b.layers.test(R.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&I===As)&&(!b.frustumCulled||r.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(B.matrixWorldInverse,b.matrixWorld);const Z=e.update(b),U=b.material;if(Array.isArray(U)){const j=Z.groups;for(let re=0,ae=j.length;re<ae;re++){const H=j[re],Y=U[H.materialIndex];if(Y&&Y.visible){const V=E(b,Y,P,I);b.onBeforeShadow(n,b,R,B,Z,V,H),n.renderBufferDirect(B,null,Z,V,b,H),b.onAfterShadow(n,b,R,B,Z,V,H)}}}else if(U.visible){const j=E(b,U,P,I);b.onBeforeShadow(n,b,R,B,Z,j,null),n.renderBufferDirect(B,null,Z,j,b,null),b.onAfterShadow(n,b,R,B,Z,j,null)}}const $=b.children;for(let Z=0,U=$.length;Z<U;Z++)w($[Z],R,B,P,I)}function T(b){b.target.removeEventListener("dispose",T);for(const B in c){const P=c[B],I=b.target.uuid;I in P&&(P[I].dispose(),delete P[I])}}}function S8(n,e,t){const r=t.isWebGL2;function i(){let le=!1;const We=new ln;let $e=null;const Et=new ln(0,0,0,0);return{setMask:function(mt){$e!==mt&&!le&&(n.colorMask(mt,mt,mt,mt),$e=mt)},setLocked:function(mt){le=mt},setClear:function(mt,sn,rn,Pn,qn){qn===!0&&(mt*=Pn,sn*=Pn,rn*=Pn),We.set(mt,sn,rn,Pn),Et.equals(We)===!1&&(n.clearColor(mt,sn,rn,Pn),Et.copy(We))},reset:function(){le=!1,$e=null,Et.set(-1,0,0,0)}}}function s(){let le=!1,We=null,$e=null,Et=null;return{setTest:function(mt){mt?ct(n.DEPTH_TEST):et(n.DEPTH_TEST)},setMask:function(mt){We!==mt&&!le&&(n.depthMask(mt),We=mt)},setFunc:function(mt){if($e!==mt){switch(mt){case HL:n.depthFunc(n.NEVER);break;case GL:n.depthFunc(n.ALWAYS);break;case VL:n.depthFunc(n.LESS);break;case vh:n.depthFunc(n.LEQUAL);break;case WL:n.depthFunc(n.EQUAL);break;case $L:n.depthFunc(n.GEQUAL);break;case jL:n.depthFunc(n.GREATER);break;case XL:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}$e=mt}},setLocked:function(mt){le=mt},setClear:function(mt){Et!==mt&&(n.clearDepth(mt),Et=mt)},reset:function(){le=!1,We=null,$e=null,Et=null}}}function o(){let le=!1,We=null,$e=null,Et=null,mt=null,sn=null,rn=null,Pn=null,qn=null;return{setTest:function(on){le||(on?ct(n.STENCIL_TEST):et(n.STENCIL_TEST))},setMask:function(on){We!==on&&!le&&(n.stencilMask(on),We=on)},setFunc:function(on,sr,si){($e!==on||Et!==sr||mt!==si)&&(n.stencilFunc(on,sr,si),$e=on,Et=sr,mt=si)},setOp:function(on,sr,si){(sn!==on||rn!==sr||Pn!==si)&&(n.stencilOp(on,sr,si),sn=on,rn=sr,Pn=si)},setLocked:function(on){le=on},setClear:function(on){qn!==on&&(n.clearStencil(on),qn=on)},reset:function(){le=!1,We=null,$e=null,Et=null,mt=null,sn=null,rn=null,Pn=null,qn=null}}}const a=new i,l=new s,c=new o,d=new WeakMap,h=new WeakMap;let p={},m={},v=new WeakMap,_=[],y=null,g=!1,S=null,E=null,w=null,T=null,b=null,R=null,B=null,P=new je(0,0,0),I=0,F=!1,$=null,Z=null,U=null,j=null,re=null;const ae=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let H=!1,Y=0;const V=n.getParameter(n.VERSION);V.indexOf("WebGL")!==-1?(Y=parseFloat(/^WebGL (\d)/.exec(V)[1]),H=Y>=1):V.indexOf("OpenGL ES")!==-1&&(Y=parseFloat(/^OpenGL ES (\d)/.exec(V)[1]),H=Y>=2);let ee=null,ie={};const oe=n.getParameter(n.SCISSOR_BOX),he=n.getParameter(n.VIEWPORT),Ce=new ln().fromArray(oe),be=new ln().fromArray(he);function Te(le,We,$e,Et){const mt=new Uint8Array(4),sn=n.createTexture();n.bindTexture(le,sn),n.texParameteri(le,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(le,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let rn=0;rn<$e;rn++)r&&(le===n.TEXTURE_3D||le===n.TEXTURE_2D_ARRAY)?n.texImage3D(We,0,n.RGBA,1,1,Et,0,n.RGBA,n.UNSIGNED_BYTE,mt):n.texImage2D(We+rn,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,mt);return sn}const Xe={};Xe[n.TEXTURE_2D]=Te(n.TEXTURE_2D,n.TEXTURE_2D,1),Xe[n.TEXTURE_CUBE_MAP]=Te(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(Xe[n.TEXTURE_2D_ARRAY]=Te(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Xe[n.TEXTURE_3D]=Te(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),ct(n.DEPTH_TEST),l.setFunc(vh),Ve(!1),G(W1),ct(n.CULL_FACE),Ae(ko);function ct(le){p[le]!==!0&&(n.enable(le),p[le]=!0)}function et(le){p[le]!==!1&&(n.disable(le),p[le]=!1)}function st(le,We){return m[le]!==We?(n.bindFramebuffer(le,We),m[le]=We,r&&(le===n.DRAW_FRAMEBUFFER&&(m[n.FRAMEBUFFER]=We),le===n.FRAMEBUFFER&&(m[n.DRAW_FRAMEBUFFER]=We)),!0):!1}function te(le,We){let $e=_,Et=!1;if(le)if($e=v.get(We),$e===void 0&&($e=[],v.set(We,$e)),le.isWebGLMultipleRenderTargets){const mt=le.texture;if($e.length!==mt.length||$e[0]!==n.COLOR_ATTACHMENT0){for(let sn=0,rn=mt.length;sn<rn;sn++)$e[sn]=n.COLOR_ATTACHMENT0+sn;$e.length=mt.length,Et=!0}}else $e[0]!==n.COLOR_ATTACHMENT0&&($e[0]=n.COLOR_ATTACHMENT0,Et=!0);else $e[0]!==n.BACK&&($e[0]=n.BACK,Et=!0);Et&&(t.isWebGL2?n.drawBuffers($e):e.get("WEBGL_draw_buffers").drawBuffersWEBGL($e))}function Pe(le){return y!==le?(n.useProgram(le),y=le,!0):!1}const we={[Ca]:n.FUNC_ADD,[bL]:n.FUNC_SUBTRACT,[CL]:n.FUNC_REVERSE_SUBTRACT};if(r)we[J1]=n.MIN,we[Y1]=n.MAX;else{const le=e.get("EXT_blend_minmax");le!==null&&(we[J1]=le.MIN_EXT,we[Y1]=le.MAX_EXT)}const Le={[TL]:n.ZERO,[RL]:n.ONE,[PL]:n.SRC_COLOR,[I0]:n.SRC_ALPHA,[NL]:n.SRC_ALPHA_SATURATE,[DL]:n.DST_COLOR,[LL]:n.DST_ALPHA,[IL]:n.ONE_MINUS_SRC_COLOR,[L0]:n.ONE_MINUS_SRC_ALPHA,[OL]:n.ONE_MINUS_DST_COLOR,[BL]:n.ONE_MINUS_DST_ALPHA,[FL]:n.CONSTANT_COLOR,[kL]:n.ONE_MINUS_CONSTANT_COLOR,[UL]:n.CONSTANT_ALPHA,[zL]:n.ONE_MINUS_CONSTANT_ALPHA};function Ae(le,We,$e,Et,mt,sn,rn,Pn,qn,on){if(le===ko){g===!0&&(et(n.BLEND),g=!1);return}if(g===!1&&(ct(n.BLEND),g=!0),le!==ML){if(le!==S||on!==F){if((E!==Ca||b!==Ca)&&(n.blendEquation(n.FUNC_ADD),E=Ca,b=Ca),on)switch(le){case jl:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case $1:n.blendFunc(n.ONE,n.ONE);break;case j1:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case X1:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",le);break}else switch(le){case jl:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case $1:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case j1:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case X1:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",le);break}w=null,T=null,R=null,B=null,P.set(0,0,0),I=0,S=le,F=on}return}mt=mt||We,sn=sn||$e,rn=rn||Et,(We!==E||mt!==b)&&(n.blendEquationSeparate(we[We],we[mt]),E=We,b=mt),($e!==w||Et!==T||sn!==R||rn!==B)&&(n.blendFuncSeparate(Le[$e],Le[Et],Le[sn],Le[rn]),w=$e,T=Et,R=sn,B=rn),(Pn.equals(P)===!1||qn!==I)&&(n.blendColor(Pn.r,Pn.g,Pn.b,qn),P.copy(Pn),I=qn),S=le,F=!1}function ot(le,We){le.side===ns?et(n.CULL_FACE):ct(n.CULL_FACE);let $e=le.side===ni;We&&($e=!$e),Ve($e),le.blending===jl&&le.transparent===!1?Ae(ko):Ae(le.blending,le.blendEquation,le.blendSrc,le.blendDst,le.blendEquationAlpha,le.blendSrcAlpha,le.blendDstAlpha,le.blendColor,le.blendAlpha,le.premultipliedAlpha),l.setFunc(le.depthFunc),l.setTest(le.depthTest),l.setMask(le.depthWrite),a.setMask(le.colorWrite);const Et=le.stencilWrite;c.setTest(Et),Et&&(c.setMask(le.stencilWriteMask),c.setFunc(le.stencilFunc,le.stencilRef,le.stencilFuncMask),c.setOp(le.stencilFail,le.stencilZFail,le.stencilZPass)),de(le.polygonOffset,le.polygonOffsetFactor,le.polygonOffsetUnits),le.alphaToCoverage===!0?ct(n.SAMPLE_ALPHA_TO_COVERAGE):et(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ve(le){$!==le&&(le?n.frontFace(n.CW):n.frontFace(n.CCW),$=le)}function G(le){le!==SL?(ct(n.CULL_FACE),le!==Z&&(le===W1?n.cullFace(n.BACK):le===AL?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):et(n.CULL_FACE),Z=le}function k(le){le!==U&&(H&&n.lineWidth(le),U=le)}function de(le,We,$e){le?(ct(n.POLYGON_OFFSET_FILL),(j!==We||re!==$e)&&(n.polygonOffset(We,$e),j=We,re=$e)):et(n.POLYGON_OFFSET_FILL)}function De(le){le?ct(n.SCISSOR_TEST):et(n.SCISSOR_TEST)}function fe(le){le===void 0&&(le=n.TEXTURE0+ae-1),ee!==le&&(n.activeTexture(le),ee=le)}function me(le,We,$e){$e===void 0&&(ee===null?$e=n.TEXTURE0+ae-1:$e=ee);let Et=ie[$e];Et===void 0&&(Et={type:void 0,texture:void 0},ie[$e]=Et),(Et.type!==le||Et.texture!==We)&&(ee!==$e&&(n.activeTexture($e),ee=$e),n.bindTexture(le,We||Xe[le]),Et.type=le,Et.texture=We)}function Ue(){const le=ie[ee];le!==void 0&&le.type!==void 0&&(n.bindTexture(le.type,null),le.type=void 0,le.texture=void 0)}function Ne(){try{n.compressedTexImage2D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function He(){try{n.compressedTexImage3D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function lt(){try{n.texSubImage2D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function pt(){try{n.texSubImage3D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Ie(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Ht(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Ct(){try{n.texStorage2D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function ft(){try{n.texStorage3D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Ye(){try{n.texImage2D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Ze(){try{n.texImage3D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function gt(le){Ce.equals(le)===!1&&(n.scissor(le.x,le.y,le.z,le.w),Ce.copy(le))}function wt(le){be.equals(le)===!1&&(n.viewport(le.x,le.y,le.z,le.w),be.copy(le))}function Rt(le,We){let $e=h.get(We);$e===void 0&&($e=new WeakMap,h.set(We,$e));let Et=$e.get(le);Et===void 0&&(Et=n.getUniformBlockIndex(We,le.name),$e.set(le,Et))}function Bt(le,We){const Et=h.get(We).get(le);d.get(We)!==Et&&(n.uniformBlockBinding(We,Et,le.__bindingPointIndex),d.set(We,Et))}function ve(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),r===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},ee=null,ie={},m={},v=new WeakMap,_=[],y=null,g=!1,S=null,E=null,w=null,T=null,b=null,R=null,B=null,P=new je(0,0,0),I=0,F=!1,$=null,Z=null,U=null,j=null,re=null,Ce.set(0,0,n.canvas.width,n.canvas.height),be.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:ct,disable:et,bindFramebuffer:st,drawBuffers:te,useProgram:Pe,setBlending:Ae,setMaterial:ot,setFlipSided:Ve,setCullFace:G,setLineWidth:k,setPolygonOffset:de,setScissorTest:De,activeTexture:fe,bindTexture:me,unbindTexture:Ue,compressedTexImage2D:Ne,compressedTexImage3D:He,texImage2D:Ye,texImage3D:Ze,updateUBOMapping:Rt,uniformBlockBinding:Bt,texStorage2D:Ct,texStorage3D:ft,texSubImage2D:lt,texSubImage3D:pt,compressedTexSubImage2D:Ie,compressedTexSubImage3D:Ht,scissor:gt,viewport:wt,reset:ve}}function A8(n,e,t,r,i,s,o){const a=i.isWebGL2,l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),d=new WeakMap;let h;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(G,k){return m?new OffscreenCanvas(G,k):bh("canvas")}function _(G,k,de,De){let fe=1;if((G.width>De||G.height>De)&&(fe=De/Math.max(G.width,G.height)),fe<1||k===!0)if(typeof HTMLImageElement<"u"&&G instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&G instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&G instanceof ImageBitmap){const me=k?O0:Math.floor,Ue=me(fe*G.width),Ne=me(fe*G.height);h===void 0&&(h=v(Ue,Ne));const He=de?v(Ue,Ne):h;return He.width=Ue,He.height=Ne,He.getContext("2d").drawImage(G,0,0,Ue,Ne),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+G.width+"x"+G.height+") to ("+Ue+"x"+Ne+")."),He}else return"data"in G&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+G.width+"x"+G.height+")."),G;return G}function y(G){return wE(G.width)&&wE(G.height)}function g(G){return a?!1:G.wrapS!==Ar||G.wrapT!==Ar||G.minFilter!==jn&&G.minFilter!==mn}function S(G,k){return G.generateMipmaps&&k&&G.minFilter!==jn&&G.minFilter!==mn}function E(G){n.generateMipmap(G)}function w(G,k,de,De,fe=!1){if(a===!1)return k;if(G!==null){if(n[G]!==void 0)return n[G];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+G+"'")}let me=k;if(k===n.RED&&(de===n.FLOAT&&(me=n.R32F),de===n.HALF_FLOAT&&(me=n.R16F),de===n.UNSIGNED_BYTE&&(me=n.R8)),k===n.RED_INTEGER&&(de===n.UNSIGNED_BYTE&&(me=n.R8UI),de===n.UNSIGNED_SHORT&&(me=n.R16UI),de===n.UNSIGNED_INT&&(me=n.R32UI),de===n.BYTE&&(me=n.R8I),de===n.SHORT&&(me=n.R16I),de===n.INT&&(me=n.R32I)),k===n.RG&&(de===n.FLOAT&&(me=n.RG32F),de===n.HALF_FLOAT&&(me=n.RG16F),de===n.UNSIGNED_BYTE&&(me=n.RG8)),k===n.RGBA){const Ue=fe?Eh:un.getTransfer(De);de===n.FLOAT&&(me=n.RGBA32F),de===n.HALF_FLOAT&&(me=n.RGBA16F),de===n.UNSIGNED_BYTE&&(me=Ue===_n?n.SRGB8_ALPHA8:n.RGBA8),de===n.UNSIGNED_SHORT_4_4_4_4&&(me=n.RGBA4),de===n.UNSIGNED_SHORT_5_5_5_1&&(me=n.RGB5_A1)}return(me===n.R16F||me===n.R32F||me===n.RG16F||me===n.RG32F||me===n.RGBA16F||me===n.RGBA32F)&&e.get("EXT_color_buffer_float"),me}function T(G,k,de){return S(G,de)===!0||G.isFramebufferTexture&&G.minFilter!==jn&&G.minFilter!==mn?Math.log2(Math.max(k.width,k.height))+1:G.mipmaps!==void 0&&G.mipmaps.length>0?G.mipmaps.length:G.isCompressedTexture&&Array.isArray(G.image)?k.mipmaps.length:1}function b(G){return G===jn||G===_h||G===Ou?n.NEAREST:n.LINEAR}function R(G){const k=G.target;k.removeEventListener("dispose",R),P(k),k.isVideoTexture&&d.delete(k)}function B(G){const k=G.target;k.removeEventListener("dispose",B),F(k)}function P(G){const k=r.get(G);if(k.__webglInit===void 0)return;const de=G.source,De=p.get(de);if(De){const fe=De[k.__cacheKey];fe.usedTimes--,fe.usedTimes===0&&I(G),Object.keys(De).length===0&&p.delete(de)}r.remove(G)}function I(G){const k=r.get(G);n.deleteTexture(k.__webglTexture);const de=G.source,De=p.get(de);delete De[k.__cacheKey],o.memory.textures--}function F(G){const k=G.texture,de=r.get(G),De=r.get(k);if(De.__webglTexture!==void 0&&(n.deleteTexture(De.__webglTexture),o.memory.textures--),G.depthTexture&&G.depthTexture.dispose(),G.isWebGLCubeRenderTarget)for(let fe=0;fe<6;fe++){if(Array.isArray(de.__webglFramebuffer[fe]))for(let me=0;me<de.__webglFramebuffer[fe].length;me++)n.deleteFramebuffer(de.__webglFramebuffer[fe][me]);else n.deleteFramebuffer(de.__webglFramebuffer[fe]);de.__webglDepthbuffer&&n.deleteRenderbuffer(de.__webglDepthbuffer[fe])}else{if(Array.isArray(de.__webglFramebuffer))for(let fe=0;fe<de.__webglFramebuffer.length;fe++)n.deleteFramebuffer(de.__webglFramebuffer[fe]);else n.deleteFramebuffer(de.__webglFramebuffer);if(de.__webglDepthbuffer&&n.deleteRenderbuffer(de.__webglDepthbuffer),de.__webglMultisampledFramebuffer&&n.deleteFramebuffer(de.__webglMultisampledFramebuffer),de.__webglColorRenderbuffer)for(let fe=0;fe<de.__webglColorRenderbuffer.length;fe++)de.__webglColorRenderbuffer[fe]&&n.deleteRenderbuffer(de.__webglColorRenderbuffer[fe]);de.__webglDepthRenderbuffer&&n.deleteRenderbuffer(de.__webglDepthRenderbuffer)}if(G.isWebGLMultipleRenderTargets)for(let fe=0,me=k.length;fe<me;fe++){const Ue=r.get(k[fe]);Ue.__webglTexture&&(n.deleteTexture(Ue.__webglTexture),o.memory.textures--),r.remove(k[fe])}r.remove(k),r.remove(G)}let $=0;function Z(){$=0}function U(){const G=$;return G>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+G+" texture units while this GPU supports only "+i.maxTextures),$+=1,G}function j(G){const k=[];return k.push(G.wrapS),k.push(G.wrapT),k.push(G.wrapR||0),k.push(G.magFilter),k.push(G.minFilter),k.push(G.anisotropy),k.push(G.internalFormat),k.push(G.format),k.push(G.type),k.push(G.generateMipmaps),k.push(G.premultiplyAlpha),k.push(G.flipY),k.push(G.unpackAlignment),k.push(G.colorSpace),k.join()}function re(G,k){const de=r.get(G);if(G.isVideoTexture&&ot(G),G.isRenderTargetTexture===!1&&G.version>0&&de.__version!==G.version){const De=G.image;if(De===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(De.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ce(de,G,k);return}}t.bindTexture(n.TEXTURE_2D,de.__webglTexture,n.TEXTURE0+k)}function ae(G,k){const de=r.get(G);if(G.version>0&&de.__version!==G.version){Ce(de,G,k);return}t.bindTexture(n.TEXTURE_2D_ARRAY,de.__webglTexture,n.TEXTURE0+k)}function H(G,k){const de=r.get(G);if(G.version>0&&de.__version!==G.version){Ce(de,G,k);return}t.bindTexture(n.TEXTURE_3D,de.__webglTexture,n.TEXTURE0+k)}function Y(G,k){const de=r.get(G);if(G.version>0&&de.__version!==G.version){be(de,G,k);return}t.bindTexture(n.TEXTURE_CUBE_MAP,de.__webglTexture,n.TEXTURE0+k)}const V={[$a]:n.REPEAT,[Ar]:n.CLAMP_TO_EDGE,[Ju]:n.MIRRORED_REPEAT},ee={[jn]:n.NEAREST,[_h]:n.NEAREST_MIPMAP_NEAREST,[Ou]:n.NEAREST_MIPMAP_LINEAR,[mn]:n.LINEAR,[vv]:n.LINEAR_MIPMAP_NEAREST,[ao]:n.LINEAR_MIPMAP_LINEAR},ie={[g3]:n.NEVER,[S3]:n.ALWAYS,[v3]:n.LESS,[_A]:n.LEQUAL,[y3]:n.EQUAL,[E3]:n.GEQUAL,[_3]:n.GREATER,[x3]:n.NOTEQUAL};function oe(G,k,de){if(de?(n.texParameteri(G,n.TEXTURE_WRAP_S,V[k.wrapS]),n.texParameteri(G,n.TEXTURE_WRAP_T,V[k.wrapT]),(G===n.TEXTURE_3D||G===n.TEXTURE_2D_ARRAY)&&n.texParameteri(G,n.TEXTURE_WRAP_R,V[k.wrapR]),n.texParameteri(G,n.TEXTURE_MAG_FILTER,ee[k.magFilter]),n.texParameteri(G,n.TEXTURE_MIN_FILTER,ee[k.minFilter])):(n.texParameteri(G,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(G,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(G===n.TEXTURE_3D||G===n.TEXTURE_2D_ARRAY)&&n.texParameteri(G,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(k.wrapS!==Ar||k.wrapT!==Ar)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(G,n.TEXTURE_MAG_FILTER,b(k.magFilter)),n.texParameteri(G,n.TEXTURE_MIN_FILTER,b(k.minFilter)),k.minFilter!==jn&&k.minFilter!==mn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),k.compareFunction&&(n.texParameteri(G,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(G,n.TEXTURE_COMPARE_FUNC,ie[k.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const De=e.get("EXT_texture_filter_anisotropic");if(k.magFilter===jn||k.minFilter!==Ou&&k.minFilter!==ao||k.type===wr&&e.has("OES_texture_float_linear")===!1||a===!1&&k.type===qr&&e.has("OES_texture_half_float_linear")===!1)return;(k.anisotropy>1||r.get(k).__currentAnisotropy)&&(n.texParameterf(G,De.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(k.anisotropy,i.getMaxAnisotropy())),r.get(k).__currentAnisotropy=k.anisotropy)}}function he(G,k){let de=!1;G.__webglInit===void 0&&(G.__webglInit=!0,k.addEventListener("dispose",R));const De=k.source;let fe=p.get(De);fe===void 0&&(fe={},p.set(De,fe));const me=j(k);if(me!==G.__cacheKey){fe[me]===void 0&&(fe[me]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,de=!0),fe[me].usedTimes++;const Ue=fe[G.__cacheKey];Ue!==void 0&&(fe[G.__cacheKey].usedTimes--,Ue.usedTimes===0&&I(k)),G.__cacheKey=me,G.__webglTexture=fe[me].texture}return de}function Ce(G,k,de){let De=n.TEXTURE_2D;(k.isDataArrayTexture||k.isCompressedArrayTexture)&&(De=n.TEXTURE_2D_ARRAY),k.isData3DTexture&&(De=n.TEXTURE_3D);const fe=he(G,k),me=k.source;t.bindTexture(De,G.__webglTexture,n.TEXTURE0+de);const Ue=r.get(me);if(me.version!==Ue.__version||fe===!0){t.activeTexture(n.TEXTURE0+de);const Ne=un.getPrimaries(un.workingColorSpace),He=k.colorSpace===Ri?null:un.getPrimaries(k.colorSpace),lt=k.colorSpace===Ri||Ne===He?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,k.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,k.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,lt);const pt=g(k)&&y(k.image)===!1;let Ie=_(k.image,pt,!1,i.maxTextureSize);Ie=Ve(k,Ie);const Ht=y(Ie)||a,Ct=s.convert(k.format,k.colorSpace);let ft=s.convert(k.type),Ye=w(k.internalFormat,Ct,ft,k.colorSpace,k.isVideoTexture);oe(De,k,Ht);let Ze;const gt=k.mipmaps,wt=a&&k.isVideoTexture!==!0&&Ye!==mA,Rt=Ue.__version===void 0||fe===!0,Bt=T(k,Ie,Ht);if(k.isDepthTexture)Ye=n.DEPTH_COMPONENT,a?k.type===wr?Ye=n.DEPTH_COMPONENT32F:k.type===Do?Ye=n.DEPTH_COMPONENT24:k.type===Ua?Ye=n.DEPTH24_STENCIL8:Ye=n.DEPTH_COMPONENT16:k.type===wr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),k.format===za&&Ye===n.DEPTH_COMPONENT&&k.type!==yv&&k.type!==Do&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),k.type=Do,ft=s.convert(k.type)),k.format===ic&&Ye===n.DEPTH_COMPONENT&&(Ye=n.DEPTH_STENCIL,k.type!==Ua&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),k.type=Ua,ft=s.convert(k.type))),Rt&&(wt?t.texStorage2D(n.TEXTURE_2D,1,Ye,Ie.width,Ie.height):t.texImage2D(n.TEXTURE_2D,0,Ye,Ie.width,Ie.height,0,Ct,ft,null));else if(k.isDataTexture)if(gt.length>0&&Ht){wt&&Rt&&t.texStorage2D(n.TEXTURE_2D,Bt,Ye,gt[0].width,gt[0].height);for(let ve=0,le=gt.length;ve<le;ve++)Ze=gt[ve],wt?t.texSubImage2D(n.TEXTURE_2D,ve,0,0,Ze.width,Ze.height,Ct,ft,Ze.data):t.texImage2D(n.TEXTURE_2D,ve,Ye,Ze.width,Ze.height,0,Ct,ft,Ze.data);k.generateMipmaps=!1}else wt?(Rt&&t.texStorage2D(n.TEXTURE_2D,Bt,Ye,Ie.width,Ie.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ie.width,Ie.height,Ct,ft,Ie.data)):t.texImage2D(n.TEXTURE_2D,0,Ye,Ie.width,Ie.height,0,Ct,ft,Ie.data);else if(k.isCompressedTexture)if(k.isCompressedArrayTexture){wt&&Rt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Bt,Ye,gt[0].width,gt[0].height,Ie.depth);for(let ve=0,le=gt.length;ve<le;ve++)Ze=gt[ve],k.format!==Ur?Ct!==null?wt?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ve,0,0,0,Ze.width,Ze.height,Ie.depth,Ct,Ze.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,ve,Ye,Ze.width,Ze.height,Ie.depth,0,Ze.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):wt?t.texSubImage3D(n.TEXTURE_2D_ARRAY,ve,0,0,0,Ze.width,Ze.height,Ie.depth,Ct,ft,Ze.data):t.texImage3D(n.TEXTURE_2D_ARRAY,ve,Ye,Ze.width,Ze.height,Ie.depth,0,Ct,ft,Ze.data)}else{wt&&Rt&&t.texStorage2D(n.TEXTURE_2D,Bt,Ye,gt[0].width,gt[0].height);for(let ve=0,le=gt.length;ve<le;ve++)Ze=gt[ve],k.format!==Ur?Ct!==null?wt?t.compressedTexSubImage2D(n.TEXTURE_2D,ve,0,0,Ze.width,Ze.height,Ct,Ze.data):t.compressedTexImage2D(n.TEXTURE_2D,ve,Ye,Ze.width,Ze.height,0,Ze.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):wt?t.texSubImage2D(n.TEXTURE_2D,ve,0,0,Ze.width,Ze.height,Ct,ft,Ze.data):t.texImage2D(n.TEXTURE_2D,ve,Ye,Ze.width,Ze.height,0,Ct,ft,Ze.data)}else if(k.isDataArrayTexture)wt?(Rt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Bt,Ye,Ie.width,Ie.height,Ie.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ie.width,Ie.height,Ie.depth,Ct,ft,Ie.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,Ye,Ie.width,Ie.height,Ie.depth,0,Ct,ft,Ie.data);else if(k.isData3DTexture)wt?(Rt&&t.texStorage3D(n.TEXTURE_3D,Bt,Ye,Ie.width,Ie.height,Ie.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ie.width,Ie.height,Ie.depth,Ct,ft,Ie.data)):t.texImage3D(n.TEXTURE_3D,0,Ye,Ie.width,Ie.height,Ie.depth,0,Ct,ft,Ie.data);else if(k.isFramebufferTexture){if(Rt)if(wt)t.texStorage2D(n.TEXTURE_2D,Bt,Ye,Ie.width,Ie.height);else{let ve=Ie.width,le=Ie.height;for(let We=0;We<Bt;We++)t.texImage2D(n.TEXTURE_2D,We,Ye,ve,le,0,Ct,ft,null),ve>>=1,le>>=1}}else if(gt.length>0&&Ht){wt&&Rt&&t.texStorage2D(n.TEXTURE_2D,Bt,Ye,gt[0].width,gt[0].height);for(let ve=0,le=gt.length;ve<le;ve++)Ze=gt[ve],wt?t.texSubImage2D(n.TEXTURE_2D,ve,0,0,Ct,ft,Ze):t.texImage2D(n.TEXTURE_2D,ve,Ye,Ct,ft,Ze);k.generateMipmaps=!1}else wt?(Rt&&t.texStorage2D(n.TEXTURE_2D,Bt,Ye,Ie.width,Ie.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ct,ft,Ie)):t.texImage2D(n.TEXTURE_2D,0,Ye,Ct,ft,Ie);S(k,Ht)&&E(De),Ue.__version=me.version,k.onUpdate&&k.onUpdate(k)}G.__version=k.version}function be(G,k,de){if(k.image.length!==6)return;const De=he(G,k),fe=k.source;t.bindTexture(n.TEXTURE_CUBE_MAP,G.__webglTexture,n.TEXTURE0+de);const me=r.get(fe);if(fe.version!==me.__version||De===!0){t.activeTexture(n.TEXTURE0+de);const Ue=un.getPrimaries(un.workingColorSpace),Ne=k.colorSpace===Ri?null:un.getPrimaries(k.colorSpace),He=k.colorSpace===Ri||Ue===Ne?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,k.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,k.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,He);const lt=k.isCompressedTexture||k.image[0].isCompressedTexture,pt=k.image[0]&&k.image[0].isDataTexture,Ie=[];for(let ve=0;ve<6;ve++)!lt&&!pt?Ie[ve]=_(k.image[ve],!1,!0,i.maxCubemapSize):Ie[ve]=pt?k.image[ve].image:k.image[ve],Ie[ve]=Ve(k,Ie[ve]);const Ht=Ie[0],Ct=y(Ht)||a,ft=s.convert(k.format,k.colorSpace),Ye=s.convert(k.type),Ze=w(k.internalFormat,ft,Ye,k.colorSpace),gt=a&&k.isVideoTexture!==!0,wt=me.__version===void 0||De===!0;let Rt=T(k,Ht,Ct);oe(n.TEXTURE_CUBE_MAP,k,Ct);let Bt;if(lt){gt&&wt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Rt,Ze,Ht.width,Ht.height);for(let ve=0;ve<6;ve++){Bt=Ie[ve].mipmaps;for(let le=0;le<Bt.length;le++){const We=Bt[le];k.format!==Ur?ft!==null?gt?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,le,0,0,We.width,We.height,ft,We.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,le,Ze,We.width,We.height,0,We.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):gt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,le,0,0,We.width,We.height,ft,Ye,We.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,le,Ze,We.width,We.height,0,ft,Ye,We.data)}}}else{Bt=k.mipmaps,gt&&wt&&(Bt.length>0&&Rt++,t.texStorage2D(n.TEXTURE_CUBE_MAP,Rt,Ze,Ie[0].width,Ie[0].height));for(let ve=0;ve<6;ve++)if(pt){gt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,0,0,0,Ie[ve].width,Ie[ve].height,ft,Ye,Ie[ve].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,0,Ze,Ie[ve].width,Ie[ve].height,0,ft,Ye,Ie[ve].data);for(let le=0;le<Bt.length;le++){const $e=Bt[le].image[ve].image;gt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,le+1,0,0,$e.width,$e.height,ft,Ye,$e.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,le+1,Ze,$e.width,$e.height,0,ft,Ye,$e.data)}}else{gt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,0,0,0,ft,Ye,Ie[ve]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,0,Ze,ft,Ye,Ie[ve]);for(let le=0;le<Bt.length;le++){const We=Bt[le];gt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,le+1,0,0,ft,Ye,We.image[ve]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,le+1,Ze,ft,Ye,We.image[ve])}}}S(k,Ct)&&E(n.TEXTURE_CUBE_MAP),me.__version=fe.version,k.onUpdate&&k.onUpdate(k)}G.__version=k.version}function Te(G,k,de,De,fe,me){const Ue=s.convert(de.format,de.colorSpace),Ne=s.convert(de.type),He=w(de.internalFormat,Ue,Ne,de.colorSpace);if(!r.get(k).__hasExternalTextures){const pt=Math.max(1,k.width>>me),Ie=Math.max(1,k.height>>me);fe===n.TEXTURE_3D||fe===n.TEXTURE_2D_ARRAY?t.texImage3D(fe,me,He,pt,Ie,k.depth,0,Ue,Ne,null):t.texImage2D(fe,me,He,pt,Ie,0,Ue,Ne,null)}t.bindFramebuffer(n.FRAMEBUFFER,G),Ae(k)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,De,fe,r.get(de).__webglTexture,0,Le(k)):(fe===n.TEXTURE_2D||fe>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&fe<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,De,fe,r.get(de).__webglTexture,me),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Xe(G,k,de){if(n.bindRenderbuffer(n.RENDERBUFFER,G),k.depthBuffer&&!k.stencilBuffer){let De=a===!0?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(de||Ae(k)){const fe=k.depthTexture;fe&&fe.isDepthTexture&&(fe.type===wr?De=n.DEPTH_COMPONENT32F:fe.type===Do&&(De=n.DEPTH_COMPONENT24));const me=Le(k);Ae(k)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,me,De,k.width,k.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,me,De,k.width,k.height)}else n.renderbufferStorage(n.RENDERBUFFER,De,k.width,k.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,G)}else if(k.depthBuffer&&k.stencilBuffer){const De=Le(k);de&&Ae(k)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,De,n.DEPTH24_STENCIL8,k.width,k.height):Ae(k)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,De,n.DEPTH24_STENCIL8,k.width,k.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,k.width,k.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,G)}else{const De=k.isWebGLMultipleRenderTargets===!0?k.texture:[k.texture];for(let fe=0;fe<De.length;fe++){const me=De[fe],Ue=s.convert(me.format,me.colorSpace),Ne=s.convert(me.type),He=w(me.internalFormat,Ue,Ne,me.colorSpace),lt=Le(k);de&&Ae(k)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,lt,He,k.width,k.height):Ae(k)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,lt,He,k.width,k.height):n.renderbufferStorage(n.RENDERBUFFER,He,k.width,k.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function ct(G,k){if(k&&k.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,G),!(k.depthTexture&&k.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(k.depthTexture).__webglTexture||k.depthTexture.image.width!==k.width||k.depthTexture.image.height!==k.height)&&(k.depthTexture.image.width=k.width,k.depthTexture.image.height=k.height,k.depthTexture.needsUpdate=!0),re(k.depthTexture,0);const De=r.get(k.depthTexture).__webglTexture,fe=Le(k);if(k.depthTexture.format===za)Ae(k)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,De,0,fe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,De,0);else if(k.depthTexture.format===ic)Ae(k)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,De,0,fe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,De,0);else throw new Error("Unknown depthTexture format")}function et(G){const k=r.get(G),de=G.isWebGLCubeRenderTarget===!0;if(G.depthTexture&&!k.__autoAllocateDepthBuffer){if(de)throw new Error("target.depthTexture not supported in Cube render targets");ct(k.__webglFramebuffer,G)}else if(de){k.__webglDepthbuffer=[];for(let De=0;De<6;De++)t.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer[De]),k.__webglDepthbuffer[De]=n.createRenderbuffer(),Xe(k.__webglDepthbuffer[De],G,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,k.__webglFramebuffer),k.__webglDepthbuffer=n.createRenderbuffer(),Xe(k.__webglDepthbuffer,G,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function st(G,k,de){const De=r.get(G);k!==void 0&&Te(De.__webglFramebuffer,G,G.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),de!==void 0&&et(G)}function te(G){const k=G.texture,de=r.get(G),De=r.get(k);G.addEventListener("dispose",B),G.isWebGLMultipleRenderTargets!==!0&&(De.__webglTexture===void 0&&(De.__webglTexture=n.createTexture()),De.__version=k.version,o.memory.textures++);const fe=G.isWebGLCubeRenderTarget===!0,me=G.isWebGLMultipleRenderTargets===!0,Ue=y(G)||a;if(fe){de.__webglFramebuffer=[];for(let Ne=0;Ne<6;Ne++)if(a&&k.mipmaps&&k.mipmaps.length>0){de.__webglFramebuffer[Ne]=[];for(let He=0;He<k.mipmaps.length;He++)de.__webglFramebuffer[Ne][He]=n.createFramebuffer()}else de.__webglFramebuffer[Ne]=n.createFramebuffer()}else{if(a&&k.mipmaps&&k.mipmaps.length>0){de.__webglFramebuffer=[];for(let Ne=0;Ne<k.mipmaps.length;Ne++)de.__webglFramebuffer[Ne]=n.createFramebuffer()}else de.__webglFramebuffer=n.createFramebuffer();if(me)if(i.drawBuffers){const Ne=G.texture;for(let He=0,lt=Ne.length;He<lt;He++){const pt=r.get(Ne[He]);pt.__webglTexture===void 0&&(pt.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&G.samples>0&&Ae(G)===!1){const Ne=me?k:[k];de.__webglMultisampledFramebuffer=n.createFramebuffer(),de.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,de.__webglMultisampledFramebuffer);for(let He=0;He<Ne.length;He++){const lt=Ne[He];de.__webglColorRenderbuffer[He]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,de.__webglColorRenderbuffer[He]);const pt=s.convert(lt.format,lt.colorSpace),Ie=s.convert(lt.type),Ht=w(lt.internalFormat,pt,Ie,lt.colorSpace,G.isXRRenderTarget===!0),Ct=Le(G);n.renderbufferStorageMultisample(n.RENDERBUFFER,Ct,Ht,G.width,G.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+He,n.RENDERBUFFER,de.__webglColorRenderbuffer[He])}n.bindRenderbuffer(n.RENDERBUFFER,null),G.depthBuffer&&(de.__webglDepthRenderbuffer=n.createRenderbuffer(),Xe(de.__webglDepthRenderbuffer,G,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(fe){t.bindTexture(n.TEXTURE_CUBE_MAP,De.__webglTexture),oe(n.TEXTURE_CUBE_MAP,k,Ue);for(let Ne=0;Ne<6;Ne++)if(a&&k.mipmaps&&k.mipmaps.length>0)for(let He=0;He<k.mipmaps.length;He++)Te(de.__webglFramebuffer[Ne][He],G,k,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,He);else Te(de.__webglFramebuffer[Ne],G,k,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0);S(k,Ue)&&E(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(me){const Ne=G.texture;for(let He=0,lt=Ne.length;He<lt;He++){const pt=Ne[He],Ie=r.get(pt);t.bindTexture(n.TEXTURE_2D,Ie.__webglTexture),oe(n.TEXTURE_2D,pt,Ue),Te(de.__webglFramebuffer,G,pt,n.COLOR_ATTACHMENT0+He,n.TEXTURE_2D,0),S(pt,Ue)&&E(n.TEXTURE_2D)}t.unbindTexture()}else{let Ne=n.TEXTURE_2D;if((G.isWebGL3DRenderTarget||G.isWebGLArrayRenderTarget)&&(a?Ne=G.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Ne,De.__webglTexture),oe(Ne,k,Ue),a&&k.mipmaps&&k.mipmaps.length>0)for(let He=0;He<k.mipmaps.length;He++)Te(de.__webglFramebuffer[He],G,k,n.COLOR_ATTACHMENT0,Ne,He);else Te(de.__webglFramebuffer,G,k,n.COLOR_ATTACHMENT0,Ne,0);S(k,Ue)&&E(Ne),t.unbindTexture()}G.depthBuffer&&et(G)}function Pe(G){const k=y(G)||a,de=G.isWebGLMultipleRenderTargets===!0?G.texture:[G.texture];for(let De=0,fe=de.length;De<fe;De++){const me=de[De];if(S(me,k)){const Ue=G.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Ne=r.get(me).__webglTexture;t.bindTexture(Ue,Ne),E(Ue),t.unbindTexture()}}}function we(G){if(a&&G.samples>0&&Ae(G)===!1){const k=G.isWebGLMultipleRenderTargets?G.texture:[G.texture],de=G.width,De=G.height;let fe=n.COLOR_BUFFER_BIT;const me=[],Ue=G.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ne=r.get(G),He=G.isWebGLMultipleRenderTargets===!0;if(He)for(let lt=0;lt<k.length;lt++)t.bindFramebuffer(n.FRAMEBUFFER,Ne.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+lt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Ne.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+lt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Ne.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ne.__webglFramebuffer);for(let lt=0;lt<k.length;lt++){me.push(n.COLOR_ATTACHMENT0+lt),G.depthBuffer&&me.push(Ue);const pt=Ne.__ignoreDepthValues!==void 0?Ne.__ignoreDepthValues:!1;if(pt===!1&&(G.depthBuffer&&(fe|=n.DEPTH_BUFFER_BIT),G.stencilBuffer&&(fe|=n.STENCIL_BUFFER_BIT)),He&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ne.__webglColorRenderbuffer[lt]),pt===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[Ue]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[Ue])),He){const Ie=r.get(k[lt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Ie,0)}n.blitFramebuffer(0,0,de,De,0,0,de,De,fe,n.NEAREST),c&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,me)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),He)for(let lt=0;lt<k.length;lt++){t.bindFramebuffer(n.FRAMEBUFFER,Ne.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+lt,n.RENDERBUFFER,Ne.__webglColorRenderbuffer[lt]);const pt=r.get(k[lt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Ne.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+lt,n.TEXTURE_2D,pt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ne.__webglMultisampledFramebuffer)}}function Le(G){return Math.min(i.maxSamples,G.samples)}function Ae(G){const k=r.get(G);return a&&G.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&k.__useRenderToTexture!==!1}function ot(G){const k=o.render.frame;d.get(G)!==k&&(d.set(G,k),G.update())}function Ve(G,k){const de=G.colorSpace,De=G.format,fe=G.type;return G.isCompressedTexture===!0||G.isVideoTexture===!0||G.format===D0||de!==lo&&de!==Ri&&(un.getTransfer(de)===_n?a===!1?e.has("EXT_sRGB")===!0&&De===Ur?(G.format=D0,G.minFilter=mn,G.generateMipmaps=!1):k=EA.sRGBToLinear(k):(De!==Ur||fe!==no)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",de)),k}this.allocateTextureUnit=U,this.resetTextureUnits=Z,this.setTexture2D=re,this.setTexture2DArray=ae,this.setTexture3D=H,this.setTextureCube=Y,this.rebindTextures=st,this.setupRenderTarget=te,this.updateRenderTargetMipmap=Pe,this.updateMultisampleRenderTarget=we,this.setupDepthRenderbuffer=et,this.setupFrameBufferTexture=Te,this.useMultisampledRTT=Ae}function N3(n,e,t){const r=t.isWebGL2;function i(s,o=Ri){let a;const l=un.getTransfer(o);if(s===no)return n.UNSIGNED_BYTE;if(s===cA)return n.UNSIGNED_SHORT_4_4_4_4;if(s===uA)return n.UNSIGNED_SHORT_5_5_5_1;if(s===n3)return n.BYTE;if(s===r3)return n.SHORT;if(s===yv)return n.UNSIGNED_SHORT;if(s===lA)return n.INT;if(s===Do)return n.UNSIGNED_INT;if(s===wr)return n.FLOAT;if(s===qr)return r?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===i3)return n.ALPHA;if(s===Ur)return n.RGBA;if(s===s3)return n.LUMINANCE;if(s===o3)return n.LUMINANCE_ALPHA;if(s===za)return n.DEPTH_COMPONENT;if(s===ic)return n.DEPTH_STENCIL;if(s===D0)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===dA)return n.RED;if(s===fA)return n.RED_INTEGER;if(s===a3)return n.RG;if(s===hA)return n.RG_INTEGER;if(s===pA)return n.RGBA_INTEGER;if(s===Yg||s===Kg||s===Zg||s===Qg)if(l===_n)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===Yg)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Kg)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Zg)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Qg)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===Yg)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Kg)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Zg)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Qg)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===Z1||s===Q1||s===q1||s===eE)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===Z1)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===Q1)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===q1)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===eE)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===mA)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===tE||s===nE)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===tE)return l===_n?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===nE)return l===_n?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===rE||s===iE||s===sE||s===oE||s===aE||s===lE||s===cE||s===uE||s===dE||s===fE||s===hE||s===pE||s===mE||s===gE)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===rE)return l===_n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===iE)return l===_n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===sE)return l===_n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===oE)return l===_n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===aE)return l===_n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===lE)return l===_n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===cE)return l===_n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===uE)return l===_n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===dE)return l===_n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===fE)return l===_n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===hE)return l===_n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===pE)return l===_n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===mE)return l===_n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===gE)return l===_n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===qg||s===vE||s===yE)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===qg)return l===_n?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===vE)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===yE)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===l3||s===_E||s===xE||s===EE)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===qg)return a.COMPRESSED_RED_RGTC1_EXT;if(s===_E)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===xE)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===EE)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Ua?r?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:i}}class F3 extends cr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Oo extends jt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const w8={type:"move"};class Q_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Oo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Oo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new X,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new X),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Oo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new X,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new X),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const _ of e.hand.values()){const y=t.getJointPose(_,r),g=this._getHandJoint(c,_);y!==null&&(g.matrix.fromArray(y.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=y.radius),g.visible=y!==null}const d=c.joints["index-finger-tip"],h=c.joints["thumb-tip"],p=d.position.distanceTo(h.position),m=.02,v=.005;c.inputState.pinching&&p>m+v?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=m-v&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(w8)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new Oo;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class M8 extends Qo{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,c=null,d=null,h=null,p=null,m=null,v=null;const _=t.getContextAttributes();let y=null,g=null;const S=[],E=[],w=new Re;let T=null;const b=new cr;b.layers.enable(1),b.viewport=new ln;const R=new cr;R.layers.enable(2),R.viewport=new ln;const B=[b,R],P=new F3;P.layers.enable(1),P.layers.enable(2);let I=null,F=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(oe){let he=S[oe];return he===void 0&&(he=new Q_,S[oe]=he),he.getTargetRaySpace()},this.getControllerGrip=function(oe){let he=S[oe];return he===void 0&&(he=new Q_,S[oe]=he),he.getGripSpace()},this.getHand=function(oe){let he=S[oe];return he===void 0&&(he=new Q_,S[oe]=he),he.getHandSpace()};function $(oe){const he=E.indexOf(oe.inputSource);if(he===-1)return;const Ce=S[he];Ce!==void 0&&(Ce.update(oe.inputSource,oe.frame,c||o),Ce.dispatchEvent({type:oe.type,data:oe.inputSource}))}function Z(){i.removeEventListener("select",$),i.removeEventListener("selectstart",$),i.removeEventListener("selectend",$),i.removeEventListener("squeeze",$),i.removeEventListener("squeezestart",$),i.removeEventListener("squeezeend",$),i.removeEventListener("end",Z),i.removeEventListener("inputsourceschange",U);for(let oe=0;oe<S.length;oe++){const he=E[oe];he!==null&&(E[oe]=null,S[oe].disconnect(he))}I=null,F=null,e.setRenderTarget(y),m=null,p=null,h=null,i=null,g=null,ie.stop(),r.isPresenting=!1,e.setPixelRatio(T),e.setSize(w.width,w.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(oe){s=oe,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(oe){a=oe,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(oe){c=oe},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return h},this.getFrame=function(){return v},this.getSession=function(){return i},this.setSession=async function(oe){if(i=oe,i!==null){if(y=e.getRenderTarget(),i.addEventListener("select",$),i.addEventListener("selectstart",$),i.addEventListener("selectend",$),i.addEventListener("squeeze",$),i.addEventListener("squeezestart",$),i.addEventListener("squeezeend",$),i.addEventListener("end",Z),i.addEventListener("inputsourceschange",U),_.xrCompatible!==!0&&await t.makeXRCompatible(),T=e.getPixelRatio(),e.getSize(w),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const he={antialias:i.renderState.layers===void 0?_.antialias:!0,alpha:!0,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(i,t,he),i.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),g=new Is(m.framebufferWidth,m.framebufferHeight,{format:Ur,type:no,colorSpace:e.outputColorSpace,stencilBuffer:_.stencil})}else{let he=null,Ce=null,be=null;_.depth&&(be=_.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,he=_.stencil?ic:za,Ce=_.stencil?Ua:Do);const Te={colorFormat:t.RGBA8,depthFormat:be,scaleFactor:s};h=new XRWebGLBinding(i,t),p=h.createProjectionLayer(Te),i.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),g=new Is(p.textureWidth,p.textureHeight,{format:Ur,type:no,depthTexture:new CA(p.textureWidth,p.textureHeight,Ce,void 0,void 0,void 0,void 0,void 0,void 0,he),stencilBuffer:_.stencil,colorSpace:e.outputColorSpace,samples:_.antialias?4:0});const Xe=e.properties.get(g);Xe.__ignoreDepthValues=p.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await i.requestReferenceSpace(a),ie.setContext(i),ie.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function U(oe){for(let he=0;he<oe.removed.length;he++){const Ce=oe.removed[he],be=E.indexOf(Ce);be>=0&&(E[be]=null,S[be].disconnect(Ce))}for(let he=0;he<oe.added.length;he++){const Ce=oe.added[he];let be=E.indexOf(Ce);if(be===-1){for(let Xe=0;Xe<S.length;Xe++)if(Xe>=E.length){E.push(Ce),be=Xe;break}else if(E[Xe]===null){E[Xe]=Ce,be=Xe;break}if(be===-1)break}const Te=S[be];Te&&Te.connect(Ce)}}const j=new X,re=new X;function ae(oe,he,Ce){j.setFromMatrixPosition(he.matrixWorld),re.setFromMatrixPosition(Ce.matrixWorld);const be=j.distanceTo(re),Te=he.projectionMatrix.elements,Xe=Ce.projectionMatrix.elements,ct=Te[14]/(Te[10]-1),et=Te[14]/(Te[10]+1),st=(Te[9]+1)/Te[5],te=(Te[9]-1)/Te[5],Pe=(Te[8]-1)/Te[0],we=(Xe[8]+1)/Xe[0],Le=ct*Pe,Ae=ct*we,ot=be/(-Pe+we),Ve=ot*-Pe;he.matrixWorld.decompose(oe.position,oe.quaternion,oe.scale),oe.translateX(Ve),oe.translateZ(ot),oe.matrixWorld.compose(oe.position,oe.quaternion,oe.scale),oe.matrixWorldInverse.copy(oe.matrixWorld).invert();const G=ct+ot,k=et+ot,de=Le-Ve,De=Ae+(be-Ve),fe=st*et/k*G,me=te*et/k*G;oe.projectionMatrix.makePerspective(de,De,fe,me,G,k),oe.projectionMatrixInverse.copy(oe.projectionMatrix).invert()}function H(oe,he){he===null?oe.matrixWorld.copy(oe.matrix):oe.matrixWorld.multiplyMatrices(he.matrixWorld,oe.matrix),oe.matrixWorldInverse.copy(oe.matrixWorld).invert()}this.updateCamera=function(oe){if(i===null)return;P.near=R.near=b.near=oe.near,P.far=R.far=b.far=oe.far,(I!==P.near||F!==P.far)&&(i.updateRenderState({depthNear:P.near,depthFar:P.far}),I=P.near,F=P.far);const he=oe.parent,Ce=P.cameras;H(P,he);for(let be=0;be<Ce.length;be++)H(Ce[be],he);Ce.length===2?ae(P,b,R):P.projectionMatrix.copy(b.projectionMatrix),Y(oe,P,he)};function Y(oe,he,Ce){Ce===null?oe.matrix.copy(he.matrixWorld):(oe.matrix.copy(Ce.matrixWorld),oe.matrix.invert(),oe.matrix.multiply(he.matrixWorld)),oe.matrix.decompose(oe.position,oe.quaternion,oe.scale),oe.updateMatrixWorld(!0),oe.projectionMatrix.copy(he.projectionMatrix),oe.projectionMatrixInverse.copy(he.projectionMatrixInverse),oe.isPerspectiveCamera&&(oe.fov=Zu*2*Math.atan(1/oe.projectionMatrix.elements[5]),oe.zoom=1)}this.getCamera=function(){return P},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(oe){l=oe,p!==null&&(p.fixedFoveation=oe),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=oe)};let V=null;function ee(oe,he){if(d=he.getViewerPose(c||o),v=he,d!==null){const Ce=d.views;m!==null&&(e.setRenderTargetFramebuffer(g,m.framebuffer),e.setRenderTarget(g));let be=!1;Ce.length!==P.cameras.length&&(P.cameras.length=0,be=!0);for(let Te=0;Te<Ce.length;Te++){const Xe=Ce[Te];let ct=null;if(m!==null)ct=m.getViewport(Xe);else{const st=h.getViewSubImage(p,Xe);ct=st.viewport,Te===0&&(e.setRenderTargetTextures(g,st.colorTexture,p.ignoreDepthValues?void 0:st.depthStencilTexture),e.setRenderTarget(g))}let et=B[Te];et===void 0&&(et=new cr,et.layers.enable(Te),et.viewport=new ln,B[Te]=et),et.matrix.fromArray(Xe.transform.matrix),et.matrix.decompose(et.position,et.quaternion,et.scale),et.projectionMatrix.fromArray(Xe.projectionMatrix),et.projectionMatrixInverse.copy(et.projectionMatrix).invert(),et.viewport.set(ct.x,ct.y,ct.width,ct.height),Te===0&&(P.matrix.copy(et.matrix),P.matrix.decompose(P.position,P.quaternion,P.scale)),be===!0&&P.cameras.push(et)}}for(let Ce=0;Ce<S.length;Ce++){const be=E[Ce],Te=S[Ce];be!==null&&Te!==void 0&&Te.update(be,he,c||o)}V&&V(oe,he),he.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:he}),v=null}const ie=new P3;ie.setAnimationLoop(ee),this.setAnimationLoop=function(oe){V=oe},this.dispose=function(){}}}function b8(n,e){function t(y,g){y.matrixAutoUpdate===!0&&y.updateMatrix(),g.value.copy(y.matrix)}function r(y,g){g.color.getRGB(y.fogColor.value,C3(n)),g.isFog?(y.fogNear.value=g.near,y.fogFar.value=g.far):g.isFogExp2&&(y.fogDensity.value=g.density)}function i(y,g,S,E,w){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(y,g):g.isMeshToonMaterial?(s(y,g),h(y,g)):g.isMeshPhongMaterial?(s(y,g),d(y,g)):g.isMeshStandardMaterial?(s(y,g),p(y,g),g.isMeshPhysicalMaterial&&m(y,g,w)):g.isMeshMatcapMaterial?(s(y,g),v(y,g)):g.isMeshDepthMaterial?s(y,g):g.isMeshDistanceMaterial?(s(y,g),_(y,g)):g.isMeshNormalMaterial?s(y,g):g.isLineBasicMaterial?(o(y,g),g.isLineDashedMaterial&&a(y,g)):g.isPointsMaterial?l(y,g,S,E):g.isSpriteMaterial?c(y,g):g.isShadowMaterial?(y.color.value.copy(g.color),y.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(y,g){y.opacity.value=g.opacity,g.color&&y.diffuse.value.copy(g.color),g.emissive&&y.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(y.map.value=g.map,t(g.map,y.mapTransform)),g.alphaMap&&(y.alphaMap.value=g.alphaMap,t(g.alphaMap,y.alphaMapTransform)),g.bumpMap&&(y.bumpMap.value=g.bumpMap,t(g.bumpMap,y.bumpMapTransform),y.bumpScale.value=g.bumpScale,g.side===ni&&(y.bumpScale.value*=-1)),g.normalMap&&(y.normalMap.value=g.normalMap,t(g.normalMap,y.normalMapTransform),y.normalScale.value.copy(g.normalScale),g.side===ni&&y.normalScale.value.negate()),g.displacementMap&&(y.displacementMap.value=g.displacementMap,t(g.displacementMap,y.displacementMapTransform),y.displacementScale.value=g.displacementScale,y.displacementBias.value=g.displacementBias),g.emissiveMap&&(y.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,y.emissiveMapTransform)),g.specularMap&&(y.specularMap.value=g.specularMap,t(g.specularMap,y.specularMapTransform)),g.alphaTest>0&&(y.alphaTest.value=g.alphaTest);const S=e.get(g).envMap;if(S&&(y.envMap.value=S,y.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=g.reflectivity,y.ior.value=g.ior,y.refractionRatio.value=g.refractionRatio),g.lightMap){y.lightMap.value=g.lightMap;const E=n._useLegacyLights===!0?Math.PI:1;y.lightMapIntensity.value=g.lightMapIntensity*E,t(g.lightMap,y.lightMapTransform)}g.aoMap&&(y.aoMap.value=g.aoMap,y.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,y.aoMapTransform))}function o(y,g){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,g.map&&(y.map.value=g.map,t(g.map,y.mapTransform))}function a(y,g){y.dashSize.value=g.dashSize,y.totalSize.value=g.dashSize+g.gapSize,y.scale.value=g.scale}function l(y,g,S,E){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,y.size.value=g.size*S,y.scale.value=E*.5,g.map&&(y.map.value=g.map,t(g.map,y.uvTransform)),g.alphaMap&&(y.alphaMap.value=g.alphaMap,t(g.alphaMap,y.alphaMapTransform)),g.alphaTest>0&&(y.alphaTest.value=g.alphaTest)}function c(y,g){y.diffuse.value.copy(g.color),y.opacity.value=g.opacity,y.rotation.value=g.rotation,g.map&&(y.map.value=g.map,t(g.map,y.mapTransform)),g.alphaMap&&(y.alphaMap.value=g.alphaMap,t(g.alphaMap,y.alphaMapTransform)),g.alphaTest>0&&(y.alphaTest.value=g.alphaTest)}function d(y,g){y.specular.value.copy(g.specular),y.shininess.value=Math.max(g.shininess,1e-4)}function h(y,g){g.gradientMap&&(y.gradientMap.value=g.gradientMap)}function p(y,g){y.metalness.value=g.metalness,g.metalnessMap&&(y.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,y.metalnessMapTransform)),y.roughness.value=g.roughness,g.roughnessMap&&(y.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,y.roughnessMapTransform)),e.get(g).envMap&&(y.envMapIntensity.value=g.envMapIntensity)}function m(y,g,S){y.ior.value=g.ior,g.sheen>0&&(y.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),y.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(y.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,y.sheenColorMapTransform)),g.sheenRoughnessMap&&(y.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,y.sheenRoughnessMapTransform))),g.clearcoat>0&&(y.clearcoat.value=g.clearcoat,y.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(y.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,y.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(y.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===ni&&y.clearcoatNormalScale.value.negate())),g.iridescence>0&&(y.iridescence.value=g.iridescence,y.iridescenceIOR.value=g.iridescenceIOR,y.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(y.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,y.iridescenceMapTransform)),g.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),g.transmission>0&&(y.transmission.value=g.transmission,y.transmissionSamplerMap.value=S.texture,y.transmissionSamplerSize.value.set(S.width,S.height),g.transmissionMap&&(y.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,y.transmissionMapTransform)),y.thickness.value=g.thickness,g.thicknessMap&&(y.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=g.attenuationDistance,y.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(y.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(y.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,y.anisotropyMapTransform))),y.specularIntensity.value=g.specularIntensity,y.specularColor.value.copy(g.specularColor),g.specularColorMap&&(y.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,y.specularColorMapTransform)),g.specularIntensityMap&&(y.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,y.specularIntensityMapTransform))}function v(y,g){g.matcap&&(y.matcap.value=g.matcap)}function _(y,g){const S=e.get(g).light;y.referencePosition.value.setFromMatrixPosition(S.matrixWorld),y.nearDistance.value=S.shadow.camera.near,y.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function C8(n,e,t,r){let i={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(S,E){const w=E.program;r.uniformBlockBinding(S,w)}function c(S,E){let w=i[S.id];w===void 0&&(v(S),w=d(S),i[S.id]=w,S.addEventListener("dispose",y));const T=E.program;r.updateUBOMapping(S,T);const b=e.render.frame;s[S.id]!==b&&(p(S),s[S.id]=b)}function d(S){const E=h();S.__bindingPointIndex=E;const w=n.createBuffer(),T=S.__size,b=S.usage;return n.bindBuffer(n.UNIFORM_BUFFER,w),n.bufferData(n.UNIFORM_BUFFER,T,b),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,E,w),w}function h(){for(let S=0;S<a;S++)if(o.indexOf(S)===-1)return o.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(S){const E=i[S.id],w=S.uniforms,T=S.__cache;n.bindBuffer(n.UNIFORM_BUFFER,E);for(let b=0,R=w.length;b<R;b++){const B=Array.isArray(w[b])?w[b]:[w[b]];for(let P=0,I=B.length;P<I;P++){const F=B[P];if(m(F,b,P,T)===!0){const $=F.__offset,Z=Array.isArray(F.value)?F.value:[F.value];let U=0;for(let j=0;j<Z.length;j++){const re=Z[j],ae=_(re);typeof re=="number"||typeof re=="boolean"?(F.__data[0]=re,n.bufferSubData(n.UNIFORM_BUFFER,$+U,F.__data)):re.isMatrix3?(F.__data[0]=re.elements[0],F.__data[1]=re.elements[1],F.__data[2]=re.elements[2],F.__data[3]=0,F.__data[4]=re.elements[3],F.__data[5]=re.elements[4],F.__data[6]=re.elements[5],F.__data[7]=0,F.__data[8]=re.elements[6],F.__data[9]=re.elements[7],F.__data[10]=re.elements[8],F.__data[11]=0):(re.toArray(F.__data,U),U+=ae.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,$,F.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(S,E,w,T){const b=S.value,R=E+"_"+w;if(T[R]===void 0)return typeof b=="number"||typeof b=="boolean"?T[R]=b:T[R]=b.clone(),!0;{const B=T[R];if(typeof b=="number"||typeof b=="boolean"){if(B!==b)return T[R]=b,!0}else if(B.equals(b)===!1)return B.copy(b),!0}return!1}function v(S){const E=S.uniforms;let w=0;const T=16;for(let R=0,B=E.length;R<B;R++){const P=Array.isArray(E[R])?E[R]:[E[R]];for(let I=0,F=P.length;I<F;I++){const $=P[I],Z=Array.isArray($.value)?$.value:[$.value];for(let U=0,j=Z.length;U<j;U++){const re=Z[U],ae=_(re),H=w%T;H!==0&&T-H<ae.boundary&&(w+=T-H),$.__data=new Float32Array(ae.storage/Float32Array.BYTES_PER_ELEMENT),$.__offset=w,w+=ae.storage}}}const b=w%T;return b>0&&(w+=T-b),S.__size=w,S.__cache={},this}function _(S){const E={boundary:0,storage:0};return typeof S=="number"||typeof S=="boolean"?(E.boundary=4,E.storage=4):S.isVector2?(E.boundary=8,E.storage=8):S.isVector3||S.isColor?(E.boundary=16,E.storage=12):S.isVector4?(E.boundary=16,E.storage=16):S.isMatrix3?(E.boundary=48,E.storage=48):S.isMatrix4?(E.boundary=64,E.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),E}function y(S){const E=S.target;E.removeEventListener("dispose",y);const w=o.indexOf(E.__bindingPointIndex);o.splice(w,1),n.deleteBuffer(i[E.id]),delete i[E.id],delete s[E.id]}function g(){for(const S in i)n.deleteBuffer(i[S]);o=[],i={},s={}}return{bind:l,update:c,dispose:g}}class PA{constructor(e={}){const{canvas:t=w3(),context:r=null,depth:i=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:h=!1}=e;this.isWebGLRenderer=!0;let p;r!==null?p=r.getContextAttributes().alpha:p=o;const m=new Uint32Array(4),v=new Int32Array(4);let _=null,y=null;const g=[],S=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=lr,this._useLegacyLights=!1,this.toneMapping=to,this.toneMappingExposure=1;const E=this;let w=!1,T=0,b=0,R=null,B=-1,P=null;const I=new ln,F=new ln;let $=null;const Z=new je(0);let U=0,j=t.width,re=t.height,ae=1,H=null,Y=null;const V=new ln(0,0,j,re),ee=new ln(0,0,j,re);let ie=!1;const oe=new Zh;let he=!1,Ce=!1,be=null;const Te=new _t,Xe=new Re,ct=new X,et={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function st(){return R===null?ae:1}let te=r;function Pe(D,W){for(let J=0;J<D.length;J++){const ne=D[J],Q=t.getContext(ne,W);if(Q!==null)return Q}return null}try{const D={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:d,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${fd}`),t.addEventListener("webglcontextlost",ve,!1),t.addEventListener("webglcontextrestored",le,!1),t.addEventListener("webglcontextcreationerror",We,!1),te===null){const W=["webgl2","webgl","experimental-webgl"];if(E.isWebGL1Renderer===!0&&W.shift(),te=Pe(W,D),te===null)throw Pe(W)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&te instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),te.getShaderPrecisionFormat===void 0&&(te.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(D){throw console.error("THREE.WebGLRenderer: "+D.message),D}let we,Le,Ae,ot,Ve,G,k,de,De,fe,me,Ue,Ne,He,lt,pt,Ie,Ht,Ct,ft,Ye,Ze,gt,wt;function Rt(){we=new HH(te),Le=new OH(te,we,e),we.init(Le),Ze=new N3(te,we,Le),Ae=new S8(te,we,Le),ot=new WH(te),Ve=new u8,G=new A8(te,we,Ae,Ve,Le,Ze,ot),k=new FH(E),de=new zH(E),De=new Q4(te,Le),gt=new BH(te,we,De,Le),fe=new GH(te,De,ot,gt),me=new JH(te,fe,De,ot),Ct=new XH(te,Le,G),pt=new NH(Ve),Ue=new c8(E,k,de,we,Le,gt,pt),Ne=new b8(E,Ve),He=new f8,lt=new y8(we,Le),Ht=new LH(E,k,de,Ae,me,p,l),Ie=new E8(E,me,Le),wt=new C8(te,ot,Le,Ae),ft=new DH(te,we,ot,Le),Ye=new VH(te,we,ot,Le),ot.programs=Ue.programs,E.capabilities=Le,E.extensions=we,E.properties=Ve,E.renderLists=He,E.shadowMap=Ie,E.state=Ae,E.info=ot}Rt();const Bt=new M8(E,te);this.xr=Bt,this.getContext=function(){return te},this.getContextAttributes=function(){return te.getContextAttributes()},this.forceContextLoss=function(){const D=we.get("WEBGL_lose_context");D&&D.loseContext()},this.forceContextRestore=function(){const D=we.get("WEBGL_lose_context");D&&D.restoreContext()},this.getPixelRatio=function(){return ae},this.setPixelRatio=function(D){D!==void 0&&(ae=D,this.setSize(j,re,!1))},this.getSize=function(D){return D.set(j,re)},this.setSize=function(D,W,J=!0){if(Bt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}j=D,re=W,t.width=Math.floor(D*ae),t.height=Math.floor(W*ae),J===!0&&(t.style.width=D+"px",t.style.height=W+"px"),this.setViewport(0,0,D,W)},this.getDrawingBufferSize=function(D){return D.set(j*ae,re*ae).floor()},this.setDrawingBufferSize=function(D,W,J){j=D,re=W,ae=J,t.width=Math.floor(D*J),t.height=Math.floor(W*J),this.setViewport(0,0,D,W)},this.getCurrentViewport=function(D){return D.copy(I)},this.getViewport=function(D){return D.copy(V)},this.setViewport=function(D,W,J,ne){D.isVector4?V.set(D.x,D.y,D.z,D.w):V.set(D,W,J,ne),Ae.viewport(I.copy(V).multiplyScalar(ae).floor())},this.getScissor=function(D){return D.copy(ee)},this.setScissor=function(D,W,J,ne){D.isVector4?ee.set(D.x,D.y,D.z,D.w):ee.set(D,W,J,ne),Ae.scissor(F.copy(ee).multiplyScalar(ae).floor())},this.getScissorTest=function(){return ie},this.setScissorTest=function(D){Ae.setScissorTest(ie=D)},this.setOpaqueSort=function(D){H=D},this.setTransparentSort=function(D){Y=D},this.getClearColor=function(D){return D.copy(Ht.getClearColor())},this.setClearColor=function(){Ht.setClearColor.apply(Ht,arguments)},this.getClearAlpha=function(){return Ht.getClearAlpha()},this.setClearAlpha=function(){Ht.setClearAlpha.apply(Ht,arguments)},this.clear=function(D=!0,W=!0,J=!0){let ne=0;if(D){let Q=!1;if(R!==null){const ge=R.texture.format;Q=ge===pA||ge===hA||ge===fA}if(Q){const ge=R.texture.type,ye=ge===no||ge===Do||ge===yv||ge===Ua||ge===cA||ge===uA,Ee=Ht.getClearColor(),xe=Ht.getClearAlpha(),Qe=Ee.r,Be=Ee.g,Oe=Ee.b;ye?(m[0]=Qe,m[1]=Be,m[2]=Oe,m[3]=xe,te.clearBufferuiv(te.COLOR,0,m)):(v[0]=Qe,v[1]=Be,v[2]=Oe,v[3]=xe,te.clearBufferiv(te.COLOR,0,v))}else ne|=te.COLOR_BUFFER_BIT}W&&(ne|=te.DEPTH_BUFFER_BIT),J&&(ne|=te.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),te.clear(ne)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ve,!1),t.removeEventListener("webglcontextrestored",le,!1),t.removeEventListener("webglcontextcreationerror",We,!1),He.dispose(),lt.dispose(),Ve.dispose(),k.dispose(),de.dispose(),me.dispose(),gt.dispose(),wt.dispose(),Ue.dispose(),Bt.dispose(),Bt.removeEventListener("sessionstart",qn),Bt.removeEventListener("sessionend",on),be&&(be.dispose(),be=null),sr.stop()};function ve(D){D.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function le(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const D=ot.autoReset,W=Ie.enabled,J=Ie.autoUpdate,ne=Ie.needsUpdate,Q=Ie.type;Rt(),ot.autoReset=D,Ie.enabled=W,Ie.autoUpdate=J,Ie.needsUpdate=ne,Ie.type=Q}function We(D){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",D.statusMessage)}function $e(D){const W=D.target;W.removeEventListener("dispose",$e),Et(W)}function Et(D){mt(D),Ve.remove(D)}function mt(D){const W=Ve.get(D).programs;W!==void 0&&(W.forEach(function(J){Ue.releaseProgram(J)}),D.isShaderMaterial&&Ue.releaseShaderCache(D))}this.renderBufferDirect=function(D,W,J,ne,Q,ge){W===null&&(W=et);const ye=Q.isMesh&&Q.matrixWorld.determinant()<0,Ee=O(D,W,J,ne,Q);Ae.setMaterial(ne,ye);let xe=J.index,Qe=1;if(ne.wireframe===!0){if(xe=fe.getWireframeAttribute(J),xe===void 0)return;Qe=2}const Be=J.drawRange,Oe=J.attributes.position;let tt=Be.start*Qe,ht=(Be.start+Be.count)*Qe;ge!==null&&(tt=Math.max(tt,ge.start*Qe),ht=Math.min(ht,(ge.start+ge.count)*Qe)),xe!==null?(tt=Math.max(tt,0),ht=Math.min(ht,xe.count)):Oe!=null&&(tt=Math.max(tt,0),ht=Math.min(ht,Oe.count));const vt=ht-tt;if(vt<0||vt===1/0)return;gt.setup(Q,ne,Ee,J,xe);let Tt,qe=ft;if(xe!==null&&(Tt=De.get(xe),qe=Ye,qe.setIndex(Tt)),Q.isMesh)ne.wireframe===!0?(Ae.setLineWidth(ne.wireframeLinewidth*st()),qe.setMode(te.LINES)):qe.setMode(te.TRIANGLES);else if(Q.isLine){let ze=ne.linewidth;ze===void 0&&(ze=1),Ae.setLineWidth(ze*st()),Q.isLineSegments?qe.setMode(te.LINES):Q.isLineLoop?qe.setMode(te.LINE_LOOP):qe.setMode(te.LINE_STRIP)}else Q.isPoints?qe.setMode(te.POINTS):Q.isSprite&&qe.setMode(te.TRIANGLES);if(Q.isBatchedMesh)qe.renderMultiDraw(Q._multiDrawStarts,Q._multiDrawCounts,Q._multiDrawCount);else if(Q.isInstancedMesh)qe.renderInstances(tt,vt,Q.count);else if(J.isInstancedBufferGeometry){const ze=J._maxInstanceCount!==void 0?J._maxInstanceCount:1/0,Gt=Math.min(J.instanceCount,ze);qe.renderInstances(tt,vt,Gt)}else qe.render(tt,vt)};function sn(D,W,J){D.transparent===!0&&D.side===ns&&D.forceSinglePass===!1?(D.side=ni,D.needsUpdate=!0,Dt(D,W,J),D.side=so,D.needsUpdate=!0,Dt(D,W,J),D.side=ns):Dt(D,W,J)}this.compile=function(D,W,J=null){J===null&&(J=D),y=lt.get(J),y.init(),S.push(y),J.traverseVisible(function(Q){Q.isLight&&Q.layers.test(W.layers)&&(y.pushLight(Q),Q.castShadow&&y.pushShadow(Q))}),D!==J&&D.traverseVisible(function(Q){Q.isLight&&Q.layers.test(W.layers)&&(y.pushLight(Q),Q.castShadow&&y.pushShadow(Q))}),y.setupLights(E._useLegacyLights);const ne=new Set;return D.traverse(function(Q){const ge=Q.material;if(ge)if(Array.isArray(ge))for(let ye=0;ye<ge.length;ye++){const Ee=ge[ye];sn(Ee,J,Q),ne.add(Ee)}else sn(ge,J,Q),ne.add(ge)}),S.pop(),y=null,ne},this.compileAsync=function(D,W,J=null){const ne=this.compile(D,W,J);return new Promise(Q=>{function ge(){if(ne.forEach(function(ye){Ve.get(ye).currentProgram.isReady()&&ne.delete(ye)}),ne.size===0){Q(D);return}setTimeout(ge,10)}we.get("KHR_parallel_shader_compile")!==null?ge():setTimeout(ge,10)})};let rn=null;function Pn(D){rn&&rn(D)}function qn(){sr.stop()}function on(){sr.start()}const sr=new P3;sr.setAnimationLoop(Pn),typeof self<"u"&&sr.setContext(self),this.setAnimationLoop=function(D){rn=D,Bt.setAnimationLoop(D),D===null?sr.stop():sr.start()},Bt.addEventListener("sessionstart",qn),Bt.addEventListener("sessionend",on),this.render=function(D,W){if(W!==void 0&&W.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(w===!0)return;D.matrixWorldAutoUpdate===!0&&D.updateMatrixWorld(),W.parent===null&&W.matrixWorldAutoUpdate===!0&&W.updateMatrixWorld(),Bt.enabled===!0&&Bt.isPresenting===!0&&(Bt.cameraAutoUpdate===!0&&Bt.updateCamera(W),W=Bt.getCamera()),D.isScene===!0&&D.onBeforeRender(E,D,W,R),y=lt.get(D,S.length),y.init(),S.push(y),Te.multiplyMatrices(W.projectionMatrix,W.matrixWorldInverse),oe.setFromProjectionMatrix(Te),Ce=this.localClippingEnabled,he=pt.init(this.clippingPlanes,Ce),_=He.get(D,g.length),_.init(),g.push(_),si(D,W,0,E.sortObjects),_.finish(),E.sortObjects===!0&&_.sort(H,Y),this.info.render.frame++,he===!0&&pt.beginShadows();const J=y.state.shadowsArray;if(Ie.render(J,D,W),he===!0&&pt.endShadows(),this.info.autoReset===!0&&this.info.reset(),Ht.render(_,D),y.setupLights(E._useLegacyLights),W.isArrayCamera){const ne=W.cameras;for(let Q=0,ge=ne.length;Q<ge;Q++){const ye=ne[Q];ks(_,D,ye,ye.viewport)}}else ks(_,D,W);R!==null&&(G.updateMultisampleRenderTarget(R),G.updateRenderTargetMipmap(R)),D.isScene===!0&&D.onAfterRender(E,D,W),gt.resetDefaultState(),B=-1,P=null,S.pop(),S.length>0?y=S[S.length-1]:y=null,g.pop(),g.length>0?_=g[g.length-1]:_=null};function si(D,W,J,ne){if(D.visible===!1)return;if(D.layers.test(W.layers)){if(D.isGroup)J=D.renderOrder;else if(D.isLOD)D.autoUpdate===!0&&D.update(W);else if(D.isLight)y.pushLight(D),D.castShadow&&y.pushShadow(D);else if(D.isSprite){if(!D.frustumCulled||oe.intersectsSprite(D)){ne&&ct.setFromMatrixPosition(D.matrixWorld).applyMatrix4(Te);const ye=me.update(D),Ee=D.material;Ee.visible&&_.push(D,ye,Ee,J,ct.z,null)}}else if((D.isMesh||D.isLine||D.isPoints)&&(!D.frustumCulled||oe.intersectsObject(D))){const ye=me.update(D),Ee=D.material;if(ne&&(D.boundingSphere!==void 0?(D.boundingSphere===null&&D.computeBoundingSphere(),ct.copy(D.boundingSphere.center)):(ye.boundingSphere===null&&ye.computeBoundingSphere(),ct.copy(ye.boundingSphere.center)),ct.applyMatrix4(D.matrixWorld).applyMatrix4(Te)),Array.isArray(Ee)){const xe=ye.groups;for(let Qe=0,Be=xe.length;Qe<Be;Qe++){const Oe=xe[Qe],tt=Ee[Oe.materialIndex];tt&&tt.visible&&_.push(D,ye,tt,J,ct.z,Oe)}}else Ee.visible&&_.push(D,ye,Ee,J,ct.z,null)}}const ge=D.children;for(let ye=0,Ee=ge.length;ye<Ee;ye++)si(ge[ye],W,J,ne)}function ks(D,W,J,ne){const Q=D.opaque,ge=D.transmissive,ye=D.transparent;y.setupLightsView(J),he===!0&&pt.setGlobalState(E.clippingPlanes,J),ge.length>0&&sl(Q,ge,W,J),ne&&Ae.viewport(I.copy(ne)),Q.length>0&&Ui(Q,W,J),ge.length>0&&Ui(ge,W,J),ye.length>0&&Ui(ye,W,J),Ae.buffers.depth.setTest(!0),Ae.buffers.depth.setMask(!0),Ae.buffers.color.setMask(!0),Ae.setPolygonOffset(!1)}function sl(D,W,J,ne){if((J.isScene===!0?J.overrideMaterial:null)!==null)return;const ge=Le.isWebGL2;be===null&&(be=new Is(1,1,{generateMipmaps:!0,type:we.has("EXT_color_buffer_half_float")?qr:no,minFilter:ao,samples:ge?4:0})),E.getDrawingBufferSize(Xe),ge?be.setSize(Xe.x,Xe.y):be.setSize(O0(Xe.x),O0(Xe.y));const ye=E.getRenderTarget();E.setRenderTarget(be),E.getClearColor(Z),U=E.getClearAlpha(),U<1&&E.setClearColor(16777215,.5),E.clear();const Ee=E.toneMapping;E.toneMapping=to,Ui(D,J,ne),G.updateMultisampleRenderTarget(be),G.updateRenderTargetMipmap(be);let xe=!1;for(let Qe=0,Be=W.length;Qe<Be;Qe++){const Oe=W[Qe],tt=Oe.object,ht=Oe.geometry,vt=Oe.material,Tt=Oe.group;if(vt.side===ns&&tt.layers.test(ne.layers)){const qe=vt.side;vt.side=ni,vt.needsUpdate=!0,oi(tt,J,ne,ht,vt,Tt),vt.side=qe,vt.needsUpdate=!0,xe=!0}}xe===!0&&(G.updateMultisampleRenderTarget(be),G.updateRenderTargetMipmap(be)),E.setRenderTarget(ye),E.setClearColor(Z,U),E.toneMapping=Ee}function Ui(D,W,J){const ne=W.isScene===!0?W.overrideMaterial:null;for(let Q=0,ge=D.length;Q<ge;Q++){const ye=D[Q],Ee=ye.object,xe=ye.geometry,Qe=ne===null?ye.material:ne,Be=ye.group;Ee.layers.test(J.layers)&&oi(Ee,W,J,xe,Qe,Be)}}function oi(D,W,J,ne,Q,ge){D.onBeforeRender(E,W,J,ne,Q,ge),D.modelViewMatrix.multiplyMatrices(J.matrixWorldInverse,D.matrixWorld),D.normalMatrix.getNormalMatrix(D.modelViewMatrix),Q.onBeforeRender(E,W,J,ne,D,ge),Q.transparent===!0&&Q.side===ns&&Q.forceSinglePass===!1?(Q.side=ni,Q.needsUpdate=!0,E.renderBufferDirect(J,W,ne,Q,D,ge),Q.side=so,Q.needsUpdate=!0,E.renderBufferDirect(J,W,ne,Q,D,ge),Q.side=ns):E.renderBufferDirect(J,W,ne,Q,D,ge),D.onAfterRender(E,W,J,ne,Q,ge)}function Dt(D,W,J){W.isScene!==!0&&(W=et);const ne=Ve.get(D),Q=y.state.lights,ge=y.state.shadowsArray,ye=Q.state.version,Ee=Ue.getParameters(D,Q.state,ge,W,J),xe=Ue.getProgramCacheKey(Ee);let Qe=ne.programs;ne.environment=D.isMeshStandardMaterial?W.environment:null,ne.fog=W.fog,ne.envMap=(D.isMeshStandardMaterial?de:k).get(D.envMap||ne.environment),Qe===void 0&&(D.addEventListener("dispose",$e),Qe=new Map,ne.programs=Qe);let Be=Qe.get(xe);if(Be!==void 0){if(ne.currentProgram===Be&&ne.lightsStateVersion===ye)return vc(D,Ee),Be}else Ee.uniforms=Ue.getUniforms(D),D.onBuild(J,Ee,E),D.onBeforeCompile(Ee,E),Be=Ue.acquireProgram(Ee,xe),Qe.set(xe,Be),ne.uniforms=Ee.uniforms;const Oe=ne.uniforms;return(!D.isShaderMaterial&&!D.isRawShaderMaterial||D.clipping===!0)&&(Oe.clippingPlanes=pt.uniform),vc(D,Ee),ne.needsLights=se(D),ne.lightsStateVersion=ye,ne.needsLights&&(Oe.ambientLightColor.value=Q.state.ambient,Oe.lightProbe.value=Q.state.probe,Oe.directionalLights.value=Q.state.directional,Oe.directionalLightShadows.value=Q.state.directionalShadow,Oe.spotLights.value=Q.state.spot,Oe.spotLightShadows.value=Q.state.spotShadow,Oe.rectAreaLights.value=Q.state.rectArea,Oe.ltc_1.value=Q.state.rectAreaLTC1,Oe.ltc_2.value=Q.state.rectAreaLTC2,Oe.pointLights.value=Q.state.point,Oe.pointLightShadows.value=Q.state.pointShadow,Oe.hemisphereLights.value=Q.state.hemi,Oe.directionalShadowMap.value=Q.state.directionalShadowMap,Oe.directionalShadowMatrix.value=Q.state.directionalShadowMatrix,Oe.spotShadowMap.value=Q.state.spotShadowMap,Oe.spotLightMatrix.value=Q.state.spotLightMatrix,Oe.spotLightMap.value=Q.state.spotLightMap,Oe.pointShadowMap.value=Q.state.pointShadowMap,Oe.pointShadowMatrix.value=Q.state.pointShadowMatrix),ne.currentProgram=Be,ne.uniformsList=null,Be}function ol(D){if(D.uniformsList===null){const W=D.currentProgram.getUniforms();D.uniformsList=t0.seqWithValue(W.seq,D.uniforms)}return D.uniformsList}function vc(D,W){const J=Ve.get(D);J.outputColorSpace=W.outputColorSpace,J.batching=W.batching,J.instancing=W.instancing,J.instancingColor=W.instancingColor,J.skinning=W.skinning,J.morphTargets=W.morphTargets,J.morphNormals=W.morphNormals,J.morphColors=W.morphColors,J.morphTargetsCount=W.morphTargetsCount,J.numClippingPlanes=W.numClippingPlanes,J.numIntersection=W.numClipIntersection,J.vertexAlphas=W.vertexAlphas,J.vertexTangents=W.vertexTangents,J.toneMapping=W.toneMapping}function O(D,W,J,ne,Q){W.isScene!==!0&&(W=et),G.resetTextureUnits();const ge=W.fog,ye=ne.isMeshStandardMaterial?W.environment:null,Ee=R===null?E.outputColorSpace:R.isXRRenderTarget===!0?R.texture.colorSpace:lo,xe=(ne.isMeshStandardMaterial?de:k).get(ne.envMap||ye),Qe=ne.vertexColors===!0&&!!J.attributes.color&&J.attributes.color.itemSize===4,Be=!!J.attributes.tangent&&(!!ne.normalMap||ne.anisotropy>0),Oe=!!J.morphAttributes.position,tt=!!J.morphAttributes.normal,ht=!!J.morphAttributes.color;let vt=to;ne.toneMapped&&(R===null||R.isXRRenderTarget===!0)&&(vt=E.toneMapping);const Tt=J.morphAttributes.position||J.morphAttributes.normal||J.morphAttributes.color,qe=Tt!==void 0?Tt.length:0,ze=Ve.get(ne),Gt=y.state.lights;if(he===!0&&(Ce===!0||D!==P)){const Ot=D===P&&ne.id===B;pt.setState(ne,D,Ot)}let At=!1;ne.version===ze.__version?(ze.needsLights&&ze.lightsStateVersion!==Gt.state.version||ze.outputColorSpace!==Ee||Q.isBatchedMesh&&ze.batching===!1||!Q.isBatchedMesh&&ze.batching===!0||Q.isInstancedMesh&&ze.instancing===!1||!Q.isInstancedMesh&&ze.instancing===!0||Q.isSkinnedMesh&&ze.skinning===!1||!Q.isSkinnedMesh&&ze.skinning===!0||Q.isInstancedMesh&&ze.instancingColor===!0&&Q.instanceColor===null||Q.isInstancedMesh&&ze.instancingColor===!1&&Q.instanceColor!==null||ze.envMap!==xe||ne.fog===!0&&ze.fog!==ge||ze.numClippingPlanes!==void 0&&(ze.numClippingPlanes!==pt.numPlanes||ze.numIntersection!==pt.numIntersection)||ze.vertexAlphas!==Qe||ze.vertexTangents!==Be||ze.morphTargets!==Oe||ze.morphNormals!==tt||ze.morphColors!==ht||ze.toneMapping!==vt||Le.isWebGL2===!0&&ze.morphTargetsCount!==qe)&&(At=!0):(At=!0,ze.__version=ne.version);let bt=ze.currentProgram;At===!0&&(bt=Dt(ne,W,Q));let cn=!1,Gn=!1,bn=!1;const Yt=bt.getUniforms(),Wt=ze.uniforms;if(Ae.useProgram(bt.program)&&(cn=!0,Gn=!0,bn=!0),ne.id!==B&&(B=ne.id,Gn=!0),cn||P!==D){Yt.setValue(te,"projectionMatrix",D.projectionMatrix),Yt.setValue(te,"viewMatrix",D.matrixWorldInverse);const Ot=Yt.map.cameraPosition;Ot!==void 0&&Ot.setValue(te,ct.setFromMatrixPosition(D.matrixWorld)),Le.logarithmicDepthBuffer&&Yt.setValue(te,"logDepthBufFC",2/(Math.log(D.far+1)/Math.LN2)),(ne.isMeshPhongMaterial||ne.isMeshToonMaterial||ne.isMeshLambertMaterial||ne.isMeshBasicMaterial||ne.isMeshStandardMaterial||ne.isShaderMaterial)&&Yt.setValue(te,"isOrthographic",D.isOrthographicCamera===!0),P!==D&&(P=D,Gn=!0,bn=!0)}if(Q.isSkinnedMesh){Yt.setOptional(te,Q,"bindMatrix"),Yt.setOptional(te,Q,"bindMatrixInverse");const Ot=Q.skeleton;Ot&&(Le.floatVertexTextures?(Ot.boneTexture===null&&Ot.computeBoneTexture(),Yt.setValue(te,"boneTexture",Ot.boneTexture,G)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}Q.isBatchedMesh&&(Yt.setOptional(te,Q,"batchingTexture"),Yt.setValue(te,"batchingTexture",Q._matricesTexture,G));const In=J.morphAttributes;if((In.position!==void 0||In.normal!==void 0||In.color!==void 0&&Le.isWebGL2===!0)&&Ct.update(Q,J,bt),(Gn||ze.receiveShadow!==Q.receiveShadow)&&(ze.receiveShadow=Q.receiveShadow,Yt.setValue(te,"receiveShadow",Q.receiveShadow)),ne.isMeshGouraudMaterial&&ne.envMap!==null&&(Wt.envMap.value=xe,Wt.flipEnvMap.value=xe.isCubeTexture&&xe.isRenderTargetTexture===!1?-1:1),Gn&&(Yt.setValue(te,"toneMappingExposure",E.toneMappingExposure),ze.needsLights&&z(Wt,bn),ge&&ne.fog===!0&&Ne.refreshFogUniforms(Wt,ge),Ne.refreshMaterialUniforms(Wt,ne,ae,re,be),t0.upload(te,ol(ze),Wt,G)),ne.isShaderMaterial&&ne.uniformsNeedUpdate===!0&&(t0.upload(te,ol(ze),Wt,G),ne.uniformsNeedUpdate=!1),ne.isSpriteMaterial&&Yt.setValue(te,"center",Q.center),Yt.setValue(te,"modelViewMatrix",Q.modelViewMatrix),Yt.setValue(te,"normalMatrix",Q.normalMatrix),Yt.setValue(te,"modelMatrix",Q.matrixWorld),ne.isShaderMaterial||ne.isRawShaderMaterial){const Ot=ne.uniformsGroups;for(let $t=0,gn=Ot.length;$t<gn;$t++)if(Le.isWebGL2){const zi=Ot[$t];wt.update(zi,bt),wt.bind(zi,bt)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return bt}function z(D,W){D.ambientLightColor.needsUpdate=W,D.lightProbe.needsUpdate=W,D.directionalLights.needsUpdate=W,D.directionalLightShadows.needsUpdate=W,D.pointLights.needsUpdate=W,D.pointLightShadows.needsUpdate=W,D.spotLights.needsUpdate=W,D.spotLightShadows.needsUpdate=W,D.rectAreaLights.needsUpdate=W,D.hemisphereLights.needsUpdate=W}function se(D){return D.isMeshLambertMaterial||D.isMeshToonMaterial||D.isMeshPhongMaterial||D.isMeshStandardMaterial||D.isShadowMaterial||D.isShaderMaterial&&D.lights===!0}this.getActiveCubeFace=function(){return T},this.getActiveMipmapLevel=function(){return b},this.getRenderTarget=function(){return R},this.setRenderTargetTextures=function(D,W,J){Ve.get(D.texture).__webglTexture=W,Ve.get(D.depthTexture).__webglTexture=J;const ne=Ve.get(D);ne.__hasExternalTextures=!0,ne.__hasExternalTextures&&(ne.__autoAllocateDepthBuffer=J===void 0,ne.__autoAllocateDepthBuffer||we.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ne.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(D,W){const J=Ve.get(D);J.__webglFramebuffer=W,J.__useDefaultFramebuffer=W===void 0},this.setRenderTarget=function(D,W=0,J=0){R=D,T=W,b=J;let ne=!0,Q=null,ge=!1,ye=!1;if(D){const xe=Ve.get(D);xe.__useDefaultFramebuffer!==void 0?(Ae.bindFramebuffer(te.FRAMEBUFFER,null),ne=!1):xe.__webglFramebuffer===void 0?G.setupRenderTarget(D):xe.__hasExternalTextures&&G.rebindTextures(D,Ve.get(D.texture).__webglTexture,Ve.get(D.depthTexture).__webglTexture);const Qe=D.texture;(Qe.isData3DTexture||Qe.isDataArrayTexture||Qe.isCompressedArrayTexture)&&(ye=!0);const Be=Ve.get(D).__webglFramebuffer;D.isWebGLCubeRenderTarget?(Array.isArray(Be[W])?Q=Be[W][J]:Q=Be[W],ge=!0):Le.isWebGL2&&D.samples>0&&G.useMultisampledRTT(D)===!1?Q=Ve.get(D).__webglMultisampledFramebuffer:Array.isArray(Be)?Q=Be[J]:Q=Be,I.copy(D.viewport),F.copy(D.scissor),$=D.scissorTest}else I.copy(V).multiplyScalar(ae).floor(),F.copy(ee).multiplyScalar(ae).floor(),$=ie;if(Ae.bindFramebuffer(te.FRAMEBUFFER,Q)&&Le.drawBuffers&&ne&&Ae.drawBuffers(D,Q),Ae.viewport(I),Ae.scissor(F),Ae.setScissorTest($),ge){const xe=Ve.get(D.texture);te.framebufferTexture2D(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_CUBE_MAP_POSITIVE_X+W,xe.__webglTexture,J)}else if(ye){const xe=Ve.get(D.texture),Qe=W||0;te.framebufferTextureLayer(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,xe.__webglTexture,J||0,Qe)}B=-1},this.readRenderTargetPixels=function(D,W,J,ne,Q,ge,ye){if(!(D&&D.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ee=Ve.get(D).__webglFramebuffer;if(D.isWebGLCubeRenderTarget&&ye!==void 0&&(Ee=Ee[ye]),Ee){Ae.bindFramebuffer(te.FRAMEBUFFER,Ee);try{const xe=D.texture,Qe=xe.format,Be=xe.type;if(Qe!==Ur&&Ze.convert(Qe)!==te.getParameter(te.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Oe=Be===qr&&(we.has("EXT_color_buffer_half_float")||Le.isWebGL2&&we.has("EXT_color_buffer_float"));if(Be!==no&&Ze.convert(Be)!==te.getParameter(te.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Be===wr&&(Le.isWebGL2||we.has("OES_texture_float")||we.has("WEBGL_color_buffer_float")))&&!Oe){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}W>=0&&W<=D.width-ne&&J>=0&&J<=D.height-Q&&te.readPixels(W,J,ne,Q,Ze.convert(Qe),Ze.convert(Be),ge)}finally{const xe=R!==null?Ve.get(R).__webglFramebuffer:null;Ae.bindFramebuffer(te.FRAMEBUFFER,xe)}}},this.copyFramebufferToTexture=function(D,W,J=0){const ne=Math.pow(2,-J),Q=Math.floor(W.image.width*ne),ge=Math.floor(W.image.height*ne);G.setTexture2D(W,0),te.copyTexSubImage2D(te.TEXTURE_2D,J,0,0,D.x,D.y,Q,ge),Ae.unbindTexture()},this.copyTextureToTexture=function(D,W,J,ne=0){const Q=W.image.width,ge=W.image.height,ye=Ze.convert(J.format),Ee=Ze.convert(J.type);G.setTexture2D(J,0),te.pixelStorei(te.UNPACK_FLIP_Y_WEBGL,J.flipY),te.pixelStorei(te.UNPACK_PREMULTIPLY_ALPHA_WEBGL,J.premultiplyAlpha),te.pixelStorei(te.UNPACK_ALIGNMENT,J.unpackAlignment),W.isDataTexture?te.texSubImage2D(te.TEXTURE_2D,ne,D.x,D.y,Q,ge,ye,Ee,W.image.data):W.isCompressedTexture?te.compressedTexSubImage2D(te.TEXTURE_2D,ne,D.x,D.y,W.mipmaps[0].width,W.mipmaps[0].height,ye,W.mipmaps[0].data):te.texSubImage2D(te.TEXTURE_2D,ne,D.x,D.y,ye,Ee,W.image),ne===0&&J.generateMipmaps&&te.generateMipmap(te.TEXTURE_2D),Ae.unbindTexture()},this.copyTextureToTexture3D=function(D,W,J,ne,Q=0){if(E.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const ge=D.max.x-D.min.x+1,ye=D.max.y-D.min.y+1,Ee=D.max.z-D.min.z+1,xe=Ze.convert(ne.format),Qe=Ze.convert(ne.type);let Be;if(ne.isData3DTexture)G.setTexture3D(ne,0),Be=te.TEXTURE_3D;else if(ne.isDataArrayTexture||ne.isCompressedArrayTexture)G.setTexture2DArray(ne,0),Be=te.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}te.pixelStorei(te.UNPACK_FLIP_Y_WEBGL,ne.flipY),te.pixelStorei(te.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ne.premultiplyAlpha),te.pixelStorei(te.UNPACK_ALIGNMENT,ne.unpackAlignment);const Oe=te.getParameter(te.UNPACK_ROW_LENGTH),tt=te.getParameter(te.UNPACK_IMAGE_HEIGHT),ht=te.getParameter(te.UNPACK_SKIP_PIXELS),vt=te.getParameter(te.UNPACK_SKIP_ROWS),Tt=te.getParameter(te.UNPACK_SKIP_IMAGES),qe=J.isCompressedTexture?J.mipmaps[Q]:J.image;te.pixelStorei(te.UNPACK_ROW_LENGTH,qe.width),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,qe.height),te.pixelStorei(te.UNPACK_SKIP_PIXELS,D.min.x),te.pixelStorei(te.UNPACK_SKIP_ROWS,D.min.y),te.pixelStorei(te.UNPACK_SKIP_IMAGES,D.min.z),J.isDataTexture||J.isData3DTexture?te.texSubImage3D(Be,Q,W.x,W.y,W.z,ge,ye,Ee,xe,Qe,qe.data):J.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),te.compressedTexSubImage3D(Be,Q,W.x,W.y,W.z,ge,ye,Ee,xe,qe.data)):te.texSubImage3D(Be,Q,W.x,W.y,W.z,ge,ye,Ee,xe,Qe,qe),te.pixelStorei(te.UNPACK_ROW_LENGTH,Oe),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,tt),te.pixelStorei(te.UNPACK_SKIP_PIXELS,ht),te.pixelStorei(te.UNPACK_SKIP_ROWS,vt),te.pixelStorei(te.UNPACK_SKIP_IMAGES,Tt),Q===0&&ne.generateMipmaps&&te.generateMipmap(Be),Ae.unbindTexture()},this.initTexture=function(D){D.isCubeTexture?G.setTextureCube(D,0):D.isData3DTexture?G.setTexture3D(D,0):D.isDataArrayTexture||D.isCompressedArrayTexture?G.setTexture2DArray(D,0):G.setTexture2D(D,0),Ae.unbindTexture()},this.resetState=function(){T=0,b=0,R=null,Ae.reset(),gt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Cs}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===xv?"display-p3":"srgb",t.unpackColorSpace=un.workingColorSpace===Xh?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===lr?Ha:yA}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Ha?lr:lo}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class k3 extends PA{}k3.prototype.isWebGL1Renderer=!0;class Av{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new je(e),this.density=t}clone(){return new Av(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class wv{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new je(e),this.near=t,this.far=r}clone(){return new wv(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Ch extends jt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class qh{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=wh,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Bi()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Bi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Bi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Jr=new X;class ja{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Jr.fromBufferAttribute(this,t),Jr.applyMatrix4(e),this.setXYZ(t,Jr.x,Jr.y,Jr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Jr.fromBufferAttribute(this,t),Jr.applyNormalMatrix(e),this.setXYZ(t,Jr.x,Jr.y,Jr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Jr.fromBufferAttribute(this,t),Jr.transformDirection(e),this.setXYZ(t,Jr.x,Jr.y,Jr.z);return this}setX(e,t){return this.normalized&&(t=kt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=kt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=kt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=kt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=mi(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=mi(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=mi(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=mi(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=kt(t,this.array),r=kt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=kt(t,this.array),r=kt(r,this.array),i=kt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=kt(t,this.array),r=kt(r,this.array),i=kt(i,this.array),s=kt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Zt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ja(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class IA extends ir{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new je(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let jc;const cf=new X,Xc=new X,Jc=new X,Yc=new Re,uf=new Re,U3=new _t,Ym=new X,df=new X,Km=new X,dT=new Re,q_=new Re,fT=new Re;class z3 extends jt{constructor(e=new IA){if(super(),this.isSprite=!0,this.type="Sprite",jc===void 0){jc=new Lt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new qh(t,5);jc.setIndex([0,1,2,0,2,3]),jc.setAttribute("position",new ja(r,3,0,!1)),jc.setAttribute("uv",new ja(r,2,3,!1))}this.geometry=jc,this.material=e,this.center=new Re(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Xc.setFromMatrixScale(this.matrixWorld),U3.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Jc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Xc.multiplyScalar(-Jc.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;Zm(Ym.set(-.5,-.5,0),Jc,o,Xc,i,s),Zm(df.set(.5,-.5,0),Jc,o,Xc,i,s),Zm(Km.set(.5,.5,0),Jc,o,Xc,i,s),dT.set(0,0),q_.set(1,0),fT.set(1,1);let a=e.ray.intersectTriangle(Ym,df,Km,!1,cf);if(a===null&&(Zm(df.set(-.5,.5,0),Jc,o,Xc,i,s),q_.set(0,1),a=e.ray.intersectTriangle(Ym,Km,df,!1,cf),a===null))return;const l=e.ray.origin.distanceTo(cf);l<e.near||l>e.far||t.push({distance:l,point:cf.clone(),uv:pi.getInterpolation(cf,Ym,df,Km,dT,q_,fT,new Re),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Zm(n,e,t,r,i,s){Yc.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(uf.x=s*Yc.x-i*Yc.y,uf.y=i*Yc.x+s*Yc.y):uf.copy(Yc),n.copy(e),n.x+=uf.x,n.y+=uf.y,n.applyMatrix4(U3)}const Qm=new X,hT=new X;class H3 extends jt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),e<s)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){Qm.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Qm);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Qm.setFromMatrixPosition(e.matrixWorld),hT.setFromMatrixPosition(this.matrixWorld);const r=Qm.distanceTo(hT)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),r>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const pT=new X,mT=new ln,gT=new ln,T8=new X,vT=new _t,qm=new X,ex=new xr,yT=new _t,tx=new pd;class LA extends Qn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=K1,this.bindMatrix=new _t,this.bindMatrixInverse=new _t,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Cr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,qm),this.boundingBox.expandByPoint(qm)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new xr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,qm),this.boundingSphere.expandByPoint(qm)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),ex.copy(this.boundingSphere),ex.applyMatrix4(i),e.ray.intersectsSphere(ex)!==!1&&(yT.copy(i).invert(),tx.copy(e.ray).applyMatrix4(yT),!(this.boundingBox!==null&&tx.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,tx)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new ln,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===K1?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===t3?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;mT.fromBufferAttribute(i.attributes.skinIndex,e),gT.fromBufferAttribute(i.attributes.skinWeight,e),pT.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=gT.getComponent(s);if(o!==0){const a=mT.getComponent(s);vT.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(T8.copy(pT).applyMatrix4(vT),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class Mv extends jt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Yl extends Mn{constructor(e=null,t=1,r=1,i,s,o,a,l,c=jn,d=jn,h,p){super(null,o,a,l,c,d,i,s,h,p),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const _T=new _t,R8=new _t;class ep{constructor(e=[],t=[]){this.uuid=Bi(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new _t)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new _t;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:R8;_T.multiplyMatrices(a,t[s]),_T.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new ep(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Yl(t,e,e,Ur,wr);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Mv),this.bones.push(o),this.boneInverses.push(new _t().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class qu extends Zt{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Kc=new _t,xT=new _t,eg=[],ET=new Cr,P8=new _t,ff=new Qn,hf=new xr;class BA extends Qn{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new qu(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,P8)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Cr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Kc),ET.copy(e.boundingBox).applyMatrix4(Kc),this.boundingBox.union(ET)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new xr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Kc),hf.copy(e.boundingSphere).applyMatrix4(Kc),this.boundingSphere.union(hf)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(ff.geometry=this.geometry,ff.material=this.material,ff.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),hf.copy(this.boundingSphere),hf.applyMatrix4(r),e.ray.intersectsSphere(hf)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,Kc),xT.multiplyMatrices(r,Kc),ff.matrixWorld=xT,ff.raycast(e,eg);for(let o=0,a=eg.length;o<a;o++){const l=eg[o];l.instanceId=s,l.object=this,t.push(l)}eg.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new qu(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function I8(n,e){return n.z-e.z}function L8(n,e){return e.z-n.z}class B8{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const r=this.pool,i=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1});const s=r[this.index];i.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=t}reset(){this.list.length=0,this.index=0}}const Zc="batchId",ma=new _t,ST=new _t,D8=new _t,AT=new _t,nx=new Zh,tg=new Cr,xl=new xr,pf=new X,rx=new B8,Fr=new Qn,ng=[];function O8(n,e,t=0){const r=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const i=n.count;for(let s=0;s<i;s++)for(let o=0;o<r;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*r);e.needsUpdate=!0}class G3 extends Qn{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,r=t*2,i){super(new Lt,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),r=new Yl(t,e,e,Ur,wr);this._matricesTexture=r}_initializeGeometry(e){const t=this.geometry,r=this._maxVertexCount,i=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:c,itemSize:d,normalized:h}=l,p=new c.constructor(r*d),m=new l.constructor(p,d,h);m.setUsage(l.usage),t.setAttribute(a,m)}if(e.getIndex()!==null){const a=r>65536?new Uint32Array(s):new Uint16Array(s);t.setIndex(new Zt(a,1))}const o=i>65536?new Uint32Array(r):new Uint16Array(r);t.setAttribute(Zc,new Zt(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(Zc))throw new Error(`BatchedMesh: Geometry cannot use attribute "${Zc}"`);const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in t.attributes){if(r===Zc)continue;if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),s=t.getAttribute(r);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Cr);const e=this._geometryCount,t=this.boundingBox,r=this._active;t.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,ma),this.getBoundingBoxAt(i,tg).applyMatrix4(ma),t.union(tg))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new xr);const e=this._geometryCount,t=this.boundingSphere,r=this._active;t.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,ma),this.getBoundingSphereAt(i,xl).applyMatrix4(ma),t.union(xl))}addGeometry(e,t=-1,r=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=t,s===null?i.vertexStart=0:i.vertexStart=s.vertexStart+s.vertexCount;const c=e.getIndex(),d=c!==null;if(d&&(r===-1?i.indexCount=c.count:i.indexCount=r,s===null?i.indexStart=0:i.indexStart=s.indexStart+s.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const h=this._visibility,p=this._active,m=this._matricesTexture,v=this._matricesTexture.image.data;h.push(!0),p.push(!0);const _=this._geometryCount;this._geometryCount++,D8.toArray(v,_*16),m.needsUpdate=!0,o.push(i),a.push({start:d?i.indexStart:i.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Cr,sphereInitialized:!1,sphere:new xr});const y=this.geometry.getAttribute(Zc);for(let g=0;g<i.vertexCount;g++)y.setX(i.vertexStart+g,_);return y.needsUpdate=!0,this.setGeometryAt(_,e),_}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const r=this.geometry,i=r.getIndex()!==null,s=r.getIndex(),o=t.getIndex(),a=this._reservedRanges[e];if(i&&o.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.vertexCount;for(const m in r.attributes){if(m===Zc)continue;const v=t.getAttribute(m),_=r.getAttribute(m);O8(v,_,l);const y=v.itemSize;for(let g=v.count,S=c;g<S;g++){const E=l+g;for(let w=0;w<y;w++)_.setComponent(E,w,0)}_.needsUpdate=!0}if(i){const m=a.indexStart;for(let v=0;v<o.count;v++)s.setX(m+v,l+o.getX(v));for(let v=o.count,_=a.indexCount;v<_;v++)s.setX(m+v,l);s.needsUpdate=!0}const d=this._bounds[e];t.boundingBox!==null?(d.box.copy(t.boundingBox),d.boxInitialized=!0):d.boxInitialized=!1,t.boundingSphere!==null?(d.sphere.copy(t.boundingSphere),d.sphereInitialized=!0):d.sphereInitialized=!1;const h=this._drawRanges[e],p=t.getAttribute("position");return h.count=i?o.count:p.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||t[e]===!1?this:(t[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(this._active[e]===!1)return this;const i=this._bounds[e],s=i.box,o=this.geometry;if(i.boxInitialized===!1){s.makeEmpty();const a=o.index,l=o.attributes.position,c=this._drawRanges[e];for(let d=c.start,h=c.start+c.count;d<h;d++){let p=d;a&&(p=a.getX(p)),s.expandByPoint(pf.fromBufferAttribute(l,p))}i.boxInitialized=!0}return t.copy(s),t}getBoundingSphereAt(e,t){if(this._active[e]===!1)return this;const i=this._bounds[e],s=i.sphere,o=this.geometry;if(i.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,tg),tg.getCenter(s.center);const a=o.index,l=o.attributes.position,c=this._drawRanges[e];let d=0;for(let h=c.start,p=c.start+c.count;h<p;h++){let m=h;a&&(m=a.getX(m)),pf.fromBufferAttribute(l,m),d=Math.max(d,s.center.distanceToSquared(pf))}s.radius=Math.sqrt(d),i.sphereInitialized=!0}return t.copy(s),t}setMatrixAt(e,t){const r=this._active,i=this._matricesTexture,s=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||r[e]===!1?this:(t.toArray(s,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,t){const r=this._active,i=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||r[e]===!1?null:t.fromArray(i,e*16)}setVisibleAt(e,t){const r=this._visibility,i=this._active,s=this._geometryCount;return e>=s||i[e]===!1||r[e]===t?this:(r[e]=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._visibility,r=this._active,i=this._geometryCount;return e>=i||r[e]===!1?!1:t[e]}raycast(e,t){const r=this._visibility,i=this._active,s=this._drawRanges,o=this._geometryCount,a=this.matrixWorld,l=this.geometry;Fr.material=this.material,Fr.geometry.index=l.index,Fr.geometry.attributes=l.attributes,Fr.geometry.boundingBox===null&&(Fr.geometry.boundingBox=new Cr),Fr.geometry.boundingSphere===null&&(Fr.geometry.boundingSphere=new xr);for(let c=0;c<o;c++){if(!r[c]||!i[c])continue;const d=s[c];Fr.geometry.setDrawRange(d.start,d.count),this.getMatrixAt(c,Fr.matrixWorld).premultiply(a),this.getBoundingBoxAt(c,Fr.geometry.boundingBox),this.getBoundingSphereAt(c,Fr.geometry.boundingSphere),Fr.raycast(e,ng);for(let h=0,p=ng.length;h<p;h++){const m=ng[h];m.object=this,m.batchId=c,t.push(m)}ng.length=0}Fr.material=null,Fr.geometry.index=null,Fr.geometry.attributes={},Fr.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,t,r,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._visibility,c=this._multiDrawStarts,d=this._multiDrawCounts,h=this._drawRanges,p=this.perObjectFrustumCulled;p&&(AT.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),nx.setFromProjectionMatrix(AT,e.isWebGPURenderer?Ku:Cs));let m=0;if(this.sortObjects){ST.copy(this.matrixWorld).invert(),pf.setFromMatrixPosition(r.matrixWorld).applyMatrix4(ST);for(let y=0,g=l.length;y<g;y++)if(l[y]){this.getMatrixAt(y,ma),this.getBoundingSphereAt(y,xl).applyMatrix4(ma);let S=!1;if(p&&(S=!nx.intersectsSphere(xl)),!S){const E=pf.distanceTo(xl.center);rx.push(h[y],E)}}const v=rx.list,_=this.customSort;_===null?v.sort(s.transparent?L8:I8):_.call(this,v,r);for(let y=0,g=v.length;y<g;y++){const S=v[y];c[m]=S.start*a,d[m]=S.count,m++}rx.reset()}else for(let v=0,_=l.length;v<_;v++)if(l[v]){let y=!1;if(p&&(this.getMatrixAt(v,ma),this.getBoundingSphereAt(v,xl).applyMatrix4(ma),y=!nx.intersectsSphere(xl)),!y){const g=h[v];c[m]=g.start*a,d[m]=g.count,m++}}this._multiDrawCount=m,this._visibilityChanged=!1}onBeforeShadow(e,t,r,i,s,o){this.onBeforeRender(e,null,i,s,o)}}class Gr extends ir{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new je(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const wT=new X,MT=new X,bT=new _t,ix=new pd,rg=new xr;class $o extends jt{constructor(e=new Lt,t=new Gr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)wT.fromBufferAttribute(t,i-1),MT.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=wT.distanceTo(MT);e.setAttribute("lineDistance",new at(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),rg.copy(r.boundingSphere),rg.applyMatrix4(i),rg.radius+=s,e.ray.intersectsSphere(rg)===!1)return;bT.copy(i).invert(),ix.copy(e.ray).applyMatrix4(bT);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new X,d=new X,h=new X,p=new X,m=this.isLineSegments?2:1,v=r.index,y=r.attributes.position;if(v!==null){const g=Math.max(0,o.start),S=Math.min(v.count,o.start+o.count);for(let E=g,w=S-1;E<w;E+=m){const T=v.getX(E),b=v.getX(E+1);if(c.fromBufferAttribute(y,T),d.fromBufferAttribute(y,b),ix.distanceSqToSegment(c,d,p,h)>l)continue;p.applyMatrix4(this.matrixWorld);const B=e.ray.origin.distanceTo(p);B<e.near||B>e.far||t.push({distance:B,point:h.clone().applyMatrix4(this.matrixWorld),index:E,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,o.start),S=Math.min(y.count,o.start+o.count);for(let E=g,w=S-1;E<w;E+=m){if(c.fromBufferAttribute(y,E),d.fromBufferAttribute(y,E+1),ix.distanceSqToSegment(c,d,p,h)>l)continue;p.applyMatrix4(this.matrixWorld);const b=e.ray.origin.distanceTo(p);b<e.near||b>e.far||t.push({distance:b,point:h.clone().applyMatrix4(this.matrixWorld),index:E,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const CT=new X,TT=new X;class Ds extends $o{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)CT.fromBufferAttribute(t,i),TT.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+CT.distanceTo(TT);e.setAttribute("lineDistance",new at(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class DA extends $o{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class bv extends ir{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new je(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const RT=new _t,CE=new pd,ig=new xr,sg=new X;class OA extends jt{constructor(e=new Lt,t=new bv){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),ig.copy(r.boundingSphere),ig.applyMatrix4(i),ig.radius+=s,e.ray.intersectsSphere(ig)===!1)return;RT.copy(i).invert(),CE.copy(e.ray).applyMatrix4(RT);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=r.index,h=r.attributes.position;if(c!==null){const p=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);for(let v=p,_=m;v<_;v++){const y=c.getX(v);sg.fromBufferAttribute(h,y),PT(sg,y,l,i,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(h.count,o.start+o.count);for(let v=p,_=m;v<_;v++)sg.fromBufferAttribute(h,v),PT(sg,v,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function PT(n,e,t,r,i,s,o){const a=CE.distanceSqToPoint(n);if(a<t){const l=new X;CE.closestPointToPoint(n,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class N8 extends Mn{constructor(e,t,r,i,s,o,a,l,c){super(e,t,r,i,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:mn,this.magFilter=s!==void 0?s:mn,this.generateMipmaps=!1;const d=this;function h(){d.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class F8 extends Mn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=jn,this.minFilter=jn,this.generateMipmaps=!1,this.needsUpdate=!0}}class Cv extends Mn{constructor(e,t,r,i,s,o,a,l,c,d,h,p){super(null,o,a,l,c,d,i,s,h,p),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class k8 extends Cv{constructor(e,t,r,i,s,o){super(e,t,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Ar}}class U8 extends Cv{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,oo),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class z8 extends Mn{constructor(e,t,r,i,s,o,a,l,c){super(e,t,r,i,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Os{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,c;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-o,c<0)a=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const d=r[i],p=r[i+1]-d,m=(o-d)/p;return(i+m)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new Re:new X);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new X,i=[],s=[],o=[],a=new X,l=new _t;for(let m=0;m<=e;m++){const v=m/e;i[m]=this.getTangentAt(v,new X)}s[0]=new X,o[0]=new X;let c=Number.MAX_VALUE;const d=Math.abs(i[0].x),h=Math.abs(i[0].y),p=Math.abs(i[0].z);d<=c&&(c=d,r.set(1,0,0)),h<=c&&(c=h,r.set(0,1,0)),p<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(i[m-1],i[m]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(Xn(i[m-1].dot(i[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,v))}o[m].crossVectors(i[m],s[m])}if(t===!0){let m=Math.acos(Xn(s[0].dot(s[e]),-1,1));m/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(i[v],m*v)),o[v].crossVectors(i[v],s[v])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Tv extends Os{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const r=t||new Re,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const d=Math.cos(this.aRotation),h=Math.sin(this.aRotation),p=l-this.aX,m=c-this.aY;l=p*d-m*h+this.aX,c=p*h+m*d+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class V3 extends Tv{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function NA(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){i(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,d,h){let p=(o-s)/c-(a-s)/(c+d)+(a-o)/d,m=(a-o)/d-(l-o)/(d+h)+(l-a)/h;p*=d,m*=d,i(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const og=new X,sx=new NA,ox=new NA,ax=new NA;class W3 extends Os{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new X){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,d;this.closed||a>0?c=i[(a-1)%s]:(og.subVectors(i[0],i[1]).add(i[0]),c=og);const h=i[a%s],p=i[(a+1)%s];if(this.closed||a+2<s?d=i[(a+2)%s]:(og.subVectors(i[s-1],i[s-2]).add(i[s-1]),d=og),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let v=Math.pow(c.distanceToSquared(h),m),_=Math.pow(h.distanceToSquared(p),m),y=Math.pow(p.distanceToSquared(d),m);_<1e-4&&(_=1),v<1e-4&&(v=_),y<1e-4&&(y=_),sx.initNonuniformCatmullRom(c.x,h.x,p.x,d.x,v,_,y),ox.initNonuniformCatmullRom(c.y,h.y,p.y,d.y,v,_,y),ax.initNonuniformCatmullRom(c.z,h.z,p.z,d.z,v,_,y)}else this.curveType==="catmullrom"&&(sx.initCatmullRom(c.x,h.x,p.x,d.x,this.tension),ox.initCatmullRom(c.y,h.y,p.y,d.y,this.tension),ax.initCatmullRom(c.z,h.z,p.z,d.z,this.tension));return r.set(sx.calc(l),ox.calc(l),ax.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new X().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function IT(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+s+o)*l+(-3*t+3*r-2*s-o)*a+s*n+t}function H8(n,e){const t=1-n;return t*t*e}function G8(n,e){return 2*(1-n)*n*e}function V8(n,e){return n*n*e}function Jf(n,e,t,r){return H8(n,e)+G8(n,t)+V8(n,r)}function W8(n,e){const t=1-n;return t*t*t*e}function $8(n,e){const t=1-n;return 3*t*t*n*e}function j8(n,e){return 3*(1-n)*n*n*e}function X8(n,e){return n*n*n*e}function Yf(n,e,t,r,i){return W8(n,e)+$8(n,t)+j8(n,r)+X8(n,i)}class FA extends Os{constructor(e=new Re,t=new Re,r=new Re,i=new Re){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Re){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Yf(e,i.x,s.x,o.x,a.x),Yf(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class $3 extends Os{constructor(e=new X,t=new X,r=new X,i=new X){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new X){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Yf(e,i.x,s.x,o.x,a.x),Yf(e,i.y,s.y,o.y,a.y),Yf(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class kA extends Os{constructor(e=new Re,t=new Re){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Re){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Re){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class j3 extends Os{constructor(e=new X,t=new X){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new X){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new X){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class UA extends Os{constructor(e=new Re,t=new Re,r=new Re){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Re){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(Jf(e,i.x,s.x,o.x),Jf(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class zA extends Os{constructor(e=new X,t=new X,r=new X){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new X){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(Jf(e,i.x,s.x,o.x),Jf(e,i.y,s.y,o.y),Jf(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class HA extends Os{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Re){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],c=i[o],d=i[o>i.length-2?i.length-1:o+1],h=i[o>i.length-3?i.length-1:o+2];return r.set(IT(a,l.x,c.x,d.x,h.x),IT(a,l.y,c.y,d.y,h.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Re().fromArray(i))}return this}}var N0=Object.freeze({__proto__:null,ArcCurve:V3,CatmullRomCurve3:W3,CubicBezierCurve:FA,CubicBezierCurve3:$3,EllipseCurve:Tv,LineCurve:kA,LineCurve3:j3,QuadraticBezierCurve:UA,QuadraticBezierCurve3:zA,SplineCurve:HA});class X3 extends Os{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new N0[r](t,e))}return this}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const d=l[c];r&&r.equals(d)||(t.push(d),r=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new N0[i.type]().fromJSON(i))}return this}}class Th extends X3{constructor(e){super(),this.type="Path",this.currentPoint=new Re,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new kA(this.currentPoint.clone(),new Re(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new UA(this.currentPoint.clone(),new Re(e,t),new Re(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new FA(this.currentPoint.clone(),new Re(e,t),new Re(r,i),new Re(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new HA(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,l){const c=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+c,t+d,r,i,s,o,a,l),this}absellipse(e,t,r,i,s,o,a,l){const c=new Tv(e,t,r,i,s,o,a,l);if(this.curves.length>0){const h=c.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(c);const d=c.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class tp extends Lt{constructor(e=[new Re(0,-.5),new Re(.5,0),new Re(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=Xn(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],d=1/t,h=new X,p=new Re,m=new X,v=new X,_=new X;let y=0,g=0;for(let S=0;S<=e.length-1;S++)switch(S){case 0:y=e[S+1].x-e[S].x,g=e[S+1].y-e[S].y,m.x=g*1,m.y=-y,m.z=g*0,_.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(_.x,_.y,_.z);break;default:y=e[S+1].x-e[S].x,g=e[S+1].y-e[S].y,m.x=g*1,m.y=-y,m.z=g*0,v.copy(m),m.x+=_.x,m.y+=_.y,m.z+=_.z,m.normalize(),l.push(m.x,m.y,m.z),_.copy(v)}for(let S=0;S<=t;S++){const E=r+S*d*i,w=Math.sin(E),T=Math.cos(E);for(let b=0;b<=e.length-1;b++){h.x=e[b].x*w,h.y=e[b].y,h.z=e[b].x*T,o.push(h.x,h.y,h.z),p.x=S/t,p.y=b/(e.length-1),a.push(p.x,p.y);const R=l[3*b+0]*w,B=l[3*b+1],P=l[3*b+0]*T;c.push(R,B,P)}}for(let S=0;S<t;S++)for(let E=0;E<e.length-1;E++){const w=E+S*e.length,T=w,b=w+e.length,R=w+e.length+1,B=w+1;s.push(T,b,B),s.push(R,B,b)}this.setIndex(s),this.setAttribute("position",new at(o,3)),this.setAttribute("uv",new at(a,2)),this.setAttribute("normal",new at(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new tp(e.points,e.segments,e.phiStart,e.phiLength)}}class Rv extends tp{constructor(e=1,t=1,r=4,i=8){const s=new Th;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new Rv(e.radius,e.length,e.capSegments,e.radialSegments)}}class Pv extends Lt{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new X,d=new Re;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let h=0,p=3;h<=t;h++,p+=3){const m=r+h/t*i;c.x=e*Math.cos(m),c.y=e*Math.sin(m),o.push(c.x,c.y,c.z),a.push(0,0,1),d.x=(o[p]/e+1)/2,d.y=(o[p+1]/e+1)/2,l.push(d.x,d.y)}for(let h=1;h<=t;h++)s.push(h,h+1,0);this.setIndex(s),this.setAttribute("position",new at(o,3)),this.setAttribute("normal",new at(a,3)),this.setAttribute("uv",new at(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Pv(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class vd extends Lt{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const d=[],h=[],p=[],m=[];let v=0;const _=[],y=r/2;let g=0;S(),o===!1&&(e>0&&E(!0),t>0&&E(!1)),this.setIndex(d),this.setAttribute("position",new at(h,3)),this.setAttribute("normal",new at(p,3)),this.setAttribute("uv",new at(m,2));function S(){const w=new X,T=new X;let b=0;const R=(t-e)/r;for(let B=0;B<=s;B++){const P=[],I=B/s,F=I*(t-e)+e;for(let $=0;$<=i;$++){const Z=$/i,U=Z*l+a,j=Math.sin(U),re=Math.cos(U);T.x=F*j,T.y=-I*r+y,T.z=F*re,h.push(T.x,T.y,T.z),w.set(j,R,re).normalize(),p.push(w.x,w.y,w.z),m.push(Z,1-I),P.push(v++)}_.push(P)}for(let B=0;B<i;B++)for(let P=0;P<s;P++){const I=_[P][B],F=_[P+1][B],$=_[P+1][B+1],Z=_[P][B+1];d.push(I,F,Z),d.push(F,$,Z),b+=6}c.addGroup(g,b,0),g+=b}function E(w){const T=v,b=new Re,R=new X;let B=0;const P=w===!0?e:t,I=w===!0?1:-1;for(let $=1;$<=i;$++)h.push(0,y*I,0),p.push(0,I,0),m.push(.5,.5),v++;const F=v;for(let $=0;$<=i;$++){const U=$/i*l+a,j=Math.cos(U),re=Math.sin(U);R.x=P*re,R.y=y*I,R.z=P*j,h.push(R.x,R.y,R.z),p.push(0,I,0),b.x=j*.5+.5,b.y=re*.5*I+.5,m.push(b.x,b.y),v++}for(let $=0;$<i;$++){const Z=T+$,U=F+$;w===!0?d.push(U,U+1,Z):d.push(U+1,U,Z),B+=3}c.addGroup(g,B,w===!0?1:2),g+=B}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vd(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Iv extends vd{constructor(e=1,t=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Iv(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class nl extends Lt{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),c(r),d(),this.setAttribute("position",new at(s,3)),this.setAttribute("normal",new at(s.slice(),3)),this.setAttribute("uv",new at(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(S){const E=new X,w=new X,T=new X;for(let b=0;b<t.length;b+=3)m(t[b+0],E),m(t[b+1],w),m(t[b+2],T),l(E,w,T,S)}function l(S,E,w,T){const b=T+1,R=[];for(let B=0;B<=b;B++){R[B]=[];const P=S.clone().lerp(w,B/b),I=E.clone().lerp(w,B/b),F=b-B;for(let $=0;$<=F;$++)$===0&&B===b?R[B][$]=P:R[B][$]=P.clone().lerp(I,$/F)}for(let B=0;B<b;B++)for(let P=0;P<2*(b-B)-1;P++){const I=Math.floor(P/2);P%2===0?(p(R[B][I+1]),p(R[B+1][I]),p(R[B][I])):(p(R[B][I+1]),p(R[B+1][I+1]),p(R[B+1][I]))}}function c(S){const E=new X;for(let w=0;w<s.length;w+=3)E.x=s[w+0],E.y=s[w+1],E.z=s[w+2],E.normalize().multiplyScalar(S),s[w+0]=E.x,s[w+1]=E.y,s[w+2]=E.z}function d(){const S=new X;for(let E=0;E<s.length;E+=3){S.x=s[E+0],S.y=s[E+1],S.z=s[E+2];const w=y(S)/2/Math.PI+.5,T=g(S)/Math.PI+.5;o.push(w,1-T)}v(),h()}function h(){for(let S=0;S<o.length;S+=6){const E=o[S+0],w=o[S+2],T=o[S+4],b=Math.max(E,w,T),R=Math.min(E,w,T);b>.9&&R<.1&&(E<.2&&(o[S+0]+=1),w<.2&&(o[S+2]+=1),T<.2&&(o[S+4]+=1))}}function p(S){s.push(S.x,S.y,S.z)}function m(S,E){const w=S*3;E.x=e[w+0],E.y=e[w+1],E.z=e[w+2]}function v(){const S=new X,E=new X,w=new X,T=new X,b=new Re,R=new Re,B=new Re;for(let P=0,I=0;P<s.length;P+=9,I+=6){S.set(s[P+0],s[P+1],s[P+2]),E.set(s[P+3],s[P+4],s[P+5]),w.set(s[P+6],s[P+7],s[P+8]),b.set(o[I+0],o[I+1]),R.set(o[I+2],o[I+3]),B.set(o[I+4],o[I+5]),T.copy(S).add(E).add(w).divideScalar(3);const F=y(T);_(b,I+0,S,F),_(R,I+2,E,F),_(B,I+4,w,F)}}function _(S,E,w,T){T<0&&S.x===1&&(o[E]=S.x-1),w.x===0&&w.z===0&&(o[E]=T/2/Math.PI+.5)}function y(S){return Math.atan2(S.z,-S.x)}function g(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new nl(e.vertices,e.indices,e.radius,e.details)}}class Lv extends nl{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Lv(e.radius,e.detail)}}const ag=new X,lg=new X,lx=new X,cg=new pi;class J3 extends Lt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(Xl*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],d=["a","b","c"],h=new Array(3),p={},m=[];for(let v=0;v<l;v+=3){o?(c[0]=o.getX(v),c[1]=o.getX(v+1),c[2]=o.getX(v+2)):(c[0]=v,c[1]=v+1,c[2]=v+2);const{a:_,b:y,c:g}=cg;if(_.fromBufferAttribute(a,c[0]),y.fromBufferAttribute(a,c[1]),g.fromBufferAttribute(a,c[2]),cg.getNormal(lx),h[0]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,h[1]=`${Math.round(y.x*i)},${Math.round(y.y*i)},${Math.round(y.z*i)}`,h[2]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let S=0;S<3;S++){const E=(S+1)%3,w=h[S],T=h[E],b=cg[d[S]],R=cg[d[E]],B=`${w}_${T}`,P=`${T}_${w}`;P in p&&p[P]?(lx.dot(p[P].normal)<=s&&(m.push(b.x,b.y,b.z),m.push(R.x,R.y,R.z)),p[P]=null):B in p||(p[B]={index0:c[S],index1:c[E],normal:lx.clone()})}}for(const v in p)if(p[v]){const{index0:_,index1:y}=p[v];ag.fromBufferAttribute(a,_),lg.fromBufferAttribute(a,y),m.push(ag.x,ag.y,ag.z),m.push(lg.x,lg.y,lg.z)}this.setAttribute("position",new at(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Kl extends Th{constructor(e){super(e),this.uuid=Bi(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new Th().fromJSON(i))}return this}}const J8={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=Y3(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,d,h,p,m;if(r&&(s=q8(n,e,s,t)),n.length>80*t){a=c=n[0],l=d=n[1];for(let v=t;v<i;v+=t)h=n[v],p=n[v+1],h<a&&(a=h),p<l&&(l=p),h>c&&(c=h),p>d&&(d=p);m=Math.max(c-a,d-l),m=m!==0?32767/m:0}return Rh(s,o,t,a,l,m,0),o}};function Y3(n,e,t,r,i){let s,o;if(i===u9(n,e,t,r)>0)for(s=e;s<t;s+=r)o=LT(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=LT(s,n[s],n[s+1],o);return o&&Bv(o,o.next)&&(Ih(o),o=o.next),o}function oc(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(Bv(t,t.next)||Fn(t.prev,t,t.next)===0)){if(Ih(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function Rh(n,e,t,r,i,s,o){if(!n)return;!o&&s&&i9(n,r,i,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?K8(n,r,i,s):Y8(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),Ih(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=Z8(oc(n),e,t),Rh(n,e,t,r,i,s,2)):o===2&&Q8(n,e,t,r,i,s):Rh(oc(n),e,t,r,i,s,1);break}}}function Y8(n){const e=n.prev,t=n,r=n.next;if(Fn(e,t,r)>=0)return!1;const i=e.x,s=t.x,o=r.x,a=e.y,l=t.y,c=r.y,d=i<s?i<o?i:o:s<o?s:o,h=a<l?a<c?a:c:l<c?l:c,p=i>s?i>o?i:o:s>o?s:o,m=a>l?a>c?a:c:l>c?l:c;let v=r.next;for(;v!==e;){if(v.x>=d&&v.x<=p&&v.y>=h&&v.y<=m&&Mu(i,a,s,l,o,c,v.x,v.y)&&Fn(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function K8(n,e,t,r){const i=n.prev,s=n,o=n.next;if(Fn(i,s,o)>=0)return!1;const a=i.x,l=s.x,c=o.x,d=i.y,h=s.y,p=o.y,m=a<l?a<c?a:c:l<c?l:c,v=d<h?d<p?d:p:h<p?h:p,_=a>l?a>c?a:c:l>c?l:c,y=d>h?d>p?d:p:h>p?h:p,g=TE(m,v,e,t,r),S=TE(_,y,e,t,r);let E=n.prevZ,w=n.nextZ;for(;E&&E.z>=g&&w&&w.z<=S;){if(E.x>=m&&E.x<=_&&E.y>=v&&E.y<=y&&E!==i&&E!==o&&Mu(a,d,l,h,c,p,E.x,E.y)&&Fn(E.prev,E,E.next)>=0||(E=E.prevZ,w.x>=m&&w.x<=_&&w.y>=v&&w.y<=y&&w!==i&&w!==o&&Mu(a,d,l,h,c,p,w.x,w.y)&&Fn(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;E&&E.z>=g;){if(E.x>=m&&E.x<=_&&E.y>=v&&E.y<=y&&E!==i&&E!==o&&Mu(a,d,l,h,c,p,E.x,E.y)&&Fn(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;w&&w.z<=S;){if(w.x>=m&&w.x<=_&&w.y>=v&&w.y<=y&&w!==i&&w!==o&&Mu(a,d,l,h,c,p,w.x,w.y)&&Fn(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function Z8(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!Bv(i,s)&&K3(i,r,r.next,s)&&Ph(i,s)&&Ph(s,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(s.i/t|0),Ih(r),Ih(r.next),r=n=s),r=r.next}while(r!==n);return oc(r)}function Q8(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&a9(o,a)){let l=Z3(o,a);o=oc(o,o.next),l=oc(l,l.next),Rh(o,e,t,r,i,s,0),Rh(l,e,t,r,i,s,0);return}a=a.next}o=o.next}while(o!==n)}function q8(n,e,t,r){const i=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,c=Y3(n,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(o9(c));for(i.sort(e9),s=0;s<i.length;s++)t=t9(i[s],t);return t}function e9(n,e){return n.x-e.x}function t9(n,e){const t=n9(n,e);if(!t)return e;const r=Z3(t,n);return oc(r,r.next),oc(t,t.next)}function n9(n,e){let t=e,r=-1/0,i;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>r&&(r=p,i=t.x<t.next.x?t:t.next,p===s))return i}t=t.next}while(t!==e);if(!i)return null;const a=i,l=i.x,c=i.y;let d=1/0,h;t=i;do s>=t.x&&t.x>=l&&s!==t.x&&Mu(o<c?s:r,o,l,c,o<c?r:s,o,t.x,t.y)&&(h=Math.abs(o-t.y)/(s-t.x),Ph(t,n)&&(h<d||h===d&&(t.x>i.x||t.x===i.x&&r9(i,t)))&&(i=t,d=h)),t=t.next;while(t!==a);return i}function r9(n,e){return Fn(n.prev,n,e.prev)<0&&Fn(e.next,n,n.next)<0}function i9(n,e,t,r){let i=n;do i.z===0&&(i.z=TE(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,s9(i)}function s9(n){let e,t,r,i,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,c*=2}while(o>1);return n}function TE(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function o9(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Mu(n,e,t,r,i,s,o,a){return(i-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(r-a)}function a9(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!l9(n,e)&&(Ph(n,e)&&Ph(e,n)&&c9(n,e)&&(Fn(n.prev,n,e.prev)||Fn(n,e.prev,e))||Bv(n,e)&&Fn(n.prev,n,n.next)>0&&Fn(e.prev,e,e.next)>0)}function Fn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Bv(n,e){return n.x===e.x&&n.y===e.y}function K3(n,e,t,r){const i=dg(Fn(n,e,t)),s=dg(Fn(n,e,r)),o=dg(Fn(t,r,n)),a=dg(Fn(t,r,e));return!!(i!==s&&o!==a||i===0&&ug(n,t,e)||s===0&&ug(n,r,e)||o===0&&ug(t,n,r)||a===0&&ug(t,e,r))}function ug(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function dg(n){return n>0?1:n<0?-1:0}function l9(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&K3(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Ph(n,e){return Fn(n.prev,n,n.next)<0?Fn(n,e,n.next)>=0&&Fn(n,n.prev,e)>=0:Fn(n,e,n.prev)<0||Fn(n,n.next,e)<0}function c9(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function Z3(n,e){const t=new RE(n.i,n.x,n.y),r=new RE(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function LT(n,e,t,r){const i=new RE(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Ih(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function RE(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function u9(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class ro{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return ro.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];BT(e),DT(r,e);let o=e.length;t.forEach(BT);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,DT(r,t[l]);const a=J8.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function BT(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function DT(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Dv extends Lt{constructor(e=new Kl([new Re(.5,.5),new Re(-.5,.5),new Re(-.5,-.5),new Re(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new at(i,3)),this.setAttribute("uv",new at(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,d=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:m-.1,_=t.bevelOffset!==void 0?t.bevelOffset:0,y=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,S=t.UVGenerator!==void 0?t.UVGenerator:d9;let E,w=!1,T,b,R,B;g&&(E=g.getSpacedPoints(d),w=!0,p=!1,T=g.computeFrenetFrames(d,!1),b=new X,R=new X,B=new X),p||(y=0,m=0,v=0,_=0);const P=a.extractPoints(c);let I=P.shape;const F=P.holes;if(!ro.isClockWise(I)){I=I.reverse();for(let te=0,Pe=F.length;te<Pe;te++){const we=F[te];ro.isClockWise(we)&&(F[te]=we.reverse())}}const Z=ro.triangulateShape(I,F),U=I;for(let te=0,Pe=F.length;te<Pe;te++){const we=F[te];I=I.concat(we)}function j(te,Pe,we){return Pe||console.error("THREE.ExtrudeGeometry: vec does not exist"),te.clone().addScaledVector(Pe,we)}const re=I.length,ae=Z.length;function H(te,Pe,we){let Le,Ae,ot;const Ve=te.x-Pe.x,G=te.y-Pe.y,k=we.x-te.x,de=we.y-te.y,De=Ve*Ve+G*G,fe=Ve*de-G*k;if(Math.abs(fe)>Number.EPSILON){const me=Math.sqrt(De),Ue=Math.sqrt(k*k+de*de),Ne=Pe.x-G/me,He=Pe.y+Ve/me,lt=we.x-de/Ue,pt=we.y+k/Ue,Ie=((lt-Ne)*de-(pt-He)*k)/(Ve*de-G*k);Le=Ne+Ve*Ie-te.x,Ae=He+G*Ie-te.y;const Ht=Le*Le+Ae*Ae;if(Ht<=2)return new Re(Le,Ae);ot=Math.sqrt(Ht/2)}else{let me=!1;Ve>Number.EPSILON?k>Number.EPSILON&&(me=!0):Ve<-Number.EPSILON?k<-Number.EPSILON&&(me=!0):Math.sign(G)===Math.sign(de)&&(me=!0),me?(Le=-G,Ae=Ve,ot=Math.sqrt(De)):(Le=Ve,Ae=G,ot=Math.sqrt(De/2))}return new Re(Le/ot,Ae/ot)}const Y=[];for(let te=0,Pe=U.length,we=Pe-1,Le=te+1;te<Pe;te++,we++,Le++)we===Pe&&(we=0),Le===Pe&&(Le=0),Y[te]=H(U[te],U[we],U[Le]);const V=[];let ee,ie=Y.concat();for(let te=0,Pe=F.length;te<Pe;te++){const we=F[te];ee=[];for(let Le=0,Ae=we.length,ot=Ae-1,Ve=Le+1;Le<Ae;Le++,ot++,Ve++)ot===Ae&&(ot=0),Ve===Ae&&(Ve=0),ee[Le]=H(we[Le],we[ot],we[Ve]);V.push(ee),ie=ie.concat(ee)}for(let te=0;te<y;te++){const Pe=te/y,we=m*Math.cos(Pe*Math.PI/2),Le=v*Math.sin(Pe*Math.PI/2)+_;for(let Ae=0,ot=U.length;Ae<ot;Ae++){const Ve=j(U[Ae],Y[Ae],Le);Te(Ve.x,Ve.y,-we)}for(let Ae=0,ot=F.length;Ae<ot;Ae++){const Ve=F[Ae];ee=V[Ae];for(let G=0,k=Ve.length;G<k;G++){const de=j(Ve[G],ee[G],Le);Te(de.x,de.y,-we)}}}const oe=v+_;for(let te=0;te<re;te++){const Pe=p?j(I[te],ie[te],oe):I[te];w?(R.copy(T.normals[0]).multiplyScalar(Pe.x),b.copy(T.binormals[0]).multiplyScalar(Pe.y),B.copy(E[0]).add(R).add(b),Te(B.x,B.y,B.z)):Te(Pe.x,Pe.y,0)}for(let te=1;te<=d;te++)for(let Pe=0;Pe<re;Pe++){const we=p?j(I[Pe],ie[Pe],oe):I[Pe];w?(R.copy(T.normals[te]).multiplyScalar(we.x),b.copy(T.binormals[te]).multiplyScalar(we.y),B.copy(E[te]).add(R).add(b),Te(B.x,B.y,B.z)):Te(we.x,we.y,h/d*te)}for(let te=y-1;te>=0;te--){const Pe=te/y,we=m*Math.cos(Pe*Math.PI/2),Le=v*Math.sin(Pe*Math.PI/2)+_;for(let Ae=0,ot=U.length;Ae<ot;Ae++){const Ve=j(U[Ae],Y[Ae],Le);Te(Ve.x,Ve.y,h+we)}for(let Ae=0,ot=F.length;Ae<ot;Ae++){const Ve=F[Ae];ee=V[Ae];for(let G=0,k=Ve.length;G<k;G++){const de=j(Ve[G],ee[G],Le);w?Te(de.x,de.y+E[d-1].y,E[d-1].x+we):Te(de.x,de.y,h+we)}}}he(),Ce();function he(){const te=i.length/3;if(p){let Pe=0,we=re*Pe;for(let Le=0;Le<ae;Le++){const Ae=Z[Le];Xe(Ae[2]+we,Ae[1]+we,Ae[0]+we)}Pe=d+y*2,we=re*Pe;for(let Le=0;Le<ae;Le++){const Ae=Z[Le];Xe(Ae[0]+we,Ae[1]+we,Ae[2]+we)}}else{for(let Pe=0;Pe<ae;Pe++){const we=Z[Pe];Xe(we[2],we[1],we[0])}for(let Pe=0;Pe<ae;Pe++){const we=Z[Pe];Xe(we[0]+re*d,we[1]+re*d,we[2]+re*d)}}r.addGroup(te,i.length/3-te,0)}function Ce(){const te=i.length/3;let Pe=0;be(U,Pe),Pe+=U.length;for(let we=0,Le=F.length;we<Le;we++){const Ae=F[we];be(Ae,Pe),Pe+=Ae.length}r.addGroup(te,i.length/3-te,1)}function be(te,Pe){let we=te.length;for(;--we>=0;){const Le=we;let Ae=we-1;Ae<0&&(Ae=te.length-1);for(let ot=0,Ve=d+y*2;ot<Ve;ot++){const G=re*ot,k=re*(ot+1),de=Pe+Le+G,De=Pe+Ae+G,fe=Pe+Ae+k,me=Pe+Le+k;ct(de,De,fe,me)}}}function Te(te,Pe,we){l.push(te),l.push(Pe),l.push(we)}function Xe(te,Pe,we){et(te),et(Pe),et(we);const Le=i.length/3,Ae=S.generateTopUV(r,i,Le-3,Le-2,Le-1);st(Ae[0]),st(Ae[1]),st(Ae[2])}function ct(te,Pe,we,Le){et(te),et(Pe),et(Le),et(Pe),et(we),et(Le);const Ae=i.length/3,ot=S.generateSideWallUV(r,i,Ae-6,Ae-3,Ae-2,Ae-1);st(ot[0]),st(ot[1]),st(ot[3]),st(ot[1]),st(ot[2]),st(ot[3])}function et(te){i.push(l[te*3+0]),i.push(l[te*3+1]),i.push(l[te*3+2])}function st(te){s.push(te.x),s.push(te.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return f9(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new N0[i.type]().fromJSON(i)),new Dv(r,e.options)}}const d9={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],l=e[r*3+1],c=e[i*3],d=e[i*3+1];return[new Re(s,o),new Re(a,l),new Re(c,d)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[r*3],d=e[r*3+1],h=e[r*3+2],p=e[i*3],m=e[i*3+1],v=e[i*3+2],_=e[s*3],y=e[s*3+1],g=e[s*3+2];return Math.abs(a-d)<Math.abs(o-c)?[new Re(o,1-l),new Re(c,1-h),new Re(p,1-v),new Re(_,1-g)]:[new Re(a,1-l),new Re(d,1-h),new Re(m,1-v),new Re(y,1-g)]}};function f9(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class np extends nl{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new np(e.radius,e.detail)}}class rp extends nl{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new rp(e.radius,e.detail)}}class Ov extends Lt{constructor(e=.5,t=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],c=[],d=[];let h=e;const p=(t-e)/i,m=new X,v=new Re;for(let _=0;_<=i;_++){for(let y=0;y<=r;y++){const g=s+y/r*o;m.x=h*Math.cos(g),m.y=h*Math.sin(g),l.push(m.x,m.y,m.z),c.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,d.push(v.x,v.y)}h+=p}for(let _=0;_<i;_++){const y=_*(r+1);for(let g=0;g<r;g++){const S=g+y,E=S,w=S+r+1,T=S+r+2,b=S+1;a.push(E,w,b),a.push(w,T,b)}}this.setIndex(a),this.setAttribute("position",new at(l,3)),this.setAttribute("normal",new at(c,3)),this.setAttribute("uv",new at(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ov(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Nv extends Lt{constructor(e=new Kl([new Re(0,.5),new Re(-.5,-.5),new Re(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let d=0;d<e.length;d++)c(e[d]),this.addGroup(a,l,d),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new at(i,3)),this.setAttribute("normal",new at(s,3)),this.setAttribute("uv",new at(o,2));function c(d){const h=i.length/3,p=d.extractPoints(t);let m=p.shape;const v=p.holes;ro.isClockWise(m)===!1&&(m=m.reverse());for(let y=0,g=v.length;y<g;y++){const S=v[y];ro.isClockWise(S)===!0&&(v[y]=S.reverse())}const _=ro.triangulateShape(m,v);for(let y=0,g=v.length;y<g;y++){const S=v[y];m=m.concat(S)}for(let y=0,g=m.length;y<g;y++){const S=m[y];i.push(S.x,S.y,0),s.push(0,0,1),o.push(S.x,S.y)}for(let y=0,g=_.length;y<g;y++){const S=_[y],E=S[0]+h,w=S[1]+h,T=S[2]+h;r.push(E,w,T),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return h9(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new Nv(r,e.curveSegments)}}function h9(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class ip extends Lt{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const d=[],h=new X,p=new X,m=[],v=[],_=[],y=[];for(let g=0;g<=r;g++){const S=[],E=g/r;let w=0;g===0&&o===0?w=.5/t:g===r&&l===Math.PI&&(w=-.5/t);for(let T=0;T<=t;T++){const b=T/t;h.x=-e*Math.cos(i+b*s)*Math.sin(o+E*a),h.y=e*Math.cos(o+E*a),h.z=e*Math.sin(i+b*s)*Math.sin(o+E*a),v.push(h.x,h.y,h.z),p.copy(h).normalize(),_.push(p.x,p.y,p.z),y.push(b+w,1-E),S.push(c++)}d.push(S)}for(let g=0;g<r;g++)for(let S=0;S<t;S++){const E=d[g][S+1],w=d[g][S],T=d[g+1][S],b=d[g+1][S+1];(g!==0||o>0)&&m.push(E,w,b),(g!==r-1||l<Math.PI)&&m.push(w,T,b)}this.setIndex(m),this.setAttribute("position",new at(v,3)),this.setAttribute("normal",new at(_,3)),this.setAttribute("uv",new at(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ip(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Fv extends nl{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Fv(e.radius,e.detail)}}class kv extends Lt{constructor(e=1,t=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],c=[],d=new X,h=new X,p=new X;for(let m=0;m<=r;m++)for(let v=0;v<=i;v++){const _=v/i*s,y=m/r*Math.PI*2;h.x=(e+t*Math.cos(y))*Math.cos(_),h.y=(e+t*Math.cos(y))*Math.sin(_),h.z=t*Math.sin(y),a.push(h.x,h.y,h.z),d.x=e*Math.cos(_),d.y=e*Math.sin(_),p.subVectors(h,d).normalize(),l.push(p.x,p.y,p.z),c.push(v/i),c.push(m/r)}for(let m=1;m<=r;m++)for(let v=1;v<=i;v++){const _=(i+1)*m+v-1,y=(i+1)*(m-1)+v-1,g=(i+1)*(m-1)+v,S=(i+1)*m+v;o.push(_,y,S),o.push(y,g,S)}this.setIndex(o),this.setAttribute("position",new at(a,3)),this.setAttribute("normal",new at(l,3)),this.setAttribute("uv",new at(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kv(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Uv extends Lt{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],c=[],d=[],h=new X,p=new X,m=new X,v=new X,_=new X,y=new X,g=new X;for(let E=0;E<=r;++E){const w=E/r*s*Math.PI*2;S(w,s,o,e,m),S(w+.01,s,o,e,v),y.subVectors(v,m),g.addVectors(v,m),_.crossVectors(y,g),g.crossVectors(_,y),_.normalize(),g.normalize();for(let T=0;T<=i;++T){const b=T/i*Math.PI*2,R=-t*Math.cos(b),B=t*Math.sin(b);h.x=m.x+(R*g.x+B*_.x),h.y=m.y+(R*g.y+B*_.y),h.z=m.z+(R*g.z+B*_.z),l.push(h.x,h.y,h.z),p.subVectors(h,m).normalize(),c.push(p.x,p.y,p.z),d.push(E/r),d.push(T/i)}}for(let E=1;E<=r;E++)for(let w=1;w<=i;w++){const T=(i+1)*(E-1)+(w-1),b=(i+1)*E+(w-1),R=(i+1)*E+w,B=(i+1)*(E-1)+w;a.push(T,b,B),a.push(b,R,B)}this.setIndex(a),this.setAttribute("position",new at(l,3)),this.setAttribute("normal",new at(c,3)),this.setAttribute("uv",new at(d,2));function S(E,w,T,b,R){const B=Math.cos(E),P=Math.sin(E),I=T/w*E,F=Math.cos(I);R.x=b*(2+F)*.5*B,R.y=b*(2+F)*P*.5,R.z=b*Math.sin(I)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Uv(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class zv extends Lt{constructor(e=new zA(new X(-1,-1,0),new X(-1,1,0),new X(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new X,l=new X,c=new Re;let d=new X;const h=[],p=[],m=[],v=[];_(),this.setIndex(v),this.setAttribute("position",new at(h,3)),this.setAttribute("normal",new at(p,3)),this.setAttribute("uv",new at(m,2));function _(){for(let E=0;E<t;E++)y(E);y(s===!1?t:0),S(),g()}function y(E){d=e.getPointAt(E/t,d);const w=o.normals[E],T=o.binormals[E];for(let b=0;b<=i;b++){const R=b/i*Math.PI*2,B=Math.sin(R),P=-Math.cos(R);l.x=P*w.x+B*T.x,l.y=P*w.y+B*T.y,l.z=P*w.z+B*T.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=d.x+r*l.x,a.y=d.y+r*l.y,a.z=d.z+r*l.z,h.push(a.x,a.y,a.z)}}function g(){for(let E=1;E<=t;E++)for(let w=1;w<=i;w++){const T=(i+1)*(E-1)+(w-1),b=(i+1)*E+(w-1),R=(i+1)*E+w,B=(i+1)*(E-1)+w;v.push(T,b,B),v.push(b,R,B)}}function S(){for(let E=0;E<=t;E++)for(let w=0;w<=i;w++)c.x=E/t,c.y=w/i,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new zv(new N0[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Q3 extends Lt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new X,s=new X;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,d=l.length;c<d;++c){const h=l[c],p=h.start,m=h.count;for(let v=p,_=p+m;v<_;v+=3)for(let y=0;y<3;y++){const g=a.getX(v+y),S=a.getX(v+(y+1)%3);i.fromBufferAttribute(o,g),s.fromBufferAttribute(o,S),OT(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const d=3*a+c,h=3*a+(c+1)%3;i.fromBufferAttribute(o,d),s.fromBufferAttribute(o,h),OT(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new at(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function OT(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var NT=Object.freeze({__proto__:null,BoxGeometry:fc,CapsuleGeometry:Rv,CircleGeometry:Pv,ConeGeometry:Iv,CylinderGeometry:vd,DodecahedronGeometry:Lv,EdgesGeometry:J3,ExtrudeGeometry:Dv,IcosahedronGeometry:np,LatheGeometry:tp,OctahedronGeometry:rp,PlaneGeometry:Qh,PolyhedronGeometry:nl,RingGeometry:Ov,ShapeGeometry:Nv,SphereGeometry:ip,TetrahedronGeometry:Fv,TorusGeometry:kv,TorusKnotGeometry:Uv,TubeGeometry:zv,WireframeGeometry:Q3});class q3 extends ir{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new je(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class eB extends Ls{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class sp extends ir{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new je(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tl,this.normalScale=new Re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class fo extends sp{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Re(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Xn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new je(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new je(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new je(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class tB extends ir{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new je(16777215),this.specular=new je(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tl,this.normalScale=new Re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=jh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class nB extends ir{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new je(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tl,this.normalScale=new Re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class rB extends ir{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tl,this.normalScale=new Re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class iB extends ir{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new je(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tl,this.normalScale=new Re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=jh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class sB extends ir{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new je(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tl,this.normalScale=new Re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class oB extends Gr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Hl(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function aB(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function lB(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function PE(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i}function GA(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}function p9(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],d=c.getValueSize(),h=[],p=[];for(let m=0;m<c.times.length;++m){const v=c.times[m]*i;if(!(v<t||v>=r)){h.push(c.times[m]);for(let _=0;_<d;++_)p.push(c.values[m*d+_])}}h.length!==0&&(c.times=Hl(h,c.times.constructor),c.values=Hl(p,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function m9(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(c===void 0)continue;let d=0;const h=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=h/3);let p=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const v=a.times.length-1;let _;if(s<=a.times[0]){const g=d,S=h-d;_=a.values.slice(g,S)}else if(s>=a.times[v]){const g=v*h+d,S=g+h-d;_=a.values.slice(g,S)}else{const g=a.createInterpolant(),S=d,E=h-d;g.evaluate(s),_=g.resultBuffer.slice(S,E)}l==="quaternion"&&new br().fromArray(_).normalize().conjugate().toArray(_);const y=c.times.length;for(let g=0;g<y;++g){const S=g*m+p;if(l==="quaternion")br.multiplyQuaternionsFlat(c.values,S,_,0,c.values,S);else{const E=m-p*2;for(let w=0;w<E;++w)c.values[S+w]-=_[w]}}}return n.blendMode=gA,n}const g9={convertArray:Hl,isTypedArray:aB,getKeyframeOrder:lB,sortedArray:PE,flattenJSON:GA,subclip:p9,makeClipAdditive:m9};class yd{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class cB extends yd{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Fl,endingEnd:Fl}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case kl:s=e,a=2*t-r;break;case xh:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case kl:o=e,l=2*r-t;break;case xh:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const c=(r-t)*.5,d=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-r),this._offsetPrev=s*d,this._offsetNext=o*d}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=this._offsetPrev,h=this._offsetNext,p=this._weightPrev,m=this._weightNext,v=(r-t)/(i-t),_=v*v,y=_*v,g=-p*y+2*p*_-p*v,S=(1+p)*y+(-1.5-2*p)*_+(-.5+p)*v+1,E=(-1-m)*y+(1.5+m)*_+.5*v,w=m*y-m*_;for(let T=0;T!==a;++T)s[T]=g*o[d+T]+S*o[c+T]+E*o[l+T]+w*o[h+T];return s}}class VA extends yd{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=(r-t)/(i-t),h=1-d;for(let p=0;p!==a;++p)s[p]=o[c+p]*h+o[l+p]*d;return s}}class uB extends yd{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ns{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Hl(t,this.TimeBufferType),this.values=Hl(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Hl(e.times,Array),values:Hl(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new uB(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new VA(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new cB(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Yu:t=this.InterpolantFactoryMethodDiscrete;break;case sc:t=this.InterpolantFactoryMethodLinear;break;case e0:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Yu;case this.InterpolantFactoryMethodLinear:return sc;case this.InterpolantFactoryMethodSmooth:return e0}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=r.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&aB(i))for(let a=0,l=i.length;a!==l;++a){const c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===e0,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],d=e[a+1];if(c!==d&&(a!==1||c!==e[0]))if(i)l=!0;else{const h=a*r,p=h-r,m=h+r;for(let v=0;v!==r;++v){const _=t[h+v];if(_!==t[p+v]||_!==t[m+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const h=a*r,p=o*r;for(let m=0;m!==r;++m)t[p+m]=t[h+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,c=0;c!==r;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Ns.prototype.TimeBufferType=Float32Array;Ns.prototype.ValueBufferType=Float32Array;Ns.prototype.DefaultInterpolation=sc;class hc extends Ns{}hc.prototype.ValueTypeName="bool";hc.prototype.ValueBufferType=Array;hc.prototype.DefaultInterpolation=Yu;hc.prototype.InterpolantFactoryMethodLinear=void 0;hc.prototype.InterpolantFactoryMethodSmooth=void 0;class WA extends Ns{}WA.prototype.ValueTypeName="color";class ed extends Ns{}ed.prototype.ValueTypeName="number";class dB extends yd{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let c=e*a;for(let d=c+a;c!==d;c+=4)br.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Xa extends Ns{InterpolantFactoryMethodLinear(e){return new dB(this.times,this.values,this.getValueSize(),e)}}Xa.prototype.ValueTypeName="quaternion";Xa.prototype.DefaultInterpolation=sc;Xa.prototype.InterpolantFactoryMethodSmooth=void 0;class pc extends Ns{}pc.prototype.ValueTypeName="string";pc.prototype.ValueBufferType=Array;pc.prototype.DefaultInterpolation=Yu;pc.prototype.InterpolantFactoryMethodLinear=void 0;pc.prototype.InterpolantFactoryMethodSmooth=void 0;class td extends Ns{}td.prototype.ValueTypeName="vector";class nd{constructor(e,t=-1,r,i=_v){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Bi(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(y9(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(Ns.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const d=lB(l);l=PE(l,1,d),c=PE(c,1,d),!i&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new ed(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],d=c.name.match(s);if(d&&d.length>1){const h=d[1];let p=i[h];p||(i[h]=p=[]),p.push(c)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(h,p,m,v,_){if(m.length!==0){const y=[],g=[];GA(m,y,g,v),y.length!==0&&_.push(new h(p,y,g))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let h=0;h<c.length;h++){const p=c[h].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let v;for(v=0;v<p.length;v++)if(p[v].morphTargets)for(let _=0;_<p[v].morphTargets.length;_++)m[p[v].morphTargets[_]]=-1;for(const _ in m){const y=[],g=[];for(let S=0;S!==p[v].morphTargets.length;++S){const E=p[v];y.push(E.time),g.push(E.morphTarget===_?1:0)}i.push(new ed(".morphTargetInfluence["+_+"]",y,g))}l=m.length*o}else{const m=".bones["+t[h].name+"]";r(td,m+".position",p,"pos",i),r(Xa,m+".quaternion",p,"rot",i),r(td,m+".scale",p,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function v9(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ed;case"vector":case"vector2":case"vector3":case"vector4":return td;case"color":return WA;case"quaternion":return Xa;case"bool":case"boolean":return hc;case"string":return pc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function y9(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=v9(n.type);if(n.times===void 0){const t=[],r=[];GA(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const No={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class $A{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(d){a++,s===!1&&i.onStart!==void 0&&i.onStart(d,o,a),s=!0},this.itemEnd=function(d){o++,i.onProgress!==void 0&&i.onProgress(d,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(d){i.onError!==void 0&&i.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,h){return c.push(d,h),this},this.removeHandler=function(d){const h=c.indexOf(d);return h!==-1&&c.splice(h,2),this},this.getHandler=function(d){for(let h=0,p=c.length;h<p;h+=2){const m=c[h],v=c[h+1];if(m.global&&(m.lastIndex=0),m.test(d))return v}return null}}}const bu=new $A;let Vr=class{constructor(e){this.manager=e!==void 0?e:bu,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};Vr.DEFAULT_MATERIAL_NAME="__DEFAULT";const Mo={};class _9 extends Error{constructor(e,t){super(e),this.response=t}}class Ni extends Vr{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=No.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Mo[e]!==void 0){Mo[e].push({onLoad:t,onProgress:r,onError:i});return}Mo[e]=[],Mo[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const d=Mo[e],h=c.body.getReader(),p=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),m=p?parseInt(p):0,v=m!==0;let _=0;const y=new ReadableStream({start(g){S();function S(){h.read().then(({done:E,value:w})=>{if(E)g.close();else{_+=w.byteLength;const T=new ProgressEvent("progress",{lengthComputable:v,loaded:_,total:m});for(let b=0,R=d.length;b<R;b++){const B=d[b];B.onProgress&&B.onProgress(T)}g.enqueue(w),S()}})}}});return new Response(y)}else throw new _9(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(d=>new DOMParser().parseFromString(d,a));case"json":return c.json();default:if(a===void 0)return c.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),p=h&&h[1]?h[1].toLowerCase():void 0,m=new TextDecoder(p);return c.arrayBuffer().then(v=>m.decode(v))}}}).then(c=>{No.add(e,c);const d=Mo[e];delete Mo[e];for(let h=0,p=d.length;h<p;h++){const m=d[h];m.onLoad&&m.onLoad(c)}}).catch(c=>{const d=Mo[e];if(d===void 0)throw this.manager.itemError(e),c;delete Mo[e];for(let h=0,p=d.length;h<p;h++){const m=d[h];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class x9 extends Vr{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Ni(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=nd.parse(e[r]);t.push(i)}return t}}class E9 extends Vr{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new Cv,l=new Ni(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function d(h){l.load(e[h],function(p){const m=s.parse(p,!0);o[h]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(a.minFilter=mn),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let h=0,p=e.length;h<p;++h)d(h);else l.load(e,function(h){const p=s.parse(h,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let v=0;v<m;v++){o[v]={mipmaps:[]};for(let _=0;_<p.mipmapCount;_++)o[v].mipmaps.push(p.mipmaps[v*p.mipmapCount+_]),o[v].format=p.format,o[v].width=p.width,o[v].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=mn),a.format=p.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}class Lh extends Vr{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=No.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=bh("img");function l(){d(),No.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(h){d(),i&&i(h),s.manager.itemError(e),s.manager.itemEnd(e)}function d(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class fB extends Vr{constructor(e){super(e)}load(e,t,r,i){const s=new Kh;s.colorSpace=lr;const o=new Lh(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(d){s.images[c]=d,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return s}}class jA extends Vr{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Yl,a=new Ni(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(d){if(i!==void 0)i(d);else{console.error(d);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Ar,o.wrapT=c.wrapT!==void 0?c.wrapT:Ar,o.magFilter=c.magFilter!==void 0?c.magFilter:mn,o.minFilter=c.minFilter!==void 0?c.minFilter:mn,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0?o.colorSpace=c.colorSpace:c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=ao),c.mipmapCount===1&&(o.minFilter=mn),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},r,i),o}}class hB extends Vr{constructor(e){super(e)}load(e,t,r,i){const s=new Mn,o=new Lh(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class rl extends jt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new je(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class pB extends rl{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(jt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new je(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const cx=new _t,FT=new X,kT=new X;class XA{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Re(512,512),this.map=null,this.mapPass=null,this.matrix=new _t,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Zh,this._frameExtents=new Re(1,1),this._viewportCount=1,this._viewports=[new ln(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;FT.setFromMatrixPosition(e.matrixWorld),t.position.copy(FT),kT.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(kT),t.updateMatrixWorld(),cx.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(cx),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(cx)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class S9 extends XA{constructor(){super(new cr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=Zu*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class JA extends rl{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(jt.DEFAULT_UP),this.updateMatrix(),this.target=new jt,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new S9}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const UT=new _t,mf=new X,ux=new X;class A9 extends XA{constructor(){super(new cr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Re(4,2),this._viewportCount=6,this._viewports=[new ln(2,1,1,1),new ln(0,1,1,1),new ln(3,1,1,1),new ln(1,1,1,1),new ln(3,0,1,1),new ln(1,0,1,1)],this._cubeDirections=[new X(1,0,0),new X(-1,0,0),new X(0,0,1),new X(0,0,-1),new X(0,1,0),new X(0,-1,0)],this._cubeUps=[new X(0,1,0),new X(0,1,0),new X(0,1,0),new X(0,1,0),new X(0,0,1),new X(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),mf.setFromMatrixPosition(e.matrixWorld),r.position.copy(mf),ux.copy(r.position),ux.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(ux),r.updateMatrixWorld(),i.makeTranslation(-mf.x,-mf.y,-mf.z),UT.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(UT)}}class YA extends rl{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new A9}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class w9 extends XA{constructor(){super(new md(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class KA extends rl{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(jt.DEFAULT_UP),this.updateMatrix(),this.target=new jt,this.shadow=new w9}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class mB extends rl{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class gB extends rl{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class vB{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new X)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class yB extends rl{constructor(e=new vB,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Hv extends Vr{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,o=new Ni(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=Hv.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new je().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new je().setHex(o.value);break;case"v2":i.uniforms[s].value=new Re().fromArray(o.value);break;case"v3":i.uniforms[s].value=new X().fromArray(o.value);break;case"v4":i.uniforms[s].value=new ln().fromArray(o.value);break;case"m3":i.uniforms[s].value=new zt().fromArray(o.value);break;case"m4":i.uniforms[s].value=new _t().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new Re().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Re().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:q3,SpriteMaterial:IA,RawShaderMaterial:eB,ShaderMaterial:Ls,PointsMaterial:bv,MeshPhysicalMaterial:fo,MeshStandardMaterial:sp,MeshPhongMaterial:tB,MeshToonMaterial:nB,MeshNormalMaterial:rB,MeshLambertMaterial:iB,MeshDepthMaterial:TA,MeshDistanceMaterial:RA,MeshBasicMaterial:Ii,MeshMatcapMaterial:sB,LineDashedMaterial:oB,LineBasicMaterial:Gr,Material:ir};return new t[e]}}class io{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class _B extends Lt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class xB extends Vr{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Ni(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(m,v){if(t[v]!==void 0)return t[v];const y=m.interleavedBuffers[v],g=s(m,y.buffer),S=Su(y.type,g),E=new qh(S,y.stride);return E.uuid=y.uuid,t[v]=E,E}function s(m,v){if(r[v]!==void 0)return r[v];const y=m.arrayBuffers[v],g=new Uint32Array(y).buffer;return r[v]=g,g}const o=e.isInstancedBufferGeometry?new _B:new Lt,a=e.data.index;if(a!==void 0){const m=Su(a.type,a.array);o.setIndex(new Zt(m,1))}const l=e.data.attributes;for(const m in l){const v=l[m];let _;if(v.isInterleavedBufferAttribute){const y=i(e.data,v.data);_=new ja(y,v.itemSize,v.offset,v.normalized)}else{const y=Su(v.type,v.array),g=v.isInstancedBufferAttribute?qu:Zt;_=new g(y,v.itemSize,v.normalized)}v.name!==void 0&&(_.name=v.name),v.usage!==void 0&&_.setUsage(v.usage),o.setAttribute(m,_)}const c=e.data.morphAttributes;if(c)for(const m in c){const v=c[m],_=[];for(let y=0,g=v.length;y<g;y++){const S=v[y];let E;if(S.isInterleavedBufferAttribute){const w=i(e.data,S.data);E=new ja(w,S.itemSize,S.offset,S.normalized)}else{const w=Su(S.type,S.array);E=new Zt(w,S.itemSize,S.normalized)}S.name!==void 0&&(E.name=S.name),_.push(E)}o.morphAttributes[m]=_}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let m=0,v=h.length;m!==v;++m){const _=h[m];o.addGroup(_.start,_.count,_.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new X;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new xr(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class M9 extends Vr{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?io.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Ni(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(h){i!==void 0&&i(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const d=c.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?io.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new Ni(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,r),d=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,d),t!==void 0){let h=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){h=!0;break}h===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new Kl().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new ep().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new xB;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in NT?a=NT[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new Hv;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=nd.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return o(d)}else return l.data?{data:Su(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new $A(t);s=new Lh(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,d=e.length;c<d;c++){const h=e[c],p=h.url;if(Array.isArray(p)){const m=[];for(let v=0,_=p.length;v<_;v++){const y=p[v],g=a(y);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new Yl(g.data,g.width,g.height)))}i[h.uuid]=new Ul(m)}else{const m=a(h.url);i[h.uuid]=new Ul(m)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:Su(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new Lh(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const d=[];for(let h=0,p=c.length;h<p;h++){const m=c[h],v=await s(m);v!==null&&(v instanceof HTMLImageElement?d.push(v):d.push(new Yl(v.data,v.width,v.height)))}r[l.uuid]=new Ul(d)}else{const d=await s(l.url);r[l.uuid]=new Ul(d)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let d;Array.isArray(c)?(d=new Kh,c.length===6&&(d.needsUpdate=!0)):(c&&c.data?d=new Yl:d=new Mn,c&&(d.needsUpdate=!0)),d.source=l,d.uuid=a.uuid,a.name!==void 0&&(d.name=a.name),a.mapping!==void 0&&(d.mapping=r(a.mapping,b9)),a.channel!==void 0&&(d.channel=a.channel),a.offset!==void 0&&d.offset.fromArray(a.offset),a.repeat!==void 0&&d.repeat.fromArray(a.repeat),a.center!==void 0&&d.center.fromArray(a.center),a.rotation!==void 0&&(d.rotation=a.rotation),a.wrap!==void 0&&(d.wrapS=r(a.wrap[0],zT),d.wrapT=r(a.wrap[1],zT)),a.format!==void 0&&(d.format=a.format),a.internalFormat!==void 0&&(d.internalFormat=a.internalFormat),a.type!==void 0&&(d.type=a.type),a.colorSpace!==void 0&&(d.colorSpace=a.colorSpace),a.encoding!==void 0&&(d.encoding=a.encoding),a.minFilter!==void 0&&(d.minFilter=r(a.minFilter,HT)),a.magFilter!==void 0&&(d.magFilter=r(a.magFilter,HT)),a.anisotropy!==void 0&&(d.anisotropy=a.anisotropy),a.flipY!==void 0&&(d.flipY=a.flipY),a.generateMipmaps!==void 0&&(d.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(d.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(d.compareFunction=a.compareFunction),a.userData!==void 0&&(d.userData=a.userData),i[a.uuid]=d}return i}parseObject(e,t,r,i,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let v=0,_=p.length;v<_;v++){const y=p[v];r[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),m.push(r[y])}return m}return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),r[p]}}function c(p){return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),i[p]}let d,h;switch(e.type){case"Scene":o=new Ch,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new je(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new wv(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Av(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new cr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new md(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new mB(e.color,e.intensity);break;case"DirectionalLight":o=new KA(e.color,e.intensity);break;case"PointLight":o=new YA(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new gB(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new JA(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new pB(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new yB().fromJSON(e);break;case"SkinnedMesh":d=a(e.geometry),h=l(e.material),o=new LA(d,h),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":d=a(e.geometry),h=l(e.material),o=new Qn(d,h);break;case"InstancedMesh":d=a(e.geometry),h=l(e.material);const p=e.count,m=e.instanceMatrix,v=e.instanceColor;o=new BA(d,h,p),o.instanceMatrix=new qu(new Float32Array(m.array),16),v!==void 0&&(o.instanceColor=new qu(new Float32Array(v.array),v.itemSize));break;case"BatchedMesh":d=a(e.geometry),h=l(e.material),o=new G3(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,h),o.geometry=d,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(_=>{const y=new Cr;y.min.fromArray(_.boxMin),y.max.fromArray(_.boxMax);const g=new xr;return g.radius=_.sphereRadius,g.center.fromArray(_.sphereCenter),{boxInitialized:_.boxInitialized,box:y,sphereInitialized:_.sphereInitialized,sphere:g}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid);break;case"LOD":o=new H3;break;case"Line":o=new $o(a(e.geometry),l(e.material));break;case"LineLoop":o=new DA(a(e.geometry),l(e.material));break;case"LineSegments":o=new Ds(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new OA(a(e.geometry),l(e.material));break;case"Sprite":o=new z3(l(e.material));break;case"Group":o=new Oo;break;case"Bone":o=new Mv;break;default:o=new jt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,r,i,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const v=p[m];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const v=p[m],_=o.getObjectByProperty("uuid",v.object);_!==void 0&&o.addLevel(_,v.distance,v.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const b9={UVMapping:gv,CubeReflectionMapping:oo,CubeRefractionMapping:Wa,EquirectangularReflectionMapping:Xu,EquirectangularRefractionMapping:yh,CubeUVReflectionMapping:hd},zT={RepeatWrapping:$a,ClampToEdgeWrapping:Ar,MirroredRepeatWrapping:Ju},HT={NearestFilter:jn,NearestMipmapNearestFilter:_h,NearestMipmapLinearFilter:Ou,LinearFilter:mn,LinearMipmapNearestFilter:vv,LinearMipmapLinearFilter:ao};class EB extends Vr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=No.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{t&&t(c),s.manager.itemEnd(e)}).catch(c=>{i&&i(c)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return No.add(e,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){i&&i(c),No.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});No.add(e,l),s.manager.itemStart(e)}}let fg;class ZA{static getContext(){return fg===void 0&&(fg=new(window.AudioContext||window.webkitAudioContext)),fg}static setContext(e){fg=e}}class C9 extends Vr{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Ni(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);ZA.getContext().decodeAudioData(c,function(h){t(h)}).catch(a)}catch(c){a(c)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}const GT=new _t,VT=new _t,El=new _t;class T9{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new cr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new cr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,El.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(Xl*t.fov*.5)/t.zoom;let a,l;VT.elements[12]=-i,GT.elements[12]=i,a=-o*t.aspect+s,l=o*t.aspect+s,El.elements[0]=2*t.near/(l-a),El.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(El),a=-o*t.aspect-s,l=o*t.aspect-s,El.elements[0]=2*t.near/(l-a),El.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(El)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(VT),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(GT)}}class QA{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=WT(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=WT();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function WT(){return(typeof performance>"u"?Date:performance).now()}const Sl=new X,$T=new br,R9=new X,Al=new X;class P9 extends jt{constructor(){super(),this.type="AudioListener",this.context=ZA.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new QA}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Sl,$T,R9),Al.set(0,0,-1).applyQuaternion($T),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Sl.x,i),t.positionY.linearRampToValueAtTime(Sl.y,i),t.positionZ.linearRampToValueAtTime(Sl.z,i),t.forwardX.linearRampToValueAtTime(Al.x,i),t.forwardY.linearRampToValueAtTime(Al.y,i),t.forwardZ.linearRampToValueAtTime(Al.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(Sl.x,Sl.y,Sl.z),t.setOrientation(Al.x,Al.y,Al.z,r.x,r.y,r.z)}}let SB=class extends jt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}};const wl=new X,jT=new br,I9=new X,Ml=new X;class L9 extends SB{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(wl,jT,I9),Ml.set(0,0,1).applyQuaternion(jT);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(wl.x,r),t.positionY.linearRampToValueAtTime(wl.y,r),t.positionZ.linearRampToValueAtTime(wl.z,r),t.orientationX.linearRampToValueAtTime(Ml.x,r),t.orientationY.linearRampToValueAtTime(Ml.y,r),t.orientationZ.linearRampToValueAtTime(Ml.z,r)}else t.setPosition(wl.x,wl.y,wl.z),t.setOrientation(Ml.x,Ml.y,Ml.z)}}class B9{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class AB{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){br.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;br.multiplyQuaternionsFlat(e,o,e,t,e,r),br.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const qA="\\[\\]\\.:\\/",D9=new RegExp("["+qA+"]","g"),ew="[^"+qA+"]",O9="[^"+qA.replace("\\.","")+"]",N9=/((?:WC+[\/:])*)/.source.replace("WC",ew),F9=/(WCOD+)?/.source.replace("WCOD",O9),k9=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",ew),U9=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",ew),z9=new RegExp("^"+N9+F9+k9+U9+"$"),H9=["material","materials","bones","map"];class G9{constructor(e,t,r){const i=r||Kt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class Kt{constructor(e,t,r){this.path=t,this.parsedPath=r||Kt.parseTrackName(t),this.node=Kt.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new Kt.Composite(e,t,r):new Kt(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(D9,"")}static parseTrackName(e){const t=z9.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);H9.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=Kt.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let c=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===c){c=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[i];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Kt.Composite=G9;Kt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Kt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Kt.prototype.GetterByBindingType=[Kt.prototype._getValue_direct,Kt.prototype._getValue_array,Kt.prototype._getValue_arrayElement,Kt.prototype._getValue_toArray];Kt.prototype.SetterByBindingTypeAndVersioning=[[Kt.prototype._setValue_direct,Kt.prototype._setValue_direct_setNeedsUpdate,Kt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Kt.prototype._setValue_array,Kt.prototype._setValue_array_setNeedsUpdate,Kt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Kt.prototype._setValue_arrayElement,Kt.prototype._setValue_arrayElement_setNeedsUpdate,Kt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Kt.prototype._setValue_fromArray,Kt.prototype._setValue_fromArray_setNeedsUpdate,Kt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class V9{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Bi(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let d=0,h=arguments.length;d!==h;++d){const p=arguments[d],m=p.uuid;let v=t[m];if(v===void 0){v=l++,t[m]=v,e.push(p);for(let _=0,y=o;_!==y;++_)s[_].push(new Kt(p,r[_],i[_]))}else if(v<c){a=e[v];const _=--c,y=e[_];t[y.uuid]=v,e[v]=y,t[m]=_,e[_]=p;for(let g=0,S=o;g!==S;++g){const E=s[g],w=E[_];let T=E[v];E[v]=w,T===void 0&&(T=new Kt(p,r[g],i[g])),E[_]=T}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,d=t[c];if(d!==void 0&&d>=s){const h=s++,p=e[h];t[p.uuid]=d,e[d]=p,t[c]=h,e[h]=l;for(let m=0,v=i;m!==v;++m){const _=r[m],y=_[h],g=_[d];_[d]=y,_[h]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],d=c.uuid,h=t[d];if(h!==void 0)if(delete t[d],h<s){const p=--s,m=e[p],v=--o,_=e[v];t[m.uuid]=h,e[h]=m,t[_.uuid]=p,e[p]=_,e.pop();for(let y=0,g=i;y!==g;++y){const S=r[y],E=S[p],w=S[v];S[h]=E,S[p]=w,S.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=h),e[h]=m,e.pop();for(let v=0,_=i;v!==_;++v){const y=r[v];y[h]=y[p],y.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,d=this.nCachedObjects_,h=new Array(c);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(h);for(let p=d,m=l.length;p!==m;++p){const v=l[p];h[p]=new Kt(v,e,t)}return h}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class wB{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Fl,endingEnd:Fl};for(let c=0;c!==o;++c){const d=s[c].createInterpolant(null);a[c]=d,d.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=u3,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+r,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case gA:for(let d=0,h=l.length;d!==h;++d)l[d].evaluate(o),c[d].accumulateAdditive(a);break;case _v:default:for(let d=0,h=l.length;d!==h;++d)l[d].evaluate(o),c[d].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===d3;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===c3){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=kl,i.endingEnd=kl):(e?i.endingStart=this.zeroSlopeAtStart?kl:Fl:i.endingStart=xh,t?i.endingEnd=this.zeroSlopeAtEnd?kl:Fl:i.endingEnd=xh)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}const W9=new Float32Array(1);class MB extends Qo{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let d=c[l];d===void 0&&(d={},c[l]=d);for(let h=0;h!==s;++h){const p=i[h],m=p.name;let v=d[m];if(v!==void 0)++v.referenceCount,o[h]=v;else{if(v=o[h],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,m));continue}const _=t&&t._propertyBindings[h].binding.parsedPath;v=new AB(Kt.create(r,m,_),p.ValueTypeName,p.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,m),o[h]=v}a[h].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],d=e._byClipCacheIndex;c._byClipCacheIndex=d,l[d]=c,l.pop(),e._byClipCacheIndex=null;const h=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete h[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new VA(new Float32Array(2),new Float32Array(2),1,W9),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?nd.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(r===void 0&&(o!==null?r=o.blendMode:r=_v),l!==void 0){const h=l.actionByRoot[s];if(h!==void 0&&h.blendMode===r)return h;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const d=new wB(this,o,t,r);return this._bindAction(d,c),this._addInactiveAction(d,a,s),d}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?nd.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==r;++c)t[c]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const d=c._cacheIndex,h=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,h._cacheIndex=d,t[d]=h,t.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class tw{constructor(e){this.value=e}clone(){return new tw(this.value.clone===void 0?this.value:this.value.clone())}}let $9=0;class j9 extends Qo{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:$9++}),this.name="",this.usage=wh,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++){const s=Array.isArray(t[r])?t[r]:[t[r]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class X9 extends qh{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class J9{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class Gv{constructor(e,t,r=0,i=1/0){this.ray=new pd(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new Jl,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return IE(e,this,r,t),r.sort(XT),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)IE(e[i],this,r,t);return r.sort(XT),r}}function XT(n,e){return n.distance-e.distance}function IE(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let s=0,o=i.length;s<o;s++)IE(i[s],e,t,!0)}}class bB{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Xn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Y9{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const JT=new Re;class K9{constructor(e=new Re(1/0,1/0),t=new Re(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=JT.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,JT).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const YT=new X,hg=new X;class Z9{constructor(e=new X,t=new X){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){YT.subVectors(e,this.start),hg.subVectors(this.end,this.start);const r=hg.dot(hg);let s=hg.dot(YT)/r;return t&&(s=Xn(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const KT=new X;class Q9 extends jt{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new Lt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,d=a/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(d),Math.sin(d),1)}r.setAttribute("position",new at(i,3));const s=new Gr({fog:!1,toneMapped:!1});this.cone=new Ds(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),KT.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(KT),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const ga=new X,pg=new _t,dx=new _t;class q9 extends Ds{constructor(e){const t=CB(e),r=new Lt,i=[],s=[],o=new je(0,0,1),a=new je(0,1,0);for(let c=0;c<t.length;c++){const d=t[c];d.parent&&d.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new at(i,3)),r.setAttribute("color",new at(s,3));const l=new Gr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");dx.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(pg.multiplyMatrices(dx,a.matrixWorld),ga.setFromMatrixPosition(pg),i.setXYZ(o,ga.x,ga.y,ga.z),pg.multiplyMatrices(dx,a.parent.matrixWorld),ga.setFromMatrixPosition(pg),i.setXYZ(o+1,ga.x,ga.y,ga.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function CB(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,CB(n.children[t]));return e}class e6 extends Qn{constructor(e,t,r){const i=new ip(t,4,2),s=new Ii({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const t6=new X,ZT=new je,QT=new je;class n6 extends jt{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new rp(t);i.rotateY(Math.PI*.5),this.material=new Ii({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new Zt(o,3)),this.add(new Qn(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");ZT.copy(this.light.color),QT.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?ZT:QT;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(t6.setFromMatrixPosition(this.light.matrixWorld).negate())}}class r6 extends Ds{constructor(e=10,t=10,r=4473924,i=8947848){r=new je(r),i=new je(i);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let p=0,m=0,v=-a;p<=t;p++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const _=p===s?r:i;_.toArray(c,m),m+=3,_.toArray(c,m),m+=3,_.toArray(c,m),m+=3,_.toArray(c,m),m+=3}const d=new Lt;d.setAttribute("position",new at(l,3)),d.setAttribute("color",new at(c,3));const h=new Gr({vertexColors:!0,toneMapped:!1});super(d,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class i6 extends Ds{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new je(s),o=new je(o);const a=[],l=[];if(t>1)for(let h=0;h<t;h++){const p=h/t*(Math.PI*2),m=Math.sin(p)*e,v=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,v);const _=h&1?s:o;l.push(_.r,_.g,_.b),l.push(_.r,_.g,_.b)}for(let h=0;h<r;h++){const p=h&1?s:o,m=e-e/r*h;for(let v=0;v<i;v++){let _=v/i*(Math.PI*2),y=Math.sin(_)*m,g=Math.cos(_)*m;a.push(y,0,g),l.push(p.r,p.g,p.b),_=(v+1)/i*(Math.PI*2),y=Math.sin(_)*m,g=Math.cos(_)*m,a.push(y,0,g),l.push(p.r,p.g,p.b)}}const c=new Lt;c.setAttribute("position",new at(a,3)),c.setAttribute("color",new at(l,3));const d=new Gr({vertexColors:!0,toneMapped:!1});super(c,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const qT=new X,mg=new X,eR=new X;class s6 extends jt{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new Lt;i.setAttribute("position",new at([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Gr({fog:!1,toneMapped:!1});this.lightPlane=new $o(i,s),this.add(this.lightPlane),i=new Lt,i.setAttribute("position",new at([0,0,0,0,0,1],3)),this.targetLine=new $o(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),qT.setFromMatrixPosition(this.light.matrixWorld),mg.setFromMatrixPosition(this.light.target.matrixWorld),eR.subVectors(mg,qT),this.lightPlane.lookAt(mg),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(mg),this.targetLine.scale.z=eR.length()}}const gg=new X,Wn=new Yh;class o6 extends Ds{constructor(e){const t=new Lt,r=new Gr({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,_){l(v),l(_)}function l(v){i.push(0,0,0),s.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(i.length/3-1)}t.setAttribute("position",new at(i,3)),t.setAttribute("color",new at(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new je(16755200),d=new je(16711680),h=new je(43775),p=new je(16777215),m=new je(3355443);this.setColors(c,d,h,p,m)}setColors(e,t,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;Wn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Kn("c",t,e,Wn,0,0,-1),Kn("t",t,e,Wn,0,0,1),Kn("n1",t,e,Wn,-r,-i,-1),Kn("n2",t,e,Wn,r,-i,-1),Kn("n3",t,e,Wn,-r,i,-1),Kn("n4",t,e,Wn,r,i,-1),Kn("f1",t,e,Wn,-r,-i,1),Kn("f2",t,e,Wn,r,-i,1),Kn("f3",t,e,Wn,-r,i,1),Kn("f4",t,e,Wn,r,i,1),Kn("u1",t,e,Wn,r*.7,i*1.1,-1),Kn("u2",t,e,Wn,-r*.7,i*1.1,-1),Kn("u3",t,e,Wn,0,i*2,-1),Kn("cf1",t,e,Wn,-r,0,1),Kn("cf2",t,e,Wn,r,0,1),Kn("cf3",t,e,Wn,0,-i,1),Kn("cf4",t,e,Wn,0,i,1),Kn("cn1",t,e,Wn,-r,0,-1),Kn("cn2",t,e,Wn,r,0,-1),Kn("cn3",t,e,Wn,0,-i,-1),Kn("cn4",t,e,Wn,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Kn(n,e,t,r,i,s,o){gg.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,d=a.length;c<d;c++)l.setXYZ(a[c],gg.x,gg.y,gg.z)}}const vg=new Cr;class a6 extends Ds{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new Lt;s.setIndex(new Zt(r,1)),s.setAttribute("position",new Zt(i,3)),super(s,new Gr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&vg.setFromObject(this.object),vg.isEmpty())return;const t=vg.min,r=vg.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class l6 extends Ds{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Lt;s.setIndex(new Zt(r,1)),s.setAttribute("position",new at(i,3)),super(s,new Gr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class c6 extends $o{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Lt;o.setAttribute("position",new at(s,3)),o.computeBoundingSphere(),super(o,new Gr({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Lt;l.setAttribute("position",new at(a,3)),l.computeBoundingSphere(),this.add(new Qn(l,new Ii({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const tR=new X;let yg,fx;class u6 extends jt{constructor(e=new X(0,0,1),t=new X(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",yg===void 0&&(yg=new Lt,yg.setAttribute("position",new at([0,0,0,0,1,0],3)),fx=new vd(0,.5,1,5,1),fx.translate(0,-.5,0)),this.position.copy(t),this.line=new $o(yg,new Gr({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Qn(fx,new Ii({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{tR.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(tR,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class d6 extends Ds{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Lt;i.setAttribute("position",new at(t,3)),i.setAttribute("color",new at(r,3));const s=new Gr({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new je,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class f6{constructor(){this.type="ShapePath",this.color=new je,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Th,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const S=[];for(let E=0,w=g.length;E<w;E++){const T=g[E],b=new Kl;b.curves=T.curves,S.push(b)}return S}function r(g,S){const E=S.length;let w=!1;for(let T=E-1,b=0;b<E;T=b++){let R=S[T],B=S[b],P=B.x-R.x,I=B.y-R.y;if(Math.abs(I)>Number.EPSILON){if(I<0&&(R=S[b],P=-P,B=S[T],I=-I),g.y<R.y||g.y>B.y)continue;if(g.y===R.y){if(g.x===R.x)return!0}else{const F=I*(g.x-R.x)-P*(g.y-R.y);if(F===0)return!0;if(F<0)continue;w=!w}}else{if(g.y!==R.y)continue;if(B.x<=g.x&&g.x<=R.x||R.x<=g.x&&g.x<=B.x)return!0}}return w}const i=ro.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Kl,l.curves=a.curves,c.push(l),c;let d=!i(s[0].getPoints());d=e?!d:d;const h=[],p=[];let m=[],v=0,_;p[v]=void 0,m[v]=[];for(let g=0,S=s.length;g<S;g++)a=s[g],_=a.getPoints(),o=i(_),o=e?!o:o,o?(!d&&p[v]&&v++,p[v]={s:new Kl,p:_},p[v].s.curves=a.curves,d&&v++,m[v]=[]):m[v].push({h:a,p:_[0]});if(!p[0])return t(s);if(p.length>1){let g=!1,S=0;for(let E=0,w=p.length;E<w;E++)h[E]=[];for(let E=0,w=p.length;E<w;E++){const T=m[E];for(let b=0;b<T.length;b++){const R=T[b];let B=!0;for(let P=0;P<p.length;P++)r(R.p,p[P].p)&&(E!==P&&S++,B?(B=!1,h[P].push(R)):g=!0);B&&h[E].push(R)}}S>0&&g===!1&&(m=h)}let y;for(let g=0,S=p.length;g<S;g++){l=p[g].s,c.push(l),y=m[g];for(let E=0,w=y.length;E<w;E++)l.holes.push(y[E].h)}return c}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:fd}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=fd);const h6=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:aA,AddEquation:Ca,AddOperation:YL,AdditiveAnimationBlendMode:gA,AdditiveBlending:$1,AgXToneMapping:e3,AlphaFormat:i3,AlwaysCompare:S3,AlwaysDepth:GL,AlwaysStencilFunc:SE,AmbientLight:mB,AnimationAction:wB,AnimationClip:nd,AnimationLoader:x9,AnimationMixer:MB,AnimationObjectGroup:V9,AnimationUtils:g9,ArcCurve:V3,ArrayCamera:F3,ArrowHelper:u6,AttachedBindMode:K1,Audio:SB,AudioAnalyser:B9,AudioContext:ZA,AudioListener:P9,AudioLoader:C9,AxesHelper:d6,BackSide:ni,BasicDepthPacking:h3,BasicShadowMap:wL,BatchedMesh:G3,Bone:Mv,BooleanKeyframeTrack:hc,Box2:K9,Box3:Cr,Box3Helper:l6,BoxGeometry:fc,BoxHelper:a6,BufferAttribute:Zt,BufferGeometry:Lt,BufferGeometryLoader:xB,ByteType:n3,Cache:No,Camera:Yh,CameraHelper:o6,CanvasTexture:z8,CapsuleGeometry:Rv,CatmullRomCurve3:W3,CineonToneMapping:QL,CircleGeometry:Pv,ClampToEdgeWrapping:Ar,Clock:QA,Color:je,ColorKeyframeTrack:WA,ColorManagement:un,CompressedArrayTexture:k8,CompressedCubeTexture:U8,CompressedTexture:Cv,CompressedTextureLoader:E9,ConeGeometry:Iv,ConstantAlphaFactor:UL,ConstantColorFactor:FL,CubeCamera:R3,CubeReflectionMapping:oo,CubeRefractionMapping:Wa,CubeTexture:Kh,CubeTextureLoader:fB,CubeUVReflectionMapping:hd,CubicBezierCurve:FA,CubicBezierCurve3:$3,CubicInterpolant:cB,CullFaceBack:W1,CullFaceFront:AL,CullFaceFrontBack:LU,CullFaceNone:SL,Curve:Os,CurvePath:X3,CustomBlending:ML,CustomToneMapping:qL,CylinderGeometry:vd,Cylindrical:Y9,Data3DTexture:SA,DataArrayTexture:Ev,DataTexture:Yl,DataTextureLoader:jA,DataUtils:zl,DecrementStencilOp:HU,DecrementWrapStencilOp:VU,DefaultLoadingManager:bu,DepthFormat:za,DepthStencilFormat:ic,DepthTexture:CA,DetachedBindMode:t3,DirectionalLight:KA,DirectionalLightHelper:s6,DiscreteInterpolant:uB,DisplayP3ColorSpace:xv,DodecahedronGeometry:Lv,DoubleSide:ns,DstAlphaFactor:LL,DstColorFactor:DL,DynamicCopyUsage:i4,DynamicDrawUsage:QU,DynamicReadUsage:t4,EdgesGeometry:J3,EllipseCurve:Tv,EqualCompare:y3,EqualDepth:WL,EqualStencilFunc:XU,EquirectangularReflectionMapping:Xu,EquirectangularRefractionMapping:yh,Euler:Jh,EventDispatcher:Qo,ExtrudeGeometry:Dv,FileLoader:Ni,Float16BufferAttribute:V4,Float32BufferAttribute:at,Float64BufferAttribute:W4,FloatType:wr,Fog:wv,FogExp2:Av,FramebufferTexture:F8,FrontSide:so,Frustum:Zh,GLBufferAttribute:J9,GLSL1:o4,GLSL3:AE,GreaterCompare:_3,GreaterDepth:jL,GreaterEqualCompare:E3,GreaterEqualDepth:$L,GreaterEqualStencilFunc:ZU,GreaterStencilFunc:YU,GridHelper:r6,Group:Oo,HalfFloatType:qr,HemisphereLight:pB,HemisphereLightHelper:n6,IcosahedronGeometry:np,ImageBitmapLoader:EB,ImageLoader:Lh,ImageUtils:EA,IncrementStencilOp:zU,IncrementWrapStencilOp:GU,InstancedBufferAttribute:qu,InstancedBufferGeometry:_B,InstancedInterleavedBuffer:X9,InstancedMesh:BA,Int16BufferAttribute:H4,Int32BufferAttribute:G4,Int8BufferAttribute:k4,IntType:lA,InterleavedBuffer:qh,InterleavedBufferAttribute:ja,Interpolant:yd,InterpolateDiscrete:Yu,InterpolateLinear:sc,InterpolateSmooth:e0,InvertStencilOp:WU,KeepStencilOp:Il,KeyframeTrack:Ns,LOD:H3,LatheGeometry:tp,Layers:Jl,LessCompare:v3,LessDepth:VL,LessEqualCompare:_A,LessEqualDepth:vh,LessEqualStencilFunc:JU,LessStencilFunc:jU,Light:rl,LightProbe:yB,Line:$o,Line3:Z9,LineBasicMaterial:Gr,LineCurve:kA,LineCurve3:j3,LineDashedMaterial:oB,LineLoop:DA,LineSegments:Ds,LinearDisplayP3ColorSpace:Xh,LinearEncoding:yA,LinearFilter:mn,LinearInterpolant:VA,LinearMipMapLinearFilter:FU,LinearMipMapNearestFilter:NU,LinearMipmapLinearFilter:ao,LinearMipmapNearestFilter:vv,LinearSRGBColorSpace:lo,LinearToneMapping:KL,LinearTransfer:Eh,Loader:Vr,LoaderUtils:io,LoadingManager:$A,LoopOnce:c3,LoopPingPong:d3,LoopRepeat:u3,LuminanceAlphaFormat:o3,LuminanceFormat:s3,MOUSE:PU,Material:ir,MaterialLoader:Hv,MathUtils:Mh,Matrix3:zt,Matrix4:_t,MaxEquation:Y1,Mesh:Qn,MeshBasicMaterial:Ii,MeshDepthMaterial:TA,MeshDistanceMaterial:RA,MeshLambertMaterial:iB,MeshMatcapMaterial:sB,MeshNormalMaterial:rB,MeshPhongMaterial:tB,MeshPhysicalMaterial:fo,MeshStandardMaterial:sp,MeshToonMaterial:nB,MinEquation:J1,MirroredRepeatWrapping:Ju,MixOperation:JL,MultiplyBlending:X1,MultiplyOperation:jh,NearestFilter:jn,NearestMipMapLinearFilter:OU,NearestMipMapNearestFilter:DU,NearestMipmapLinearFilter:Ou,NearestMipmapNearestFilter:_h,NeverCompare:g3,NeverDepth:HL,NeverStencilFunc:$U,NoBlending:ko,NoColorSpace:Ri,NoToneMapping:to,NormalAnimationBlendMode:_v,NormalBlending:jl,NotEqualCompare:x3,NotEqualDepth:XL,NotEqualStencilFunc:KU,NumberKeyframeTrack:ed,Object3D:jt,ObjectLoader:M9,ObjectSpaceNormalMap:m3,OctahedronGeometry:rp,OneFactor:RL,OneMinusConstantAlphaFactor:zL,OneMinusConstantColorFactor:kL,OneMinusDstAlphaFactor:BL,OneMinusDstColorFactor:OL,OneMinusSrcAlphaFactor:L0,OneMinusSrcColorFactor:IL,OrthographicCamera:md,P3Primaries:Ah,PCFShadowMap:mv,PCFSoftShadowMap:$f,PMREMGenerator:ME,Path:Th,PerspectiveCamera:cr,Plane:Aa,PlaneGeometry:Qh,PlaneHelper:c6,PointLight:YA,PointLightHelper:e6,Points:OA,PointsMaterial:bv,PolarGridHelper:i6,PolyhedronGeometry:nl,PositionalAudio:L9,PropertyBinding:Kt,PropertyMixer:AB,QuadraticBezierCurve:UA,QuadraticBezierCurve3:zA,Quaternion:br,QuaternionKeyframeTrack:Xa,QuaternionLinearInterpolant:dB,RED_GREEN_RGTC2_Format:xE,RED_RGTC1_Format:l3,REVISION:fd,RGBADepthPacking:p3,RGBAFormat:Ur,RGBAIntegerFormat:pA,RGBA_ASTC_10x10_Format:pE,RGBA_ASTC_10x5_Format:dE,RGBA_ASTC_10x6_Format:fE,RGBA_ASTC_10x8_Format:hE,RGBA_ASTC_12x10_Format:mE,RGBA_ASTC_12x12_Format:gE,RGBA_ASTC_4x4_Format:rE,RGBA_ASTC_5x4_Format:iE,RGBA_ASTC_5x5_Format:sE,RGBA_ASTC_6x5_Format:oE,RGBA_ASTC_6x6_Format:aE,RGBA_ASTC_8x5_Format:lE,RGBA_ASTC_8x6_Format:cE,RGBA_ASTC_8x8_Format:uE,RGBA_BPTC_Format:qg,RGBA_ETC2_EAC_Format:nE,RGBA_PVRTC_2BPPV1_Format:eE,RGBA_PVRTC_4BPPV1_Format:q1,RGBA_S3TC_DXT1_Format:Kg,RGBA_S3TC_DXT3_Format:Zg,RGBA_S3TC_DXT5_Format:Qg,RGB_BPTC_SIGNED_Format:vE,RGB_BPTC_UNSIGNED_Format:yE,RGB_ETC1_Format:mA,RGB_ETC2_Format:tE,RGB_PVRTC_2BPPV1_Format:Q1,RGB_PVRTC_4BPPV1_Format:Z1,RGB_S3TC_DXT1_Format:Yg,RGFormat:a3,RGIntegerFormat:hA,RawShaderMaterial:eB,Ray:pd,Raycaster:Gv,Rec709Primaries:Sh,RectAreaLight:gB,RedFormat:dA,RedIntegerFormat:fA,ReinhardToneMapping:ZL,RenderTarget:M3,RepeatWrapping:$a,ReplaceStencilOp:UU,ReverseSubtractEquation:CL,RingGeometry:Ov,SIGNED_RED_GREEN_RGTC2_Format:EE,SIGNED_RED_RGTC1_Format:_E,SRGBColorSpace:lr,SRGBTransfer:_n,Scene:Ch,ShaderChunk:Ft,ShaderLib:bs,ShaderMaterial:Ls,ShadowMaterial:q3,Shape:Kl,ShapeGeometry:Nv,ShapePath:f6,ShapeUtils:ro,ShortType:r3,Skeleton:ep,SkeletonHelper:q9,SkinnedMesh:LA,Source:Ul,Sphere:xr,SphereGeometry:ip,Spherical:bB,SphericalHarmonics3:vB,SplineCurve:HA,SpotLight:JA,SpotLightHelper:Q9,Sprite:z3,SpriteMaterial:IA,SrcAlphaFactor:I0,SrcAlphaSaturateFactor:NL,SrcColorFactor:PL,StaticCopyUsage:r4,StaticDrawUsage:wh,StaticReadUsage:e4,StereoCamera:T9,StreamCopyUsage:s4,StreamDrawUsage:qU,StreamReadUsage:n4,StringKeyframeTrack:pc,SubtractEquation:bL,SubtractiveBlending:j1,TOUCH:IU,TangentSpaceNormalMap:tl,TetrahedronGeometry:Fv,Texture:Mn,TextureLoader:hB,TorusGeometry:kv,TorusKnotGeometry:Uv,Triangle:pi,TriangleFanDrawMode:B0,TriangleStripDrawMode:vA,TrianglesDrawMode:f3,TubeGeometry:zv,TwoPassDoubleSide:BU,UVMapping:gv,Uint16BufferAttribute:AA,Uint32BufferAttribute:wA,Uint8BufferAttribute:U4,Uint8ClampedBufferAttribute:z4,Uniform:tw,UniformsGroup:j9,UniformsLib:Ge,UniformsUtils:T3,UnsignedByteType:no,UnsignedInt248Type:Ua,UnsignedIntType:Do,UnsignedShort4444Type:cA,UnsignedShort5551Type:uA,UnsignedShortType:yv,VSMShadowMap:As,Vector2:Re,Vector3:X,Vector4:ln,VectorKeyframeTrack:td,VideoTexture:N8,WebGL1Renderer:k3,WebGL3DRenderTarget:b4,WebGLArrayRenderTarget:M4,WebGLCoordinateSystem:Cs,WebGLCubeRenderTarget:MA,WebGLMultipleRenderTargets:C4,WebGLRenderTarget:Is,WebGLRenderer:PA,WebGLUtils:N3,WebGPUCoordinateSystem:Ku,WireframeGeometry:Q3,WrapAroundEnding:xh,ZeroCurvatureEnding:Fl,ZeroFactor:TL,ZeroSlopeEnding:kl,ZeroStencilOp:kU,_SRGBAFormat:D0,createCanvasElement:w3,sRGBEncoding:Ha},Symbol.toStringTag,{value:"Module"}));var TB={exports:{}},mc={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */mc.ConcurrentRoot=1;mc.ContinuousEventPriority=4;mc.DefaultEventPriority=16;mc.DiscreteEventPriority=1;mc.IdleEventPriority=536870912;mc.LegacyRoot=0;TB.exports=mc;var Cu=TB.exports;function p6(n){let e;const t=new Set,r=(c,d)=>{const h=typeof c=="function"?c(e):c;if(h!==e){const p=e;e=d?h:Object.assign({},e,h),t.forEach(m=>m(e,p))}},i=()=>e,s=(c,d=i,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=d(e);function m(){const v=d(e);if(!h(p,v)){const _=p;c(p=v,_)}}return t.add(m),()=>t.delete(m)},l={setState:r,getState:i,subscribe:(c,d,h)=>d||h?s(c,d,h):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(r,i,l),l}const m6=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),nR=m6?C.useEffect:C.useLayoutEffect;function Vv(n){const e=typeof n=="function"?p6(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=C.useReducer(y=>y+1,0),o=e.getState(),a=C.useRef(o),l=C.useRef(r),c=C.useRef(i),d=C.useRef(!1),h=C.useRef();h.current===void 0&&(h.current=r(o));let p,m=!1;(a.current!==o||l.current!==r||c.current!==i||d.current)&&(p=r(o),m=!i(h.current,p)),nR(()=>{m&&(h.current=p),a.current=o,l.current=r,c.current=i,d.current=!1});const v=C.useRef(o);nR(()=>{const y=()=>{try{const S=e.getState(),E=l.current(S);c.current(h.current,E)||(a.current=S,h.current=E,s())}catch{d.current=!0,s()}},g=e.subscribe(y);return e.getState()!==v.current&&y(),g},[]);const _=m?p:h.current;return C.useDebugValue(_),_};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}var RB={exports:{}},PB={exports:{}},IB={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(H,Y){var V=H.length;H.push(Y);e:for(;0<V;){var ee=V-1>>>1,ie=H[ee];if(0<i(ie,Y))H[ee]=Y,H[V]=ie,V=ee;else break e}}function t(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var Y=H[0],V=H.pop();if(V!==Y){H[0]=V;e:for(var ee=0,ie=H.length,oe=ie>>>1;ee<oe;){var he=2*(ee+1)-1,Ce=H[he],be=he+1,Te=H[be];if(0>i(Ce,V))be<ie&&0>i(Te,Ce)?(H[ee]=Te,H[be]=V,ee=be):(H[ee]=Ce,H[he]=V,ee=he);else if(be<ie&&0>i(Te,V))H[ee]=Te,H[be]=V,ee=be;else break e}}return Y}function i(H,Y){var V=H.sortIndex-Y.sortIndex;return V!==0?V:H.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,p=3,m=!1,v=!1,_=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(H){for(var Y=t(c);Y!==null;){if(Y.callback===null)r(c);else if(Y.startTime<=H)r(c),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=t(c)}}function w(H){if(_=!1,E(H),!v)if(t(l)!==null)v=!0,re(T);else{var Y=t(c);Y!==null&&ae(w,Y.startTime-H)}}function T(H,Y){v=!1,_&&(_=!1,g(B),B=-1),m=!0;var V=p;try{for(E(Y),h=t(l);h!==null&&(!(h.expirationTime>Y)||H&&!F());){var ee=h.callback;if(typeof ee=="function"){h.callback=null,p=h.priorityLevel;var ie=ee(h.expirationTime<=Y);Y=n.unstable_now(),typeof ie=="function"?h.callback=ie:h===t(l)&&r(l),E(Y)}else r(l);h=t(l)}if(h!==null)var oe=!0;else{var he=t(c);he!==null&&ae(w,he.startTime-Y),oe=!1}return oe}finally{h=null,p=V,m=!1}}var b=!1,R=null,B=-1,P=5,I=-1;function F(){return!(n.unstable_now()-I<P)}function $(){if(R!==null){var H=n.unstable_now();I=H;var Y=!0;try{Y=R(!0,H)}finally{Y?Z():(b=!1,R=null)}}else b=!1}var Z;if(typeof S=="function")Z=function(){S($)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,j=U.port2;U.port1.onmessage=$,Z=function(){j.postMessage(null)}}else Z=function(){y($,0)};function re(H){R=H,b||(b=!0,Z())}function ae(H,Y){B=y(function(){H(n.unstable_now())},Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,re(T))},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(H){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var V=p;p=Y;try{return H()}finally{p=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(H,Y){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var V=p;p=H;try{return Y()}finally{p=V}},n.unstable_scheduleCallback=function(H,Y,V){var ee=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?ee+V:ee):V=ee,H){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=V+ie,H={id:d++,callback:Y,priorityLevel:H,startTime:V,expirationTime:ie,sortIndex:-1},V>ee?(H.sortIndex=V,e(c,H),t(l)===null&&H===t(c)&&(_?(g(B),B=-1):_=!0,ae(w,V-ee))):(H.sortIndex=ie,e(l,H),v||m||(v=!0,re(T))),H},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(H){var Y=p;return function(){var V=p;p=Y;try{return H.apply(this,arguments)}finally{p=V}}}})(IB);PB.exports=IB;var LE=PB.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g6=function(e){var t={},r=C,i=LE,s=Object.assign;function o(u){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+u,x=1;x<arguments.length;x++)f+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),T=Symbol.iterator;function b(u){return u===null||typeof u!="object"?null:(u=T&&u[T]||u["@@iterator"],typeof u=="function"?u:null)}function R(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case d:return"Fragment";case c:return"Portal";case p:return"Profiler";case h:return"StrictMode";case y:return"Suspense";case g:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case v:return(u.displayName||"Context")+".Consumer";case m:return(u._context.displayName||"Context")+".Provider";case _:var f=u.render;return u=u.displayName,u||(u=f.displayName||f.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case S:return f=u.displayName||null,f!==null?f:R(u.type)||"Memo";case E:f=u._payload,u=u._init;try{return R(u(f))}catch{}}return null}function B(u){var f=u.type;switch(u.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=f.render,u=u.displayName||u.name||"",f.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return R(f);case 8:return f===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function P(u){var f=u,x=u;if(u.alternate)for(;f.return;)f=f.return;else{u=f;do f=u,f.flags&4098&&(x=f.return),u=f.return;while(u)}return f.tag===3?x:null}function I(u){if(P(u)!==u)throw Error(o(188))}function F(u){var f=u.alternate;if(!f){if(f=P(u),f===null)throw Error(o(188));return f!==u?null:u}for(var x=u,A=f;;){var M=x.return;if(M===null)break;var L=M.alternate;if(L===null){if(A=M.return,A!==null){x=A;continue}break}if(M.child===L.child){for(L=M.child;L;){if(L===x)return I(M),u;if(L===A)return I(M),f;L=L.sibling}throw Error(o(188))}if(x.return!==A.return)x=M,A=L;else{for(var K=!1,ce=M.child;ce;){if(ce===x){K=!0,x=M,A=L;break}if(ce===A){K=!0,A=M,x=L;break}ce=ce.sibling}if(!K){for(ce=L.child;ce;){if(ce===x){K=!0,x=L,A=M;break}if(ce===A){K=!0,A=L,x=M;break}ce=ce.sibling}if(!K)throw Error(o(189))}}if(x.alternate!==A)throw Error(o(190))}if(x.tag!==3)throw Error(o(188));return x.stateNode.current===x?u:f}function $(u){return u=F(u),u!==null?Z(u):null}function Z(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var f=Z(u);if(f!==null)return f;u=u.sibling}return null}function U(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){if(u.tag!==4){var f=U(u);if(f!==null)return f}u=u.sibling}return null}var j=Array.isArray,re=e.getPublicInstance,ae=e.getRootHostContext,H=e.getChildHostContext,Y=e.prepareForCommit,V=e.resetAfterCommit,ee=e.createInstance,ie=e.appendInitialChild,oe=e.finalizeInitialChildren,he=e.prepareUpdate,Ce=e.shouldSetTextContent,be=e.createTextInstance,Te=e.scheduleTimeout,Xe=e.cancelTimeout,ct=e.noTimeout,et=e.isPrimaryRenderer,st=e.supportsMutation,te=e.supportsPersistence,Pe=e.supportsHydration,we=e.getInstanceFromNode,Le=e.preparePortalMount,Ae=e.getCurrentEventPriority,ot=e.detachDeletedInstance,Ve=e.supportsMicrotasks,G=e.scheduleMicrotask,k=e.supportsTestSelectors,de=e.findFiberRoot,De=e.getBoundingRect,fe=e.getTextContent,me=e.isHiddenSubtree,Ue=e.matchAccessibilityRole,Ne=e.setFocusIfFocusable,He=e.setupIntersectionObserver,lt=e.appendChild,pt=e.appendChildToContainer,Ie=e.commitTextUpdate,Ht=e.commitMount,Ct=e.commitUpdate,ft=e.insertBefore,Ye=e.insertInContainerBefore,Ze=e.removeChild,gt=e.removeChildFromContainer,wt=e.resetTextContent,Rt=e.hideInstance,Bt=e.hideTextInstance,ve=e.unhideInstance,le=e.unhideTextInstance,We=e.clearContainer,$e=e.cloneInstance,Et=e.createContainerChildSet,mt=e.appendChildToContainerChildSet,sn=e.finalizeContainerChildren,rn=e.replaceContainerChildren,Pn=e.cloneHiddenInstance,qn=e.cloneHiddenTextInstance,on=e.canHydrateInstance,sr=e.canHydrateTextInstance,si=e.canHydrateSuspenseInstance,ks=e.isSuspenseInstancePending,sl=e.isSuspenseInstanceFallback,Ui=e.registerSuspenseInstanceRetry,oi=e.getNextHydratableSibling,Dt=e.getFirstHydratableChild,ol=e.getFirstHydratableChildWithinContainer,vc=e.getFirstHydratableChildWithinSuspenseInstance,O=e.hydrateInstance,z=e.hydrateTextInstance,se=e.hydrateSuspenseInstance,D=e.getNextHydratableInstanceAfterSuspenseInstance,W=e.commitHydratedContainer,J=e.commitHydratedSuspenseInstance,ne=e.clearSuspenseBoundary,Q=e.clearSuspenseBoundaryFromContainer,ge=e.shouldDeleteUnhydratedTailInstances,ye=e.didNotMatchHydratedContainerTextInstance,Ee=e.didNotMatchHydratedTextInstance,xe;function Qe(u){if(xe===void 0)try{throw Error()}catch(x){var f=x.stack.trim().match(/\n( *(at )?)/);xe=f&&f[1]||""}return`
`+xe+u}var Be=!1;function Oe(u,f){if(!u||Be)return"";Be=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(ke){var A=ke}Reflect.construct(u,[],f)}else{try{f.call()}catch(ke){A=ke}u.call(f.prototype)}else{try{throw Error()}catch(ke){A=ke}u()}}catch(ke){if(ke&&A&&typeof ke.stack=="string"){for(var M=ke.stack.split(`
`),L=A.stack.split(`
`),K=M.length-1,ce=L.length-1;1<=K&&0<=ce&&M[K]!==L[ce];)ce--;for(;1<=K&&0<=ce;K--,ce--)if(M[K]!==L[ce]){if(K!==1||ce!==1)do if(K--,ce--,0>ce||M[K]!==L[ce]){var Se=`
`+M[K].replace(" at new "," at ");return u.displayName&&Se.includes("<anonymous>")&&(Se=Se.replace("<anonymous>",u.displayName)),Se}while(1<=K&&0<=ce);break}}}finally{Be=!1,Error.prepareStackTrace=x}return(u=u?u.displayName||u.name:"")?Qe(u):""}var tt=Object.prototype.hasOwnProperty,ht=[],vt=-1;function Tt(u){return{current:u}}function qe(u){0>vt||(u.current=ht[vt],ht[vt]=null,vt--)}function ze(u,f){vt++,ht[vt]=u.current,u.current=f}var Gt={},At=Tt(Gt),bt=Tt(!1),cn=Gt;function Gn(u,f){var x=u.type.contextTypes;if(!x)return Gt;var A=u.stateNode;if(A&&A.__reactInternalMemoizedUnmaskedChildContext===f)return A.__reactInternalMemoizedMaskedChildContext;var M={},L;for(L in x)M[L]=f[L];return A&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=f,u.__reactInternalMemoizedMaskedChildContext=M),M}function bn(u){return u=u.childContextTypes,u!=null}function Yt(){qe(bt),qe(At)}function Wt(u,f,x){if(At.current!==Gt)throw Error(o(168));ze(At,f),ze(bt,x)}function In(u,f,x){var A=u.stateNode;if(f=f.childContextTypes,typeof A.getChildContext!="function")return x;A=A.getChildContext();for(var M in A)if(!(M in f))throw Error(o(108,B(u)||"Unknown",M));return s({},x,A)}function Ot(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||Gt,cn=At.current,ze(At,u),ze(bt,bt.current),!0}function $t(u,f,x){var A=u.stateNode;if(!A)throw Error(o(169));x?(u=In(u,f,cn),A.__reactInternalMemoizedMergedChildContext=u,qe(bt),qe(At),ze(At,u)):qe(bt),ze(bt,x)}var gn=Math.clz32?Math.clz32:Us,zi=Math.log,$r=Math.LN2;function Us(u){return u>>>=0,u===0?32:31-(zi(u)/$r|0)|0}var yp=64,_p=4194304;function Id(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function xp(u,f){var x=u.pendingLanes;if(x===0)return 0;var A=0,M=u.suspendedLanes,L=u.pingedLanes,K=x&268435455;if(K!==0){var ce=K&~M;ce!==0?A=Id(ce):(L&=K,L!==0&&(A=Id(L)))}else K=x&~M,K!==0?A=Id(K):L!==0&&(A=Id(L));if(A===0)return 0;if(f!==0&&f!==A&&!(f&M)&&(M=A&-A,L=f&-f,M>=L||M===16&&(L&4194240)!==0))return f;if(A&4&&(A|=x&16),f=u.entangledLanes,f!==0)for(u=u.entanglements,f&=A;0<f;)x=31-gn(f),M=1<<x,A|=u[x],f&=~M;return A}function gN(u,f){switch(u){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vN(u,f){for(var x=u.suspendedLanes,A=u.pingedLanes,M=u.expirationTimes,L=u.pendingLanes;0<L;){var K=31-gn(L),ce=1<<K,Se=M[K];Se===-1?(!(ce&x)||ce&A)&&(M[K]=gN(ce,f)):Se<=f&&(u.expiredLanes|=ce),L&=~ce}}function ey(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function ty(u){for(var f=[],x=0;31>x;x++)f.push(u);return f}function Ld(u,f,x){u.pendingLanes|=f,f!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,f=31-gn(f),u[f]=x}function yN(u,f){var x=u.pendingLanes&~f;u.pendingLanes=f,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=f,u.mutableReadLanes&=f,u.entangledLanes&=f,f=u.entanglements;var A=u.eventTimes;for(u=u.expirationTimes;0<x;){var M=31-gn(x),L=1<<M;f[M]=0,A[M]=-1,u[M]=-1,x&=~L}}function ny(u,f){var x=u.entangledLanes|=f;for(u=u.entanglements;x;){var A=31-gn(x),M=1<<A;M&f|u[A]&f&&(u[A]|=f),x&=~M}}var qt=0;function Hw(u){return u&=-u,1<u?4<u?u&268435455?16:536870912:4:1}var ry=i.unstable_scheduleCallback,Gw=i.unstable_cancelCallback,_N=i.unstable_shouldYield,xN=i.unstable_requestPaint,hr=i.unstable_now,iy=i.unstable_ImmediatePriority,EN=i.unstable_UserBlockingPriority,sy=i.unstable_NormalPriority,SN=i.unstable_IdlePriority,Ep=null,zs=null;function AN(u){if(zs&&typeof zs.onCommitFiberRoot=="function")try{zs.onCommitFiberRoot(Ep,u,void 0,(u.current.flags&128)===128)}catch{}}function wN(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var Hs=typeof Object.is=="function"?Object.is:wN,po=null,Sp=!1,oy=!1;function Vw(u){po===null?po=[u]:po.push(u)}function MN(u){Sp=!0,Vw(u)}function Gs(){if(!oy&&po!==null){oy=!0;var u=0,f=qt;try{var x=po;for(qt=1;u<x.length;u++){var A=x[u];do A=A(!0);while(A!==null)}po=null,Sp=!1}catch(M){throw po!==null&&(po=po.slice(u+1)),ry(iy,Gs),M}finally{qt=f,oy=!1}}return null}var bN=a.ReactCurrentBatchConfig;function Ap(u,f){if(Hs(u,f))return!0;if(typeof u!="object"||u===null||typeof f!="object"||f===null)return!1;var x=Object.keys(u),A=Object.keys(f);if(x.length!==A.length)return!1;for(A=0;A<x.length;A++){var M=x[A];if(!tt.call(f,M)||!Hs(u[M],f[M]))return!1}return!0}function CN(u){switch(u.tag){case 5:return Qe(u.type);case 16:return Qe("Lazy");case 13:return Qe("Suspense");case 19:return Qe("SuspenseList");case 0:case 2:case 15:return u=Oe(u.type,!1),u;case 11:return u=Oe(u.type.render,!1),u;case 1:return u=Oe(u.type,!0),u;default:return""}}function ps(u,f){if(u&&u.defaultProps){f=s({},f),u=u.defaultProps;for(var x in u)f[x]===void 0&&(f[x]=u[x]);return f}return f}var wp=Tt(null),Mp=null,yc=null,ay=null;function ly(){ay=yc=Mp=null}function Ww(u,f,x){et?(ze(wp,f._currentValue),f._currentValue=x):(ze(wp,f._currentValue2),f._currentValue2=x)}function cy(u){var f=wp.current;qe(wp),et?u._currentValue=f:u._currentValue2=f}function uy(u,f,x){for(;u!==null;){var A=u.alternate;if((u.childLanes&f)!==f?(u.childLanes|=f,A!==null&&(A.childLanes|=f)):A!==null&&(A.childLanes&f)!==f&&(A.childLanes|=f),u===x)break;u=u.return}}function _c(u,f){Mp=u,ay=yc=null,u=u.dependencies,u!==null&&u.firstContext!==null&&(u.lanes&f&&(Ai=!0),u.firstContext=null)}function Hi(u){var f=et?u._currentValue:u._currentValue2;if(ay!==u)if(u={context:u,memoizedValue:f,next:null},yc===null){if(Mp===null)throw Error(o(308));yc=u,Mp.dependencies={lanes:0,firstContext:u}}else yc=yc.next=u;return f}var Vs=null,ta=!1;function dy(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $w(u,f){u=u.updateQueue,f.updateQueue===u&&(f.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function mo(u,f){return{eventTime:u,lane:f,tag:0,payload:null,callback:null,next:null}}function na(u,f){var x=u.updateQueue;x!==null&&(x=x.shared,er!==null&&u.mode&1&&!(Vt&2)?(u=x.interleaved,u===null?(f.next=f,Vs===null?Vs=[x]:Vs.push(x)):(f.next=u.next,u.next=f),x.interleaved=f):(u=x.pending,u===null?f.next=f:(f.next=u.next,u.next=f),x.pending=f))}function bp(u,f,x){if(f=f.updateQueue,f!==null&&(f=f.shared,(x&4194240)!==0)){var A=f.lanes;A&=u.pendingLanes,x|=A,f.lanes=x,ny(u,x)}}function jw(u,f){var x=u.updateQueue,A=u.alternate;if(A!==null&&(A=A.updateQueue,x===A)){var M=null,L=null;if(x=x.firstBaseUpdate,x!==null){do{var K={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};L===null?M=L=K:L=L.next=K,x=x.next}while(x!==null);L===null?M=L=f:L=L.next=f}else M=L=f;x={baseState:A.baseState,firstBaseUpdate:M,lastBaseUpdate:L,shared:A.shared,effects:A.effects},u.updateQueue=x;return}u=x.lastBaseUpdate,u===null?x.firstBaseUpdate=f:u.next=f,x.lastBaseUpdate=f}function Cp(u,f,x,A){var M=u.updateQueue;ta=!1;var L=M.firstBaseUpdate,K=M.lastBaseUpdate,ce=M.shared.pending;if(ce!==null){M.shared.pending=null;var Se=ce,ke=Se.next;Se.next=null,K===null?L=ke:K.next=ke,K=Se;var rt=u.alternate;rt!==null&&(rt=rt.updateQueue,ce=rt.lastBaseUpdate,ce!==K&&(ce===null?rt.firstBaseUpdate=ke:ce.next=ke,rt.lastBaseUpdate=Se))}if(L!==null){var Pt=M.baseState;K=0,rt=ke=Se=null,ce=L;do{var yt=ce.lane,pn=ce.eventTime;if((A&yt)===yt){rt!==null&&(rt=rt.next={eventTime:pn,lane:0,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null});e:{var dt=u,Lr=ce;switch(yt=f,pn=x,Lr.tag){case 1:if(dt=Lr.payload,typeof dt=="function"){Pt=dt.call(pn,Pt,yt);break e}Pt=dt;break e;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=Lr.payload,yt=typeof dt=="function"?dt.call(pn,Pt,yt):dt,yt==null)break e;Pt=s({},Pt,yt);break e;case 2:ta=!0}}ce.callback!==null&&ce.lane!==0&&(u.flags|=64,yt=M.effects,yt===null?M.effects=[ce]:yt.push(ce))}else pn={eventTime:pn,lane:yt,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},rt===null?(ke=rt=pn,Se=Pt):rt=rt.next=pn,K|=yt;if(ce=ce.next,ce===null){if(ce=M.shared.pending,ce===null)break;yt=ce,ce=yt.next,yt.next=null,M.lastBaseUpdate=yt,M.shared.pending=null}}while(!0);if(rt===null&&(Se=Pt),M.baseState=Se,M.firstBaseUpdate=ke,M.lastBaseUpdate=rt,f=M.shared.interleaved,f!==null){M=f;do K|=M.lane,M=M.next;while(M!==f)}else L===null&&(M.shared.lanes=0);Tc|=K,u.lanes=K,u.memoizedState=Pt}}function Xw(u,f,x){if(u=f.effects,f.effects=null,u!==null)for(f=0;f<u.length;f++){var A=u[f],M=A.callback;if(M!==null){if(A.callback=null,A=x,typeof M!="function")throw Error(o(191,M));M.call(A)}}}var Jw=new r.Component().refs;function fy(u,f,x,A){f=u.memoizedState,x=x(A,f),x=x==null?f:s({},f,x),u.memoizedState=x,u.lanes===0&&(u.updateQueue.baseState=x)}var Tp={isMounted:function(u){return(u=u._reactInternals)?P(u)===u:!1},enqueueSetState:function(u,f,x){u=u._reactInternals;var A=Xr(),M=sa(u),L=mo(A,M);L.payload=f,x!=null&&(L.callback=x),na(u,L),f=ji(u,M,A),f!==null&&bp(f,u,M)},enqueueReplaceState:function(u,f,x){u=u._reactInternals;var A=Xr(),M=sa(u),L=mo(A,M);L.tag=1,L.payload=f,x!=null&&(L.callback=x),na(u,L),f=ji(u,M,A),f!==null&&bp(f,u,M)},enqueueForceUpdate:function(u,f){u=u._reactInternals;var x=Xr(),A=sa(u),M=mo(x,A);M.tag=2,f!=null&&(M.callback=f),na(u,M),f=ji(u,A,x),f!==null&&bp(f,u,A)}};function Yw(u,f,x,A,M,L,K){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(A,L,K):f.prototype&&f.prototype.isPureReactComponent?!Ap(x,A)||!Ap(M,L):!0}function Kw(u,f,x){var A=!1,M=Gt,L=f.contextType;return typeof L=="object"&&L!==null?L=Hi(L):(M=bn(f)?cn:At.current,A=f.contextTypes,L=(A=A!=null)?Gn(u,M):Gt),f=new f(x,L),u.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Tp,u.stateNode=f,f._reactInternals=u,A&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=M,u.__reactInternalMemoizedMaskedChildContext=L),f}function Zw(u,f,x,A){u=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(x,A),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(x,A),f.state!==u&&Tp.enqueueReplaceState(f,f.state,null)}function hy(u,f,x,A){var M=u.stateNode;M.props=x,M.state=u.memoizedState,M.refs=Jw,dy(u);var L=f.contextType;typeof L=="object"&&L!==null?M.context=Hi(L):(L=bn(f)?cn:At.current,M.context=Gn(u,L)),M.state=u.memoizedState,L=f.getDerivedStateFromProps,typeof L=="function"&&(fy(u,f,L,x),M.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(f=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),f!==M.state&&Tp.enqueueReplaceState(M,M.state,null),Cp(u,x,M,A),M.state=u.memoizedState),typeof M.componentDidMount=="function"&&(u.flags|=4194308)}var xc=[],Ec=0,Rp=null,Pp=0,Gi=[],Vi=0,al=null,go=1,vo="";function ll(u,f){xc[Ec++]=Pp,xc[Ec++]=Rp,Rp=u,Pp=f}function Qw(u,f,x){Gi[Vi++]=go,Gi[Vi++]=vo,Gi[Vi++]=al,al=u;var A=go;u=vo;var M=32-gn(A)-1;A&=~(1<<M),x+=1;var L=32-gn(f)+M;if(30<L){var K=M-M%5;L=(A&(1<<K)-1).toString(32),A>>=K,M-=K,go=1<<32-gn(f)+M|x<<M|A,vo=L+u}else go=1<<L|x<<M|A,vo=u}function py(u){u.return!==null&&(ll(u,1),Qw(u,1,0))}function my(u){for(;u===Rp;)Rp=xc[--Ec],xc[Ec]=null,Pp=xc[--Ec],xc[Ec]=null;for(;u===al;)al=Gi[--Vi],Gi[Vi]=null,vo=Gi[--Vi],Gi[Vi]=null,go=Gi[--Vi],Gi[Vi]=null}var Ei=null,Si=null,Cn=!1,Bd=!1,ms=null;function qw(u,f){var x=Xi(5,null,null,0);x.elementType="DELETED",x.stateNode=f,x.return=u,f=u.deletions,f===null?(u.deletions=[x],u.flags|=16):f.push(x)}function eM(u,f){switch(u.tag){case 5:return f=on(f,u.type,u.pendingProps),f!==null?(u.stateNode=f,Ei=u,Si=Dt(f),!0):!1;case 6:return f=sr(f,u.pendingProps),f!==null?(u.stateNode=f,Ei=u,Si=null,!0):!1;case 13:if(f=si(f),f!==null){var x=al!==null?{id:go,overflow:vo}:null;return u.memoizedState={dehydrated:f,treeContext:x,retryLane:1073741824},x=Xi(18,null,null,0),x.stateNode=f,x.return=u,u.child=x,Ei=u,Si=null,!0}return!1;default:return!1}}function gy(u){return(u.mode&1)!==0&&(u.flags&128)===0}function vy(u){if(Cn){var f=Si;if(f){var x=f;if(!eM(u,f)){if(gy(u))throw Error(o(418));f=oi(x);var A=Ei;f&&eM(u,f)?qw(A,x):(u.flags=u.flags&-4097|2,Cn=!1,Ei=u)}}else{if(gy(u))throw Error(o(418));u.flags=u.flags&-4097|2,Cn=!1,Ei=u}}}function tM(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;Ei=u}function Dd(u){if(!Pe||u!==Ei)return!1;if(!Cn)return tM(u),Cn=!0,!1;if(u.tag!==3&&(u.tag!==5||ge(u.type)&&!Ce(u.type,u.memoizedProps))){var f=Si;if(f){if(gy(u)){for(u=Si;u;)u=oi(u);throw Error(o(418))}for(;f;)qw(u,f),f=oi(f)}}if(tM(u),u.tag===13){if(!Pe)throw Error(o(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));Si=D(u)}else Si=Ei?oi(u.stateNode):null;return!0}function Sc(){Pe&&(Si=Ei=null,Bd=Cn=!1)}function yy(u){ms===null?ms=[u]:ms.push(u)}function Od(u,f,x){if(u=x.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(o(309));var A=x.stateNode}if(!A)throw Error(o(147,u));var M=A,L=""+u;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===L?f.ref:(f=function(K){var ce=M.refs;ce===Jw&&(ce=M.refs={}),K===null?delete ce[L]:ce[L]=K},f._stringRef=L,f)}if(typeof u!="string")throw Error(o(284));if(!x._owner)throw Error(o(290,u))}return u}function Ip(u,f){throw u=Object.prototype.toString.call(f),Error(o(31,u==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":u))}function nM(u){var f=u._init;return f(u._payload)}function rM(u){function f(pe,ue){if(u){var _e=pe.deletions;_e===null?(pe.deletions=[ue],pe.flags|=16):_e.push(ue)}}function x(pe,ue){if(!u)return null;for(;ue!==null;)f(pe,ue),ue=ue.sibling;return null}function A(pe,ue){for(pe=new Map;ue!==null;)ue.key!==null?pe.set(ue.key,ue):pe.set(ue.index,ue),ue=ue.sibling;return pe}function M(pe,ue){return pe=aa(pe,ue),pe.index=0,pe.sibling=null,pe}function L(pe,ue,_e){return pe.index=_e,u?(_e=pe.alternate,_e!==null?(_e=_e.index,_e<ue?(pe.flags|=2,ue):_e):(pe.flags|=2,ue)):(pe.flags|=1048576,ue)}function K(pe){return u&&pe.alternate===null&&(pe.flags|=2),pe}function ce(pe,ue,_e,Ke){return ue===null||ue.tag!==6?(ue=t_(_e,pe.mode,Ke),ue.return=pe,ue):(ue=M(ue,_e),ue.return=pe,ue)}function Se(pe,ue,_e,Ke){var ut=_e.type;return ut===d?rt(pe,ue,_e.props.children,Ke,_e.key):ue!==null&&(ue.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===E&&nM(ut)===ue.type)?(Ke=M(ue,_e.props),Ke.ref=Od(pe,ue,_e),Ke.return=pe,Ke):(Ke=lm(_e.type,_e.key,_e.props,null,pe.mode,Ke),Ke.ref=Od(pe,ue,_e),Ke.return=pe,Ke)}function ke(pe,ue,_e,Ke){return ue===null||ue.tag!==4||ue.stateNode.containerInfo!==_e.containerInfo||ue.stateNode.implementation!==_e.implementation?(ue=n_(_e,pe.mode,Ke),ue.return=pe,ue):(ue=M(ue,_e.children||[]),ue.return=pe,ue)}function rt(pe,ue,_e,Ke,ut){return ue===null||ue.tag!==7?(ue=ml(_e,pe.mode,Ke,ut),ue.return=pe,ue):(ue=M(ue,_e),ue.return=pe,ue)}function Pt(pe,ue,_e){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return ue=t_(""+ue,pe.mode,_e),ue.return=pe,ue;if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case l:return _e=lm(ue.type,ue.key,ue.props,null,pe.mode,_e),_e.ref=Od(pe,null,ue),_e.return=pe,_e;case c:return ue=n_(ue,pe.mode,_e),ue.return=pe,ue;case E:var Ke=ue._init;return Pt(pe,Ke(ue._payload),_e)}if(j(ue)||b(ue))return ue=ml(ue,pe.mode,_e,null),ue.return=pe,ue;Ip(pe,ue)}return null}function yt(pe,ue,_e,Ke){var ut=ue!==null?ue.key:null;if(typeof _e=="string"&&_e!==""||typeof _e=="number")return ut!==null?null:ce(pe,ue,""+_e,Ke);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case l:return _e.key===ut?Se(pe,ue,_e,Ke):null;case c:return _e.key===ut?ke(pe,ue,_e,Ke):null;case E:return ut=_e._init,yt(pe,ue,ut(_e._payload),Ke)}if(j(_e)||b(_e))return ut!==null?null:rt(pe,ue,_e,Ke,null);Ip(pe,_e)}return null}function pn(pe,ue,_e,Ke,ut){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return pe=pe.get(_e)||null,ce(ue,pe,""+Ke,ut);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case l:return pe=pe.get(Ke.key===null?_e:Ke.key)||null,Se(ue,pe,Ke,ut);case c:return pe=pe.get(Ke.key===null?_e:Ke.key)||null,ke(ue,pe,Ke,ut);case E:var Ut=Ke._init;return pn(pe,ue,_e,Ut(Ke._payload),ut)}if(j(Ke)||b(Ke))return pe=pe.get(_e)||null,rt(ue,pe,Ke,ut,null);Ip(ue,Ke)}return null}function dt(pe,ue,_e,Ke){for(var ut=null,Ut=null,It=ue,en=ue=0,mr=null;It!==null&&en<_e.length;en++){It.index>en?(mr=It,It=null):mr=It.sibling;var tn=yt(pe,It,_e[en],Ke);if(tn===null){It===null&&(It=mr);break}u&&It&&tn.alternate===null&&f(pe,It),ue=L(tn,ue,en),Ut===null?ut=tn:Ut.sibling=tn,Ut=tn,It=mr}if(en===_e.length)return x(pe,It),Cn&&ll(pe,en),ut;if(It===null){for(;en<_e.length;en++)It=Pt(pe,_e[en],Ke),It!==null&&(ue=L(It,ue,en),Ut===null?ut=It:Ut.sibling=It,Ut=It);return Cn&&ll(pe,en),ut}for(It=A(pe,It);en<_e.length;en++)mr=pn(It,pe,en,_e[en],Ke),mr!==null&&(u&&mr.alternate!==null&&It.delete(mr.key===null?en:mr.key),ue=L(mr,ue,en),Ut===null?ut=mr:Ut.sibling=mr,Ut=mr);return u&&It.forEach(function(la){return f(pe,la)}),Cn&&ll(pe,en),ut}function Lr(pe,ue,_e,Ke){var ut=b(_e);if(typeof ut!="function")throw Error(o(150));if(_e=ut.call(_e),_e==null)throw Error(o(151));for(var Ut=ut=null,It=ue,en=ue=0,mr=null,tn=_e.next();It!==null&&!tn.done;en++,tn=_e.next()){It.index>en?(mr=It,It=null):mr=It.sibling;var la=yt(pe,It,tn.value,Ke);if(la===null){It===null&&(It=mr);break}u&&It&&la.alternate===null&&f(pe,It),ue=L(la,ue,en),Ut===null?ut=la:Ut.sibling=la,Ut=la,It=mr}if(tn.done)return x(pe,It),Cn&&ll(pe,en),ut;if(It===null){for(;!tn.done;en++,tn=_e.next())tn=Pt(pe,tn.value,Ke),tn!==null&&(ue=L(tn,ue,en),Ut===null?ut=tn:Ut.sibling=tn,Ut=tn);return Cn&&ll(pe,en),ut}for(It=A(pe,It);!tn.done;en++,tn=_e.next())tn=pn(It,pe,en,tn.value,Ke),tn!==null&&(u&&tn.alternate!==null&&It.delete(tn.key===null?en:tn.key),ue=L(tn,ue,en),Ut===null?ut=tn:Ut.sibling=tn,Ut=tn);return u&&It.forEach(function(rF){return f(pe,rF)}),Cn&&ll(pe,en),ut}function Ji(pe,ue,_e,Ke){if(typeof _e=="object"&&_e!==null&&_e.type===d&&_e.key===null&&(_e=_e.props.children),typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case l:e:{for(var ut=_e.key,Ut=ue;Ut!==null;){if(Ut.key===ut){if(ut=_e.type,ut===d){if(Ut.tag===7){x(pe,Ut.sibling),ue=M(Ut,_e.props.children),ue.return=pe,pe=ue;break e}}else if(Ut.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===E&&nM(ut)===Ut.type){x(pe,Ut.sibling),ue=M(Ut,_e.props),ue.ref=Od(pe,Ut,_e),ue.return=pe,pe=ue;break e}x(pe,Ut);break}else f(pe,Ut);Ut=Ut.sibling}_e.type===d?(ue=ml(_e.props.children,pe.mode,Ke,_e.key),ue.return=pe,pe=ue):(Ke=lm(_e.type,_e.key,_e.props,null,pe.mode,Ke),Ke.ref=Od(pe,ue,_e),Ke.return=pe,pe=Ke)}return K(pe);case c:e:{for(Ut=_e.key;ue!==null;){if(ue.key===Ut)if(ue.tag===4&&ue.stateNode.containerInfo===_e.containerInfo&&ue.stateNode.implementation===_e.implementation){x(pe,ue.sibling),ue=M(ue,_e.children||[]),ue.return=pe,pe=ue;break e}else{x(pe,ue);break}else f(pe,ue);ue=ue.sibling}ue=n_(_e,pe.mode,Ke),ue.return=pe,pe=ue}return K(pe);case E:return Ut=_e._init,Ji(pe,ue,Ut(_e._payload),Ke)}if(j(_e))return dt(pe,ue,_e,Ke);if(b(_e))return Lr(pe,ue,_e,Ke);Ip(pe,_e)}return typeof _e=="string"&&_e!==""||typeof _e=="number"?(_e=""+_e,ue!==null&&ue.tag===6?(x(pe,ue.sibling),ue=M(ue,_e),ue.return=pe,pe=ue):(x(pe,ue),ue=t_(_e,pe.mode,Ke),ue.return=pe,pe=ue),K(pe)):x(pe,ue)}return Ji}var Ac=rM(!0),iM=rM(!1),Nd={},Wi=Tt(Nd),Fd=Tt(Nd),wc=Tt(Nd);function Ws(u){if(u===Nd)throw Error(o(174));return u}function _y(u,f){ze(wc,f),ze(Fd,u),ze(Wi,Nd),u=ae(f),qe(Wi),ze(Wi,u)}function Mc(){qe(Wi),qe(Fd),qe(wc)}function sM(u){var f=Ws(wc.current),x=Ws(Wi.current);f=H(x,u.type,f),x!==f&&(ze(Fd,u),ze(Wi,f))}function xy(u){Fd.current===u&&(qe(Wi),qe(Fd))}var Ln=Tt(0);function Lp(u){for(var f=u;f!==null;){if(f.tag===13){var x=f.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||ks(x)||sl(x)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if(f.flags&128)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var Ey=[];function Sy(){for(var u=0;u<Ey.length;u++){var f=Ey[u];et?f._workInProgressVersionPrimary=null:f._workInProgressVersionSecondary=null}Ey.length=0}var Bp=a.ReactCurrentDispatcher,$i=a.ReactCurrentBatchConfig,bc=0,Vn=null,Rr=null,pr=null,Dp=!1,kd=!1,Ud=0,TN=0;function Pr(){throw Error(o(321))}function Ay(u,f){if(f===null)return!1;for(var x=0;x<f.length&&x<u.length;x++)if(!Hs(u[x],f[x]))return!1;return!0}function wy(u,f,x,A,M,L){if(bc=L,Vn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,Bp.current=u===null||u.memoizedState===null?LN:BN,u=x(A,M),kd){L=0;do{if(kd=!1,Ud=0,25<=L)throw Error(o(301));L+=1,pr=Rr=null,f.updateQueue=null,Bp.current=DN,u=x(A,M)}while(kd)}if(Bp.current=Up,f=Rr!==null&&Rr.next!==null,bc=0,pr=Rr=Vn=null,Dp=!1,f)throw Error(o(300));return u}function My(){var u=Ud!==0;return Ud=0,u}function yo(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pr===null?Vn.memoizedState=pr=u:pr=pr.next=u,pr}function $s(){if(Rr===null){var u=Vn.alternate;u=u!==null?u.memoizedState:null}else u=Rr.next;var f=pr===null?Vn.memoizedState:pr.next;if(f!==null)pr=f,Rr=u;else{if(u===null)throw Error(o(310));Rr=u,u={memoizedState:Rr.memoizedState,baseState:Rr.baseState,baseQueue:Rr.baseQueue,queue:Rr.queue,next:null},pr===null?Vn.memoizedState=pr=u:pr=pr.next=u}return pr}function cl(u,f){return typeof f=="function"?f(u):f}function Op(u){var f=$s(),x=f.queue;if(x===null)throw Error(o(311));x.lastRenderedReducer=u;var A=Rr,M=A.baseQueue,L=x.pending;if(L!==null){if(M!==null){var K=M.next;M.next=L.next,L.next=K}A.baseQueue=M=L,x.pending=null}if(M!==null){L=M.next,A=A.baseState;var ce=K=null,Se=null,ke=L;do{var rt=ke.lane;if((bc&rt)===rt)Se!==null&&(Se=Se.next={lane:0,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null}),A=ke.hasEagerState?ke.eagerState:u(A,ke.action);else{var Pt={lane:rt,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null};Se===null?(ce=Se=Pt,K=A):Se=Se.next=Pt,Vn.lanes|=rt,Tc|=rt}ke=ke.next}while(ke!==null&&ke!==L);Se===null?K=A:Se.next=ce,Hs(A,f.memoizedState)||(Ai=!0),f.memoizedState=A,f.baseState=K,f.baseQueue=Se,x.lastRenderedState=A}if(u=x.interleaved,u!==null){M=u;do L=M.lane,Vn.lanes|=L,Tc|=L,M=M.next;while(M!==u)}else M===null&&(x.lanes=0);return[f.memoizedState,x.dispatch]}function Np(u){var f=$s(),x=f.queue;if(x===null)throw Error(o(311));x.lastRenderedReducer=u;var A=x.dispatch,M=x.pending,L=f.memoizedState;if(M!==null){x.pending=null;var K=M=M.next;do L=u(L,K.action),K=K.next;while(K!==M);Hs(L,f.memoizedState)||(Ai=!0),f.memoizedState=L,f.baseQueue===null&&(f.baseState=L),x.lastRenderedState=L}return[L,A]}function oM(){}function aM(u,f){var x=Vn,A=$s(),M=f(),L=!Hs(A.memoizedState,M);if(L&&(A.memoizedState=M,Ai=!0),A=A.queue,Hd(uM.bind(null,x,A,u),[u]),A.getSnapshot!==f||L||pr!==null&&pr.memoizedState.tag&1){if(x.flags|=2048,zd(9,cM.bind(null,x,A,M,f),void 0,null),er===null)throw Error(o(349));bc&30||lM(x,f,M)}return M}function lM(u,f,x){u.flags|=16384,u={getSnapshot:f,value:x},f=Vn.updateQueue,f===null?(f={lastEffect:null,stores:null},Vn.updateQueue=f,f.stores=[u]):(x=f.stores,x===null?f.stores=[u]:x.push(u))}function cM(u,f,x,A){f.value=x,f.getSnapshot=A,dM(f)&&ji(u,1,-1)}function uM(u,f,x){return x(function(){dM(f)&&ji(u,1,-1)})}function dM(u){var f=u.getSnapshot;u=u.value;try{var x=f();return!Hs(u,x)}catch{return!0}}function by(u){var f=yo();return typeof u=="function"&&(u=u()),f.memoizedState=f.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cl,lastRenderedState:u},f.queue=u,u=u.dispatch=IN.bind(null,Vn,u),[f.memoizedState,u]}function zd(u,f,x,A){return u={tag:u,create:f,destroy:x,deps:A,next:null},f=Vn.updateQueue,f===null?(f={lastEffect:null,stores:null},Vn.updateQueue=f,f.lastEffect=u.next=u):(x=f.lastEffect,x===null?f.lastEffect=u.next=u:(A=x.next,x.next=u,u.next=A,f.lastEffect=u)),u}function fM(){return $s().memoizedState}function Fp(u,f,x,A){var M=yo();Vn.flags|=u,M.memoizedState=zd(1|f,x,void 0,A===void 0?null:A)}function kp(u,f,x,A){var M=$s();A=A===void 0?null:A;var L=void 0;if(Rr!==null){var K=Rr.memoizedState;if(L=K.destroy,A!==null&&Ay(A,K.deps)){M.memoizedState=zd(f,x,L,A);return}}Vn.flags|=u,M.memoizedState=zd(1|f,x,L,A)}function Cy(u,f){return Fp(8390656,8,u,f)}function Hd(u,f){return kp(2048,8,u,f)}function hM(u,f){return kp(4,2,u,f)}function pM(u,f){return kp(4,4,u,f)}function mM(u,f){if(typeof f=="function")return u=u(),f(u),function(){f(null)};if(f!=null)return u=u(),f.current=u,function(){f.current=null}}function gM(u,f,x){return x=x!=null?x.concat([u]):null,kp(4,4,mM.bind(null,f,u),x)}function Ty(){}function vM(u,f){var x=$s();f=f===void 0?null:f;var A=x.memoizedState;return A!==null&&f!==null&&Ay(f,A[1])?A[0]:(x.memoizedState=[u,f],u)}function yM(u,f){var x=$s();f=f===void 0?null:f;var A=x.memoizedState;return A!==null&&f!==null&&Ay(f,A[1])?A[0]:(u=u(),x.memoizedState=[u,f],u)}function RN(u,f){var x=qt;qt=x!==0&&4>x?x:4,u(!0);var A=$i.transition;$i.transition={};try{u(!1),f()}finally{qt=x,$i.transition=A}}function _M(){return $s().memoizedState}function PN(u,f,x){var A=sa(u);x={lane:A,action:x,hasEagerState:!1,eagerState:null,next:null},xM(u)?EM(f,x):(SM(u,f,x),x=Xr(),u=ji(u,A,x),u!==null&&AM(u,f,A))}function IN(u,f,x){var A=sa(u),M={lane:A,action:x,hasEagerState:!1,eagerState:null,next:null};if(xM(u))EM(f,M);else{SM(u,f,M);var L=u.alternate;if(u.lanes===0&&(L===null||L.lanes===0)&&(L=f.lastRenderedReducer,L!==null))try{var K=f.lastRenderedState,ce=L(K,x);if(M.hasEagerState=!0,M.eagerState=ce,Hs(ce,K))return}catch{}finally{}x=Xr(),u=ji(u,A,x),u!==null&&AM(u,f,A)}}function xM(u){var f=u.alternate;return u===Vn||f!==null&&f===Vn}function EM(u,f){kd=Dp=!0;var x=u.pending;x===null?f.next=f:(f.next=x.next,x.next=f),u.pending=f}function SM(u,f,x){er!==null&&u.mode&1&&!(Vt&2)?(u=f.interleaved,u===null?(x.next=x,Vs===null?Vs=[f]:Vs.push(f)):(x.next=u.next,u.next=x),f.interleaved=x):(u=f.pending,u===null?x.next=x:(x.next=u.next,u.next=x),f.pending=x)}function AM(u,f,x){if(x&4194240){var A=f.lanes;A&=u.pendingLanes,x|=A,f.lanes=x,ny(u,x)}}var Up={readContext:Hi,useCallback:Pr,useContext:Pr,useEffect:Pr,useImperativeHandle:Pr,useInsertionEffect:Pr,useLayoutEffect:Pr,useMemo:Pr,useReducer:Pr,useRef:Pr,useState:Pr,useDebugValue:Pr,useDeferredValue:Pr,useTransition:Pr,useMutableSource:Pr,useSyncExternalStore:Pr,useId:Pr,unstable_isNewReconciler:!1},LN={readContext:Hi,useCallback:function(u,f){return yo().memoizedState=[u,f===void 0?null:f],u},useContext:Hi,useEffect:Cy,useImperativeHandle:function(u,f,x){return x=x!=null?x.concat([u]):null,Fp(4194308,4,mM.bind(null,f,u),x)},useLayoutEffect:function(u,f){return Fp(4194308,4,u,f)},useInsertionEffect:function(u,f){return Fp(4,2,u,f)},useMemo:function(u,f){var x=yo();return f=f===void 0?null:f,u=u(),x.memoizedState=[u,f],u},useReducer:function(u,f,x){var A=yo();return f=x!==void 0?x(f):f,A.memoizedState=A.baseState=f,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:f},A.queue=u,u=u.dispatch=PN.bind(null,Vn,u),[A.memoizedState,u]},useRef:function(u){var f=yo();return u={current:u},f.memoizedState=u},useState:by,useDebugValue:Ty,useDeferredValue:function(u){var f=by(u),x=f[0],A=f[1];return Cy(function(){var M=$i.transition;$i.transition={};try{A(u)}finally{$i.transition=M}},[u]),x},useTransition:function(){var u=by(!1),f=u[0];return u=RN.bind(null,u[1]),yo().memoizedState=u,[f,u]},useMutableSource:function(){},useSyncExternalStore:function(u,f,x){var A=Vn,M=yo();if(Cn){if(x===void 0)throw Error(o(407));x=x()}else{if(x=f(),er===null)throw Error(o(349));bc&30||lM(A,f,x)}M.memoizedState=x;var L={value:x,getSnapshot:f};return M.queue=L,Cy(uM.bind(null,A,L,u),[u]),A.flags|=2048,zd(9,cM.bind(null,A,L,x,f),void 0,null),x},useId:function(){var u=yo(),f=er.identifierPrefix;if(Cn){var x=vo,A=go;x=(A&~(1<<32-gn(A)-1)).toString(32)+x,f=":"+f+"R"+x,x=Ud++,0<x&&(f+="H"+x.toString(32)),f+=":"}else x=TN++,f=":"+f+"r"+x.toString(32)+":";return u.memoizedState=f},unstable_isNewReconciler:!1},BN={readContext:Hi,useCallback:vM,useContext:Hi,useEffect:Hd,useImperativeHandle:gM,useInsertionEffect:hM,useLayoutEffect:pM,useMemo:yM,useReducer:Op,useRef:fM,useState:function(){return Op(cl)},useDebugValue:Ty,useDeferredValue:function(u){var f=Op(cl),x=f[0],A=f[1];return Hd(function(){var M=$i.transition;$i.transition={};try{A(u)}finally{$i.transition=M}},[u]),x},useTransition:function(){var u=Op(cl)[0],f=$s().memoizedState;return[u,f]},useMutableSource:oM,useSyncExternalStore:aM,useId:_M,unstable_isNewReconciler:!1},DN={readContext:Hi,useCallback:vM,useContext:Hi,useEffect:Hd,useImperativeHandle:gM,useInsertionEffect:hM,useLayoutEffect:pM,useMemo:yM,useReducer:Np,useRef:fM,useState:function(){return Np(cl)},useDebugValue:Ty,useDeferredValue:function(u){var f=Np(cl),x=f[0],A=f[1];return Hd(function(){var M=$i.transition;$i.transition={};try{A(u)}finally{$i.transition=M}},[u]),x},useTransition:function(){var u=Np(cl)[0],f=$s().memoizedState;return[u,f]},useMutableSource:oM,useSyncExternalStore:aM,useId:_M,unstable_isNewReconciler:!1};function Ry(u,f){try{var x="",A=f;do x+=CN(A),A=A.return;while(A);var M=x}catch(L){M=`
Error generating stack: `+L.message+`
`+L.stack}return{value:u,source:f,stack:M}}function Py(u,f){try{console.error(f.value)}catch(x){setTimeout(function(){throw x})}}var ON=typeof WeakMap=="function"?WeakMap:Map;function wM(u,f,x){x=mo(-1,x),x.tag=3,x.payload={element:null};var A=f.value;return x.callback=function(){tm||(tm=!0,Jy=A),Py(u,f)},x}function MM(u,f,x){x=mo(-1,x),x.tag=3;var A=u.type.getDerivedStateFromError;if(typeof A=="function"){var M=f.value;x.payload=function(){return A(M)},x.callback=function(){Py(u,f)}}var L=u.stateNode;return L!==null&&typeof L.componentDidCatch=="function"&&(x.callback=function(){Py(u,f),typeof A!="function"&&(ra===null?ra=new Set([this]):ra.add(this));var K=f.stack;this.componentDidCatch(f.value,{componentStack:K!==null?K:""})}),x}function bM(u,f,x){var A=u.pingCache;if(A===null){A=u.pingCache=new ON;var M=new Set;A.set(f,M)}else M=A.get(f),M===void 0&&(M=new Set,A.set(f,M));M.has(x)||(M.add(x),u=YN.bind(null,u,f,x),f.then(u,u))}function CM(u){do{var f;if((f=u.tag===13)&&(f=u.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return u;u=u.return}while(u!==null);return null}function TM(u,f,x,A,M){return u.mode&1?(u.flags|=65536,u.lanes=M,u):(u===f?u.flags|=65536:(u.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(f=mo(-1,1),f.tag=2,na(x,f))),x.lanes|=1),u)}function js(u){u.flags|=4}function RM(u,f){if(u!==null&&u.child===f.child)return!0;if(f.flags&16)return!1;for(u=f.child;u!==null;){if(u.flags&12854||u.subtreeFlags&12854)return!1;u=u.sibling}return!0}var Gd,Vd,zp,Hp;if(st)Gd=function(u,f){for(var x=f.child;x!==null;){if(x.tag===5||x.tag===6)ie(u,x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===f)break;for(;x.sibling===null;){if(x.return===null||x.return===f)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},Vd=function(){},zp=function(u,f,x,A,M){if(u=u.memoizedProps,u!==A){var L=f.stateNode,K=Ws(Wi.current);x=he(L,x,u,A,M,K),(f.updateQueue=x)&&js(f)}},Hp=function(u,f,x,A){x!==A&&js(f)};else if(te){Gd=function(u,f,x,A){for(var M=f.child;M!==null;){if(M.tag===5){var L=M.stateNode;x&&A&&(L=Pn(L,M.type,M.memoizedProps,M)),ie(u,L)}else if(M.tag===6)L=M.stateNode,x&&A&&(L=qn(L,M.memoizedProps,M)),ie(u,L);else if(M.tag!==4){if(M.tag===22&&M.memoizedState!==null)L=M.child,L!==null&&(L.return=M),Gd(u,M,!0,!0);else if(M.child!==null){M.child.return=M,M=M.child;continue}}if(M===f)break;for(;M.sibling===null;){if(M.return===null||M.return===f)return;M=M.return}M.sibling.return=M.return,M=M.sibling}};var PM=function(u,f,x,A){for(var M=f.child;M!==null;){if(M.tag===5){var L=M.stateNode;x&&A&&(L=Pn(L,M.type,M.memoizedProps,M)),mt(u,L)}else if(M.tag===6)L=M.stateNode,x&&A&&(L=qn(L,M.memoizedProps,M)),mt(u,L);else if(M.tag!==4){if(M.tag===22&&M.memoizedState!==null)L=M.child,L!==null&&(L.return=M),PM(u,M,!0,!0);else if(M.child!==null){M.child.return=M,M=M.child;continue}}if(M===f)break;for(;M.sibling===null;){if(M.return===null||M.return===f)return;M=M.return}M.sibling.return=M.return,M=M.sibling}};Vd=function(u,f){var x=f.stateNode;if(!RM(u,f)){u=x.containerInfo;var A=Et(u);PM(A,f,!1,!1),x.pendingChildren=A,js(f),sn(u,A)}},zp=function(u,f,x,A,M){var L=u.stateNode,K=u.memoizedProps;if((u=RM(u,f))&&K===A)f.stateNode=L;else{var ce=f.stateNode,Se=Ws(Wi.current),ke=null;K!==A&&(ke=he(ce,x,K,A,M,Se)),u&&ke===null?f.stateNode=L:(L=$e(L,ke,x,K,A,f,u,ce),oe(L,x,A,M,Se)&&js(f),f.stateNode=L,u?js(f):Gd(L,f,!1,!1))}},Hp=function(u,f,x,A){x!==A?(u=Ws(wc.current),x=Ws(Wi.current),f.stateNode=be(A,u,x,f),js(f)):f.stateNode=u.stateNode}}else Vd=function(){},zp=function(){},Hp=function(){};function Wd(u,f){if(!Cn)switch(u.tailMode){case"hidden":f=u.tail;for(var x=null;f!==null;)f.alternate!==null&&(x=f),f=f.sibling;x===null?u.tail=null:x.sibling=null;break;case"collapsed":x=u.tail;for(var A=null;x!==null;)x.alternate!==null&&(A=x),x=x.sibling;A===null?f||u.tail===null?u.tail=null:u.tail.sibling=null:A.sibling=null}}function Ir(u){var f=u.alternate!==null&&u.alternate.child===u.child,x=0,A=0;if(f)for(var M=u.child;M!==null;)x|=M.lanes|M.childLanes,A|=M.subtreeFlags&14680064,A|=M.flags&14680064,M.return=u,M=M.sibling;else for(M=u.child;M!==null;)x|=M.lanes|M.childLanes,A|=M.subtreeFlags,A|=M.flags,M.return=u,M=M.sibling;return u.subtreeFlags|=A,u.childLanes=x,f}function NN(u,f,x){var A=f.pendingProps;switch(my(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ir(f),null;case 1:return bn(f.type)&&Yt(),Ir(f),null;case 3:return A=f.stateNode,Mc(),qe(bt),qe(At),Sy(),A.pendingContext&&(A.context=A.pendingContext,A.pendingContext=null),(u===null||u.child===null)&&(Dd(f)?js(f):u===null||u.memoizedState.isDehydrated&&!(f.flags&256)||(f.flags|=1024,ms!==null&&(Zy(ms),ms=null))),Vd(u,f),Ir(f),null;case 5:xy(f),x=Ws(wc.current);var M=f.type;if(u!==null&&f.stateNode!=null)zp(u,f,M,A,x),u.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!A){if(f.stateNode===null)throw Error(o(166));return Ir(f),null}if(u=Ws(Wi.current),Dd(f)){if(!Pe)throw Error(o(175));u=O(f.stateNode,f.type,f.memoizedProps,x,u,f,!Bd),f.updateQueue=u,u!==null&&js(f)}else{var L=ee(M,A,x,u,f);Gd(L,f,!1,!1),f.stateNode=L,oe(L,M,A,x,u)&&js(f)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return Ir(f),null;case 6:if(u&&f.stateNode!=null)Hp(u,f,u.memoizedProps,A);else{if(typeof A!="string"&&f.stateNode===null)throw Error(o(166));if(u=Ws(wc.current),x=Ws(Wi.current),Dd(f)){if(!Pe)throw Error(o(176));if(u=f.stateNode,A=f.memoizedProps,(x=z(u,A,f,!Bd))&&(M=Ei,M!==null))switch(L=(M.mode&1)!==0,M.tag){case 3:ye(M.stateNode.containerInfo,u,A,L);break;case 5:Ee(M.type,M.memoizedProps,M.stateNode,u,A,L)}x&&js(f)}else f.stateNode=be(A,u,x,f)}return Ir(f),null;case 13:if(qe(Ln),A=f.memoizedState,Cn&&Si!==null&&f.mode&1&&!(f.flags&128)){for(u=Si;u;)u=oi(u);return Sc(),f.flags|=98560,f}if(A!==null&&A.dehydrated!==null){if(A=Dd(f),u===null){if(!A)throw Error(o(318));if(!Pe)throw Error(o(344));if(u=f.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));se(u,f)}else Sc(),!(f.flags&128)&&(f.memoizedState=null),f.flags|=4;return Ir(f),null}return ms!==null&&(Zy(ms),ms=null),f.flags&128?(f.lanes=x,f):(A=A!==null,x=!1,u===null?Dd(f):x=u.memoizedState!==null,A&&!x&&(f.child.flags|=8192,f.mode&1&&(u===null||Ln.current&1?or===0&&(or=3):qy())),f.updateQueue!==null&&(f.flags|=4),Ir(f),null);case 4:return Mc(),Vd(u,f),u===null&&Le(f.stateNode.containerInfo),Ir(f),null;case 10:return cy(f.type._context),Ir(f),null;case 17:return bn(f.type)&&Yt(),Ir(f),null;case 19:if(qe(Ln),M=f.memoizedState,M===null)return Ir(f),null;if(A=(f.flags&128)!==0,L=M.rendering,L===null)if(A)Wd(M,!1);else{if(or!==0||u!==null&&u.flags&128)for(u=f.child;u!==null;){if(L=Lp(u),L!==null){for(f.flags|=128,Wd(M,!1),u=L.updateQueue,u!==null&&(f.updateQueue=u,f.flags|=4),f.subtreeFlags=0,u=x,A=f.child;A!==null;)x=A,M=u,x.flags&=14680066,L=x.alternate,L===null?(x.childLanes=0,x.lanes=M,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=L.childLanes,x.lanes=L.lanes,x.child=L.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=L.memoizedProps,x.memoizedState=L.memoizedState,x.updateQueue=L.updateQueue,x.type=L.type,M=L.dependencies,x.dependencies=M===null?null:{lanes:M.lanes,firstContext:M.firstContext}),A=A.sibling;return ze(Ln,Ln.current&1|2),f.child}u=u.sibling}M.tail!==null&&hr()>Xy&&(f.flags|=128,A=!0,Wd(M,!1),f.lanes=4194304)}else{if(!A)if(u=Lp(L),u!==null){if(f.flags|=128,A=!0,u=u.updateQueue,u!==null&&(f.updateQueue=u,f.flags|=4),Wd(M,!0),M.tail===null&&M.tailMode==="hidden"&&!L.alternate&&!Cn)return Ir(f),null}else 2*hr()-M.renderingStartTime>Xy&&x!==1073741824&&(f.flags|=128,A=!0,Wd(M,!1),f.lanes=4194304);M.isBackwards?(L.sibling=f.child,f.child=L):(u=M.last,u!==null?u.sibling=L:f.child=L,M.last=L)}return M.tail!==null?(f=M.tail,M.rendering=f,M.tail=f.sibling,M.renderingStartTime=hr(),f.sibling=null,u=Ln.current,ze(Ln,A?u&1|2:u&1),f):(Ir(f),null);case 22:case 23:return Qy(),A=f.memoizedState!==null,u!==null&&u.memoizedState!==null!==A&&(f.flags|=8192),A&&f.mode&1?wi&1073741824&&(Ir(f),st&&f.subtreeFlags&6&&(f.flags|=8192)):Ir(f),null;case 24:return null;case 25:return null}throw Error(o(156,f.tag))}var FN=a.ReactCurrentOwner,Ai=!1;function jr(u,f,x,A){f.child=u===null?iM(f,null,x,A):Ac(f,u.child,x,A)}function IM(u,f,x,A,M){x=x.render;var L=f.ref;return _c(f,M),A=wy(u,f,x,A,L,M),x=My(),u!==null&&!Ai?(f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~M,_o(u,f,M)):(Cn&&x&&py(f),f.flags|=1,jr(u,f,A,M),f.child)}function LM(u,f,x,A,M){if(u===null){var L=x.type;return typeof L=="function"&&!e_(L)&&L.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(f.tag=15,f.type=L,BM(u,f,L,A,M)):(u=lm(x.type,null,A,f,f.mode,M),u.ref=f.ref,u.return=f,f.child=u)}if(L=u.child,!(u.lanes&M)){var K=L.memoizedProps;if(x=x.compare,x=x!==null?x:Ap,x(K,A)&&u.ref===f.ref)return _o(u,f,M)}return f.flags|=1,u=aa(L,A),u.ref=f.ref,u.return=f,f.child=u}function BM(u,f,x,A,M){if(u!==null&&Ap(u.memoizedProps,A)&&u.ref===f.ref)if(Ai=!1,(u.lanes&M)!==0)u.flags&131072&&(Ai=!0);else return f.lanes=u.lanes,_o(u,f,M);return Iy(u,f,x,A,M)}function DM(u,f,x){var A=f.pendingProps,M=A.children,L=u!==null?u.memoizedState:null;if(A.mode==="hidden")if(!(f.mode&1))f.memoizedState={baseLanes:0,cachePool:null},ze(Cc,wi),wi|=x;else if(x&1073741824)f.memoizedState={baseLanes:0,cachePool:null},A=L!==null?L.baseLanes:x,ze(Cc,wi),wi|=A;else return u=L!==null?L.baseLanes|x:x,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:u,cachePool:null},f.updateQueue=null,ze(Cc,wi),wi|=u,null;else L!==null?(A=L.baseLanes|x,f.memoizedState=null):A=x,ze(Cc,wi),wi|=A;return jr(u,f,M,x),f.child}function OM(u,f){var x=f.ref;(u===null&&x!==null||u!==null&&u.ref!==x)&&(f.flags|=512,f.flags|=2097152)}function Iy(u,f,x,A,M){var L=bn(x)?cn:At.current;return L=Gn(f,L),_c(f,M),x=wy(u,f,x,A,L,M),A=My(),u!==null&&!Ai?(f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~M,_o(u,f,M)):(Cn&&A&&py(f),f.flags|=1,jr(u,f,x,M),f.child)}function NM(u,f,x,A,M){if(bn(x)){var L=!0;Ot(f)}else L=!1;if(_c(f,M),f.stateNode===null)u!==null&&(u.alternate=null,f.alternate=null,f.flags|=2),Kw(f,x,A),hy(f,x,A,M),A=!0;else if(u===null){var K=f.stateNode,ce=f.memoizedProps;K.props=ce;var Se=K.context,ke=x.contextType;typeof ke=="object"&&ke!==null?ke=Hi(ke):(ke=bn(x)?cn:At.current,ke=Gn(f,ke));var rt=x.getDerivedStateFromProps,Pt=typeof rt=="function"||typeof K.getSnapshotBeforeUpdate=="function";Pt||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(ce!==A||Se!==ke)&&Zw(f,K,A,ke),ta=!1;var yt=f.memoizedState;K.state=yt,Cp(f,A,K,M),Se=f.memoizedState,ce!==A||yt!==Se||bt.current||ta?(typeof rt=="function"&&(fy(f,x,rt,A),Se=f.memoizedState),(ce=ta||Yw(f,x,ce,A,yt,Se,ke))?(Pt||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(f.flags|=4194308)):(typeof K.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=A,f.memoizedState=Se),K.props=A,K.state=Se,K.context=ke,A=ce):(typeof K.componentDidMount=="function"&&(f.flags|=4194308),A=!1)}else{K=f.stateNode,$w(u,f),ce=f.memoizedProps,ke=f.type===f.elementType?ce:ps(f.type,ce),K.props=ke,Pt=f.pendingProps,yt=K.context,Se=x.contextType,typeof Se=="object"&&Se!==null?Se=Hi(Se):(Se=bn(x)?cn:At.current,Se=Gn(f,Se));var pn=x.getDerivedStateFromProps;(rt=typeof pn=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(ce!==Pt||yt!==Se)&&Zw(f,K,A,Se),ta=!1,yt=f.memoizedState,K.state=yt,Cp(f,A,K,M);var dt=f.memoizedState;ce!==Pt||yt!==dt||bt.current||ta?(typeof pn=="function"&&(fy(f,x,pn,A),dt=f.memoizedState),(ke=ta||Yw(f,x,ke,A,yt,dt,Se)||!1)?(rt||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate(A,dt,Se),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate(A,dt,Se)),typeof K.componentDidUpdate=="function"&&(f.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof K.componentDidUpdate!="function"||ce===u.memoizedProps&&yt===u.memoizedState||(f.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||ce===u.memoizedProps&&yt===u.memoizedState||(f.flags|=1024),f.memoizedProps=A,f.memoizedState=dt),K.props=A,K.state=dt,K.context=Se,A=ke):(typeof K.componentDidUpdate!="function"||ce===u.memoizedProps&&yt===u.memoizedState||(f.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||ce===u.memoizedProps&&yt===u.memoizedState||(f.flags|=1024),A=!1)}return Ly(u,f,x,A,L,M)}function Ly(u,f,x,A,M,L){OM(u,f);var K=(f.flags&128)!==0;if(!A&&!K)return M&&$t(f,x,!1),_o(u,f,L);A=f.stateNode,FN.current=f;var ce=K&&typeof x.getDerivedStateFromError!="function"?null:A.render();return f.flags|=1,u!==null&&K?(f.child=Ac(f,u.child,null,L),f.child=Ac(f,null,ce,L)):jr(u,f,ce,L),f.memoizedState=A.state,M&&$t(f,x,!0),f.child}function FM(u){var f=u.stateNode;f.pendingContext?Wt(u,f.pendingContext,f.pendingContext!==f.context):f.context&&Wt(u,f.context,!1),_y(u,f.containerInfo)}function kM(u,f,x,A,M){return Sc(),yy(M),f.flags|=256,jr(u,f,x,A),f.child}var Gp={dehydrated:null,treeContext:null,retryLane:0};function Vp(u){return{baseLanes:u,cachePool:null}}function UM(u,f,x){var A=f.pendingProps,M=Ln.current,L=!1,K=(f.flags&128)!==0,ce;if((ce=K)||(ce=u!==null&&u.memoizedState===null?!1:(M&2)!==0),ce?(L=!0,f.flags&=-129):(u===null||u.memoizedState!==null)&&(M|=1),ze(Ln,M&1),u===null)return vy(f),u=f.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?(f.mode&1?sl(u)?f.lanes=8:f.lanes=1073741824:f.lanes=1,null):(M=A.children,u=A.fallback,L?(A=f.mode,L=f.child,M={mode:"hidden",children:M},!(A&1)&&L!==null?(L.childLanes=0,L.pendingProps=M):L=cm(M,A,0,null),u=ml(u,A,x,null),L.return=f,u.return=f,L.sibling=u,f.child=L,f.child.memoizedState=Vp(x),f.memoizedState=Gp,u):By(f,M));if(M=u.memoizedState,M!==null){if(ce=M.dehydrated,ce!==null){if(K)return f.flags&256?(f.flags&=-257,Wp(u,f,x,Error(o(422)))):f.memoizedState!==null?(f.child=u.child,f.flags|=128,null):(L=A.fallback,M=f.mode,A=cm({mode:"visible",children:A.children},M,0,null),L=ml(L,M,x,null),L.flags|=2,A.return=f,L.return=f,A.sibling=L,f.child=A,f.mode&1&&Ac(f,u.child,null,x),f.child.memoizedState=Vp(x),f.memoizedState=Gp,L);if(!(f.mode&1))f=Wp(u,f,x,null);else if(sl(ce))f=Wp(u,f,x,Error(o(419)));else if(A=(x&u.childLanes)!==0,Ai||A){if(A=er,A!==null){switch(x&-x){case 4:L=2;break;case 16:L=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:L=32;break;case 536870912:L=268435456;break;default:L=0}A=L&(A.suspendedLanes|x)?0:L,A!==0&&A!==M.retryLane&&(M.retryLane=A,ji(u,A,-1))}qy(),f=Wp(u,f,x,Error(o(421)))}else ks(ce)?(f.flags|=128,f.child=u.child,f=KN.bind(null,u),Ui(ce,f),f=null):(x=M.treeContext,Pe&&(Si=vc(ce),Ei=f,Cn=!0,ms=null,Bd=!1,x!==null&&(Gi[Vi++]=go,Gi[Vi++]=vo,Gi[Vi++]=al,go=x.id,vo=x.overflow,al=f)),f=By(f,f.pendingProps.children),f.flags|=4096);return f}return L?(A=HM(u,f,A.children,A.fallback,x),L=f.child,M=u.child.memoizedState,L.memoizedState=M===null?Vp(x):{baseLanes:M.baseLanes|x,cachePool:null},L.childLanes=u.childLanes&~x,f.memoizedState=Gp,A):(x=zM(u,f,A.children,x),f.memoizedState=null,x)}return L?(A=HM(u,f,A.children,A.fallback,x),L=f.child,M=u.child.memoizedState,L.memoizedState=M===null?Vp(x):{baseLanes:M.baseLanes|x,cachePool:null},L.childLanes=u.childLanes&~x,f.memoizedState=Gp,A):(x=zM(u,f,A.children,x),f.memoizedState=null,x)}function By(u,f){return f=cm({mode:"visible",children:f},u.mode,0,null),f.return=u,u.child=f}function zM(u,f,x,A){var M=u.child;return u=M.sibling,x=aa(M,{mode:"visible",children:x}),!(f.mode&1)&&(x.lanes=A),x.return=f,x.sibling=null,u!==null&&(A=f.deletions,A===null?(f.deletions=[u],f.flags|=16):A.push(u)),f.child=x}function HM(u,f,x,A,M){var L=f.mode;u=u.child;var K=u.sibling,ce={mode:"hidden",children:x};return!(L&1)&&f.child!==u?(x=f.child,x.childLanes=0,x.pendingProps=ce,f.deletions=null):(x=aa(u,ce),x.subtreeFlags=u.subtreeFlags&14680064),K!==null?A=aa(K,A):(A=ml(A,L,M,null),A.flags|=2),A.return=f,x.return=f,x.sibling=A,f.child=x,A}function Wp(u,f,x,A){return A!==null&&yy(A),Ac(f,u.child,null,x),u=By(f,f.pendingProps.children),u.flags|=2,f.memoizedState=null,u}function GM(u,f,x){u.lanes|=f;var A=u.alternate;A!==null&&(A.lanes|=f),uy(u.return,f,x)}function Dy(u,f,x,A,M){var L=u.memoizedState;L===null?u.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:A,tail:x,tailMode:M}:(L.isBackwards=f,L.rendering=null,L.renderingStartTime=0,L.last=A,L.tail=x,L.tailMode=M)}function VM(u,f,x){var A=f.pendingProps,M=A.revealOrder,L=A.tail;if(jr(u,f,A.children,x),A=Ln.current,A&2)A=A&1|2,f.flags|=128;else{if(u!==null&&u.flags&128)e:for(u=f.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&GM(u,x,f);else if(u.tag===19)GM(u,x,f);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===f)break e;for(;u.sibling===null;){if(u.return===null||u.return===f)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}A&=1}if(ze(Ln,A),!(f.mode&1))f.memoizedState=null;else switch(M){case"forwards":for(x=f.child,M=null;x!==null;)u=x.alternate,u!==null&&Lp(u)===null&&(M=x),x=x.sibling;x=M,x===null?(M=f.child,f.child=null):(M=x.sibling,x.sibling=null),Dy(f,!1,M,x,L);break;case"backwards":for(x=null,M=f.child,f.child=null;M!==null;){if(u=M.alternate,u!==null&&Lp(u)===null){f.child=M;break}u=M.sibling,M.sibling=x,x=M,M=u}Dy(f,!0,x,null,L);break;case"together":Dy(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function _o(u,f,x){if(u!==null&&(f.dependencies=u.dependencies),Tc|=f.lanes,!(x&f.childLanes))return null;if(u!==null&&f.child!==u.child)throw Error(o(153));if(f.child!==null){for(u=f.child,x=aa(u,u.pendingProps),f.child=x,x.return=f;u.sibling!==null;)u=u.sibling,x=x.sibling=aa(u,u.pendingProps),x.return=f;x.sibling=null}return f.child}function kN(u,f,x){switch(f.tag){case 3:FM(f),Sc();break;case 5:sM(f);break;case 1:bn(f.type)&&Ot(f);break;case 4:_y(f,f.stateNode.containerInfo);break;case 10:Ww(f,f.type._context,f.memoizedProps.value);break;case 13:var A=f.memoizedState;if(A!==null)return A.dehydrated!==null?(ze(Ln,Ln.current&1),f.flags|=128,null):x&f.child.childLanes?UM(u,f,x):(ze(Ln,Ln.current&1),u=_o(u,f,x),u!==null?u.sibling:null);ze(Ln,Ln.current&1);break;case 19:if(A=(x&f.childLanes)!==0,u.flags&128){if(A)return VM(u,f,x);f.flags|=128}var M=f.memoizedState;if(M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),ze(Ln,Ln.current),A)break;return null;case 22:case 23:return f.lanes=0,DM(u,f,x)}return _o(u,f,x)}function UN(u,f){switch(my(f),f.tag){case 1:return bn(f.type)&&Yt(),u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 3:return Mc(),qe(bt),qe(At),Sy(),u=f.flags,u&65536&&!(u&128)?(f.flags=u&-65537|128,f):null;case 5:return xy(f),null;case 13:if(qe(Ln),u=f.memoizedState,u!==null&&u.dehydrated!==null){if(f.alternate===null)throw Error(o(340));Sc()}return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 19:return qe(Ln),null;case 4:return Mc(),null;case 10:return cy(f.type._context),null;case 22:case 23:return Qy(),null;case 24:return null;default:return null}}var $p=!1,ul=!1,zN=typeof WeakSet=="function"?WeakSet:Set,Je=null;function jp(u,f){var x=u.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(A){ci(u,f,A)}else x.current=null}function Oy(u,f,x){try{x()}catch(A){ci(u,f,A)}}var WM=!1;function HN(u,f){for(Y(u.containerInfo),Je=f;Je!==null;)if(u=Je,f=u.child,(u.subtreeFlags&1028)!==0&&f!==null)f.return=u,Je=f;else for(;Je!==null;){u=Je;try{var x=u.alternate;if(u.flags&1024)switch(u.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var A=x.memoizedProps,M=x.memoizedState,L=u.stateNode,K=L.getSnapshotBeforeUpdate(u.elementType===u.type?A:ps(u.type,A),M);L.__reactInternalSnapshotBeforeUpdate=K}break;case 3:st&&We(u.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ce){ci(u,u.return,ce)}if(f=u.sibling,f!==null){f.return=u.return,Je=f;break}Je=u.return}return x=WM,WM=!1,x}function dl(u,f,x){var A=f.updateQueue;if(A=A!==null?A.lastEffect:null,A!==null){var M=A=A.next;do{if((M.tag&u)===u){var L=M.destroy;M.destroy=void 0,L!==void 0&&Oy(f,x,L)}M=M.next}while(M!==A)}}function $d(u,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var x=f=f.next;do{if((x.tag&u)===u){var A=x.create;x.destroy=A()}x=x.next}while(x!==f)}}function Ny(u){var f=u.ref;if(f!==null){var x=u.stateNode;switch(u.tag){case 5:u=re(x);break;default:u=x}typeof f=="function"?f(u):f.current=u}}function $M(u,f,x){if(zs&&typeof zs.onCommitFiberUnmount=="function")try{zs.onCommitFiberUnmount(Ep,f)}catch{}switch(f.tag){case 0:case 11:case 14:case 15:if(u=f.updateQueue,u!==null&&(u=u.lastEffect,u!==null)){var A=u=u.next;do{var M=A,L=M.destroy;M=M.tag,L!==void 0&&(M&2||M&4)&&Oy(f,x,L),A=A.next}while(A!==u)}break;case 1:if(jp(f,x),u=f.stateNode,typeof u.componentWillUnmount=="function")try{u.props=f.memoizedProps,u.state=f.memoizedState,u.componentWillUnmount()}catch(K){ci(f,x,K)}break;case 5:jp(f,x);break;case 4:st?ZM(u,f,x):te&&te&&(f=f.stateNode.containerInfo,x=Et(f),rn(f,x))}}function jM(u,f,x){for(var A=f;;)if($M(u,A,x),A.child===null||st&&A.tag===4){if(A===f)break;for(;A.sibling===null;){if(A.return===null||A.return===f)return;A=A.return}A.sibling.return=A.return,A=A.sibling}else A.child.return=A,A=A.child}function XM(u){var f=u.alternate;f!==null&&(u.alternate=null,XM(f)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(f=u.stateNode,f!==null&&ot(f)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function JM(u){return u.tag===5||u.tag===3||u.tag===4}function YM(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||JM(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function KM(u){if(st){e:{for(var f=u.return;f!==null;){if(JM(f))break e;f=f.return}throw Error(o(160))}var x=f;switch(x.tag){case 5:f=x.stateNode,x.flags&32&&(wt(f),x.flags&=-33),x=YM(u),ky(u,x,f);break;case 3:case 4:f=x.stateNode.containerInfo,x=YM(u),Fy(u,x,f);break;default:throw Error(o(161))}}}function Fy(u,f,x){var A=u.tag;if(A===5||A===6)u=u.stateNode,f?Ye(x,u,f):pt(x,u);else if(A!==4&&(u=u.child,u!==null))for(Fy(u,f,x),u=u.sibling;u!==null;)Fy(u,f,x),u=u.sibling}function ky(u,f,x){var A=u.tag;if(A===5||A===6)u=u.stateNode,f?ft(x,u,f):lt(x,u);else if(A!==4&&(u=u.child,u!==null))for(ky(u,f,x),u=u.sibling;u!==null;)ky(u,f,x),u=u.sibling}function ZM(u,f,x){for(var A=f,M=!1,L,K;;){if(!M){M=A.return;e:for(;;){if(M===null)throw Error(o(160));switch(L=M.stateNode,M.tag){case 5:K=!1;break e;case 3:L=L.containerInfo,K=!0;break e;case 4:L=L.containerInfo,K=!0;break e}M=M.return}M=!0}if(A.tag===5||A.tag===6)jM(u,A,x),K?gt(L,A.stateNode):Ze(L,A.stateNode);else if(A.tag===18)K?Q(L,A.stateNode):ne(L,A.stateNode);else if(A.tag===4){if(A.child!==null){L=A.stateNode.containerInfo,K=!0,A.child.return=A,A=A.child;continue}}else if($M(u,A,x),A.child!==null){A.child.return=A,A=A.child;continue}if(A===f)break;for(;A.sibling===null;){if(A.return===null||A.return===f)return;A=A.return,A.tag===4&&(M=!1)}A.sibling.return=A.return,A=A.sibling}}function Uy(u,f){if(st){switch(f.tag){case 0:case 11:case 14:case 15:dl(3,f,f.return),$d(3,f),dl(5,f,f.return);return;case 1:return;case 5:var x=f.stateNode;if(x!=null){var A=f.memoizedProps;u=u!==null?u.memoizedProps:A;var M=f.type,L=f.updateQueue;f.updateQueue=null,L!==null&&Ct(x,L,M,u,A,f)}return;case 6:if(f.stateNode===null)throw Error(o(162));x=f.memoizedProps,Ie(f.stateNode,u!==null?u.memoizedProps:x,x);return;case 3:Pe&&u!==null&&u.memoizedState.isDehydrated&&W(f.stateNode.containerInfo);return;case 12:return;case 13:Xp(f);return;case 19:Xp(f);return;case 17:return}throw Error(o(163))}switch(f.tag){case 0:case 11:case 14:case 15:dl(3,f,f.return),$d(3,f),dl(5,f,f.return);return;case 12:return;case 13:Xp(f);return;case 19:Xp(f);return;case 3:Pe&&u!==null&&u.memoizedState.isDehydrated&&W(f.stateNode.containerInfo);break;case 22:case 23:return}e:if(te){switch(f.tag){case 1:case 5:case 6:break e;case 3:case 4:f=f.stateNode,rn(f.containerInfo,f.pendingChildren);break e}throw Error(o(163))}}function Xp(u){var f=u.updateQueue;if(f!==null){u.updateQueue=null;var x=u.stateNode;x===null&&(x=u.stateNode=new zN),f.forEach(function(A){var M=ZN.bind(null,u,A);x.has(A)||(x.add(A),A.then(M,M))})}}function GN(u,f){for(Je=f;Je!==null;){f=Je;var x=f.deletions;if(x!==null)for(var A=0;A<x.length;A++){var M=x[A];try{var L=u;st?ZM(L,M,f):jM(L,M,f);var K=M.alternate;K!==null&&(K.return=null),M.return=null}catch(ut){ci(M,f,ut)}}if(x=f.child,f.subtreeFlags&12854&&x!==null)x.return=f,Je=x;else for(;Je!==null;){f=Je;try{var ce=f.flags;if(ce&32&&st&&wt(f.stateNode),ce&512){var Se=f.alternate;if(Se!==null){var ke=Se.ref;ke!==null&&(typeof ke=="function"?ke(null):ke.current=null)}}if(ce&8192)switch(f.tag){case 13:if(f.memoizedState!==null){var rt=f.alternate;(rt===null||rt.memoizedState===null)&&(jy=hr())}break;case 22:var Pt=f.memoizedState!==null,yt=f.alternate,pn=yt!==null&&yt.memoizedState!==null;if(x=f,st){e:if(A=x,M=Pt,L=null,st)for(var dt=A;;){if(dt.tag===5){if(L===null){L=dt;var Lr=dt.stateNode;M?Rt(Lr):ve(dt.stateNode,dt.memoizedProps)}}else if(dt.tag===6){if(L===null){var Ji=dt.stateNode;M?Bt(Ji):le(Ji,dt.memoizedProps)}}else if((dt.tag!==22&&dt.tag!==23||dt.memoizedState===null||dt===A)&&dt.child!==null){dt.child.return=dt,dt=dt.child;continue}if(dt===A)break;for(;dt.sibling===null;){if(dt.return===null||dt.return===A)break e;L===dt&&(L=null),dt=dt.return}L===dt&&(L=null),dt.sibling.return=dt.return,dt=dt.sibling}}if(Pt&&!pn&&x.mode&1){Je=x;for(var pe=x.child;pe!==null;){for(x=Je=pe;Je!==null;){A=Je;var ue=A.child;switch(A.tag){case 0:case 11:case 14:case 15:dl(4,A,A.return);break;case 1:jp(A,A.return);var _e=A.stateNode;if(typeof _e.componentWillUnmount=="function"){var Ke=A.return;try{_e.props=A.memoizedProps,_e.state=A.memoizedState,_e.componentWillUnmount()}catch(ut){ci(A,Ke,ut)}}break;case 5:jp(A,A.return);break;case 22:if(A.memoizedState!==null){eb(x);continue}}ue!==null?(ue.return=A,Je=ue):eb(x)}pe=pe.sibling}}}switch(ce&4102){case 2:KM(f),f.flags&=-3;break;case 6:KM(f),f.flags&=-3,Uy(f.alternate,f);break;case 4096:f.flags&=-4097;break;case 4100:f.flags&=-4097,Uy(f.alternate,f);break;case 4:Uy(f.alternate,f)}}catch(ut){ci(f,f.return,ut)}if(x=f.sibling,x!==null){x.return=f.return,Je=x;break}Je=f.return}}}function VN(u,f,x){Je=u,QM(u)}function QM(u,f,x){for(var A=(u.mode&1)!==0;Je!==null;){var M=Je,L=M.child;if(M.tag===22&&A){var K=M.memoizedState!==null||$p;if(!K){var ce=M.alternate,Se=ce!==null&&ce.memoizedState!==null||ul;ce=$p;var ke=ul;if($p=K,(ul=Se)&&!ke)for(Je=M;Je!==null;)K=Je,Se=K.child,K.tag===22&&K.memoizedState!==null?tb(M):Se!==null?(Se.return=K,Je=Se):tb(M);for(;L!==null;)Je=L,QM(L),L=L.sibling;Je=M,$p=ce,ul=ke}qM(u)}else M.subtreeFlags&8772&&L!==null?(L.return=M,Je=L):qM(u)}}function qM(u){for(;Je!==null;){var f=Je;if(f.flags&8772){var x=f.alternate;try{if(f.flags&8772)switch(f.tag){case 0:case 11:case 15:ul||$d(5,f);break;case 1:var A=f.stateNode;if(f.flags&4&&!ul)if(x===null)A.componentDidMount();else{var M=f.elementType===f.type?x.memoizedProps:ps(f.type,x.memoizedProps);A.componentDidUpdate(M,x.memoizedState,A.__reactInternalSnapshotBeforeUpdate)}var L=f.updateQueue;L!==null&&Xw(f,L,A);break;case 3:var K=f.updateQueue;if(K!==null){if(x=null,f.child!==null)switch(f.child.tag){case 5:x=re(f.child.stateNode);break;case 1:x=f.child.stateNode}Xw(f,K,x)}break;case 5:var ce=f.stateNode;x===null&&f.flags&4&&Ht(ce,f.type,f.memoizedProps,f);break;case 6:break;case 4:break;case 12:break;case 13:if(Pe&&f.memoizedState===null){var Se=f.alternate;if(Se!==null){var ke=Se.memoizedState;if(ke!==null){var rt=ke.dehydrated;rt!==null&&J(rt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}ul||f.flags&512&&Ny(f)}catch(Pt){ci(f,f.return,Pt)}}if(f===u){Je=null;break}if(x=f.sibling,x!==null){x.return=f.return,Je=x;break}Je=f.return}}function eb(u){for(;Je!==null;){var f=Je;if(f===u){Je=null;break}var x=f.sibling;if(x!==null){x.return=f.return,Je=x;break}Je=f.return}}function tb(u){for(;Je!==null;){var f=Je;try{switch(f.tag){case 0:case 11:case 15:var x=f.return;try{$d(4,f)}catch(Se){ci(f,x,Se)}break;case 1:var A=f.stateNode;if(typeof A.componentDidMount=="function"){var M=f.return;try{A.componentDidMount()}catch(Se){ci(f,M,Se)}}var L=f.return;try{Ny(f)}catch(Se){ci(f,L,Se)}break;case 5:var K=f.return;try{Ny(f)}catch(Se){ci(f,K,Se)}}}catch(Se){ci(f,f.return,Se)}if(f===u){Je=null;break}var ce=f.sibling;if(ce!==null){ce.return=f.return,Je=ce;break}Je=f.return}}var Jp=0,Yp=1,Kp=2,Zp=3,Qp=4;if(typeof Symbol=="function"&&Symbol.for){var jd=Symbol.for;Jp=jd("selector.component"),Yp=jd("selector.has_pseudo_class"),Kp=jd("selector.role"),Zp=jd("selector.test_id"),Qp=jd("selector.text")}function zy(u){var f=we(u);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(o(364));return f}if(u=de(u),u===null)throw Error(o(362));return u.stateNode.current}function Hy(u,f){switch(f.$$typeof){case Jp:if(u.type===f.value)return!0;break;case Yp:e:{f=f.value,u=[u,0];for(var x=0;x<u.length;){var A=u[x++],M=u[x++],L=f[M];if(A.tag!==5||!me(A)){for(;L!=null&&Hy(A,L);)M++,L=f[M];if(M===f.length){f=!0;break e}else for(A=A.child;A!==null;)u.push(A,M),A=A.sibling}}f=!1}return f;case Kp:if(u.tag===5&&Ue(u.stateNode,f.value))return!0;break;case Qp:if((u.tag===5||u.tag===6)&&(u=fe(u),u!==null&&0<=u.indexOf(f.value)))return!0;break;case Zp:if(u.tag===5&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Gy(u){switch(u.$$typeof){case Jp:return"<"+(R(u.value)||"Unknown")+">";case Yp:return":has("+(Gy(u)||"")+")";case Kp:return'[role="'+u.value+'"]';case Qp:return'"'+u.value+'"';case Zp:return'[data-testname="'+u.value+'"]';default:throw Error(o(365))}}function nb(u,f){var x=[];u=[u,0];for(var A=0;A<u.length;){var M=u[A++],L=u[A++],K=f[L];if(M.tag!==5||!me(M)){for(;K!=null&&Hy(M,K);)L++,K=f[L];if(L===f.length)x.push(M);else for(M=M.child;M!==null;)u.push(M,L),M=M.sibling}}return x}function Vy(u,f){if(!k)throw Error(o(363));u=zy(u),u=nb(u,f),f=[],u=Array.from(u);for(var x=0;x<u.length;){var A=u[x++];if(A.tag===5)me(A)||f.push(A.stateNode);else for(A=A.child;A!==null;)u.push(A),A=A.sibling}return f}var WN=Math.ceil,qp=a.ReactCurrentDispatcher,Wy=a.ReactCurrentOwner,Yn=a.ReactCurrentBatchConfig,Vt=0,er=null,tr=null,Er=0,wi=0,Cc=Tt(0),or=0,Xd=null,Tc=0,em=0,$y=0,Jd=null,ai=null,jy=0,Xy=1/0;function Rc(){Xy=hr()+500}var tm=!1,Jy=null,ra=null,nm=!1,ia=null,rm=0,Yd=0,Yy=null,im=-1,sm=0;function Xr(){return Vt&6?hr():im!==-1?im:im=hr()}function sa(u){return u.mode&1?Vt&2&&Er!==0?Er&-Er:bN.transition!==null?(sm===0&&(u=yp,yp<<=1,!(yp&4194240)&&(yp=64),sm=u),sm):(u=qt,u!==0?u:Ae()):1}function ji(u,f,x){if(50<Yd)throw Yd=0,Yy=null,Error(o(185));var A=om(u,f);return A===null?null:(Ld(A,f,x),(!(Vt&2)||A!==er)&&(A===er&&(!(Vt&2)&&(em|=f),or===4&&oa(A,Er)),li(A,x),f===1&&Vt===0&&!(u.mode&1)&&(Rc(),Sp&&Gs())),A)}function om(u,f){u.lanes|=f;var x=u.alternate;for(x!==null&&(x.lanes|=f),x=u,u=u.return;u!==null;)u.childLanes|=f,x=u.alternate,x!==null&&(x.childLanes|=f),x=u,u=u.return;return x.tag===3?x.stateNode:null}function li(u,f){var x=u.callbackNode;vN(u,f);var A=xp(u,u===er?Er:0);if(A===0)x!==null&&Gw(x),u.callbackNode=null,u.callbackPriority=0;else if(f=A&-A,u.callbackPriority!==f){if(x!=null&&Gw(x),f===1)u.tag===0?MN(ib.bind(null,u)):Vw(ib.bind(null,u)),Ve?G(function(){Vt===0&&Gs()}):ry(iy,Gs),x=null;else{switch(Hw(A)){case 1:x=iy;break;case 4:x=EN;break;case 16:x=sy;break;case 536870912:x=SN;break;default:x=sy}x=hb(x,rb.bind(null,u))}u.callbackPriority=f,u.callbackNode=x}}function rb(u,f){if(im=-1,sm=0,Vt&6)throw Error(o(327));var x=u.callbackNode;if(pl()&&u.callbackNode!==x)return null;var A=xp(u,u===er?Er:0);if(A===0)return null;if(A&30||A&u.expiredLanes||f)f=am(u,A);else{f=A;var M=Vt;Vt|=2;var L=ab();(er!==u||Er!==f)&&(Rc(),fl(u,f));do try{XN();break}catch(ce){ob(u,ce)}while(!0);ly(),qp.current=L,Vt=M,tr!==null?f=0:(er=null,Er=0,f=or)}if(f!==0){if(f===2&&(M=ey(u),M!==0&&(A=M,f=Ky(u,M))),f===1)throw x=Xd,fl(u,0),oa(u,A),li(u,hr()),x;if(f===6)oa(u,A);else{if(M=u.current.alternate,!(A&30)&&!$N(M)&&(f=am(u,A),f===2&&(L=ey(u),L!==0&&(A=L,f=Ky(u,L))),f===1))throw x=Xd,fl(u,0),oa(u,A),li(u,hr()),x;switch(u.finishedWork=M,u.finishedLanes=A,f){case 0:case 1:throw Error(o(345));case 2:hl(u,ai);break;case 3:if(oa(u,A),(A&130023424)===A&&(f=jy+500-hr(),10<f)){if(xp(u,0)!==0)break;if(M=u.suspendedLanes,(M&A)!==A){Xr(),u.pingedLanes|=u.suspendedLanes&M;break}u.timeoutHandle=Te(hl.bind(null,u,ai),f);break}hl(u,ai);break;case 4:if(oa(u,A),(A&4194240)===A)break;for(f=u.eventTimes,M=-1;0<A;){var K=31-gn(A);L=1<<K,K=f[K],K>M&&(M=K),A&=~L}if(A=M,A=hr()-A,A=(120>A?120:480>A?480:1080>A?1080:1920>A?1920:3e3>A?3e3:4320>A?4320:1960*WN(A/1960))-A,10<A){u.timeoutHandle=Te(hl.bind(null,u,ai),A);break}hl(u,ai);break;case 5:hl(u,ai);break;default:throw Error(o(329))}}}return li(u,hr()),u.callbackNode===x?rb.bind(null,u):null}function Ky(u,f){var x=Jd;return u.current.memoizedState.isDehydrated&&(fl(u,f).flags|=256),u=am(u,f),u!==2&&(f=ai,ai=x,f!==null&&Zy(f)),u}function Zy(u){ai===null?ai=u:ai.push.apply(ai,u)}function $N(u){for(var f=u;;){if(f.flags&16384){var x=f.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var A=0;A<x.length;A++){var M=x[A],L=M.getSnapshot;M=M.value;try{if(!Hs(L(),M))return!1}catch{return!1}}}if(x=f.child,f.subtreeFlags&16384&&x!==null)x.return=f,f=x;else{if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function oa(u,f){for(f&=~$y,f&=~em,u.suspendedLanes|=f,u.pingedLanes&=~f,u=u.expirationTimes;0<f;){var x=31-gn(f),A=1<<x;u[x]=-1,f&=~A}}function ib(u){if(Vt&6)throw Error(o(327));pl();var f=xp(u,0);if(!(f&1))return li(u,hr()),null;var x=am(u,f);if(u.tag!==0&&x===2){var A=ey(u);A!==0&&(f=A,x=Ky(u,A))}if(x===1)throw x=Xd,fl(u,0),oa(u,f),li(u,hr()),x;if(x===6)throw Error(o(345));return u.finishedWork=u.current.alternate,u.finishedLanes=f,hl(u,ai),li(u,hr()),null}function sb(u){ia!==null&&ia.tag===0&&!(Vt&6)&&pl();var f=Vt;Vt|=1;var x=Yn.transition,A=qt;try{if(Yn.transition=null,qt=1,u)return u()}finally{qt=A,Yn.transition=x,Vt=f,!(Vt&6)&&Gs()}}function Qy(){wi=Cc.current,qe(Cc)}function fl(u,f){u.finishedWork=null,u.finishedLanes=0;var x=u.timeoutHandle;if(x!==ct&&(u.timeoutHandle=ct,Xe(x)),tr!==null)for(x=tr.return;x!==null;){var A=x;switch(my(A),A.tag){case 1:A=A.type.childContextTypes,A!=null&&Yt();break;case 3:Mc(),qe(bt),qe(At),Sy();break;case 5:xy(A);break;case 4:Mc();break;case 13:qe(Ln);break;case 19:qe(Ln);break;case 10:cy(A.type._context);break;case 22:case 23:Qy()}x=x.return}if(er=u,tr=u=aa(u.current,null),Er=wi=f,or=0,Xd=null,$y=em=Tc=0,ai=Jd=null,Vs!==null){for(f=0;f<Vs.length;f++)if(x=Vs[f],A=x.interleaved,A!==null){x.interleaved=null;var M=A.next,L=x.pending;if(L!==null){var K=L.next;L.next=M,A.next=K}x.pending=A}Vs=null}return u}function ob(u,f){do{var x=tr;try{if(ly(),Bp.current=Up,Dp){for(var A=Vn.memoizedState;A!==null;){var M=A.queue;M!==null&&(M.pending=null),A=A.next}Dp=!1}if(bc=0,pr=Rr=Vn=null,kd=!1,Ud=0,Wy.current=null,x===null||x.return===null){or=1,Xd=f,tr=null;break}e:{var L=u,K=x.return,ce=x,Se=f;if(f=Er,ce.flags|=32768,Se!==null&&typeof Se=="object"&&typeof Se.then=="function"){var ke=Se,rt=ce,Pt=rt.tag;if(!(rt.mode&1)&&(Pt===0||Pt===11||Pt===15)){var yt=rt.alternate;yt?(rt.updateQueue=yt.updateQueue,rt.memoizedState=yt.memoizedState,rt.lanes=yt.lanes):(rt.updateQueue=null,rt.memoizedState=null)}var pn=CM(K);if(pn!==null){pn.flags&=-257,TM(pn,K,ce,L,f),pn.mode&1&&bM(L,ke,f),f=pn,Se=ke;var dt=f.updateQueue;if(dt===null){var Lr=new Set;Lr.add(Se),f.updateQueue=Lr}else dt.add(Se);break e}else{if(!(f&1)){bM(L,ke,f),qy();break e}Se=Error(o(426))}}else if(Cn&&ce.mode&1){var Ji=CM(K);if(Ji!==null){!(Ji.flags&65536)&&(Ji.flags|=256),TM(Ji,K,ce,L,f),yy(Se);break e}}L=Se,or!==4&&(or=2),Jd===null?Jd=[L]:Jd.push(L),Se=Ry(Se,ce),ce=K;do{switch(ce.tag){case 3:ce.flags|=65536,f&=-f,ce.lanes|=f;var pe=wM(ce,Se,f);jw(ce,pe);break e;case 1:L=Se;var ue=ce.type,_e=ce.stateNode;if(!(ce.flags&128)&&(typeof ue.getDerivedStateFromError=="function"||_e!==null&&typeof _e.componentDidCatch=="function"&&(ra===null||!ra.has(_e)))){ce.flags|=65536,f&=-f,ce.lanes|=f;var Ke=MM(ce,L,f);jw(ce,Ke);break e}}ce=ce.return}while(ce!==null)}cb(x)}catch(ut){f=ut,tr===x&&x!==null&&(tr=x=x.return);continue}break}while(!0)}function ab(){var u=qp.current;return qp.current=Up,u===null?Up:u}function qy(){(or===0||or===3||or===2)&&(or=4),er===null||!(Tc&268435455)&&!(em&268435455)||oa(er,Er)}function am(u,f){var x=Vt;Vt|=2;var A=ab();er===u&&Er===f||fl(u,f);do try{jN();break}catch(M){ob(u,M)}while(!0);if(ly(),Vt=x,qp.current=A,tr!==null)throw Error(o(261));return er=null,Er=0,or}function jN(){for(;tr!==null;)lb(tr)}function XN(){for(;tr!==null&&!_N();)lb(tr)}function lb(u){var f=fb(u.alternate,u,wi);u.memoizedProps=u.pendingProps,f===null?cb(u):tr=f,Wy.current=null}function cb(u){var f=u;do{var x=f.alternate;if(u=f.return,f.flags&32768){if(x=UN(x,f),x!==null){x.flags&=32767,tr=x;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{or=6,tr=null;return}}else if(x=NN(x,f,wi),x!==null){tr=x;return}if(f=f.sibling,f!==null){tr=f;return}tr=f=u}while(f!==null);or===0&&(or=5)}function hl(u,f){var x=qt,A=Yn.transition;try{Yn.transition=null,qt=1,JN(u,f,x)}finally{Yn.transition=A,qt=x}return null}function JN(u,f,x){do pl();while(ia!==null);if(Vt&6)throw Error(o(327));var A=u.finishedWork,M=u.finishedLanes;if(A===null)return null;if(u.finishedWork=null,u.finishedLanes=0,A===u.current)throw Error(o(177));u.callbackNode=null,u.callbackPriority=0;var L=A.lanes|A.childLanes;if(yN(u,L),u===er&&(tr=er=null,Er=0),!(A.subtreeFlags&2064)&&!(A.flags&2064)||nm||(nm=!0,hb(sy,function(){return pl(),null})),L=(A.flags&15990)!==0,A.subtreeFlags&15990||L){L=Yn.transition,Yn.transition=null;var K=qt;qt=1;var ce=Vt;Vt|=4,Wy.current=null,HN(u,A),GN(u,A),V(u.containerInfo),u.current=A,VN(A),xN(),Vt=ce,qt=K,Yn.transition=L}else u.current=A;if(nm&&(nm=!1,ia=u,rm=M),L=u.pendingLanes,L===0&&(ra=null),AN(A.stateNode),li(u,hr()),f!==null)for(x=u.onRecoverableError,A=0;A<f.length;A++)x(f[A]);if(tm)throw tm=!1,u=Jy,Jy=null,u;return rm&1&&u.tag!==0&&pl(),L=u.pendingLanes,L&1?u===Yy?Yd++:(Yd=0,Yy=u):Yd=0,Gs(),null}function pl(){if(ia!==null){var u=Hw(rm),f=Yn.transition,x=qt;try{if(Yn.transition=null,qt=16>u?16:u,ia===null)var A=!1;else{if(u=ia,ia=null,rm=0,Vt&6)throw Error(o(331));var M=Vt;for(Vt|=4,Je=u.current;Je!==null;){var L=Je,K=L.child;if(Je.flags&16){var ce=L.deletions;if(ce!==null){for(var Se=0;Se<ce.length;Se++){var ke=ce[Se];for(Je=ke;Je!==null;){var rt=Je;switch(rt.tag){case 0:case 11:case 15:dl(8,rt,L)}var Pt=rt.child;if(Pt!==null)Pt.return=rt,Je=Pt;else for(;Je!==null;){rt=Je;var yt=rt.sibling,pn=rt.return;if(XM(rt),rt===ke){Je=null;break}if(yt!==null){yt.return=pn,Je=yt;break}Je=pn}}}var dt=L.alternate;if(dt!==null){var Lr=dt.child;if(Lr!==null){dt.child=null;do{var Ji=Lr.sibling;Lr.sibling=null,Lr=Ji}while(Lr!==null)}}Je=L}}if(L.subtreeFlags&2064&&K!==null)K.return=L,Je=K;else e:for(;Je!==null;){if(L=Je,L.flags&2048)switch(L.tag){case 0:case 11:case 15:dl(9,L,L.return)}var pe=L.sibling;if(pe!==null){pe.return=L.return,Je=pe;break e}Je=L.return}}var ue=u.current;for(Je=ue;Je!==null;){K=Je;var _e=K.child;if(K.subtreeFlags&2064&&_e!==null)_e.return=K,Je=_e;else e:for(K=ue;Je!==null;){if(ce=Je,ce.flags&2048)try{switch(ce.tag){case 0:case 11:case 15:$d(9,ce)}}catch(ut){ci(ce,ce.return,ut)}if(ce===K){Je=null;break e}var Ke=ce.sibling;if(Ke!==null){Ke.return=ce.return,Je=Ke;break e}Je=ce.return}}if(Vt=M,Gs(),zs&&typeof zs.onPostCommitFiberRoot=="function")try{zs.onPostCommitFiberRoot(Ep,u)}catch{}A=!0}return A}finally{qt=x,Yn.transition=f}}return!1}function ub(u,f,x){f=Ry(x,f),f=wM(u,f,1),na(u,f),f=Xr(),u=om(u,1),u!==null&&(Ld(u,1,f),li(u,f))}function ci(u,f,x){if(u.tag===3)ub(u,u,x);else for(;f!==null;){if(f.tag===3){ub(f,u,x);break}else if(f.tag===1){var A=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(ra===null||!ra.has(A))){u=Ry(x,u),u=MM(f,u,1),na(f,u),u=Xr(),f=om(f,1),f!==null&&(Ld(f,1,u),li(f,u));break}}f=f.return}}function YN(u,f,x){var A=u.pingCache;A!==null&&A.delete(f),f=Xr(),u.pingedLanes|=u.suspendedLanes&x,er===u&&(Er&x)===x&&(or===4||or===3&&(Er&130023424)===Er&&500>hr()-jy?fl(u,0):$y|=x),li(u,f)}function db(u,f){f===0&&(u.mode&1?(f=_p,_p<<=1,!(_p&130023424)&&(_p=4194304)):f=1);var x=Xr();u=om(u,f),u!==null&&(Ld(u,f,x),li(u,x))}function KN(u){var f=u.memoizedState,x=0;f!==null&&(x=f.retryLane),db(u,x)}function ZN(u,f){var x=0;switch(u.tag){case 13:var A=u.stateNode,M=u.memoizedState;M!==null&&(x=M.retryLane);break;case 19:A=u.stateNode;break;default:throw Error(o(314))}A!==null&&A.delete(f),db(u,x)}var fb;fb=function(u,f,x){if(u!==null)if(u.memoizedProps!==f.pendingProps||bt.current)Ai=!0;else{if(!(u.lanes&x)&&!(f.flags&128))return Ai=!1,kN(u,f,x);Ai=!!(u.flags&131072)}else Ai=!1,Cn&&f.flags&1048576&&Qw(f,Pp,f.index);switch(f.lanes=0,f.tag){case 2:var A=f.type;u!==null&&(u.alternate=null,f.alternate=null,f.flags|=2),u=f.pendingProps;var M=Gn(f,At.current);_c(f,x),M=wy(null,f,A,u,M,x);var L=My();return f.flags|=1,typeof M=="object"&&M!==null&&typeof M.render=="function"&&M.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,bn(A)?(L=!0,Ot(f)):L=!1,f.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,dy(f),M.updater=Tp,f.stateNode=M,M._reactInternals=f,hy(f,A,u,x),f=Ly(null,f,A,!0,L,x)):(f.tag=0,Cn&&L&&py(f),jr(null,f,M,x),f=f.child),f;case 16:A=f.elementType;e:{switch(u!==null&&(u.alternate=null,f.alternate=null,f.flags|=2),u=f.pendingProps,M=A._init,A=M(A._payload),f.type=A,M=f.tag=qN(A),u=ps(A,u),M){case 0:f=Iy(null,f,A,u,x);break e;case 1:f=NM(null,f,A,u,x);break e;case 11:f=IM(null,f,A,u,x);break e;case 14:f=LM(null,f,A,ps(A.type,u),x);break e}throw Error(o(306,A,""))}return f;case 0:return A=f.type,M=f.pendingProps,M=f.elementType===A?M:ps(A,M),Iy(u,f,A,M,x);case 1:return A=f.type,M=f.pendingProps,M=f.elementType===A?M:ps(A,M),NM(u,f,A,M,x);case 3:e:{if(FM(f),u===null)throw Error(o(387));A=f.pendingProps,L=f.memoizedState,M=L.element,$w(u,f),Cp(f,A,null,x);var K=f.memoizedState;if(A=K.element,Pe&&L.isDehydrated)if(L={element:A,isDehydrated:!1,cache:K.cache,transitions:K.transitions},f.updateQueue.baseState=L,f.memoizedState=L,f.flags&256){M=Error(o(423)),f=kM(u,f,A,x,M);break e}else if(A!==M){M=Error(o(424)),f=kM(u,f,A,x,M);break e}else for(Pe&&(Si=ol(f.stateNode.containerInfo),Ei=f,Cn=!0,ms=null,Bd=!1),x=iM(f,null,A,x),f.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(Sc(),A===M){f=_o(u,f,x);break e}jr(u,f,A,x)}f=f.child}return f;case 5:return sM(f),u===null&&vy(f),A=f.type,M=f.pendingProps,L=u!==null?u.memoizedProps:null,K=M.children,Ce(A,M)?K=null:L!==null&&Ce(A,L)&&(f.flags|=32),OM(u,f),jr(u,f,K,x),f.child;case 6:return u===null&&vy(f),null;case 13:return UM(u,f,x);case 4:return _y(f,f.stateNode.containerInfo),A=f.pendingProps,u===null?f.child=Ac(f,null,A,x):jr(u,f,A,x),f.child;case 11:return A=f.type,M=f.pendingProps,M=f.elementType===A?M:ps(A,M),IM(u,f,A,M,x);case 7:return jr(u,f,f.pendingProps,x),f.child;case 8:return jr(u,f,f.pendingProps.children,x),f.child;case 12:return jr(u,f,f.pendingProps.children,x),f.child;case 10:e:{if(A=f.type._context,M=f.pendingProps,L=f.memoizedProps,K=M.value,Ww(f,A,K),L!==null)if(Hs(L.value,K)){if(L.children===M.children&&!bt.current){f=_o(u,f,x);break e}}else for(L=f.child,L!==null&&(L.return=f);L!==null;){var ce=L.dependencies;if(ce!==null){K=L.child;for(var Se=ce.firstContext;Se!==null;){if(Se.context===A){if(L.tag===1){Se=mo(-1,x&-x),Se.tag=2;var ke=L.updateQueue;if(ke!==null){ke=ke.shared;var rt=ke.pending;rt===null?Se.next=Se:(Se.next=rt.next,rt.next=Se),ke.pending=Se}}L.lanes|=x,Se=L.alternate,Se!==null&&(Se.lanes|=x),uy(L.return,x,f),ce.lanes|=x;break}Se=Se.next}}else if(L.tag===10)K=L.type===f.type?null:L.child;else if(L.tag===18){if(K=L.return,K===null)throw Error(o(341));K.lanes|=x,ce=K.alternate,ce!==null&&(ce.lanes|=x),uy(K,x,f),K=L.sibling}else K=L.child;if(K!==null)K.return=L;else for(K=L;K!==null;){if(K===f){K=null;break}if(L=K.sibling,L!==null){L.return=K.return,K=L;break}K=K.return}L=K}jr(u,f,M.children,x),f=f.child}return f;case 9:return M=f.type,A=f.pendingProps.children,_c(f,x),M=Hi(M),A=A(M),f.flags|=1,jr(u,f,A,x),f.child;case 14:return A=f.type,M=ps(A,f.pendingProps),M=ps(A.type,M),LM(u,f,A,M,x);case 15:return BM(u,f,f.type,f.pendingProps,x);case 17:return A=f.type,M=f.pendingProps,M=f.elementType===A?M:ps(A,M),u!==null&&(u.alternate=null,f.alternate=null,f.flags|=2),f.tag=1,bn(A)?(u=!0,Ot(f)):u=!1,_c(f,x),Kw(f,A,M),hy(f,A,M,x),Ly(null,f,A,!0,u,x);case 19:return VM(u,f,x);case 22:return DM(u,f,x)}throw Error(o(156,f.tag))};function hb(u,f){return ry(u,f)}function QN(u,f,x,A){this.tag=u,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xi(u,f,x,A){return new QN(u,f,x,A)}function e_(u){return u=u.prototype,!(!u||!u.isReactComponent)}function qN(u){if(typeof u=="function")return e_(u)?1:0;if(u!=null){if(u=u.$$typeof,u===_)return 11;if(u===S)return 14}return 2}function aa(u,f){var x=u.alternate;return x===null?(x=Xi(u.tag,f,u.key,u.mode),x.elementType=u.elementType,x.type=u.type,x.stateNode=u.stateNode,x.alternate=u,u.alternate=x):(x.pendingProps=f,x.type=u.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=u.flags&14680064,x.childLanes=u.childLanes,x.lanes=u.lanes,x.child=u.child,x.memoizedProps=u.memoizedProps,x.memoizedState=u.memoizedState,x.updateQueue=u.updateQueue,f=u.dependencies,x.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},x.sibling=u.sibling,x.index=u.index,x.ref=u.ref,x}function lm(u,f,x,A,M,L){var K=2;if(A=u,typeof u=="function")e_(u)&&(K=1);else if(typeof u=="string")K=5;else e:switch(u){case d:return ml(x.children,M,L,f);case h:K=8,M|=8;break;case p:return u=Xi(12,x,f,M|2),u.elementType=p,u.lanes=L,u;case y:return u=Xi(13,x,f,M),u.elementType=y,u.lanes=L,u;case g:return u=Xi(19,x,f,M),u.elementType=g,u.lanes=L,u;case w:return cm(x,M,L,f);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case m:K=10;break e;case v:K=9;break e;case _:K=11;break e;case S:K=14;break e;case E:K=16,A=null;break e}throw Error(o(130,u==null?u:typeof u,""))}return f=Xi(K,x,f,M),f.elementType=u,f.type=A,f.lanes=L,f}function ml(u,f,x,A){return u=Xi(7,u,A,f),u.lanes=x,u}function cm(u,f,x,A){return u=Xi(22,u,A,f),u.elementType=w,u.lanes=x,u.stateNode={},u}function t_(u,f,x){return u=Xi(6,u,null,f),u.lanes=x,u}function n_(u,f,x){return f=Xi(4,u.children!==null?u.children:[],u.key,f),f.lanes=x,f.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},f}function eF(u,f,x,A,M){this.tag=f,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ct,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ty(0),this.expirationTimes=ty(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ty(0),this.identifierPrefix=A,this.onRecoverableError=M,Pe&&(this.mutableSourceEagerHydrationData=null)}function pb(u,f,x,A,M,L,K,ce,Se){return u=new eF(u,f,x,ce,Se),f===1?(f=1,L===!0&&(f|=8)):f=0,L=Xi(3,null,null,f),u.current=L,L.stateNode=u,L.memoizedState={element:A,isDehydrated:x,cache:null,transitions:null},dy(L),u}function mb(u){if(!u)return Gt;u=u._reactInternals;e:{if(P(u)!==u||u.tag!==1)throw Error(o(170));var f=u;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(bn(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(o(171))}if(u.tag===1){var x=u.type;if(bn(x))return In(u,x,f)}return f}function gb(u){var f=u._reactInternals;if(f===void 0)throw typeof u.render=="function"?Error(o(188)):(u=Object.keys(u).join(","),Error(o(268,u)));return u=$(f),u===null?null:u.stateNode}function vb(u,f){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var x=u.retryLane;u.retryLane=x!==0&&x<f?x:f}}function r_(u,f){vb(u,f),(u=u.alternate)&&vb(u,f)}function tF(u){return u=$(u),u===null?null:u.stateNode}function nF(){return null}return t.attemptContinuousHydration=function(u){if(u.tag===13){var f=Xr();ji(u,134217728,f),r_(u,134217728)}},t.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var f=Xr(),x=sa(u);ji(u,x,f),r_(u,x)}},t.attemptSynchronousHydration=function(u){switch(u.tag){case 3:var f=u.stateNode;if(f.current.memoizedState.isDehydrated){var x=Id(f.pendingLanes);x!==0&&(ny(f,x|1),li(f,hr()),!(Vt&6)&&(Rc(),Gs()))}break;case 13:var A=Xr();sb(function(){return ji(u,1,A)}),r_(u,1)}},t.batchedUpdates=function(u,f){var x=Vt;Vt|=1;try{return u(f)}finally{Vt=x,Vt===0&&(Rc(),Sp&&Gs())}},t.createComponentSelector=function(u){return{$$typeof:Jp,value:u}},t.createContainer=function(u,f,x,A,M,L,K){return pb(u,f,!1,null,x,A,M,L,K)},t.createHasPseudoClassSelector=function(u){return{$$typeof:Yp,value:u}},t.createHydrationContainer=function(u,f,x,A,M,L,K,ce,Se){return u=pb(x,A,!0,u,M,L,K,ce,Se),u.context=mb(null),x=u.current,A=Xr(),M=sa(x),L=mo(A,M),L.callback=f??null,na(x,L),u.current.lanes=M,Ld(u,M,A),li(u,A),u},t.createPortal=function(u,f,x){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:A==null?null:""+A,children:u,containerInfo:f,implementation:x}},t.createRoleSelector=function(u){return{$$typeof:Kp,value:u}},t.createTestNameSelector=function(u){return{$$typeof:Zp,value:u}},t.createTextSelector=function(u){return{$$typeof:Qp,value:u}},t.deferredUpdates=function(u){var f=qt,x=Yn.transition;try{return Yn.transition=null,qt=16,u()}finally{qt=f,Yn.transition=x}},t.discreteUpdates=function(u,f,x,A,M){var L=qt,K=Yn.transition;try{return Yn.transition=null,qt=1,u(f,x,A,M)}finally{qt=L,Yn.transition=K,Vt===0&&Rc()}},t.findAllNodes=Vy,t.findBoundingRects=function(u,f){if(!k)throw Error(o(363));f=Vy(u,f),u=[];for(var x=0;x<f.length;x++)u.push(De(f[x]));for(f=u.length-1;0<f;f--){x=u[f];for(var A=x.x,M=A+x.width,L=x.y,K=L+x.height,ce=f-1;0<=ce;ce--)if(f!==ce){var Se=u[ce],ke=Se.x,rt=ke+Se.width,Pt=Se.y,yt=Pt+Se.height;if(A>=ke&&L>=Pt&&M<=rt&&K<=yt){u.splice(f,1);break}else if(A!==ke||x.width!==Se.width||yt<L||Pt>K){if(!(L!==Pt||x.height!==Se.height||rt<A||ke>M)){ke>A&&(Se.width+=ke-A,Se.x=A),rt<M&&(Se.width=M-ke),u.splice(f,1);break}}else{Pt>L&&(Se.height+=Pt-L,Se.y=L),yt<K&&(Se.height=K-Pt),u.splice(f,1);break}}}return u},t.findHostInstance=gb,t.findHostInstanceWithNoPortals=function(u){return u=F(u),u=u!==null?U(u):null,u===null?null:u.stateNode},t.findHostInstanceWithWarning=function(u){return gb(u)},t.flushControlled=function(u){var f=Vt;Vt|=1;var x=Yn.transition,A=qt;try{Yn.transition=null,qt=1,u()}finally{qt=A,Yn.transition=x,Vt=f,Vt===0&&(Rc(),Gs())}},t.flushPassiveEffects=pl,t.flushSync=sb,t.focusWithin=function(u,f){if(!k)throw Error(o(363));for(u=zy(u),f=nb(u,f),f=Array.from(f),u=0;u<f.length;){var x=f[u++];if(!me(x)){if(x.tag===5&&Ne(x.stateNode))return!0;for(x=x.child;x!==null;)f.push(x),x=x.sibling}}return!1},t.getCurrentUpdatePriority=function(){return qt},t.getFindAllNodesFailureDescription=function(u,f){if(!k)throw Error(o(363));var x=0,A=[];u=[zy(u),0];for(var M=0;M<u.length;){var L=u[M++],K=u[M++],ce=f[K];if((L.tag!==5||!me(L))&&(Hy(L,ce)&&(A.push(Gy(ce)),K++,K>x&&(x=K)),K<f.length))for(L=L.child;L!==null;)u.push(L,K),L=L.sibling}if(x<f.length){for(u=[];x<f.length;x++)u.push(Gy(f[x]));return`findAllNodes was able to match part of the selector:
  `+(A.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},t.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return re(u.child.stateNode);default:return u.child.stateNode}},t.injectIntoDevTools=function(u){if(u={bundleType:u.bundleType,version:u.version,rendererPackageName:u.rendererPackageName,rendererConfig:u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:tF,findFiberByHostInstance:u.findFiberByHostInstance||nF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)u=!0;else{try{Ep=f.inject(u),zs=f}catch{}u=!!f.checkDCE}}return u},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(u,f,x,A){if(!k)throw Error(o(363));u=Vy(u,f);var M=He(u,x,A).disconnect;return{disconnect:function(){M()}}},t.registerMutableSourceForHydration=function(u,f){var x=f._getVersion;x=x(f._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[f,x]:u.mutableSourceEagerHydrationData.push(f,x)},t.runWithPriority=function(u,f){var x=qt;try{return qt=u,f()}finally{qt=x}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(u,f,x,A){var M=f.current,L=Xr(),K=sa(M);return x=mb(x),f.context===null?f.context=x:f.pendingContext=x,f=mo(L,K),f.payload={element:u},A=A===void 0?null:A,A!==null&&(f.callback=A),na(M,f),u=ji(M,K,L),u!==null&&bp(u,M,K),K},t};RB.exports=g6;var v6=RB.exports;const y6=ld(v6),_6=n=>typeof n=="object"&&typeof n.then=="function",Gl=[];function LB(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function BB(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const s of Gl)if(LB(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=Gl.indexOf(i);s!==-1&&Gl.splice(s,1)},promise:(_6(n)?n:n(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if(Gl.push(i),!t)throw i.promise}const x6=(n,e,t)=>BB(n,e,!1,t),E6=(n,e,t)=>void BB(n,e,!0,t),S6=n=>{if(n===void 0||n.length===0)Gl.splice(0,Gl.length);else{const e=Gl.find(t=>LB(n,t.keys,t.equal));e&&e.remove()}},nw={},rw=n=>void Object.assign(nw,n);function A6(n,e){function t(d,{args:h=[],attach:p,...m},v){let _=`${d[0].toUpperCase()}${d.slice(1)}`,y;if(d==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=m.object;y=lu(g,{type:d,root:v,attach:p,primitive:!0})}else{const g=nw[_];if(!g)throw new Error(`R3F: ${_} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(h))throw new Error("R3F: The args prop must be an array!");y=lu(new g(...h),{type:d,root:v,attach:p,memoizedProps:{args:h}})}return y.__r3f.attach===void 0&&(y instanceof Lt?y.__r3f.attach="geometry":y instanceof ir&&(y.__r3f.attach="material")),_!=="inject"&&mx(y,m),y}function r(d,h){let p=!1;if(h){var m,v;(m=h.__r3f)!=null&&m.attach?px(d,h,h.__r3f.attach):h.isObject3D&&d.isObject3D&&(d.add(h),p=!0),p||(v=d.__r3f)==null||v.objects.push(h),h.__r3f||lu(h,{}),h.__r3f.parent=d,DE(h),cu(h)}}function i(d,h,p){let m=!1;if(h){var v,_;if((v=h.__r3f)!=null&&v.attach)px(d,h,h.__r3f.attach);else if(h.isObject3D&&d.isObject3D){h.parent=d,h.dispatchEvent({type:"added"});const y=d.children.filter(S=>S!==h),g=y.indexOf(p);d.children=[...y.slice(0,g),h,...y.slice(g)],m=!0}m||(_=d.__r3f)==null||_.objects.push(h),h.__r3f||lu(h,{}),h.__r3f.parent=d,DE(h),cu(h)}}function s(d,h,p=!1){d&&[...d].forEach(m=>o(h,m,p))}function o(d,h,p){if(h){var m,v,_;if(h.__r3f&&(h.__r3f.parent=null),(m=d.__r3f)!=null&&m.objects&&(d.__r3f.objects=d.__r3f.objects.filter(w=>w!==h)),(v=h.__r3f)!=null&&v.attach)aR(d,h,h.__r3f.attach);else if(h.isObject3D&&d.isObject3D){var y;d.remove(h),(y=h.__r3f)!=null&&y.root&&I6(h.__r3f.root,h)}const S=(_=h.__r3f)==null?void 0:_.primitive,E=!S&&(p===void 0?h.dispose!==null:p);if(!S){var g;s((g=h.__r3f)==null?void 0:g.objects,h,E),s(h.children,h,E)}if(delete h.__r3f,E&&h.dispose&&h.type!=="Scene"){const w=()=>{try{h.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?LE.unstable_scheduleCallback(LE.unstable_IdlePriority,w):w()}cu(d)}}function a(d,h,p,m){var v;const _=(v=d.__r3f)==null?void 0:v.parent;if(!_)return;const y=t(h,p,d.__r3f.root);if(d.children){for(const g of d.children)g.__r3f&&r(y,g);d.children=d.children.filter(g=>!g.__r3f)}d.__r3f.objects.forEach(g=>r(y,g)),d.__r3f.objects=[],d.__r3f.autoRemovedBeforeAppend||o(_,d),y.parent&&(y.__r3f.autoRemovedBeforeAppend=!0),r(_,y),y.raycast&&y.__r3f.eventCount&&y.__r3f.root.getState().internal.interaction.push(y),[m,m.alternate].forEach(g=>{g!==null&&(g.stateNode=y,g.ref&&(typeof g.ref=="function"?g.ref(y):g.ref.current=y))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:y6({createInstance:t,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(d,h)=>{if(!h)return;const p=d.getState().scene;p.__r3f&&(p.__r3f.root=d,r(p,h))},removeChildFromContainer:(d,h)=>{h&&o(d.getState().scene,h)},insertInContainerBefore:(d,h,p)=>{if(!h||!p)return;const m=d.getState().scene;m.__r3f&&i(m,h,p)},getRootHostContext:()=>null,getChildHostContext:d=>d,finalizeInitialChildren(d){var h;return!!((h=d==null?void 0:d.__r3f)!=null?h:{}).handlers},prepareUpdate(d,h,p,m){var v;if(((v=d==null?void 0:d.__r3f)!=null?v:{}).primitive&&m.object&&m.object!==d)return[!0];{const{args:y=[],children:g,...S}=m,{args:E=[],children:w,...T}=p;if(!Array.isArray(y))throw new Error("R3F: the args prop must be an array!");if(y.some((R,B)=>R!==E[B]))return[!0];const b=zB(d,S,T,!0);return b.changes.length?[!1,b]:null}},commitUpdate(d,[h,p],m,v,_,y){h?a(d,m,_,y):mx(d,p)},commitMount(d,h,p,m){var v;const _=(v=d.__r3f)!=null?v:{};d.raycast&&_.handlers&&_.eventCount&&d.__r3f.root.getState().internal.interaction.push(d)},getPublicInstance:d=>d,prepareForCommit:()=>null,preparePortalMount:d=>lu(d.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(d){var h;const{attach:p,parent:m}=(h=d.__r3f)!=null?h:{};p&&m&&aR(m,d,p),d.isObject3D&&(d.visible=!1),cu(d)},unhideInstance(d,h){var p;const{attach:m,parent:v}=(p=d.__r3f)!=null?p:{};m&&v&&px(v,d,m),(d.isObject3D&&h.visible==null||h.visible)&&(d.visible=!0),cu(d)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Cu.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Sn.fun(performance.now)?performance.now:Sn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Sn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Sn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:mx}}var rR,iR;const hx=n=>"colorSpace"in n||"outputColorSpace"in n,DB=()=>{var n;return(n=nw.ColorManagement)!=null?n:null},OB=n=>n&&n.isOrthographicCamera,w6=n=>n&&n.hasOwnProperty("current"),op=typeof window<"u"&&((rR=window.document)!=null&&rR.createElement||((iR=window.navigator)==null?void 0:iR.product)==="ReactNative")?C.useLayoutEffect:C.useEffect;function NB(n){const e=C.useRef(n);return op(()=>void(e.current=n),[n]),e}function M6({set:n}){return op(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class FB extends C.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}FB.getDerivedStateFromError=()=>({error:!0});const kB="__default",sR=new Map,b6=n=>n&&!!n.memoized&&!!n.changes;function UB(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const gf=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},Sn={obj:n=>n===Object(n)&&!Sn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Sn.str(n)||Sn.num(n))return n===e;const s=Sn.obj(n);if(s&&r==="reference")return n===e;const o=Sn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&r==="shallow"){for(a in i?e:n)if(!Sn.equ(n[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:n)if(n[a]!==e[a])return!1;if(Sn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function C6(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function T6(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function lu(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function BE(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((s,o)=>s[o],n),{target:t,key:i}}else return{target:t,key:e}}const oR=/-\d+$/;function px(n,e,t){if(Sn.str(t)){if(oR.test(t)){const s=t.replace(oR,""),{target:o,key:a}=BE(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=BE(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function aR(n,e,t){var r,i;if(Sn.str(t)){const{target:s,key:o}=BE(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function zB(n,{children:e,key:t,ref:r,...i},{children:s,key:o,ref:a,...l}={},c=!1){var d;const h=(d=n==null?void 0:n.__r3f)!=null?d:{},p=Object.entries(i),m=[];if(c){const _=Object.keys(l);for(let y=0;y<_.length;y++)i.hasOwnProperty(_[y])||p.unshift([_[y],kB+"remove"])}p.forEach(([_,y])=>{var g;if((g=n.__r3f)!=null&&g.primitive&&_==="object"||Sn.equ(y,l[_]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(_))return m.push([_,y,!0,[]]);let S=[];_.includes("-")&&(S=_.split("-")),m.push([_,y,!1,S]);for(const E in i){const w=i[E];E.startsWith(`${_}-`)&&m.push([E,w,!1,E.split("-")])}});const v={...i};return h.memoizedProps&&h.memoizedProps.args&&(v.args=h.memoizedProps.args),h.memoizedProps&&h.memoizedProps.attach&&(v.attach=h.memoizedProps.attach),{memoized:v,changes:m}}const R6=typeof process<"u"&&!1;function mx(n,e){var t,r,i;const s=(t=n.__r3f)!=null?t:{},o=s.root,a=(r=o==null||o.getState==null?void 0:o.getState())!=null?r:{},{memoized:l,changes:c}=b6(e)?e:zB(n,e),d=s.eventCount;n.__r3f&&(n.__r3f.memoizedProps=l);for(let p=0;p<c.length;p++){let[m,v,_,y]=c[p];if(hx(n)){const w="srgb",T="srgb-linear";m==="encoding"?(m="colorSpace",v=v===3001?w:T):m==="outputEncoding"&&(m="outputColorSpace",v=v===3001?w:T)}let g=n,S=g[m];if(y.length&&(S=y.reduce((E,w)=>E[w],n),!(S&&S.set))){const[E,...w]=y.reverse();g=w.reverse().reduce((T,b)=>T[b],n),m=E}if(v===kB+"remove")if(g.constructor){let E=sR.get(g.constructor);E||(E=new g.constructor,sR.set(g.constructor,E)),v=E[m]}else v=0;if(_)v?s.handlers[m]=v:delete s.handlers[m],s.eventCount=Object.keys(s.handlers).length;else if(S&&S.set&&(S.copy||S instanceof Jl)){if(Array.isArray(v))S.fromArray?S.fromArray(v):S.set(...v);else if(S.copy&&v&&v.constructor&&(R6?S.constructor.name===v.constructor.name:S.constructor===v.constructor))S.copy(v);else if(v!==void 0){const E=S instanceof je;!E&&S.setScalar?S.setScalar(v):S instanceof Jl&&v instanceof Jl?S.mask=v.mask:S.set(v),!DB()&&!a.linear&&E&&S.convertSRGBToLinear()}}else if(g[m]=v,g[m]instanceof Mn&&g[m].format===Ur&&g[m].type===no){const E=g[m];hx(E)&&hx(a.gl)?E.colorSpace=a.gl.outputColorSpace:E.encoding=a.gl.outputEncoding}cu(n)}if(s.parent&&a.internal&&n.raycast&&d!==s.eventCount){const p=a.internal.interaction.indexOf(n);p>-1&&a.internal.interaction.splice(p,1),s.eventCount&&a.internal.interaction.push(n)}return!(c.length===1&&c[0][0]==="onUpdate")&&c.length&&(i=n.__r3f)!=null&&i.parent&&DE(n),n}function cu(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function DE(n){n.onUpdate==null||n.onUpdate(n)}function HB(n,e){n.manual||(OB(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function _g(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function P6(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Cu.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Cu.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Cu.ContinuousEventPriority;default:return Cu.DefaultEventPriority}}function GB(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function I6(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{GB(t.capturedMap,e,r,i)})}function L6(n){function e(l){const{internal:c}=n.getState(),d=l.offsetX-c.initialClick[0],h=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(d*d+h*h))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(d=>{var h;return(h=c.__r3f)==null?void 0:h.handlers["onPointer"+d]}))}function r(l,c){const d=n.getState(),h=new Set,p=[],m=c?c(d.internal.interaction):d.internal.interaction;for(let g=0;g<m.length;g++){const S=gf(m[g]);S&&(S.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(l,d);function v(g){const S=gf(g);if(!S||!S.events.enabled||S.raycaster.camera===null)return[];if(S.raycaster.camera===void 0){var E;S.events.compute==null||S.events.compute(l,S,(E=S.previousRoot)==null?void 0:E.getState()),S.raycaster.camera===void 0&&(S.raycaster.camera=null)}return S.raycaster.camera?S.raycaster.intersectObject(g,!0):[]}let _=m.flatMap(v).sort((g,S)=>{const E=gf(g.object),w=gf(S.object);return!E||!w?g.distance-S.distance:w.events.priority-E.events.priority||g.distance-S.distance}).filter(g=>{const S=_g(g);return h.has(S)?!1:(h.add(S),!0)});d.events.filter&&(_=d.events.filter(_,d));for(const g of _){let S=g.object;for(;S;){var y;(y=S.__r3f)!=null&&y.eventCount&&p.push({...g,eventObject:S}),S=S.parent}}if("pointerId"in l&&d.internal.capturedMap.has(l.pointerId))for(let g of d.internal.capturedMap.get(l.pointerId).values())h.has(_g(g.intersection))||p.push(g.intersection);return p}function i(l,c,d,h){const p=n.getState();if(l.length){const m={stopped:!1};for(const v of l){const _=gf(v.object)||p,{raycaster:y,pointer:g,camera:S,internal:E}=_,w=new X(g.x,g.y,0).unproject(S),T=I=>{var F,$;return(F=($=E.capturedMap.get(I))==null?void 0:$.has(v.eventObject))!=null?F:!1},b=I=>{const F={intersection:v,target:c.target};E.capturedMap.has(I)?E.capturedMap.get(I).set(v.eventObject,F):E.capturedMap.set(I,new Map([[v.eventObject,F]])),c.target.setPointerCapture(I)},R=I=>{const F=E.capturedMap.get(I);F&&GB(E.capturedMap,v.eventObject,F,I)};let B={};for(let I in c){let F=c[I];typeof F!="function"&&(B[I]=F)}let P={...v,...B,pointer:g,intersections:l,stopped:m.stopped,delta:d,unprojectedPoint:w,ray:y.ray,camera:S,stopPropagation(){const I="pointerId"in c&&E.capturedMap.get(c.pointerId);if((!I||I.has(v.eventObject))&&(P.stopped=m.stopped=!0,E.hovered.size&&Array.from(E.hovered.values()).find(F=>F.eventObject===v.eventObject))){const F=l.slice(0,l.indexOf(v));s([...F,v])}},target:{hasPointerCapture:T,setPointerCapture:b,releasePointerCapture:R},currentTarget:{hasPointerCapture:T,setPointerCapture:b,releasePointerCapture:R},nativeEvent:c};if(h(P),m.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const d of c.hovered.values())if(!l.length||!l.find(h=>h.object===d.object&&h.index===d.index&&h.instanceId===d.instanceId)){const p=d.eventObject.__r3f,m=p==null?void 0:p.handlers;if(c.hovered.delete(_g(d)),p!=null&&p.eventCount){const v={...d,intersections:l};m.onPointerOut==null||m.onPointerOut(v),m.onPointerLeave==null||m.onPointerLeave(v)}}}function o(l,c){for(let d=0;d<c.length;d++){const h=c[d].__r3f;h==null||h.handlers.onPointerMissed==null||h.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:d}=n.getState();"pointerId"in c&&d.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{d.capturedMap.has(c.pointerId)&&(d.capturedMap.delete(c.pointerId),s([]))})}}return function(d){const{onPointerMissed:h,internal:p}=n.getState();p.lastEvent.current=d;const m=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",y=r(d,m?t:void 0),g=v?e(d):0;l==="onPointerDown"&&(p.initialClick=[d.offsetX,d.offsetY],p.initialHits=y.map(E=>E.eventObject)),v&&!y.length&&g<=2&&(o(d,p.interaction),h&&h(d)),m&&s(y);function S(E){const w=E.eventObject,T=w.__r3f,b=T==null?void 0:T.handlers;if(T!=null&&T.eventCount)if(m){if(b.onPointerOver||b.onPointerEnter||b.onPointerOut||b.onPointerLeave){const R=_g(E),B=p.hovered.get(R);B?B.stopped&&E.stopPropagation():(p.hovered.set(R,E),b.onPointerOver==null||b.onPointerOver(E),b.onPointerEnter==null||b.onPointerEnter(E))}b.onPointerMove==null||b.onPointerMove(E)}else{const R=b[l];R?(!v||p.initialHits.includes(w))&&(o(d,p.interaction.filter(B=>!p.initialHits.includes(B))),R(E)):v&&p.initialHits.includes(w)&&o(d,p.interaction.filter(B=>!p.initialHits.includes(B)))}}i(y,d,g,S)}}return{handlePointer:a}}const B6=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],VB=n=>!!(n!=null&&n.render),iw=C.createContext(null),D6=(n,e)=>{const t=Vv((a,l)=>{const c=new X,d=new X,h=new X;function p(g=l().camera,S=d,E=l().size){const{width:w,height:T,top:b,left:R}=E,B=w/T;S instanceof X?h.copy(S):h.set(...S);const P=g.getWorldPosition(c).distanceTo(h);if(OB(g))return{width:w/g.zoom,height:T/g.zoom,top:b,left:R,factor:1,distance:P,aspect:B};{const I=g.fov*Math.PI/180,F=2*Math.tan(I/2)*P,$=F*(w/T);return{width:$,height:F,top:b,left:R,factor:w/$,distance:P,aspect:B}}}let m;const v=g=>a(S=>({performance:{...S.performance,current:g}})),_=new Re;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>n(l(),g),advance:(g,S)=>e(g,S,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new QA,pointer:_,mouse:_,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();m&&clearTimeout(m),g.performance.current!==g.performance.min&&v(g.performance.min),m=setTimeout(()=>v(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:g=>a(S=>({...S,events:{...S.events,...g}})),setSize:(g,S,E,w,T)=>{const b=l().camera,R={width:g,height:S,top:w||0,left:T||0,updateStyle:E};a(B=>({size:R,viewport:{...B.viewport,...p(b,d,R)}}))},setDpr:g=>a(S=>{const E=UB(g);return{viewport:{...S.viewport,dpr:E,initialDpr:S.viewport.initialDpr||E}}}),setFrameloop:(g="always")=>{const S=l().clock;S.stop(),S.elapsedTime=0,g!=="never"&&(S.start(),S.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:C.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,S,E)=>{const w=l().internal;return w.priority=w.priority+(S>0?1:0),w.subscribers.push({ref:g,priority:S,store:E}),w.subscribers=w.subscribers.sort((T,b)=>T.priority-b.priority),()=>{const T=l().internal;T!=null&&T.subscribers&&(T.priority=T.priority-(S>0?1:0),T.subscribers=T.subscribers.filter(b=>b.ref!==g))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:d,set:h}=t.getState();if(l.width!==i.width||l.height!==i.height||c.dpr!==s){var p;i=l,s=c.dpr,HB(a,l),d.setPixelRatio(c.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&d.domElement instanceof HTMLCanvasElement;d.setSize(l.width,l.height,m)}a!==o&&(o=a,h(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let xg,O6=new Set,N6=new Set,F6=new Set;function gx(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function vf(n,e){switch(n){case"before":return gx(O6,e);case"after":return gx(N6,e);case"tail":return gx(F6,e)}}let vx,yx;function _x(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),vx=e.internal.subscribers,xg=0;xg<vx.length;xg++)yx=vx[xg],yx.ref.current(yx.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function k6(n){let e=!1,t,r,i;function s(l){r=requestAnimationFrame(s),e=!0,t=0,vf("before",l);for(const d of n.values()){var c;i=d.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((c=i.gl.xr)!=null&&c.isPresenting)&&(t+=_x(l,i))}if(vf("after",l),t===0)return vf("tail",l),e=!1,cancelAnimationFrame(r)}function o(l,c=1){var d;if(!l)return n.forEach(h=>o(h.store.getState()),c);(d=l.gl.xr)!=null&&d.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+c),e||(e=!0,requestAnimationFrame(s)))}function a(l,c=!0,d,h){if(c&&vf("before",l),d)_x(l,d,h);else for(const p of n.values())_x(l,p.store.getState());c&&vf("after",l)}return{loop:s,invalidate:o,advance:a}}function sw(){const n=C.useContext(iw);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Qi(n=t=>t,e){return sw()(n,e)}function Wv(n,e=0){const t=sw(),r=t.getState().internal.subscribe,i=NB(n);return op(()=>r(i,e,t),[e,r,t]),null}const lR=new WeakMap;function WB(n,e){return function(t,...r){let i=lR.get(t);return i||(i=new t,lR.set(t,i)),n&&n(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,C6(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`)))))).finally(()=>i.dispose==null?void 0:i.dispose())}}function _d(n,e,t,r){const i=Array.isArray(e)?e:[e],s=x6(WB(t,r),[n,...i],{equal:Sn.equ});return Array.isArray(e)?s:s[0]}_d.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return E6(WB(t),[n,...r])};_d.clear=function(n,e){const t=Array.isArray(e)?e:[e];return S6([n,...t])};const rd=new Map,{invalidate:cR,advance:uR}=k6(rd),{reconciler:Bh,applyProps:Qc}=A6(rd,P6),qc={objects:"shallow",strict:!1},U6=(n,e)=>{const t=typeof n=="function"?n(e):n;return VB(t)?t:new PA({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function z6(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:o,updateStyle:a=t}=e;return{width:r,height:i,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:r,height:i,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function H6(n){const e=rd.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||D6(cR,uR),o=t||Bh.createContainer(s,Cu.ConcurrentRoot,null,!1,null,"",i,null);e||rd.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(d={}){let{gl:h,size:p,scene:m,events:v,onCreated:_,shadows:y=!1,linear:g=!1,flat:S=!1,legacy:E=!1,orthographic:w=!1,frameloop:T="always",dpr:b=[1,2],performance:R,raycaster:B,camera:P,onPointerMissed:I}=d,F=s.getState(),$=F.gl;F.gl||F.set({gl:$=U6(h,n)});let Z=F.raycaster;Z||F.set({raycaster:Z=new Gv});const{params:U,...j}=B||{};if(Sn.equ(j,Z,qc)||Qc(Z,{...j}),Sn.equ(U,Z.params,qc)||Qc(Z,{params:{...Z.params,...U}}),!F.camera||F.camera===c&&!Sn.equ(c,P,qc)){c=P;const ie=P instanceof Yh,oe=ie?P:w?new md(0,0,0,0,.1,1e3):new cr(75,0,.1,1e3);ie||(oe.position.z=5,P&&Qc(oe,P),!F.camera&&!(P!=null&&P.rotation)&&oe.lookAt(0,0,0)),F.set({camera:oe}),Z.camera=oe}if(!F.scene){let ie;m instanceof Ch?ie=m:(ie=new Ch,m&&Qc(ie,m)),F.set({scene:lu(ie)})}if(!F.xr){var re;const ie=(Ce,be)=>{const Te=s.getState();Te.frameloop!=="never"&&uR(Ce,!0,Te,be)},oe=()=>{const Ce=s.getState();Ce.gl.xr.enabled=Ce.gl.xr.isPresenting,Ce.gl.xr.setAnimationLoop(Ce.gl.xr.isPresenting?ie:null),Ce.gl.xr.isPresenting||cR(Ce)},he={connect(){const Ce=s.getState().gl;Ce.xr.addEventListener("sessionstart",oe),Ce.xr.addEventListener("sessionend",oe)},disconnect(){const Ce=s.getState().gl;Ce.xr.removeEventListener("sessionstart",oe),Ce.xr.removeEventListener("sessionend",oe)}};typeof((re=$.xr)==null?void 0:re.addEventListener)=="function"&&he.connect(),F.set({xr:he})}if($.shadowMap){const ie=$.shadowMap.enabled,oe=$.shadowMap.type;if($.shadowMap.enabled=!!y,Sn.boo(y))$.shadowMap.type=$f;else if(Sn.str(y)){var ae;const he={basic:wL,percentage:mv,soft:$f,variance:As};$.shadowMap.type=(ae=he[y])!=null?ae:$f}else Sn.obj(y)&&Object.assign($.shadowMap,y);(ie!==$.shadowMap.enabled||oe!==$.shadowMap.type)&&($.shadowMap.needsUpdate=!0)}const H=DB();H&&("enabled"in H?H.enabled=!E:"legacyMode"in H&&(H.legacyMode=E)),Qc($,{outputEncoding:g?3e3:3001,toneMapping:S?to:aA}),F.legacy!==E&&F.set(()=>({legacy:E})),F.linear!==g&&F.set(()=>({linear:g})),F.flat!==S&&F.set(()=>({flat:S})),h&&!Sn.fun(h)&&!VB(h)&&!Sn.equ(h,$,qc)&&Qc($,h),v&&!F.events.handlers&&F.set({events:v(s)});const ee=z6(n,p);return Sn.equ(ee,F.size,qc)||F.setSize(ee.width,ee.height,ee.updateStyle,ee.top,ee.left),b&&F.viewport.dpr!==UB(b)&&F.setDpr(b),F.frameloop!==T&&F.setFrameloop(T),F.onPointerMissed||F.set({onPointerMissed:I}),R&&!Sn.equ(R,F.performance,qc)&&F.set(ie=>({performance:{...ie.performance,...R}})),a=_,l=!0,this},render(d){return l||this.configure(),Bh.updateContainer(C.createElement(G6,{store:s,children:d,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){$B(n)}}}function G6({store:n,children:e,onCreated:t,rootElement:r}){return op(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),C.createElement(iw.Provider,{value:n},e)}function $B(n,e){const t=rd.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),Bh.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),T6(i),rd.delete(n),e&&e(n)}catch{}},500)})}}function V6(n,e,t){return C.createElement(W6,{key:e.uuid,children:n,container:e,state:t})}function W6({state:n={},children:e,container:t}){const{events:r,size:i,...s}=n,o=sw(),[a]=C.useState(()=>new Gv),[l]=C.useState(()=>new Re),c=C.useCallback((h,p)=>{const m={...h};Object.keys(h).forEach(_=>{(B6.includes(_)||h[_]!==p[_]&&p[_])&&delete m[_]});let v;if(p&&i){const _=p.camera;v=h.viewport.getCurrentViewport(_,new X,i),_!==h.camera&&HB(_,i)}return{...m,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...h.events,...p==null?void 0:p.events,...r},size:{...h.size,...i},viewport:{...h.viewport,...v},...s}},[n]),[d]=C.useState(()=>{const h=o.getState();return Vv((m,v)=>({...h,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...h.events,...r},size:{...h.size,...i},...s,set:m,get:v,setEvents:_=>m(y=>({...y,events:{...y.events,..._}}))}))});return C.useEffect(()=>{const h=o.subscribe(p=>d.setState(m=>c(p,m)));return()=>{h(),d.destroy()}},[]),C.useEffect(()=>{d.setState(h=>c(o.getState(),h))},[c]),C.createElement(C.Fragment,null,Bh.createPortal(C.createElement(iw.Provider,{value:d},e),d,null))}Bh.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:C.version});function OE(n,e,t){var r,i,s,o,a;e==null&&(e=100);function l(){var d=Date.now()-o;d<e&&d>=0?r=setTimeout(l,e-d):(r=null,t||(a=n.apply(s,i),s=i=null))}var c=function(){s=this,i=arguments,o=Date.now();var d=t&&!r;return r||(r=setTimeout(l,e)),d&&(a=n.apply(s,i),s=i=null),a};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(a=n.apply(s,i),s=i=null,clearTimeout(r),r=null)},c}OE.debounce=OE;var $6=OE;const dR=ld($6);function j6(n){let{debounce:e,scroll:t,polyfill:r,offsetSize:i}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=C.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=C.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),c=e?typeof e=="number"?e:e.scroll:null,d=e?typeof e=="number"?e:e.resize:null,h=C.useRef(!1);C.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[p,m,v]=C.useMemo(()=>{const S=()=>{if(!l.current.element)return;const{left:E,top:w,width:T,height:b,bottom:R,right:B,x:P,y:I}=l.current.element.getBoundingClientRect(),F={left:E,top:w,width:T,height:b,bottom:R,right:B,x:P,y:I};l.current.element instanceof HTMLElement&&i&&(F.height=l.current.element.offsetHeight,F.width=l.current.element.offsetWidth),Object.freeze(F),h.current&&!K6(l.current.lastBounds,F)&&a(l.current.lastBounds=F)};return[S,d?dR(S,d):S,c?dR(S,c):S]},[a,i,c,d]);function _(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(S=>S.removeEventListener("scroll",v,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function y(){l.current.element&&(l.current.resizeObserver=new s(v),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(S=>S.addEventListener("scroll",v,{capture:!0,passive:!0})))}const g=S=>{!S||S===l.current.element||(_(),l.current.element=S,l.current.scrollContainers=jB(S),y())};return J6(v,!!t),X6(m),C.useEffect(()=>{_(),y()},[t,v,m]),C.useEffect(()=>_,[]),[g,o,p]}function X6(n){C.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function J6(n,e){C.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function jB(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...jB(n.parentElement)]}const Y6=["x","y","top","bottom","left","right","width","height"],K6=(n,e)=>Y6.every(t=>n[t]===e[t]);var Z6=Object.defineProperty,Q6=Object.defineProperties,q6=Object.getOwnPropertyDescriptors,fR=Object.getOwnPropertySymbols,eV=Object.prototype.hasOwnProperty,tV=Object.prototype.propertyIsEnumerable,hR=(n,e,t)=>e in n?Z6(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,pR=(n,e)=>{for(var t in e||(e={}))eV.call(e,t)&&hR(n,t,e[t]);if(fR)for(var t of fR(e))tV.call(e,t)&&hR(n,t,e[t]);return n},nV=(n,e)=>Q6(n,q6(e));function XB(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=e?n.return:n.child;for(;r;){const i=XB(r,e,t);if(i)return i;r=e?null:r.sibling}}function JB(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const ow=JB(C.createContext(null));class YB extends C.Component{render(){return C.createElement(ow.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:mR,ReactCurrentDispatcher:gR}=C.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function rV(){const n=C.useContext(ow);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=C.useId();return C.useMemo(()=>{for(const r of[mR==null?void 0:mR.current,n,n==null?void 0:n.alternate]){if(!r)continue;const i=XB(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[n,e])}function iV(){var n,e;const t=rV(),[r]=C.useState(()=>new Map);r.clear();let i=t;for(;i;){const s=(n=i.type)==null?void 0:n._context;s&&s!==ow&&!r.has(s)&&r.set(s,(e=gR==null?void 0:gR.current)==null?void 0:e.readContext(JB(s))),i=i.return}return r}function sV(){const n=iV();return C.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>C.createElement(e,null,C.createElement(t.Provider,nV(pR({},r),{value:n.get(t)}))),e=>C.createElement(YB,pR({},e))),[n])}const xx={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function oV(n){const{handlePointer:e}=L6(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(xx).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:s}=n.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,c]=xx[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=xx[s];r.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const aV=C.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:s,events:o=oV,eventSource:a,eventPrefix:l,shadows:c,linear:d,flat:h,legacy:p,orthographic:m,frameloop:v,dpr:_,performance:y,raycaster:g,camera:S,scene:E,onPointerMissed:w,onCreated:T,...b},R){C.useMemo(()=>rw(h6),[]);const B=sV(),[P,I]=j6({scroll:!0,debounce:{scroll:50,resize:0},...r}),F=C.useRef(null),$=C.useRef(null);C.useImperativeHandle(R,()=>F.current);const Z=NB(w),[U,j]=C.useState(!1),[re,ae]=C.useState(!1);if(U)throw U;if(re)throw re;const H=C.useRef(null);op(()=>{const V=F.current;I.width>0&&I.height>0&&V&&(H.current||(H.current=H6(V)),H.current.configure({gl:s,events:o,shadows:c,linear:d,flat:h,legacy:p,orthographic:m,frameloop:v,dpr:_,performance:y,raycaster:g,camera:S,scene:E,size:I,onPointerMissed:(...ee)=>Z.current==null?void 0:Z.current(...ee),onCreated:ee=>{ee.events.connect==null||ee.events.connect(a?w6(a)?a.current:a:$.current),l&&ee.setEvents({compute:(ie,oe)=>{const he=ie[l+"X"],Ce=ie[l+"Y"];oe.pointer.set(he/oe.size.width*2-1,-(Ce/oe.size.height)*2+1),oe.raycaster.setFromCamera(oe.pointer,oe.camera)}}),T==null||T(ee)}}),H.current.render(C.createElement(B,null,C.createElement(FB,{set:ae},C.createElement(C.Suspense,{fallback:C.createElement(M6,{set:j})},e)))))}),C.useEffect(()=>{const V=F.current;if(V)return()=>$B(V)},[]);const Y=a?"none":"auto";return C.createElement("div",Hn({ref:$,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Y,...i}},b),C.createElement("div",{ref:P,style:{width:"100%",height:"100%"}},C.createElement("canvas",{ref:F,style:{display:"block"}},t)))}),lV=C.forwardRef(function(e,t){return C.createElement(YB,null,C.createElement(aV,Hn({},e,{ref:t})))});let yf=0;const cV=Vv(n=>(bu.onStart=(e,t,r)=>{n({active:!0,item:e,loaded:t,total:r,progress:(t-yf)/(r-yf)*100})},bu.onLoad=()=>{n({active:!1})},bu.onError=e=>n(t=>({errors:[...t.errors,e]})),bu.onProgress=(e,t,r)=>{t===r&&(yf=r),n({active:!0,item:e,loaded:t,total:r,progress:(t-yf)/(r-yf)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),uV=n=>`Loading ${n.toFixed(2)}%`;function dV({containerStyles:n,innerStyles:e,barStyles:t,dataStyles:r,dataInterpolation:i=uV,initialState:s=o=>o}){const{active:o,progress:a}=cV(),l=C.useRef(0),c=C.useRef(0),d=C.useRef(null),[h,p]=C.useState(s(o));C.useEffect(()=>{let v;return o!==h&&(v=setTimeout(()=>p(o),300)),()=>clearTimeout(v)},[h,o]);const m=C.useCallback(()=>{d.current&&(l.current+=(a-l.current)/2,(l.current>.95*a||a===100)&&(l.current=a),d.current.innerText=i(l.current),l.current<a&&(c.current=requestAnimationFrame(m)))},[i,a]);return C.useEffect(()=>(m(),()=>cancelAnimationFrame(c.current)),[m]),h?C.createElement("div",{style:{...Eg.container,opacity:o?1:0,...n}},C.createElement("div",null,C.createElement("div",{style:{...Eg.inner,...e}},C.createElement("div",{style:{...Eg.bar,transform:`scaleX(${a/100})`,...t}}),C.createElement("span",{ref:d,style:{...Eg.data,...r}})))):null}const Eg={container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#171717",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:100,height:3,background:"#272727",textAlign:"center"},bar:{height:3,width:"100%",background:"white",transition:"transform 200ms",transformOrigin:"left center"},data:{display:"inline-block",position:"relative",fontVariantNumeric:"tabular-nums",marginTop:"0.8em",color:"#f0f0f0",fontSize:"0.6em",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap"}};function fV(n,e,t){return Math.max(e,Math.min(n,t))}const zr={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function vR(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function yR(n,e,t,r=.15){return r===0?fV(n,e,t):n<e?-vR(e-n,t-e,r)+e:n>t?+vR(n-t,t-e,r)+t:n}function hV(n,[e,t],[r,i]){const[[s,o],[a,l]]=n;return[yR(e,s,o,r),yR(t,a,l,i)]}function pV(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function mV(n){var e=pV(n,"string");return typeof e=="symbol"?e:String(e)}function fi(n,e,t){return e=mV(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _R(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function kn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_R(Object(t),!0).forEach(function(r){fi(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_R(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const KB={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function xR(n){return n?n[0].toUpperCase()+n.slice(1):""}const gV=["enter","leave"];function vV(n=!1,e){return n&&!gV.includes(e)}function yV(n,e="",t=!1){const r=KB[n],i=r&&r[e]||e;return"on"+xR(n)+xR(i)+(vV(t,i)?"Capture":"")}const _V=["gotpointercapture","lostpointercapture"];function xV(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const r=_V.includes(e)?"capturecapture":"capture",i=!!~e.indexOf(r);return i&&(e=e.replace("capture","")),{device:e,capture:i,passive:t}}function EV(n,e=""){const t=KB[n],r=t&&t[e]||e;return n+r}function $v(n){return"touches"in n}function ZB(n){return $v(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function SV(n){return Array.from(n.touches).filter(e=>{var t,r;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(r=t.contains)===null||r===void 0?void 0:r.call(t,e.target))})}function AV(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function QB(n){return $v(n)?AV(n)[0]:n}function wV(n){return SV(n).map(e=>e.identifier)}function Ex(n){const e=QB(n);return $v(n)?e.identifier:e.pointerId}function ER(n){const e=QB(n);return[e.clientX,e.clientY]}function MV(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:r,metaKey:i,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:r,metaKey:i,ctrlKey:s})}return e}function F0(n,...e){return typeof n=="function"?n(...e):n}function bV(){}function CV(...n){return n.length===0?bV:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function SR(n,e){return Object.assign({},e,n||{})}const TV=32;class RV{constructor(e,t,r){this.ctrl=e,this.args=t,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:r,args:i}=this;t[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,r=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=r.from?F0(r.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:r,shared:i}=this;t.args=this.args;let s=0;if(e&&(t.event=e,r.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,MV(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const b=t._delta.map(Math.abs);zr.addTo(t._distance,b)}this.axisIntent&&this.axisIntent(e);const[o,a]=t._movement,[l,c]=r.threshold,{_step:d,values:h}=t;if(r.hasCustomTransform?(d[0]===!1&&(d[0]=Math.abs(o)>=l&&h[0]),d[1]===!1&&(d[1]=Math.abs(a)>=c&&h[1])):(d[0]===!1&&(d[0]=Math.abs(o)>=l&&Math.sign(o)*l),d[1]===!1&&(d[1]=Math.abs(a)>=c&&Math.sign(a)*c)),t.intentional=d[0]!==!1||d[1]!==!1,!t.intentional)return;const p=[0,0];if(r.hasCustomTransform){const[b,R]=h;p[0]=d[0]!==!1?b-d[0]:0,p[1]=d[1]!==!1?R-d[1]:0}else p[0]=d[0]!==!1?o-d[0]:0,p[1]=d[1]!==!1?a-d[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(p);const m=t.offset,v=t._active&&!t._blocked||t.active;v&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=i[this.ingKey]=t._active,e&&(t.first&&("bounds"in r&&(t._bounds=F0(r.bounds,t)),this.setup&&this.setup()),t.movement=p,this.computeOffset()));const[_,y]=t.offset,[[g,S],[E,w]]=t._bounds;t.overflow=[_<g?-1:_>S?1:0,y<E?-1:y>w?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const T=t._active?r.rubberband||[0,0]:[0,0];if(t.offset=hV(t._bounds,t.offset,T),t.delta=zr.sub(t.offset,m),this.computeMovement(),v&&(!t.last||s>TV)){t.delta=zr.sub(t.offset,m);const b=t.delta.map(Math.abs);zr.addTo(t.distance,b),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[b[0]/s,b[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const i=this.handler(kn(kn(kn({},t),e),{},{[this.aliasKey]:e.values}));i!==void 0&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function PV([n,e],t){const r=Math.abs(n),i=Math.abs(e);if(r>i&&r>t)return"x";if(i>r&&i>t)return"y"}class IV extends RV{constructor(...e){super(...e),fi(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=zr.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=zr.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,r=this.config;if(!t.axis&&e){const i=typeof r.axisThreshold=="object"?r.axisThreshold[ZB(e)]:r.axisThreshold;t.axis=PV(t._movement,i)}t._blocked=(r.lockDirection||!!r.axis)&&!t.axis||!!r.axis&&r.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const LV=n=>n,AR=.15,qB={enabled(n=!0){return n},eventOptions(n,e,t){return kn(kn({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[AR,AR];case!1:return[0,0];default:return zr.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return zr.toVector(n)},transform(n,e,t){const r=n||t.shared.transform;return this.hasCustomTransform=!!r,r||LV},threshold(n){return zr.toVector(n,0)}},BV=0,ap=kn(kn({},qB),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=BV){return n},bounds(n={}){if(typeof n=="function")return s=>ap.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:r=-1/0,bottom:i=1/0}=n;return[[e,t],[r,i]]}}),wR={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class DV extends IV{constructor(...e){super(...e),fi(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),i={left:t.left-r.left+e.offset[0],right:t.right-r.right+e.offset[0],top:t.top-r.top+e.offset[1],bottom:t.bottom-r.bottom+e.offset[1]};e._bounds=ap.bounds(i)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,r=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const i=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(i&&i.size>1&&r._pointerActive)&&(this.start(e),this.setupPointer(e),r._pointerId=Ex(e),r._pointerActive=!0,this.computeValues(ER(e)),this.computeInitial(),t.preventScrollAxis&&ZB(e)!=="mouse"?(r._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,r=this.config;if(!t._pointerActive)return;const i=Ex(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;const s=ER(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=zr.sub(s,t._values),this.computeValues(s)),zr.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,r=this.config;if(!t._active||!t._pointerActive)return;const i=Ex(e);if(t._pointerId!==void 0&&i!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=t._distance;if(t.tap=s<=r.tapsThreshold&&o<=r.tapsThreshold,t.tap&&r.filterTaps)t._force=!0;else{const[a,l]=t._delta,[c,d]=t._movement,[h,p]=r.swipe.velocity,[m,v]=r.swipe.distance,_=r.swipe.duration;if(t.elapsedTime<_){const y=Math.abs(a/t.timeDelta),g=Math.abs(l/t.timeDelta);y>h&&Math.abs(c)>m&&(t.swipe[0]=Math.sign(a)),g>p&&Math.abs(d)>v&&(t.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,r=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,OV(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=wR[e.key];if(t){const r=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=t(this.config.keyboardDisplacement,i),r._keyboardActive=!0,zr.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in wR&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function OV(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const lp=typeof window<"u"&&window.document&&window.document.createElement;function eD(){return lp&&"ontouchstart"in window}function NV(){return eD()||lp&&window.navigator.maxTouchPoints>1}function FV(){return lp&&"onpointerdown"in window}function kV(){return lp&&"exitPointerLock"in window.document}function UV(){try{return"constructor"in GestureEvent}catch{return!1}}const ts={isBrowser:lp,gesture:UV(),touch:eD(),touchscreen:NV(),pointer:FV(),pointerLock:kV()},zV=250,HV=180,GV=.5,VV=50,WV=250,$V=10,MR={mouse:0,touch:0,pen:8},jV=kn(kn({},ap),{},{device(n,e,{pointer:{touch:t=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&ts.pointerLock,ts.touch&&t?"touch":this.pointerLock?"mouse":ts.pointer&&!i?"pointer":ts.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?zV:void 0,!(!ts.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:r=3,axis:i=void 0}){const s=zr.toVector(n,t?r:i?1:0);return this.filterTaps=t,this.tapsThreshold=r,s},swipe({velocity:n=GV,distance:e=VV,duration:t=WV}={}){return{velocity:this.transform(zr.toVector(n)),distance:this.transform(zr.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return HV;case!1:return 0;default:return n}},axisThreshold(n){return n?kn(kn({},MR),n):MR},keyboardDisplacement(n=$V){return n}});kn(kn({},qB),{},{device(n,e,{shared:t,pointer:{touch:r=!1}={}}){if(t.target&&!ts.touch&&ts.gesture)return"gesture";if(ts.touch&&r)return"touch";if(ts.touchscreen){if(ts.pointer)return"pointer";if(ts.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:r={}}){const i=o=>{const a=SR(F0(t,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=SR(F0(r,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof t!="function"&&typeof r!="function"?[i(),s()]:o=>[i(o),s(o)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",zr.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});kn(kn({},ap),{},{mouseOnly:(n=!0)=>n});kn(kn({},ap),{},{mouseOnly:(n=!0)=>n});const tD=new Map,NE=new Map;function XV(n){tD.set(n.key,n.engine),NE.set(n.key,n.resolver)}const JV={key:"drag",engine:DV,resolver:jV};function YV(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function KV(n,e){if(n==null)return{};var t=YV(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}const ZV={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=ts.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},QV=["target","eventOptions","window","enabled","transform"];function n0(n={},e){const t={};for(const[r,i]of Object.entries(e))switch(typeof i){case"function":t[r]=i.call(t,n[r],r,n);break;case"object":t[r]=n0(n[r],i);break;case"boolean":i&&(t[r]=n[r]);break}return t}function qV(n,e,t={}){const r=n,{target:i,eventOptions:s,window:o,enabled:a,transform:l}=r,c=KV(r,QV);if(t.shared=n0({target:i,eventOptions:s,window:o,enabled:a,transform:l},ZV),e){const d=NE.get(e);t[e]=n0(kn({shared:t.shared},c),d)}else for(const d in c){const h=NE.get(d);h&&(t[d]=n0(kn({shared:t.shared},c[d]),h))}return t}class nD{constructor(e,t){fi(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,r,i,s){const o=this._listeners,a=EV(t,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=kn(kn({},l),s);e.addEventListener(a,i,c);const d=()=>{e.removeEventListener(a,i,c),o.delete(d)};return o.add(d),d}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class eW{constructor(){fi(this,"_timeouts",new Map)}add(e,t,r=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(t,r,...i))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class tW{constructor(e){fi(this,"gestures",new Set),fi(this,"_targetEventStore",new nD(this)),fi(this,"gestureEventStores",{}),fi(this,"gestureTimeoutStores",{}),fi(this,"handlers",{}),fi(this,"config",{}),fi(this,"pointerIds",new Set),fi(this,"touchIds",new Set),fi(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),nW(this,e)}setEventIds(e){if($v(e))return this.touchIds=new Set(wV(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=qV(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,r={};let i;if(!(t.target&&(i=t.target(),!i))){if(t.enabled){for(const o of this.gestures){const a=this.config[o],l=bR(r,a.eventOptions,!!i);if(a.enabled){const c=tD.get(o);new c(this,e,o).bind(l)}}const s=bR(r,t.eventOptions,!!i);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](kn(kn({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in r)r[s]=CV(...r[s]);if(!i)return r;for(const s in r){const{device:o,capture:a,passive:l}=xV(s);this._targetEventStore.add(i,o,"",r[s],{capture:a,passive:l})}}}}function eu(n,e){n.gestures.add(e),n.gestureEventStores[e]=new nD(n,e),n.gestureTimeoutStores[e]=new eW}function nW(n,e){e.drag&&eu(n,"drag"),e.wheel&&eu(n,"wheel"),e.scroll&&eu(n,"scroll"),e.move&&eu(n,"move"),e.pinch&&eu(n,"pinch"),e.hover&&eu(n,"hover")}const bR=(n,e,t)=>(r,i,s,o={},a=!1)=>{var l,c;const d=(l=o.capture)!==null&&l!==void 0?l:e.capture,h=(c=o.passive)!==null&&c!==void 0?c:e.passive;let p=a?r:yV(r,i,d);t&&h&&(p+="Passive"),n[p]=n[p]||[],n[p].push(s)};function rW(n,e={},t,r){const i=q.useMemo(()=>new tW(n),[]);if(i.applyHandlers(n,r),i.applyConfig(e,t),q.useEffect(i.effect.bind(i)),q.useEffect(()=>i.clean.bind(i),[]),e.target===void 0)return i.bind.bind(i)}function iW(n,e){return XV(JV),rW({drag:n},e||{},"drag")}const sW=n=>(e,t,r)=>{const i=r.subscribe;return r.subscribe=(o,a,l)=>{let c=o;if(a){const d=(l==null?void 0:l.equalityFn)||Object.is;let h=o(r.getState());c=p=>{const m=o(p);if(!d(h,m)){const v=h;a(h=m,v)}},l!=null&&l.fireImmediately&&a(h,h)}return i(c)},n(e,t,r)};function CR(n,e){if(e===f3)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===B0||e===vA){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,i=[];if(t)if(e===B0)for(let o=1;o<=r;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}const oW=parseInt(fd.replace(/\D+/g,""));var rs=Uint8Array,Pa=Uint16Array,FE=Uint32Array,rD=new rs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),iD=new rs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),aW=new rs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),sD=function(n,e){for(var t=new Pa(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new FE(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return[t,i]},oD=sD(rD,2),aD=oD[0],lW=oD[1];aD[28]=258,lW[258]=28;var cW=sD(iD,0),uW=cW[0],kE=new Pa(32768);for(var An=0;An<32768;++An){var va=(An&43690)>>>1|(An&21845)<<1;va=(va&52428)>>>2|(va&13107)<<2,va=(va&61680)>>>4|(va&3855)<<4,kE[An]=((va&65280)>>>8|(va&255)<<8)>>>1}var Kf=function(n,e,t){for(var r=n.length,i=0,s=new Pa(e);i<r;++i)++s[n[i]-1];var o=new Pa(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new Pa(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var c=i<<4|n[i],d=e-n[i],h=o[n[i]-1]++<<d,p=h|(1<<d)-1;h<=p;++h)a[kE[h]>>>l]=c}else for(a=new Pa(r),i=0;i<r;++i)n[i]&&(a[i]=kE[o[n[i]-1]++]>>>15-n[i]);return a},cp=new rs(288);for(var An=0;An<144;++An)cp[An]=8;for(var An=144;An<256;++An)cp[An]=9;for(var An=256;An<280;++An)cp[An]=7;for(var An=280;An<288;++An)cp[An]=8;var lD=new rs(32);for(var An=0;An<32;++An)lD[An]=5;var dW=Kf(cp,9,1),fW=Kf(lD,5,1),Sx=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},xs=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},Ax=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},hW=function(n){return(n/8|0)+(n&7&&1)},pW=function(n,e,t){(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof Pa?Pa:n instanceof FE?FE:rs)(t-e);return r.set(n.subarray(e,t)),r},mW=function(n,e,t){var r=n.length;if(!r||t&&!t.l&&r<5)return e||new rs(0);var i=!e||t,s=!t||t.i;t||(t={}),e||(e=new rs(r*3));var o=function(be){var Te=e.length;if(be>Te){var Xe=new rs(Math.max(Te*2,be));Xe.set(e),e=Xe}},a=t.f||0,l=t.p||0,c=t.b||0,d=t.l,h=t.d,p=t.m,m=t.n,v=r*8;do{if(!d){t.f=a=xs(n,l,1);var _=xs(n,l+1,3);if(l+=3,_)if(_==1)d=dW,h=fW,p=9,m=5;else if(_==2){var E=xs(n,l,31)+257,w=xs(n,l+10,15)+4,T=E+xs(n,l+5,31)+1;l+=14;for(var b=new rs(T),R=new rs(19),B=0;B<w;++B)R[aW[B]]=xs(n,l+B*3,7);l+=w*3;for(var P=Sx(R),I=(1<<P)-1,F=Kf(R,P,1),B=0;B<T;){var $=F[xs(n,l,I)];l+=$&15;var y=$>>>4;if(y<16)b[B++]=y;else{var Z=0,U=0;for(y==16?(U=3+xs(n,l,3),l+=2,Z=b[B-1]):y==17?(U=3+xs(n,l,7),l+=3):y==18&&(U=11+xs(n,l,127),l+=7);U--;)b[B++]=Z}}var j=b.subarray(0,E),re=b.subarray(E);p=Sx(j),m=Sx(re),d=Kf(j,p,1),h=Kf(re,m,1)}else throw"invalid block type";else{var y=hW(l)+4,g=n[y-4]|n[y-3]<<8,S=y+g;if(S>r){if(s)throw"unexpected EOF";break}i&&o(c+g),e.set(n.subarray(y,S),c),t.b=c+=g,t.p=l=S*8;continue}if(l>v){if(s)throw"unexpected EOF";break}}i&&o(c+131072);for(var ae=(1<<p)-1,H=(1<<m)-1,Y=l;;Y=l){var Z=d[Ax(n,l)&ae],V=Z>>>4;if(l+=Z&15,l>v){if(s)throw"unexpected EOF";break}if(!Z)throw"invalid length/literal";if(V<256)e[c++]=V;else if(V==256){Y=l,d=null;break}else{var ee=V-254;if(V>264){var B=V-257,ie=rD[B];ee=xs(n,l,(1<<ie)-1)+aD[B],l+=ie}var oe=h[Ax(n,l)&H],he=oe>>>4;if(!oe)throw"invalid distance";l+=oe&15;var re=uW[he];if(he>3){var ie=iD[he];re+=Ax(n,l)&(1<<ie)-1,l+=ie}if(l>v){if(s)throw"unexpected EOF";break}i&&o(c+131072);for(var Ce=c+ee;c<Ce;c+=4)e[c]=e[c-re],e[c+1]=e[c+1-re],e[c+2]=e[c+2-re],e[c+3]=e[c+3-re];c=Ce}}t.l=d,t.p=Y,t.b=c,d&&(a=1,t.m=p,t.d=h,t.n=m)}while(!a);return c==e.length?e:pW(e,0,c)},gW=new rs(0),vW=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Sg(n,e){return mW((vW(n),n.subarray(2,-4)),e)}var yW=typeof TextDecoder<"u"&&new TextDecoder,_W=0;try{yW.decode(gW,{stream:!0}),_W=1}catch{}const xW=n=>n&&n.isCubeTexture;class EW extends Qn{constructor(e,t){var r,i;const s=xW(e),a=((i=s?(r=e.image[0])==null?void 0:r.width:e.image.width)!=null?i:1024)/4,l=Math.floor(Math.log2(a)),c=Math.pow(2,l),d=3*Math.max(c,16*7),h=4*c,p=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/d}`,`#define CUBEUV_TEXEL_HEIGHT ${1/h}`,`#define CUBEUV_MAX_MIP ${l}.0`],m=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,v=p.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(fd.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,_={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},y=new np(1,16),g=new Ls({uniforms:_,fragmentShader:v,vertexShader:m,side:ns});super(y,g)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}class aw extends Vr{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new bW(t)}),this.register(function(t){return new DW(t)}),this.register(function(t){return new OW(t)}),this.register(function(t){return new NW(t)}),this.register(function(t){return new TW(t)}),this.register(function(t){return new RW(t)}),this.register(function(t){return new PW(t)}),this.register(function(t){return new IW(t)}),this.register(function(t){return new MW(t)}),this.register(function(t){return new LW(t)}),this.register(function(t){return new CW(t)}),this.register(function(t){return new BW(t)}),this.register(function(t){return new AW(t)}),this.register(function(t){return new FW(t)}),this.register(function(t){return new kW(t)})}load(e,t,r,i){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=io.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){i?i(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Ni(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(d){t(d),s.manager.itemEnd(e)},a)}catch(d){a(d)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(io.decodeText(new Uint8Array(e.slice(0,4)))===cD){try{o[Jt.KHR_BINARY_GLTF]=new UW(e)}catch(d){i&&i(d);return}s=JSON.parse(o[Jt.KHR_BINARY_GLTF].content)}else s=JSON.parse(io.decodeText(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new QW(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const d=this.pluginCallbacks[c](l);a[d.name]=d,o[d.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const d=s.extensionsUsed[c],h=s.extensionsRequired||[];switch(d){case Jt.KHR_MATERIALS_UNLIT:o[d]=new wW;break;case Jt.KHR_DRACO_MESH_COMPRESSION:o[d]=new zW(s,this.dracoLoader);break;case Jt.KHR_TEXTURE_TRANSFORM:o[d]=new HW;break;case Jt.KHR_MESH_QUANTIZATION:o[d]=new GW;break;default:h.indexOf(d)>=0&&a[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(r,i)}parseAsync(e,t){const r=this;return new Promise(function(i,s){r.parse(e,t,i,s)})}}function SW(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Jt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class AW{constructor(e){this.parser=e,this.name=Jt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let i=t.cache.get(r);if(i)return i;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const d=new je(16777215);l.color!==void 0&&d.fromArray(l.color);const h=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new KA(d),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new YA(d),c.distance=h;break;case"spot":c=new JA(d),c.distance=h,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,wa(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),i=Promise.resolve(c),t.cache.add(r,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return r._getNodeRef(t.cache,a,l)})}}class wW{constructor(){this.name=Jt.KHR_MATERIALS_UNLIT}getMaterialType(){return Ii}extendParams(e,t,r){const i=[];e.color=new je(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,3001))}return Promise.all(i)}}class MW{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class bW{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:fo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Re(a,a)}return Promise.all(s)}}class CW{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:fo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class TW{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:fo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new je(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];return o.sheenColorFactor!==void 0&&t.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture,3001)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class RW{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:fo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class PW{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:fo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new je(a[0],a[1],a[2]),Promise.all(s)}}class IW{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:fo}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class LW{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:fo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new je(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture,3001)),Promise.all(s)}}class BW{constructor(e){this.parser=e,this.name=Jt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:fo}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(r.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class DW{constructor(e){this.parser=e,this.name=Jt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class OW{constructor(e){this.parser=e,this.name=Jt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class NW{constructor(e){this.parser=e,this.name=Jt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class FW{constructor(e){this.name=Jt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=i.byteOffset||0,c=i.byteLength||0,d=i.count,h=i.byteStride,p=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(d,h,p,i.mode,i.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(d*h);return o.decodeGltfBuffer(new Uint8Array(m),d,h,p,i.mode,i.filter),m})})}else return null}}class kW{constructor(e){this.name=Jt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=t.meshes[r.mesh];for(const c of i.primitives)if(c.mode!==Zi.TRIANGLES&&c.mode!==Zi.TRIANGLE_STRIP&&c.mode!==Zi.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=r.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(d=>(l[c]=d,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const d=c.pop(),h=d.isGroup?d.children:[d],p=c[0].count,m=[];for(const v of h){const _=new _t,y=new X,g=new br,S=new X(1,1,1),E=new BA(v.geometry,v.material,p);for(let w=0;w<p;w++)l.TRANSLATION&&y.fromBufferAttribute(l.TRANSLATION,w),l.ROTATION&&g.fromBufferAttribute(l.ROTATION,w),l.SCALE&&S.fromBufferAttribute(l.SCALE,w),E.setMatrixAt(w,_.compose(y,g,S));for(const w in l)w!=="TRANSLATION"&&w!=="ROTATION"&&w!=="SCALE"&&v.geometry.setAttribute(w,l[w]);jt.prototype.copy.call(E,v),this.parser.assignFinalMaterial(E),m.push(E)}return d.isGroup?(d.clear(),d.add(...m),d):m[0]}))}}const cD="glTF",_f=12,TR={JSON:1313821514,BIN:5130562};class UW{constructor(e){this.name=Jt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,_f);if(this.header={magic:io.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==cD)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-_f,i=new DataView(e,_f);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===TR.JSON){const l=new Uint8Array(e,_f+s,o);this.content=io.decodeText(l)}else if(a===TR.BIN){const l=_f+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class zW{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Jt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const d in o){const h=UE[d]||d.toLowerCase();a[h]=o[d]}for(const d in e.attributes){const h=UE[d]||d.toLowerCase();if(o[d]!==void 0){const p=r.accessors[e.attributes[d]],m=Fu[p.componentType];c[h]=m.name,l[h]=p.normalized===!0}}return t.getDependency("bufferView",s).then(function(d){return new Promise(function(h){i.decodeDracoFile(d,function(p){for(const m in p.attributes){const v=p.attributes[m],_=l[m];_!==void 0&&(v.normalized=_)}h(p)},a,c)})})}}class HW{constructor(){this.name=Jt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class GW{constructor(){this.name=Jt.KHR_MESH_QUANTIZATION}}class uD extends yd{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=r[s+o];return t}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,d=i-t,h=(r-t)/d,p=h*h,m=p*h,v=e*c,_=v-c,y=-2*m+3*p,g=m-p,S=1-y,E=g-p+h;for(let w=0;w!==a;w++){const T=o[_+w+a],b=o[_+w+l]*d,R=o[v+w+a],B=o[v+w]*d;s[w]=S*T+E*b+y*R+g*B}return s}}const VW=new br;class WW extends uD{interpolate_(e,t,r,i){const s=super.interpolate_(e,t,r,i);return VW.fromArray(s).normalize().toArray(s),s}}const Zi={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Fu={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},RR={9728:jn,9729:mn,9984:_h,9985:vv,9986:Ou,9987:ao},PR={33071:Ar,33648:Ju,10497:$a},wx={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},UE={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...oW>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ya={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},$W={CUBICSPLINE:void 0,LINEAR:sc,STEP:Yu},Mx={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function jW(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new sp({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:so})),n.DefaultMaterial}function bl(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function wa(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function XW(n,e,t){let r=!1,i=!1,s=!1;for(let c=0,d=e.length;c<d;c++){const h=e[c];if(h.POSITION!==void 0&&(r=!0),h.NORMAL!==void 0&&(i=!0),h.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,d=e.length;c<d;c++){const h=e[c];if(r){const p=h.POSITION!==void 0?t.getDependency("accessor",h.POSITION):n.attributes.position;o.push(p)}if(i){const p=h.NORMAL!==void 0?t.getDependency("accessor",h.NORMAL):n.attributes.normal;a.push(p)}if(s){const p=h.COLOR_0!==void 0?t.getDependency("accessor",h.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const d=c[0],h=c[1],p=c[2];return r&&(n.morphAttributes.position=d),i&&(n.morphAttributes.normal=h),s&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function JW(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function YW(n){let e;const t=n.extensions&&n.extensions[Jt.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+bx(t.attributes):e=n.indices+":"+bx(n.attributes)+":"+n.mode,n.targets!==void 0)for(let r=0,i=n.targets.length;r<i;r++)e+=":"+bx(n.targets[r]);return e}function bx(n){let e="";const t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function zE(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function KW(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const ZW=new _t;class QW{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new SW,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new hB(this.options.manager):this.textureLoader=new EB(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ni(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};bl(s,a,i),wa(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const i=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,d]of o.children.entries())s(d,a.children[c])};return s(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const i=e(t[r]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Jt.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(io.resolveURL(t.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const i=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const o=wx[i.type],a=Fu[i.componentType],l=i.normalized===!0,c=new a(i.count*o);return Promise.resolve(new Zt(c,o,l))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=wx[i.type],c=Fu[i.componentType],d=c.BYTES_PER_ELEMENT,h=d*l,p=i.byteOffset||0,m=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,v=i.normalized===!0;let _,y;if(m&&m!==h){const g=Math.floor(p/m),S="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+g+":"+i.count;let E=t.cache.get(S);E||(_=new c(a,g*m,i.count*m/d),E=new qh(_,m/d),t.cache.add(S,E)),y=new ja(E,l,p%m/d,v)}else a===null?_=new c(i.count*l):_=new c(a,p,i.count*l),y=new Zt(_,l,v);if(i.sparse!==void 0){const g=wx.SCALAR,S=Fu[i.sparse.indices.componentType],E=i.sparse.indices.byteOffset||0,w=i.sparse.values.byteOffset||0,T=new S(o[1],E,i.sparse.count*g),b=new c(o[2],w,i.sparse.count*l);a!==null&&(y=new Zt(y.array.slice(),y.itemSize,y.normalized));for(let R=0,B=T.length;R<B;R++){const P=T[R];if(y.setX(P,b[R*l]),l>=2&&y.setY(P,b[R*l+1]),l>=3&&y.setZ(P,b[R*l+2]),l>=4&&y.setW(P,b[R*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return y})}loadTexture(e){const t=this.json,r=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=r.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,r){const i=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,r).then(function(d){d.flipY=!1,d.name=o.name||a.name||"",d.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(d.name=a.uri);const p=(s.samplers||{})[o.sampler]||{};return d.magFilter=RR[p.magFilter]||mn,d.minFilter=RR[p.minFilter]||ao,d.wrapS=PR[p.wrapS]||$a,d.wrapT=PR[p.wrapT]||$a,i.associations.set(d,{textures:e}),d}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());const o=i.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=r.getDependency("bufferView",o.bufferView).then(function(h){c=!0;const p=new Blob([h],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(l).then(function(h){return new Promise(function(p,m){let v=p;t.isImageBitmapLoader===!0&&(v=function(_){const y=new Mn(_);y.needsUpdate=!0,p(y)}),t.load(io.resolveURL(h,s.path),v,void 0,m)})}).then(function(h){return c===!0&&a.revokeObjectURL(l),h.userData.mimeType=o.mimeType||KW(o.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[e]=d,d}assignTexture(e,t,r,i){const s=this;return this.getDependency("texture",r.index).then(function(o){if(!o)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(o=o.clone(),o.channel=r.texCoord),s.extensions[Jt.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[Jt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Jt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return i!==void 0&&("colorSpace"in o?o.colorSpace=i===3001?"srgb":"srgb-linear":o.encoding=i),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new bv,ir.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new Gr,ir.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(a,l)),r=l}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}e.material=r}getMaterialType(){return sp}loadMaterial(e){const t=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[Jt.KHR_MATERIALS_UNLIT]){const h=i[Jt.KHR_MATERIALS_UNLIT];o=h.getMaterialType(),c.push(h.extendParams(a,s,t))}else{const h=s.pbrMetallicRoughness||{};if(a.color=new je(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){const p=h.baseColorFactor;a.color.fromArray(p),a.opacity=p[3]}h.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",h.baseColorTexture,3001)),a.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,a.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=ns);const d=s.alphaMode||Mx.OPAQUE;if(d===Mx.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,d===Mx.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Ii&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Re(1,1),s.normalTexture.scale!==void 0)){const h=s.normalTexture.scale;a.normalScale.set(h,h)}return s.occlusionTexture!==void 0&&o!==Ii&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Ii&&(a.emissive=new je().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==Ii&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,3001)),Promise.all(c).then(function(){const h=new o(a);return s.name&&(h.name=s.name),wa(h,s),t.associations.set(h,{materials:e}),s.extensions&&bl(i,h,s),h})}createUniqueName(e){const t=Kt.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[Jt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return IR(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],d=YW(c),h=i[d];if(h)o.push(h.promise);else{let p;c.extensions&&c.extensions[Jt.KHR_DRACO_MESH_COMPRESSION]?p=s(c):p=IR(new Lt,c,t),i[d]={primitive:c,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const d=o[l].material===void 0?jW(this.cache):this.getDependency("material",o[l].material);a.push(d)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),d=l[l.length-1],h=[];for(let m=0,v=d.length;m<v;m++){const _=d[m],y=o[m];let g;const S=c[m];if(y.mode===Zi.TRIANGLES||y.mode===Zi.TRIANGLE_STRIP||y.mode===Zi.TRIANGLE_FAN||y.mode===void 0)g=s.isSkinnedMesh===!0?new LA(_,S):new Qn(_,S),g.isSkinnedMesh===!0&&g.normalizeSkinWeights(),y.mode===Zi.TRIANGLE_STRIP?g.geometry=CR(g.geometry,vA):y.mode===Zi.TRIANGLE_FAN&&(g.geometry=CR(g.geometry,B0));else if(y.mode===Zi.LINES)g=new Ds(_,S);else if(y.mode===Zi.LINE_STRIP)g=new $o(_,S);else if(y.mode===Zi.LINE_LOOP)g=new DA(_,S);else if(y.mode===Zi.POINTS)g=new OA(_,S);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+y.mode);Object.keys(g.geometry.morphAttributes).length>0&&JW(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),wa(g,s),y.extensions&&bl(i,g,y),t.assignFinalMaterial(g),h.push(g)}for(let m=0,v=h.length;m<v;m++)t.associations.set(h[m],{meshes:e,primitives:m});if(h.length===1)return s.extensions&&bl(i,h[0],s),h[0];const p=new Oo;s.extensions&&bl(i,p,s),t.associations.set(p,{meshes:e});for(let m=0,v=h.length;m<v;m++)p.add(h[m]);return p})}loadCamera(e){let t;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new cr(Mh.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new md(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),wa(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r=[];for(let i=0,s=t.joints.length;i<s;i++)r.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",t.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){const s=i.pop(),o=i,a=[],l=[];for(let c=0,d=o.length;c<d;c++){const h=o[c];if(h){a.push(h);const p=new _t;s!==null&&p.fromArray(s.array,c*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new ep(a,l)})}loadAnimation(e){const r=this.json.animations[e],i=r.name?r.name:"animation_"+e,s=[],o=[],a=[],l=[],c=[];for(let d=0,h=r.channels.length;d<h;d++){const p=r.channels[d],m=r.samplers[p.sampler],v=p.target,_=v.node,y=r.parameters!==void 0?r.parameters[m.input]:m.input,g=r.parameters!==void 0?r.parameters[m.output]:m.output;v.node!==void 0&&(s.push(this.getDependency("node",_)),o.push(this.getDependency("accessor",y)),a.push(this.getDependency("accessor",g)),l.push(m),c.push(v))}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c)]).then(function(d){const h=d[0],p=d[1],m=d[2],v=d[3],_=d[4],y=[];for(let g=0,S=h.length;g<S;g++){const E=h[g],w=p[g],T=m[g],b=v[g],R=_[g];if(E===void 0)continue;E.updateMatrix();let B;switch(ya[R.path]){case ya.weights:B=ed;break;case ya.rotation:B=Xa;break;case ya.position:case ya.scale:default:B=td;break}const P=E.name?E.name:E.uuid,I=b.interpolation!==void 0?$W[b.interpolation]:sc,F=[];ya[R.path]===ya.weights?E.traverse(function(Z){Z.morphTargetInfluences&&F.push(Z.name?Z.name:Z.uuid)}):F.push(P);let $=T.array;if(T.normalized){const Z=zE($.constructor),U=new Float32Array($.length);for(let j=0,re=$.length;j<re;j++)U[j]=$[j]*Z;$=U}for(let Z=0,U=F.length;Z<U;Z++){const j=new B(F[Z]+"."+ya[R.path],w.array,$,I);b.interpolation==="CUBICSPLINE"&&(j.createInterpolant=function(ae){const H=this instanceof Xa?WW:uD;return new H(this.times,this.values,this.getValueSize()/3,ae)},j.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),y.push(j)}}return new nd(i,void 0,y)})}createNodeMesh(e){const t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=i.weights.length;l<c;l++)a.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const t=this.json,r=this,i=t.nodes[e],s=r._loadNodeShallow(e),o=[],a=i.children||[];for(let c=0,d=a.length;c<d;c++)o.push(r.getDependency("node",a[c]));const l=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const d=c[0],h=c[1],p=c[2];p!==null&&d.traverse(function(m){m.isSkinnedMesh&&m.bind(p,ZW)});for(let m=0,v=h.length;m<v;m++)d.add(h[m]);return d})}_loadNodeShallow(e){const t=this.json,r=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"",a=[],l=i._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(c){return i._getNodeRef(i.cameraCache,s.camera,c)})),i._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let d;if(s.isBone===!0?d=new Mv:c.length>1?d=new Oo:c.length===1?d=c[0]:d=new jt,d!==c[0])for(let h=0,p=c.length;h<p;h++)d.add(c[h]);if(s.name&&(d.userData.name=s.name,d.name=o),wa(d,s),s.extensions&&bl(r,d,s),s.matrix!==void 0){const h=new _t;h.fromArray(s.matrix),d.applyMatrix4(h)}else s.translation!==void 0&&d.position.fromArray(s.translation),s.rotation!==void 0&&d.quaternion.fromArray(s.rotation),s.scale!==void 0&&d.scale.fromArray(s.scale);return i.associations.has(d)||i.associations.set(d,{}),i.associations.get(d).nodes=e,d}),this.nodeCache[e]}loadScene(e){const t=this.extensions,r=this.json.scenes[e],i=this,s=new Oo;r.name&&(s.name=i.createUniqueName(r.name)),wa(s,r),r.extensions&&bl(t,s,r);const o=r.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(i.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let d=0,h=l.length;d<h;d++)s.add(l[d]);const c=d=>{const h=new Map;for(const[p,m]of i.associations)(p instanceof ir||p instanceof Mn)&&h.set(p,m);return d.traverse(p=>{const m=i.associations.get(p);m!=null&&h.set(p,m)}),h};return i.associations=c(s),s})}}function qW(n,e,t){const r=e.attributes,i=new Cr;if(r.POSITION!==void 0){const a=t.json.accessors[r.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(i.set(new X(l[0],l[1],l[2]),new X(c[0],c[1],c[2])),a.normalized){const d=zE(Fu[a.componentType]);i.min.multiplyScalar(d),i.max.multiplyScalar(d)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new X,l=new X;for(let c=0,d=s.length;c<d;c++){const h=s[c];if(h.POSITION!==void 0){const p=t.json.accessors[h.POSITION],m=p.min,v=p.max;if(m!==void 0&&v!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(v[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(v[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(v[2]))),p.normalized){const _=zE(Fu[p.componentType]);l.multiplyScalar(_)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}n.boundingBox=i;const o=new xr;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=o}function IR(n,e,t){const r=e.attributes,i=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in r){const a=UE[o]||o.toLowerCase();a in n.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});i.push(o)}return wa(n,e),qW(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?XW(n,e.targets,t):n})}class e7 extends jA{constructor(e){super(e),this.type=qr}parse(e){const a=function(E,w){switch(E){case 1:console.error("THREE.RGBELoader Read Error: "+(w||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(w||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(w||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(w||""))}return-1},h=`
`,p=function(E,w,T){w=w||1024;let R=E.pos,B=-1,P=0,I="",F=String.fromCharCode.apply(null,new Uint16Array(E.subarray(R,R+128)));for(;0>(B=F.indexOf(h))&&P<w&&R<E.byteLength;)I+=F,P+=F.length,R+=128,F+=String.fromCharCode.apply(null,new Uint16Array(E.subarray(R,R+128)));return-1<B?(T!==!1&&(E.pos+=P+B+1),I+F.slice(0,B)):!1},m=function(E){const w=/^#\?(\S+)/,T=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,b=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,R=/^\s*FORMAT=(\S+)\s*$/,B=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,P={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let I,F;if(E.pos>=E.byteLength||!(I=p(E)))return a(1,"no header found");if(!(F=I.match(w)))return a(3,"bad initial token");for(P.valid|=1,P.programtype=F[1],P.string+=I+`
`;I=p(E),I!==!1;){if(P.string+=I+`
`,I.charAt(0)==="#"){P.comments+=I+`
`;continue}if((F=I.match(T))&&(P.gamma=parseFloat(F[1])),(F=I.match(b))&&(P.exposure=parseFloat(F[1])),(F=I.match(R))&&(P.valid|=2,P.format=F[1]),(F=I.match(B))&&(P.valid|=4,P.height=parseInt(F[1],10),P.width=parseInt(F[2],10)),P.valid&2&&P.valid&4)break}return P.valid&2?P.valid&4?P:a(3,"missing image size specifier"):a(3,"missing format specifier")},v=function(E,w,T){const b=w;if(b<8||b>32767||E[0]!==2||E[1]!==2||E[2]&128)return new Uint8Array(E);if(b!==(E[2]<<8|E[3]))return a(3,"wrong scanline width");const R=new Uint8Array(4*w*T);if(!R.length)return a(4,"unable to allocate buffer space");let B=0,P=0;const I=4*b,F=new Uint8Array(4),$=new Uint8Array(I);let Z=T;for(;Z>0&&P<E.byteLength;){if(P+4>E.byteLength)return a(1);if(F[0]=E[P++],F[1]=E[P++],F[2]=E[P++],F[3]=E[P++],F[0]!=2||F[1]!=2||(F[2]<<8|F[3])!=b)return a(3,"bad rgbe scanline format");let U=0,j;for(;U<I&&P<E.byteLength;){j=E[P++];const ae=j>128;if(ae&&(j-=128),j===0||U+j>I)return a(3,"bad scanline data");if(ae){const H=E[P++];for(let Y=0;Y<j;Y++)$[U++]=H}else $.set(E.subarray(P,P+j),U),U+=j,P+=j}const re=b;for(let ae=0;ae<re;ae++){let H=0;R[B]=$[ae+H],H+=b,R[B+1]=$[ae+H],H+=b,R[B+2]=$[ae+H],H+=b,R[B+3]=$[ae+H],B+=4}Z--}return R},_=function(E,w,T,b){const R=E[w+3],B=Math.pow(2,R-128)/255;T[b+0]=E[w+0]*B,T[b+1]=E[w+1]*B,T[b+2]=E[w+2]*B,T[b+3]=1},y=function(E,w,T,b){const R=E[w+3],B=Math.pow(2,R-128)/255;T[b+0]=zl.toHalfFloat(Math.min(E[w+0]*B,65504)),T[b+1]=zl.toHalfFloat(Math.min(E[w+1]*B,65504)),T[b+2]=zl.toHalfFloat(Math.min(E[w+2]*B,65504)),T[b+3]=zl.toHalfFloat(1)},g=new Uint8Array(e);g.pos=0;const S=m(g);if(S!==-1){const E=S.width,w=S.height,T=v(g.subarray(g.pos),E,w);if(T!==-1){let b,R,B;switch(this.type){case wr:B=T.length/4;const P=new Float32Array(B*4);for(let F=0;F<B;F++)_(T,F*4,P,F*4);b=P,R=wr;break;case qr:B=T.length/4;const I=new Uint16Array(B*4);for(let F=0;F<B;F++)y(T,F*4,I,F*4);b=I,R=qr;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:E,height:w,data:b,header:S.string,gamma:S.gamma,exposure:S.exposure,type:R}}}return null}setDataType(e){return this.type=e,this}load(e,t,r,i){function s(o,a){switch(o.type){case wr:case qr:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=mn,o.magFilter=mn,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,r,i)}}const xf="colorSpace"in new Mn;class t7 extends jA{constructor(e){super(e),this.type=qr}parse(e){const P=Math.pow(2.7182818,2.2);function I(O,z){for(var se=0,D=0;D<65536;++D)(D==0||O[D>>3]&1<<(D&7))&&(z[se++]=D);for(var W=se-1;se<65536;)z[se++]=0;return W}function F(O){for(var z=0;z<16384;z++)O[z]={},O[z].len=0,O[z].lit=0,O[z].p=null}const $={l:0,c:0,lc:0};function Z(O,z,se,D,W){for(;se<O;)z=z<<8|Ze(D,W),se+=8;se-=O,$.l=z>>se&(1<<O)-1,$.c=z,$.lc=se}const U=new Array(59);function j(O){for(var z=0;z<=58;++z)U[z]=0;for(var z=0;z<65537;++z)U[O[z]]+=1;for(var se=0,z=58;z>0;--z){var D=se+U[z]>>1;U[z]=se,se=D}for(var z=0;z<65537;++z){var W=O[z];W>0&&(O[z]=W|U[W]++<<6)}}function re(O,z,se,D,W,J,ne){for(var Q=se,ge=0,ye=0;W<=J;W++){if(Q.value-se.value>D)return!1;Z(6,ge,ye,O,Q);var Ee=$.l;if(ge=$.c,ye=$.lc,ne[W]=Ee,Ee==63){if(Q.value-se.value>D)throw"Something wrong with hufUnpackEncTable";Z(8,ge,ye,O,Q);var xe=$.l+6;if(ge=$.c,ye=$.lc,W+xe>J+1)throw"Something wrong with hufUnpackEncTable";for(;xe--;)ne[W++]=0;W--}else if(Ee>=59){var xe=Ee-59+2;if(W+xe>J+1)throw"Something wrong with hufUnpackEncTable";for(;xe--;)ne[W++]=0;W--}}j(ne)}function ae(O){return O&63}function H(O){return O>>6}function Y(O,z,se,D){for(;z<=se;z++){var W=H(O[z]),J=ae(O[z]);if(W>>J)throw"Invalid table entry";if(J>14){var ne=D[W>>J-14];if(ne.len)throw"Invalid table entry";if(ne.lit++,ne.p){var Q=ne.p;ne.p=new Array(ne.lit);for(var ge=0;ge<ne.lit-1;++ge)ne.p[ge]=Q[ge]}else ne.p=new Array(1);ne.p[ne.lit-1]=z}else if(J)for(var ye=0,ge=1<<14-J;ge>0;ge--){var ne=D[(W<<14-J)+ye];if(ne.len||ne.p)throw"Invalid table entry";ne.len=J,ne.lit=z,ye++}}return!0}const V={c:0,lc:0};function ee(O,z,se,D){O=O<<8|Ze(se,D),z+=8,V.c=O,V.lc=z}const ie={c:0,lc:0};function oe(O,z,se,D,W,J,ne,Q,ge,ye){if(O==z){D<8&&(ee(se,D,W,ne),se=V.c,D=V.lc),D-=8;var Ee=se>>D,Ee=new Uint8Array([Ee])[0];if(ge.value+Ee>ye)return!1;for(var xe=Q[ge.value-1];Ee-- >0;)Q[ge.value++]=xe}else if(ge.value<ye)Q[ge.value++]=O;else return!1;ie.c=se,ie.lc=D}function he(O){return O&65535}function Ce(O){var z=he(O);return z>32767?z-65536:z}const be={a:0,b:0};function Te(O,z){var se=Ce(O),D=Ce(z),W=D,J=se+(W&1)+(W>>1),ne=J,Q=J-W;be.a=ne,be.b=Q}function Xe(O,z){var se=he(O),D=he(z),W=se-(D>>1)&65535,J=D+W-32768&65535;be.a=J,be.b=W}function ct(O,z,se,D,W,J,ne){for(var Q=ne<16384,ge=se>W?W:se,ye=1,Ee;ye<=ge;)ye<<=1;for(ye>>=1,Ee=ye,ye>>=1;ye>=1;){for(var xe=0,Qe=xe+J*(W-Ee),Be=J*ye,Oe=J*Ee,tt=D*ye,ht=D*Ee,vt,Tt,qe,ze;xe<=Qe;xe+=Oe){for(var Gt=xe,At=xe+D*(se-Ee);Gt<=At;Gt+=ht){var bt=Gt+tt,cn=Gt+Be,Gn=cn+tt;Q?(Te(O[Gt+z],O[cn+z]),vt=be.a,qe=be.b,Te(O[bt+z],O[Gn+z]),Tt=be.a,ze=be.b,Te(vt,Tt),O[Gt+z]=be.a,O[bt+z]=be.b,Te(qe,ze),O[cn+z]=be.a,O[Gn+z]=be.b):(Xe(O[Gt+z],O[cn+z]),vt=be.a,qe=be.b,Xe(O[bt+z],O[Gn+z]),Tt=be.a,ze=be.b,Xe(vt,Tt),O[Gt+z]=be.a,O[bt+z]=be.b,Xe(qe,ze),O[cn+z]=be.a,O[Gn+z]=be.b)}if(se&ye){var cn=Gt+Be;Q?Te(O[Gt+z],O[cn+z]):Xe(O[Gt+z],O[cn+z]),vt=be.a,O[cn+z]=be.b,O[Gt+z]=vt}}if(W&ye)for(var Gt=xe,At=xe+D*(se-Ee);Gt<=At;Gt+=ht){var bt=Gt+tt;Q?Te(O[Gt+z],O[bt+z]):Xe(O[Gt+z],O[bt+z]),vt=be.a,O[bt+z]=be.b,O[Gt+z]=vt}Ee=ye,ye>>=1}return xe}function et(O,z,se,D,W,J,ne,Q,ge,ye){for(var Ee=0,xe=0,Qe=Q,Be=Math.trunc(W.value+(J+7)/8);W.value<Be;)for(ee(Ee,xe,se,W),Ee=V.c,xe=V.lc;xe>=14;){var Oe=Ee>>xe-14&16383,tt=z[Oe];if(tt.len)xe-=tt.len,oe(tt.lit,ne,Ee,xe,se,D,W,ge,ye,Qe),Ee=ie.c,xe=ie.lc;else{if(!tt.p)throw"hufDecode issues";var ht;for(ht=0;ht<tt.lit;ht++){for(var vt=ae(O[tt.p[ht]]);xe<vt&&W.value<Be;)ee(Ee,xe,se,W),Ee=V.c,xe=V.lc;if(xe>=vt&&H(O[tt.p[ht]])==(Ee>>xe-vt&(1<<vt)-1)){xe-=vt,oe(tt.p[ht],ne,Ee,xe,se,D,W,ge,ye,Qe),Ee=ie.c,xe=ie.lc;break}}if(ht==tt.lit)throw"hufDecode issues"}}var Tt=8-J&7;for(Ee>>=Tt,xe-=Tt;xe>0;){var tt=z[Ee<<14-xe&16383];if(tt.len)xe-=tt.len,oe(tt.lit,ne,Ee,xe,se,D,W,ge,ye,Qe),Ee=ie.c,xe=ie.lc;else throw"hufDecode issues"}return!0}function st(O,z,se,D,W,J){var ne={value:0},Q=se.value,ge=Ye(z,se),ye=Ye(z,se);se.value+=4;var Ee=Ye(z,se);if(se.value+=4,ge<0||ge>=65537||ye<0||ye>=65537)throw"Something wrong with HUF_ENCSIZE";var xe=new Array(65537),Qe=new Array(16384);F(Qe);var Be=D-(se.value-Q);if(re(O,z,se,Be,ge,ye,xe),Ee>8*(D-(se.value-Q)))throw"Something wrong with hufUncompress";Y(xe,ge,ye,Qe),et(xe,Qe,O,z,se,Ee,ye,J,W,ne)}function te(O,z,se){for(var D=0;D<se;++D)z[D]=O[z[D]]}function Pe(O){for(var z=1;z<O.length;z++){var se=O[z-1]+O[z]-128;O[z]=se}}function we(O,z){for(var se=0,D=Math.floor((O.length+1)/2),W=0,J=O.length-1;!(W>J||(z[W++]=O[se++],W>J));)z[W++]=O[D++]}function Le(O){for(var z=O.byteLength,se=new Array,D=0,W=new DataView(O);z>0;){var J=W.getInt8(D++);if(J<0){var ne=-J;z-=ne+1;for(var Q=0;Q<ne;Q++)se.push(W.getUint8(D++))}else{var ne=J;z-=2;for(var ge=W.getUint8(D++),Q=0;Q<ne+1;Q++)se.push(ge)}}return se}function Ae(O,z,se,D,W,J){var bt=new DataView(J.buffer),ne=se[O.idx[0]].width,Q=se[O.idx[0]].height,ge=3,ye=Math.floor(ne/8),Ee=Math.ceil(ne/8),xe=Math.ceil(Q/8),Qe=ne-(Ee-1)*8,Be=Q-(xe-1)*8,Oe={value:0},tt=new Array(ge),ht=new Array(ge),vt=new Array(ge),Tt=new Array(ge),qe=new Array(ge);for(let Wt=0;Wt<ge;++Wt)qe[Wt]=z[O.idx[Wt]],tt[Wt]=Wt<1?0:tt[Wt-1]+Ee*xe,ht[Wt]=new Float32Array(64),vt[Wt]=new Uint16Array(64),Tt[Wt]=new Uint16Array(Ee*64);for(let Wt=0;Wt<xe;++Wt){var ze=8;Wt==xe-1&&(ze=Be);var Gt=8;for(let Ot=0;Ot<Ee;++Ot){Ot==Ee-1&&(Gt=Qe);for(let $t=0;$t<ge;++$t)vt[$t].fill(0),vt[$t][0]=W[tt[$t]++],ot(Oe,D,vt[$t]),Ve(vt[$t],ht[$t]),G(ht[$t]);k(ht);for(let $t=0;$t<ge;++$t)de(ht[$t],Tt[$t],Ot*64)}let In=0;for(let Ot=0;Ot<ge;++Ot){const $t=se[O.idx[Ot]].type;for(let gn=8*Wt;gn<8*Wt+ze;++gn){In=qe[Ot][gn];for(let zi=0;zi<ye;++zi){const $r=zi*64+(gn&7)*8;bt.setUint16(In+0*2*$t,Tt[Ot][$r+0],!0),bt.setUint16(In+1*2*$t,Tt[Ot][$r+1],!0),bt.setUint16(In+2*2*$t,Tt[Ot][$r+2],!0),bt.setUint16(In+3*2*$t,Tt[Ot][$r+3],!0),bt.setUint16(In+4*2*$t,Tt[Ot][$r+4],!0),bt.setUint16(In+5*2*$t,Tt[Ot][$r+5],!0),bt.setUint16(In+6*2*$t,Tt[Ot][$r+6],!0),bt.setUint16(In+7*2*$t,Tt[Ot][$r+7],!0),In+=8*2*$t}}if(ye!=Ee)for(let gn=8*Wt;gn<8*Wt+ze;++gn){const zi=qe[Ot][gn]+8*ye*2*$t,$r=ye*64+(gn&7)*8;for(let Us=0;Us<Gt;++Us)bt.setUint16(zi+Us*2*$t,Tt[Ot][$r+Us],!0)}}}for(var At=new Uint16Array(ne),bt=new DataView(J.buffer),cn=0;cn<ge;++cn){se[O.idx[cn]].decoded=!0;var Gn=se[O.idx[cn]].type;if(se[cn].type==2)for(var bn=0;bn<Q;++bn){const Wt=qe[cn][bn];for(var Yt=0;Yt<ne;++Yt)At[Yt]=bt.getUint16(Wt+Yt*2*Gn,!0);for(var Yt=0;Yt<ne;++Yt)bt.setFloat32(Wt+Yt*2*Gn,ve(At[Yt]),!0)}}}function ot(O,z,se){for(var D,W=1;W<64;)D=z[O.value],D==65280?W=64:D>>8==255?W+=D&255:(se[W]=D,W++),O.value++}function Ve(O,z){z[0]=ve(O[0]),z[1]=ve(O[1]),z[2]=ve(O[5]),z[3]=ve(O[6]),z[4]=ve(O[14]),z[5]=ve(O[15]),z[6]=ve(O[27]),z[7]=ve(O[28]),z[8]=ve(O[2]),z[9]=ve(O[4]),z[10]=ve(O[7]),z[11]=ve(O[13]),z[12]=ve(O[16]),z[13]=ve(O[26]),z[14]=ve(O[29]),z[15]=ve(O[42]),z[16]=ve(O[3]),z[17]=ve(O[8]),z[18]=ve(O[12]),z[19]=ve(O[17]),z[20]=ve(O[25]),z[21]=ve(O[30]),z[22]=ve(O[41]),z[23]=ve(O[43]),z[24]=ve(O[9]),z[25]=ve(O[11]),z[26]=ve(O[18]),z[27]=ve(O[24]),z[28]=ve(O[31]),z[29]=ve(O[40]),z[30]=ve(O[44]),z[31]=ve(O[53]),z[32]=ve(O[10]),z[33]=ve(O[19]),z[34]=ve(O[23]),z[35]=ve(O[32]),z[36]=ve(O[39]),z[37]=ve(O[45]),z[38]=ve(O[52]),z[39]=ve(O[54]),z[40]=ve(O[20]),z[41]=ve(O[22]),z[42]=ve(O[33]),z[43]=ve(O[38]),z[44]=ve(O[46]),z[45]=ve(O[51]),z[46]=ve(O[55]),z[47]=ve(O[60]),z[48]=ve(O[21]),z[49]=ve(O[34]),z[50]=ve(O[37]),z[51]=ve(O[47]),z[52]=ve(O[50]),z[53]=ve(O[56]),z[54]=ve(O[59]),z[55]=ve(O[61]),z[56]=ve(O[35]),z[57]=ve(O[36]),z[58]=ve(O[48]),z[59]=ve(O[49]),z[60]=ve(O[57]),z[61]=ve(O[58]),z[62]=ve(O[62]),z[63]=ve(O[63])}function G(O){const z=.5*Math.cos(.7853975),se=.5*Math.cos(3.14159/16),D=.5*Math.cos(3.14159/8),W=.5*Math.cos(3*3.14159/16),J=.5*Math.cos(5*3.14159/16),ne=.5*Math.cos(3*3.14159/8),Q=.5*Math.cos(7*3.14159/16);for(var ge=new Array(4),ye=new Array(4),Ee=new Array(4),xe=new Array(4),Qe=0;Qe<8;++Qe){var Be=Qe*8;ge[0]=D*O[Be+2],ge[1]=ne*O[Be+2],ge[2]=D*O[Be+6],ge[3]=ne*O[Be+6],ye[0]=se*O[Be+1]+W*O[Be+3]+J*O[Be+5]+Q*O[Be+7],ye[1]=W*O[Be+1]-Q*O[Be+3]-se*O[Be+5]-J*O[Be+7],ye[2]=J*O[Be+1]-se*O[Be+3]+Q*O[Be+5]+W*O[Be+7],ye[3]=Q*O[Be+1]-J*O[Be+3]+W*O[Be+5]-se*O[Be+7],Ee[0]=z*(O[Be+0]+O[Be+4]),Ee[3]=z*(O[Be+0]-O[Be+4]),Ee[1]=ge[0]+ge[3],Ee[2]=ge[1]-ge[2],xe[0]=Ee[0]+Ee[1],xe[1]=Ee[3]+Ee[2],xe[2]=Ee[3]-Ee[2],xe[3]=Ee[0]-Ee[1],O[Be+0]=xe[0]+ye[0],O[Be+1]=xe[1]+ye[1],O[Be+2]=xe[2]+ye[2],O[Be+3]=xe[3]+ye[3],O[Be+4]=xe[3]-ye[3],O[Be+5]=xe[2]-ye[2],O[Be+6]=xe[1]-ye[1],O[Be+7]=xe[0]-ye[0]}for(var Oe=0;Oe<8;++Oe)ge[0]=D*O[16+Oe],ge[1]=ne*O[16+Oe],ge[2]=D*O[48+Oe],ge[3]=ne*O[48+Oe],ye[0]=se*O[8+Oe]+W*O[24+Oe]+J*O[40+Oe]+Q*O[56+Oe],ye[1]=W*O[8+Oe]-Q*O[24+Oe]-se*O[40+Oe]-J*O[56+Oe],ye[2]=J*O[8+Oe]-se*O[24+Oe]+Q*O[40+Oe]+W*O[56+Oe],ye[3]=Q*O[8+Oe]-J*O[24+Oe]+W*O[40+Oe]-se*O[56+Oe],Ee[0]=z*(O[Oe]+O[32+Oe]),Ee[3]=z*(O[Oe]-O[32+Oe]),Ee[1]=ge[0]+ge[3],Ee[2]=ge[1]-ge[2],xe[0]=Ee[0]+Ee[1],xe[1]=Ee[3]+Ee[2],xe[2]=Ee[3]-Ee[2],xe[3]=Ee[0]-Ee[1],O[0+Oe]=xe[0]+ye[0],O[8+Oe]=xe[1]+ye[1],O[16+Oe]=xe[2]+ye[2],O[24+Oe]=xe[3]+ye[3],O[32+Oe]=xe[3]-ye[3],O[40+Oe]=xe[2]-ye[2],O[48+Oe]=xe[1]-ye[1],O[56+Oe]=xe[0]-ye[0]}function k(O){for(var z=0;z<64;++z){var se=O[0][z],D=O[1][z],W=O[2][z];O[0][z]=se+1.5747*W,O[1][z]=se-.1873*D-.4682*W,O[2][z]=se+1.8556*D}}function de(O,z,se){for(var D=0;D<64;++D)z[se+D]=zl.toHalfFloat(De(O[D]))}function De(O){return O<=1?Math.sign(O)*Math.pow(Math.abs(O),2.2):Math.sign(O)*Math.pow(P,Math.abs(O)-1)}function fe(O){return new DataView(O.array.buffer,O.offset.value,O.size)}function me(O){var z=O.viewer.buffer.slice(O.offset.value,O.offset.value+O.size),se=new Uint8Array(Le(z)),D=new Uint8Array(se.length);return Pe(se),we(se,D),new DataView(D.buffer)}function Ue(O){var z=O.array.slice(O.offset.value,O.offset.value+O.size),se=Sg(z),D=new Uint8Array(se.length);return Pe(se),we(se,D),new DataView(D.buffer)}function Ne(O){for(var z=O.viewer,se={value:O.offset.value},D=new Uint16Array(O.width*O.scanlineBlockSize*(O.channels*O.type)),W=new Uint8Array(8192),J=0,ne=new Array(O.channels),Q=0;Q<O.channels;Q++)ne[Q]={},ne[Q].start=J,ne[Q].end=ne[Q].start,ne[Q].nx=O.width,ne[Q].ny=O.lines,ne[Q].size=O.type,J+=ne[Q].nx*ne[Q].ny*ne[Q].size;var ge=le(z,se),ye=le(z,se);if(ye>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(ge<=ye)for(var Q=0;Q<ye-ge+1;Q++)W[Q+ge]=gt(z,se);var Ee=new Uint16Array(65536),xe=I(W,Ee),Qe=Ye(z,se);st(O.array,z,se,Qe,D,J);for(var Q=0;Q<O.channels;++Q)for(var Be=ne[Q],Oe=0;Oe<ne[Q].size;++Oe)ct(D,Be.start+Oe,Be.nx,Be.size,Be.ny,Be.nx*Be.size,xe);te(Ee,D,J);for(var tt=0,ht=new Uint8Array(D.buffer.byteLength),vt=0;vt<O.lines;vt++)for(var Tt=0;Tt<O.channels;Tt++){var Be=ne[Tt],qe=Be.nx*Be.size,ze=new Uint8Array(D.buffer,Be.end*2,qe*2);ht.set(ze,tt),tt+=qe*2,Be.end+=qe}return new DataView(ht.buffer)}function He(O){var z=O.array.slice(O.offset.value,O.offset.value+O.size),se=Sg(z);const D=O.lines*O.channels*O.width,W=O.type==1?new Uint16Array(D):new Uint32Array(D);let J=0,ne=0;const Q=new Array(4);for(let ge=0;ge<O.lines;ge++)for(let ye=0;ye<O.channels;ye++){let Ee=0;switch(O.type){case 1:Q[0]=J,Q[1]=Q[0]+O.width,J=Q[1]+O.width;for(let xe=0;xe<O.width;++xe){const Qe=se[Q[0]++]<<8|se[Q[1]++];Ee+=Qe,W[ne]=Ee,ne++}break;case 2:Q[0]=J,Q[1]=Q[0]+O.width,Q[2]=Q[1]+O.width,J=Q[2]+O.width;for(let xe=0;xe<O.width;++xe){const Qe=se[Q[0]++]<<24|se[Q[1]++]<<16|se[Q[2]++]<<8;Ee+=Qe,W[ne]=Ee,ne++}break}}return new DataView(W.buffer)}function lt(O){var z=O.viewer,se={value:O.offset.value},D=new Uint8Array(O.width*O.lines*(O.channels*O.type*2)),W={version:wt(z,se),unknownUncompressedSize:wt(z,se),unknownCompressedSize:wt(z,se),acCompressedSize:wt(z,se),dcCompressedSize:wt(z,se),rleCompressedSize:wt(z,se),rleUncompressedSize:wt(z,se),rleRawSize:wt(z,se),totalAcUncompressedCount:wt(z,se),totalDcUncompressedCount:wt(z,se),acCompression:wt(z,se)};if(W.version<2)throw"EXRLoader.parse: "+oi.compression+" version "+W.version+" is unsupported";for(var J=new Array,ne=le(z,se)-2;ne>0;){var Q=pt(z.buffer,se),ge=gt(z,se),ye=ge>>2&3,Ee=(ge>>4)-1,xe=new Int8Array([Ee])[0],Qe=gt(z,se);J.push({name:Q,index:xe,type:Qe,compression:ye}),ne-=Q.length+3}for(var Be=oi.channels,Oe=new Array(O.channels),tt=0;tt<O.channels;++tt){var ht=Oe[tt]={},vt=Be[tt];ht.name=vt.name,ht.compression=0,ht.decoded=!1,ht.type=vt.pixelType,ht.pLinear=vt.pLinear,ht.width=O.width,ht.height=O.lines}for(var Tt={idx:new Array(3)},qe=0;qe<O.channels;++qe)for(var ht=Oe[qe],tt=0;tt<J.length;++tt){var ze=J[tt];ht.name==ze.name&&(ht.compression=ze.compression,ze.index>=0&&(Tt.idx[ze.index]=qe),ht.offset=qe)}if(W.acCompressedSize>0)switch(W.acCompression){case 0:var bt=new Uint16Array(W.totalAcUncompressedCount);st(O.array,z,se,W.acCompressedSize,bt,W.totalAcUncompressedCount);break;case 1:var Gt=O.array.slice(se.value,se.value+W.totalAcUncompressedCount),At=Sg(Gt),bt=new Uint16Array(At.buffer);se.value+=W.totalAcUncompressedCount;break}if(W.dcCompressedSize>0){var cn={array:O.array,offset:se,size:W.dcCompressedSize},Gn=new Uint16Array(Ue(cn).buffer);se.value+=W.dcCompressedSize}if(W.rleRawSize>0){var Gt=O.array.slice(se.value,se.value+W.rleCompressedSize),At=Sg(Gt),bn=Le(At.buffer);se.value+=W.rleCompressedSize}for(var Yt=0,Wt=new Array(Oe.length),tt=0;tt<Wt.length;++tt)Wt[tt]=new Array;for(var In=0;In<O.lines;++In)for(var Ot=0;Ot<Oe.length;++Ot)Wt[Ot].push(Yt),Yt+=Oe[Ot].width*O.type*2;Ae(Tt,Wt,Oe,bt,Gn,D);for(var tt=0;tt<Oe.length;++tt){var ht=Oe[tt];if(!ht.decoded)switch(ht.compression){case 2:for(var $t=0,gn=0,In=0;In<O.lines;++In){for(var zi=Wt[tt][$t],$r=0;$r<ht.width;++$r){for(var Us=0;Us<2*ht.type;++Us)D[zi++]=bn[gn+Us*ht.width*ht.height];gn++}$t++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(D.buffer)}function pt(O,z){for(var se=new Uint8Array(O),D=0;se[z.value+D]!=0;)D+=1;var W=new TextDecoder().decode(se.slice(z.value,z.value+D));return z.value=z.value+D+1,W}function Ie(O,z,se){var D=new TextDecoder().decode(new Uint8Array(O).slice(z.value,z.value+se));return z.value=z.value+se,D}function Ht(O,z){var se=ft(O,z),D=Ye(O,z);return[se,D]}function Ct(O,z){var se=Ye(O,z),D=Ye(O,z);return[se,D]}function ft(O,z){var se=O.getInt32(z.value,!0);return z.value=z.value+4,se}function Ye(O,z){var se=O.getUint32(z.value,!0);return z.value=z.value+4,se}function Ze(O,z){var se=O[z.value];return z.value=z.value+1,se}function gt(O,z){var se=O.getUint8(z.value);return z.value=z.value+1,se}const wt=function(O,z){let se;return"getBigInt64"in DataView.prototype?se=Number(O.getBigInt64(z.value,!0)):se=O.getUint32(z.value+4,!0)+Number(O.getUint32(z.value,!0)<<32),z.value+=8,se};function Rt(O,z){var se=O.getFloat32(z.value,!0);return z.value+=4,se}function Bt(O,z){return zl.toHalfFloat(Rt(O,z))}function ve(O){var z=(O&31744)>>10,se=O&1023;return(O>>15?-1:1)*(z?z===31?se?NaN:1/0:Math.pow(2,z-15)*(1+se/1024):6103515625e-14*(se/1024))}function le(O,z){var se=O.getUint16(z.value,!0);return z.value+=2,se}function We(O,z){return ve(le(O,z))}function $e(O,z,se,D){for(var W=se.value,J=[];se.value<W+D-1;){var ne=pt(z,se),Q=ft(O,se),ge=gt(O,se);se.value+=3;var ye=ft(O,se),Ee=ft(O,se);J.push({name:ne,pixelType:Q,pLinear:ge,xSampling:ye,ySampling:Ee})}return se.value+=1,J}function Et(O,z){var se=Rt(O,z),D=Rt(O,z),W=Rt(O,z),J=Rt(O,z),ne=Rt(O,z),Q=Rt(O,z),ge=Rt(O,z),ye=Rt(O,z);return{redX:se,redY:D,greenX:W,greenY:J,blueX:ne,blueY:Q,whiteX:ge,whiteY:ye}}function mt(O,z){var se=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],D=gt(O,z);return se[D]}function sn(O,z){var se=Ye(O,z),D=Ye(O,z),W=Ye(O,z),J=Ye(O,z);return{xMin:se,yMin:D,xMax:W,yMax:J}}function rn(O,z){var se=["INCREASING_Y"],D=gt(O,z);return se[D]}function Pn(O,z){var se=Rt(O,z),D=Rt(O,z);return[se,D]}function qn(O,z){var se=Rt(O,z),D=Rt(O,z),W=Rt(O,z);return[se,D,W]}function on(O,z,se,D,W){if(D==="string"||D==="stringvector"||D==="iccProfile")return Ie(z,se,W);if(D==="chlist")return $e(O,z,se,W);if(D==="chromaticities")return Et(O,se);if(D==="compression")return mt(O,se);if(D==="box2i")return sn(O,se);if(D==="lineOrder")return rn(O,se);if(D==="float")return Rt(O,se);if(D==="v2f")return Pn(O,se);if(D==="v3f")return qn(O,se);if(D==="int")return ft(O,se);if(D==="rational")return Ht(O,se);if(D==="timecode")return Ct(O,se);if(D==="preview")return se.value+=W,"skipped";se.value+=W}function sr(O,z,se){const D={};if(O.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";D.version=O.getUint8(4);const W=O.getUint8(5);D.spec={singleTile:!!(W&2),longName:!!(W&4),deepFormat:!!(W&8),multiPart:!!(W&16)},se.value=8;for(var J=!0;J;){var ne=pt(z,se);if(ne==0)J=!1;else{var Q=pt(z,se),ge=Ye(O,se),ye=on(O,z,se,Q,ge);ye===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${Q}'.`):D[ne]=ye}}if(W&-5)throw console.error("EXRHeader:",D),"THREE.EXRLoader: provided file is currently unsupported.";return D}function si(O,z,se,D,W){const J={size:0,viewer:z,array:se,offset:D,width:O.dataWindow.xMax-O.dataWindow.xMin+1,height:O.dataWindow.yMax-O.dataWindow.yMin+1,channels:O.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:O.channels[0].pixelType,uncompress:null,getter:null,format:null,[xf?"colorSpace":"encoding"]:null};switch(O.compression){case"NO_COMPRESSION":J.lines=1,J.uncompress=fe;break;case"RLE_COMPRESSION":J.lines=1,J.uncompress=me;break;case"ZIPS_COMPRESSION":J.lines=1,J.uncompress=Ue;break;case"ZIP_COMPRESSION":J.lines=16,J.uncompress=Ue;break;case"PIZ_COMPRESSION":J.lines=32,J.uncompress=Ne;break;case"PXR24_COMPRESSION":J.lines=16,J.uncompress=He;break;case"DWAA_COMPRESSION":J.lines=32,J.uncompress=lt;break;case"DWAB_COMPRESSION":J.lines=256,J.uncompress=lt;break;default:throw"EXRLoader.parse: "+O.compression+" is unsupported"}if(J.scanlineBlockSize=J.lines,J.type==1)switch(W){case wr:J.getter=We,J.inputSize=2;break;case qr:J.getter=le,J.inputSize=2;break}else if(J.type==2)switch(W){case wr:J.getter=Rt,J.inputSize=4;break;case qr:J.getter=Bt,J.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+J.type+" for "+O.compression+".";J.blockCount=(O.dataWindow.yMax+1)/J.scanlineBlockSize;for(var ne=0;ne<J.blockCount;ne++)wt(z,D);J.outputChannels=J.channels==3?4:J.channels;const Q=J.width*J.height*J.outputChannels;switch(W){case wr:J.byteArray=new Float32Array(Q),J.channels<J.outputChannels&&J.byteArray.fill(1,0,Q);break;case qr:J.byteArray=new Uint16Array(Q),J.channels<J.outputChannels&&J.byteArray.fill(15360,0,Q);break;default:console.error("THREE.EXRLoader: unsupported type: ",W);break}return J.bytesPerLine=J.width*J.inputSize*J.channels,J.outputChannels==4?J.format=Ur:J.format=dA,xf?J.colorSpace="srgb-linear":J.encoding=3e3,J}const ks=new DataView(e),sl=new Uint8Array(e),Ui={value:0},oi=sr(ks,e,Ui),Dt=si(oi,ks,sl,Ui,this.type),ol={value:0},vc={R:0,G:1,B:2,A:3,Y:0};for(let O=0;O<Dt.height/Dt.scanlineBlockSize;O++){const z=Ye(ks,Ui);Dt.size=Ye(ks,Ui),Dt.lines=z+Dt.scanlineBlockSize>Dt.height?Dt.height-z:Dt.scanlineBlockSize;const D=Dt.size<Dt.lines*Dt.bytesPerLine?Dt.uncompress(Dt):fe(Dt);Ui.value+=Dt.size;for(let W=0;W<Dt.scanlineBlockSize;W++){const J=W+O*Dt.scanlineBlockSize;if(J>=Dt.height)break;for(let ne=0;ne<Dt.channels;ne++){const Q=vc[oi.channels[ne].name];for(let ge=0;ge<Dt.width;ge++){ol.value=(W*(Dt.channels*Dt.width)+ne*Dt.width+ge)*Dt.inputSize;const ye=(Dt.height-1-J)*(Dt.width*Dt.outputChannels)+ge*Dt.outputChannels+Q;Dt.byteArray[ye]=Dt.getter(D,ol)}}}}return{header:oi,width:Dt.width,height:Dt.height,data:Dt.byteArray,format:Dt.format,[xf?"colorSpace":"encoding"]:Dt[xf?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,r,i){function s(o,a){xf?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=mn,o.magFilter=mn,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,a)}return super.load(e,s,r,i)}}const Cx=new WeakMap;class n7 extends Vr{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,i){const s=new Ni(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(i)},r,i)}decodeDracoFile(e,t,r,i){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const c=t.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=c.name)}const r=JSON.stringify(t);if(Cx.has(e)){const l=Cx.get(e);if(l.key===r)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(i=l,new Promise((c,d)=>{i._callbacks[s]={resolve:c,reject:d},i.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),Cx.set(e,{key:r,promise:a}),a}_createGeometry(e){const t=new Lt;e.index&&t.setIndex(new Zt(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r],s=i.name,o=i.array,a=i.itemSize;t.setAttribute(s,new Zt(o,a))}return t}_loadLibrary(e,t){const r=new Ni(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((i,s)=>{r.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{const i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const s=r7.toString(),o=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const o=s.data;switch(o.type){case"decode":i._callbacks[o.id].resolve(o);break;case"error":i._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function r7(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(d){n.onModuleLoaded=function(h){d({draco:h})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(d=>{const h=d.draco,p=new h.Decoder,m=new h.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const v=t(h,p,m,c),_=v.attributes.map(y=>y.array.buffer);v.index&&_.push(v.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:v},_)}catch(v){console.error(v),self.postMessage({type:"error",id:a.id,error:v.message})}finally{h.destroy(m),h.destroy(p)}});break}};function t(o,a,l,c){const d=c.attributeIDs,h=c.attributeTypes;let p,m;const v=a.GetEncodedGeometryType(l);if(v===o.TRIANGULAR_MESH)p=new o.Mesh,m=a.DecodeBufferToMesh(l,p);else if(v===o.POINT_CLOUD)p=new o.PointCloud,m=a.DecodeBufferToPointCloud(l,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const _={index:null,attributes:[]};for(const y in d){const g=self[h[y]];let S,E;if(c.useUniqueIDs)E=d[y],S=a.GetAttributeByUniqueId(p,E);else{if(E=a.GetAttributeId(p,o[d[y]]),E===-1)continue;S=a.GetAttribute(p,E)}_.attributes.push(i(o,a,p,y,g,S))}return v===o.TRIANGULAR_MESH&&(_.index=r(o,a,p)),o.destroy(p),_}function r(o,a,l){const d=l.num_faces()*3,h=d*4,p=o._malloc(h);a.GetTrianglesUInt32Array(l,h,p);const m=new Uint32Array(o.HEAPF32.buffer,p,d).slice();return o._free(p),{array:m,itemSize:1}}function i(o,a,l,c,d,h){const p=h.num_components(),v=l.num_points()*p,_=v*d.BYTES_PER_ELEMENT,y=s(o,d),g=o._malloc(_);a.GetAttributeDataArrayForAllPoints(l,h,y,_,g);const S=new d(o.HEAPF32.buffer,g,v).slice();return o._free(g),{name:c,array:S,itemSize:p}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let Ag;const Tx=()=>{if(Ag)return Ag;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=n;WebAssembly.validate(t)&&(i=e);let s;const o=WebAssembly.instantiate(a(i),{}).then(h=>{s=h.instance,s.exports.__wasm_call_ctors()});function a(h){const p=new Uint8Array(h.length);for(let v=0;v<h.length;++v){const _=h.charCodeAt(v);p[v]=_>96?_-71:_>64?_-65:_>47?_+4:_>46?63:62}let m=0;for(let v=0;v<h.length;++v)p[m++]=p[v]<60?r[p[v]]:(p[v]-60)*64+p[++v];return p.buffer.slice(0,m)}function l(h,p,m,v,_,y){const g=s.exports.sbrk,S=m+3&-4,E=g(S*v),w=g(_.length),T=new Uint8Array(s.exports.memory.buffer);T.set(_,w);const b=h(E,m,v,w,_.length);if(b===0&&y&&y(E,S,v),p.set(T.subarray(E,E+m*v)),g(E-g(0)),b!==0)throw new Error(`Malformed buffer data: ${b}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},d={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Ag={ready:o,supported:!0,decodeVertexBuffer(h,p,m,v,_){l(s.exports.meshopt_decodeVertexBuffer,h,p,m,v,s.exports[c[_]])},decodeIndexBuffer(h,p,m,v){l(s.exports.meshopt_decodeIndexBuffer,h,p,m,v)},decodeIndexSequence(h,p,m,v){l(s.exports.meshopt_decodeIndexSequence,h,p,m,v)},decodeGltfBuffer(h,p,m,v,_,y){l(s.exports[d[_]],h,p,m,v,s.exports[c[y]])}},Ag};function up(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let r=0;r<t.length;r++)if(!Object.prototype.hasOwnProperty.call(e,t[r])||!Object.is(n[t[r]],e[t[r]]))return!1;return!0}let wg=null,dD="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function fD(n,e,t){return r=>{t&&t(r),n&&(wg||(wg=new n7),wg.setDecoderPath(typeof n=="string"?n:dD),r.setDRACOLoader(wg)),e&&r.setMeshoptDecoder(typeof Tx=="function"?Tx():Tx)}}function ac(n,e=!0,t=!0,r){return _d(aw,n,fD(e,t,r))}ac.preload=(n,e=!0,t=!0,r)=>_d.preload(aw,n,fD(e,t,r));ac.clear=n=>_d.clear(aw,n);ac.setDecoderPath=n=>{dD=n};/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const Bn={LEFT:1,RIGHT:2,MIDDLE:4},Me=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),tu={NONE:0,IN:1,OUT:-1};function Cl(n){return n.isPerspectiveCamera}function _a(n){return n.isOrthographicCamera}const nu=Math.PI*2,LR=Math.PI/2,hD=1e-5,Ef=Math.PI/180;function Es(n,e,t){return Math.max(e,Math.min(t,n))}function yn(n,e=hD){return Math.abs(n)<e}function an(n,e,t=hD){return yn(n-e,t)}function BR(n,e){return Math.round(n/e)*e}function Sf(n){return isFinite(n)?n:n<0?-Number.MAX_VALUE:Number.MAX_VALUE}function Af(n){return Math.abs(n)<Number.MAX_VALUE?n:n*(1/0)}function Mg(n,e,t,r,i=1/0,s){r=Math.max(1e-4,r);const o=2/r,a=o*s,l=1/(1+a+.48*a*a+.235*a*a*a);let c=n-e;const d=e,h=i*r;c=Es(c,-h,h),e=n-c;const p=(t.value+o*c)*s;t.value=(t.value-o*p)*l;let m=e+(c+p)*l;return d-n>0==m>d&&(m=d,t.value=(m-d)/s),m}function DR(n,e,t,r,i=1/0,s,o){r=Math.max(1e-4,r);const a=2/r,l=a*s,c=1/(1+l+.48*l*l+.235*l*l*l);let d=e.x,h=e.y,p=e.z,m=n.x-d,v=n.y-h,_=n.z-p;const y=d,g=h,S=p,E=i*r,w=E*E,T=m*m+v*v+_*_;if(T>w){const j=Math.sqrt(T);m=m/j*E,v=v/j*E,_=_/j*E}d=n.x-m,h=n.y-v,p=n.z-_;const b=(t.x+a*m)*s,R=(t.y+a*v)*s,B=(t.z+a*_)*s;t.x=(t.x-a*b)*c,t.y=(t.y-a*R)*c,t.z=(t.z-a*B)*c,o.x=d+(m+b)*c,o.y=h+(v+R)*c,o.z=p+(_+B)*c;const P=y-n.x,I=g-n.y,F=S-n.z,$=o.x-y,Z=o.y-g,U=o.z-S;return P*$+I*Z+F*U>0&&(o.x=y,o.y=g,o.z=S,t.x=(o.x-y)/s,t.y=(o.y-g)/s,t.z=(o.z-S)/s),o}function Rx(n,e){e.set(0,0),n.forEach(t=>{e.x+=t.clientX,e.y+=t.clientY}),e.x/=n.length,e.y/=n.length}function Px(n,e){return _a(n)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}class i7{constructor(){this._listeners={}}addEventListener(e,t){const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e)}}}var Ix;const s7="2.8.1",bg=1/8,o7=/Mac/.test((Ix=globalThis==null?void 0:globalThis.navigator)===null||Ix===void 0?void 0:Ix.platform);let Mt,OR,Cg,Lx,ui,Nt,nn,ru,wf,Js,Ys,Tl,NR,FR,Ki,Mf,iu,kR,Bx,UR,Dx,Ox,Tg,Nx=class HE extends i7{static install(e){Mt=e.THREE,OR=Object.freeze(new Mt.Vector3(0,0,0)),Cg=Object.freeze(new Mt.Vector3(0,1,0)),Lx=Object.freeze(new Mt.Vector3(0,0,1)),ui=new Mt.Vector2,Nt=new Mt.Vector3,nn=new Mt.Vector3,ru=new Mt.Vector3,wf=new Mt.Vector3,Js=new Mt.Vector3,Ys=new Mt.Vector3,Tl=new Mt.Vector3,NR=new Mt.Vector3,FR=new Mt.Vector3,Ki=new Mt.Spherical,Mf=new Mt.Spherical,iu=new Mt.Box3,kR=new Mt.Box3,Bx=new Mt.Sphere,UR=new Mt.Quaternion,Dx=new Mt.Quaternion,Ox=new Mt.Matrix4,Tg=new Mt.Raycaster}static get ACTION(){return Me}constructor(e,t){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=Me.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=tu.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new Mt.Vector3,this._focalOffsetVelocity=new Mt.Vector3,this._zoomVelocity={value:0},this._truckInternal=(g,S,E)=>{let w,T;if(Cl(this._camera)){const b=Nt.copy(this._camera.position).sub(this._target),R=this._camera.getEffectiveFOV()*Ef,B=b.length()*Math.tan(R*.5);w=this.truckSpeed*g*B/this._elementRect.height,T=this.truckSpeed*S*B/this._elementRect.height}else if(_a(this._camera)){const b=this._camera;w=g*(b.right-b.left)/b.zoom/this._elementRect.width,T=S*(b.top-b.bottom)/b.zoom/this._elementRect.height}else return;this.verticalDragToForward?(E?this.setFocalOffset(this._focalOffsetEnd.x+w,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(w,0,!0),this.forward(-T,!0)):E?this.setFocalOffset(this._focalOffsetEnd.x+w,this._focalOffsetEnd.y+T,this._focalOffsetEnd.z,!0):this.truck(w,T,!0)},this._rotateInternal=(g,S)=>{const E=nu*this.azimuthRotateSpeed*g/this._elementRect.height,w=nu*this.polarRotateSpeed*S/this._elementRect.height;this.rotate(E,w,!0)},this._dollyInternal=(g,S,E)=>{const w=Math.pow(.95,-g*this.dollySpeed),T=this._sphericalEnd.radius,b=this._sphericalEnd.radius*w,R=Es(b,this.minDistance,this.maxDistance),B=R-b;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(b,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(B,!0),this._dollyToNoClamp(R,!0)):this._dollyToNoClamp(R,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?b:R)-T,this._dollyControlCoord.set(S,E)),this._lastDollyDirection=Math.sign(-g)},this._zoomInternal=(g,S,E)=>{const w=Math.pow(.95,g*this.dollySpeed),T=this._zoom,b=this._zoom*w;this.zoomTo(b,!0),this.dollyToCursor&&(this._changedZoom+=b-T,this._dollyControlCoord.set(S,E))},typeof Mt>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=new Mt.Quaternion().setFromUnitVectors(this._camera.up,Cg),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=Me.NONE,this._target=new Mt.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new Mt.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new Mt.Spherical().setFromVector3(Nt.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new Mt.Vector3,new Mt.Vector3,new Mt.Vector3,new Mt.Vector3],this._updateNearPlaneCorners(),this._boundary=new Mt.Box3(new Mt.Vector3(-1/0,-1/0,-1/0),new Mt.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new Mt.Vector2,this.mouseButtons={left:Me.ROTATE,middle:Me.DOLLY,right:Me.TRUCK,wheel:Cl(this._camera)?Me.DOLLY:_a(this._camera)?Me.ZOOM:Me.NONE},this.touches={one:Me.TOUCH_ROTATE,two:Cl(this._camera)?Me.TOUCH_DOLLY_TRUCK:_a(this._camera)?Me.TOUCH_ZOOM_TRUCK:Me.NONE,three:Me.TOUCH_TRUCK};const r=new Mt.Vector2,i=new Mt.Vector2,s=new Mt.Vector2,o=g=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const w=this._domElement.getBoundingClientRect(),T=g.clientX/w.width,b=g.clientY/w.height;if(T<this._interactiveArea.left||T>this._interactiveArea.right||b<this._interactiveArea.top||b>this._interactiveArea.bottom)return}const S=g.pointerType!=="mouse"?null:(g.buttons&Bn.LEFT)===Bn.LEFT?Bn.LEFT:(g.buttons&Bn.MIDDLE)===Bn.MIDDLE?Bn.MIDDLE:(g.buttons&Bn.RIGHT)===Bn.RIGHT?Bn.RIGHT:null;if(S!==null){const w=this._findPointerByMouseButton(S);w&&this._disposePointer(w)}if((g.buttons&Bn.LEFT)===Bn.LEFT&&this._lockedPointer)return;const E={pointerId:g.pointerId,clientX:g.clientX,clientY:g.clientY,deltaX:0,deltaY:0,mouseButton:S};this._activePointers.push(E),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.ownerDocument.addEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",l),this._isDragging=!0,p(g)},a=g=>{g.cancelable&&g.preventDefault();const S=g.pointerId,E=this._lockedPointer||this._findPointerById(S);if(E){if(E.clientX=g.clientX,E.clientY=g.clientY,E.deltaX=g.movementX,E.deltaY=g.movementY,this._state=0,g.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(g.buttons&Bn.LEFT)===Bn.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(g.buttons&Bn.MIDDLE)===Bn.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(g.buttons&Bn.RIGHT)===Bn.RIGHT&&(this._state=this._state|this.mouseButtons.right);m()}},l=g=>{const S=this._findPointerById(g.pointerId);if(!(S&&S===this._lockedPointer)){if(S&&this._disposePointer(S),g.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=Me.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=Me.NONE;v()}};let c=-1;const d=g=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===Me.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const b=this._domElement.getBoundingClientRect(),R=g.clientX/b.width,B=g.clientY/b.height;if(R<this._interactiveArea.left||R>this._interactiveArea.right||B<this._interactiveArea.top||B>this._interactiveArea.bottom)return}if(g.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===Me.ROTATE||this.mouseButtons.wheel===Me.TRUCK){const b=performance.now();c-b<1e3&&this._getClientRect(this._elementRect),c=b}const S=o7?-1:-3,E=g.deltaMode===1?g.deltaY/S:g.deltaY/(S*10),w=this.dollyToCursor?(g.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,T=this.dollyToCursor?(g.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case Me.ROTATE:{this._rotateInternal(g.deltaX,g.deltaY),this._isUserControllingRotate=!0;break}case Me.TRUCK:{this._truckInternal(g.deltaX,g.deltaY,!1),this._isUserControllingTruck=!0;break}case Me.OFFSET:{this._truckInternal(g.deltaX,g.deltaY,!0),this._isUserControllingOffset=!0;break}case Me.DOLLY:{this._dollyInternal(-E,w,T),this._isUserControllingDolly=!0;break}case Me.ZOOM:{this._zoomInternal(-E,w,T),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},h=g=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===HE.ACTION.NONE){const S=g instanceof PointerEvent?g.pointerId:0,E=this._findPointerById(S);E&&this._disposePointer(E),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l);return}g.preventDefault()}},p=g=>{if(!this._enabled)return;if(Rx(this._activePointers,ui),this._getClientRect(this._elementRect),r.copy(ui),i.copy(ui),this._activePointers.length>=2){const E=ui.x-this._activePointers[1].clientX,w=ui.y-this._activePointers[1].clientY,T=Math.sqrt(E*E+w*w);s.set(0,T);const b=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,R=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;i.set(b,R)}if(this._state=0,!g)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in g&&g.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(g.buttons&Bn.LEFT)===Bn.LEFT&&(this._state=this._state|this.mouseButtons.left),(g.buttons&Bn.MIDDLE)===Bn.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(g.buttons&Bn.RIGHT)===Bn.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&Me.ROTATE)===Me.ROTATE||(this._state&Me.TOUCH_ROTATE)===Me.TOUCH_ROTATE||(this._state&Me.TOUCH_DOLLY_ROTATE)===Me.TOUCH_DOLLY_ROTATE||(this._state&Me.TOUCH_ZOOM_ROTATE)===Me.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&Me.TRUCK)===Me.TRUCK||(this._state&Me.TOUCH_TRUCK)===Me.TOUCH_TRUCK||(this._state&Me.TOUCH_DOLLY_TRUCK)===Me.TOUCH_DOLLY_TRUCK||(this._state&Me.TOUCH_ZOOM_TRUCK)===Me.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&Me.DOLLY)===Me.DOLLY||(this._state&Me.TOUCH_DOLLY)===Me.TOUCH_DOLLY||(this._state&Me.TOUCH_DOLLY_TRUCK)===Me.TOUCH_DOLLY_TRUCK||(this._state&Me.TOUCH_DOLLY_OFFSET)===Me.TOUCH_DOLLY_OFFSET||(this._state&Me.TOUCH_DOLLY_ROTATE)===Me.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&Me.ZOOM)===Me.ZOOM||(this._state&Me.TOUCH_ZOOM)===Me.TOUCH_ZOOM||(this._state&Me.TOUCH_ZOOM_TRUCK)===Me.TOUCH_ZOOM_TRUCK||(this._state&Me.TOUCH_ZOOM_OFFSET)===Me.TOUCH_ZOOM_OFFSET||(this._state&Me.TOUCH_ZOOM_ROTATE)===Me.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&Me.OFFSET)===Me.OFFSET||(this._state&Me.TOUCH_OFFSET)===Me.TOUCH_OFFSET||(this._state&Me.TOUCH_DOLLY_OFFSET)===Me.TOUCH_DOLLY_OFFSET||(this._state&Me.TOUCH_ZOOM_OFFSET)===Me.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},m=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,Rx(this._activePointers,ui);const S=this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,E=S?-S.deltaX:i.x-ui.x,w=S?-S.deltaY:i.y-ui.y;if(i.copy(ui),((this._state&Me.ROTATE)===Me.ROTATE||(this._state&Me.TOUCH_ROTATE)===Me.TOUCH_ROTATE||(this._state&Me.TOUCH_DOLLY_ROTATE)===Me.TOUCH_DOLLY_ROTATE||(this._state&Me.TOUCH_ZOOM_ROTATE)===Me.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(E,w),this._isUserControllingRotate=!0),(this._state&Me.DOLLY)===Me.DOLLY||(this._state&Me.ZOOM)===Me.ZOOM){const T=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,b=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0,R=this.dollyDragInverted?-1:1;(this._state&Me.DOLLY)===Me.DOLLY?(this._dollyInternal(R*w*bg,T,b),this._isUserControllingDolly=!0):(this._zoomInternal(R*w*bg,T,b),this._isUserControllingZoom=!0)}if((this._state&Me.TOUCH_DOLLY)===Me.TOUCH_DOLLY||(this._state&Me.TOUCH_ZOOM)===Me.TOUCH_ZOOM||(this._state&Me.TOUCH_DOLLY_TRUCK)===Me.TOUCH_DOLLY_TRUCK||(this._state&Me.TOUCH_ZOOM_TRUCK)===Me.TOUCH_ZOOM_TRUCK||(this._state&Me.TOUCH_DOLLY_OFFSET)===Me.TOUCH_DOLLY_OFFSET||(this._state&Me.TOUCH_ZOOM_OFFSET)===Me.TOUCH_ZOOM_OFFSET||(this._state&Me.TOUCH_DOLLY_ROTATE)===Me.TOUCH_DOLLY_ROTATE||(this._state&Me.TOUCH_ZOOM_ROTATE)===Me.TOUCH_ZOOM_ROTATE){const T=ui.x-this._activePointers[1].clientX,b=ui.y-this._activePointers[1].clientY,R=Math.sqrt(T*T+b*b),B=s.y-R;s.set(0,R);const P=this.dollyToCursor?(i.x-this._elementRect.x)/this._elementRect.width*2-1:0,I=this.dollyToCursor?(i.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&Me.TOUCH_DOLLY)===Me.TOUCH_DOLLY||(this._state&Me.TOUCH_DOLLY_ROTATE)===Me.TOUCH_DOLLY_ROTATE||(this._state&Me.TOUCH_DOLLY_TRUCK)===Me.TOUCH_DOLLY_TRUCK||(this._state&Me.TOUCH_DOLLY_OFFSET)===Me.TOUCH_DOLLY_OFFSET?(this._dollyInternal(B*bg,P,I),this._isUserControllingDolly=!0):(this._zoomInternal(B*bg,P,I),this._isUserControllingZoom=!0)}((this._state&Me.TRUCK)===Me.TRUCK||(this._state&Me.TOUCH_TRUCK)===Me.TOUCH_TRUCK||(this._state&Me.TOUCH_DOLLY_TRUCK)===Me.TOUCH_DOLLY_TRUCK||(this._state&Me.TOUCH_ZOOM_TRUCK)===Me.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(E,w,!1),this._isUserControllingTruck=!0),((this._state&Me.OFFSET)===Me.OFFSET||(this._state&Me.TOUCH_OFFSET)===Me.TOUCH_OFFSET||(this._state&Me.TOUCH_DOLLY_OFFSET)===Me.TOUCH_DOLLY_OFFSET||(this._state&Me.TOUCH_ZOOM_OFFSET)===Me.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(E,w,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},v=()=>{Rx(this._activePointers,ui),i.copy(ui),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",_),this._domElement.ownerDocument.addEventListener("pointerlockerror",y),this._domElement.ownerDocument.addEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",l),p())},this.unlockPointer=()=>{var g,S,E;this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),(g=this._domElement)===null||g===void 0||g.ownerDocument.exitPointerLock(),(S=this._domElement)===null||S===void 0||S.ownerDocument.removeEventListener("pointerlockchange",_),(E=this._domElement)===null||E===void 0||E.ownerDocument.removeEventListener("pointerlockerror",y),this.cancel()};const _=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},y=()=>{this.unlockPointer()};this._addAllEventListeners=g=>{this._domElement=g,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",o),this._domElement.addEventListener("pointercancel",l),this._domElement.addEventListener("wheel",d,{passive:!1}),this._domElement.addEventListener("contextmenu",h)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",o),this._domElement.removeEventListener("pointercancel",l),this._domElement.removeEventListener("wheel",d,{passive:!1}),this._domElement.removeEventListener("contextmenu",h),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.ownerDocument.removeEventListener("pointerlockchange",_),this._domElement.ownerDocument.removeEventListener("pointerlockerror",y))},this.cancel=()=>{this._state!==Me.NONE&&(this._state=Me.NONE,this._activePointers.length=0,v())},t&&this.connect(t),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=Es(e.width,0,1),this._interactiveArea.height=Es(e.height,0,1),this._interactiveArea.x=Es(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=Es(e.y,0,1-this._interactiveArea.height)}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t,r=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,r)}rotateAzimuthTo(e,t=!1){return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e,t=!1){return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t,r=!1){this._isUserControllingRotate=!1;const i=Es(e,this.minAzimuthAngle,this.maxAzimuthAngle),s=Es(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=i,this._sphericalEnd.phi=s,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,r||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const o=!r||an(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&an(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(o)}dolly(e,t=!1){return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e,t=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=tu.NONE,this._changedDolly=0,this._dollyToNoClamp(Es(e,this.minDistance,this.maxDistance),t)}_dollyToNoClamp(e,t=!1){const r=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const o=this._collisionTest(),a=an(o,this._spherical.radius);if(!(r>e)&&a)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,o)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);const s=!t||an(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(s)}dollyInFixed(e,t=!1){this._targetEnd.add(this._getCameraDirection(wf).multiplyScalar(e)),t||this._target.copy(this._targetEnd);const r=!t||an(this._target.x,this._targetEnd.x,this.restThreshold)&&an(this._target.y,this._targetEnd.y,this.restThreshold)&&an(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(r)}zoom(e,t=!1){return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e,t=!1){this._isUserControllingZoom=!1,this._zoomEnd=Es(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);const r=!t||an(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(r)}pan(e,t,r=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,t,r)}truck(e,t,r=!1){this._camera.updateMatrix(),Js.setFromMatrixColumn(this._camera.matrix,0),Ys.setFromMatrixColumn(this._camera.matrix,1),Js.multiplyScalar(e),Ys.multiplyScalar(-t);const i=Nt.copy(Js).add(Ys),s=nn.copy(this._targetEnd).add(i);return this.moveTo(s.x,s.y,s.z,r)}forward(e,t=!1){Nt.setFromMatrixColumn(this._camera.matrix,0),Nt.crossVectors(this._camera.up,Nt),Nt.multiplyScalar(e);const r=nn.copy(this._targetEnd).add(Nt);return this.moveTo(r.x,r.y,r.z,t)}elevate(e,t=!1){return Nt.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+Nt.x,this._targetEnd.y+Nt.y,this._targetEnd.z+Nt.z,t)}moveTo(e,t,r,i=!1){this._isUserControllingTruck=!1;const s=Nt.set(e,t,r).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,s,this.boundaryFriction),this._needsUpdate=!0,i||this._target.copy(this._targetEnd);const o=!i||an(this._target.x,this._targetEnd.x,this.restThreshold)&&an(this._target.y,this._targetEnd.y,this.restThreshold)&&an(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}lookInDirectionOf(e,t,r,i=!1){const a=Nt.set(e,t,r).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius).add(this._targetEnd);return this.setPosition(a.x,a.y,a.z,i)}fitToBox(e,t,{cover:r=!1,paddingLeft:i=0,paddingRight:s=0,paddingBottom:o=0,paddingTop:a=0}={}){const l=[],c=e.isBox3?iu.copy(e):iu.setFromObject(e);c.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const d=BR(this._sphericalEnd.theta,LR),h=BR(this._sphericalEnd.phi,LR);l.push(this.rotateTo(d,h,t));const p=Nt.setFromSpherical(this._sphericalEnd).normalize(),m=UR.setFromUnitVectors(p,Lx),v=an(Math.abs(p.y),1);v&&m.multiply(Dx.setFromAxisAngle(Cg,d)),m.multiply(this._yAxisUpSpaceInverse);const _=kR.makeEmpty();nn.copy(c.min).applyQuaternion(m),_.expandByPoint(nn),nn.copy(c.min).setX(c.max.x).applyQuaternion(m),_.expandByPoint(nn),nn.copy(c.min).setY(c.max.y).applyQuaternion(m),_.expandByPoint(nn),nn.copy(c.max).setZ(c.min.z).applyQuaternion(m),_.expandByPoint(nn),nn.copy(c.min).setZ(c.max.z).applyQuaternion(m),_.expandByPoint(nn),nn.copy(c.max).setY(c.min.y).applyQuaternion(m),_.expandByPoint(nn),nn.copy(c.max).setX(c.min.x).applyQuaternion(m),_.expandByPoint(nn),nn.copy(c.max).applyQuaternion(m),_.expandByPoint(nn),_.min.x-=i,_.min.y-=o,_.max.x+=s,_.max.y+=a,m.setFromUnitVectors(Lx,p),v&&m.premultiply(Dx.invert()),m.premultiply(this._yAxisUpSpace);const y=_.getSize(Nt),g=_.getCenter(nn).applyQuaternion(m);if(Cl(this._camera)){const S=this.getDistanceToFitBox(y.x,y.y,y.z,r);l.push(this.moveTo(g.x,g.y,g.z,t)),l.push(this.dollyTo(S,t)),l.push(this.setFocalOffset(0,0,0,t))}else if(_a(this._camera)){const S=this._camera,E=S.right-S.left,w=S.top-S.bottom,T=r?Math.max(E/y.x,w/y.y):Math.min(E/y.x,w/y.y);l.push(this.moveTo(g.x,g.y,g.z,t)),l.push(this.zoomTo(T,t)),l.push(this.setFocalOffset(0,0,0,t))}return Promise.all(l)}fitToSphere(e,t){const r=[],s=e instanceof Mt.Sphere?Bx.copy(e):HE.createBoundingSphere(e,Bx);if(r.push(this.moveTo(s.center.x,s.center.y,s.center.z,t)),Cl(this._camera)){const o=this.getDistanceToFitSphere(s.radius);r.push(this.dollyTo(o,t))}else if(_a(this._camera)){const o=this._camera.right-this._camera.left,a=this._camera.top-this._camera.bottom,l=2*s.radius,c=Math.min(o/l,a/l);r.push(this.zoomTo(c,t))}return r.push(this.setFocalOffset(0,0,0,t)),Promise.all(r)}setLookAt(e,t,r,i,s,o,a=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=tu.NONE,this._changedDolly=0;const l=nn.set(i,s,o),c=Nt.set(e,t,r);this._targetEnd.copy(l),this._sphericalEnd.setFromVector3(c.sub(l).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,a||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const d=!a||an(this._target.x,this._targetEnd.x,this.restThreshold)&&an(this._target.y,this._targetEnd.y,this.restThreshold)&&an(this._target.z,this._targetEnd.z,this.restThreshold)&&an(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&an(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&an(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(d)}lerpLookAt(e,t,r,i,s,o,a,l,c,d,h,p,m,v=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=tu.NONE,this._changedDolly=0;const _=Nt.set(i,s,o),y=nn.set(e,t,r);Ki.setFromVector3(y.sub(_).applyQuaternion(this._yAxisUpSpace));const g=ru.set(d,h,p),S=nn.set(a,l,c);Mf.setFromVector3(S.sub(g).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(_.lerp(g,m));const E=Mf.theta-Ki.theta,w=Mf.phi-Ki.phi,T=Mf.radius-Ki.radius;this._sphericalEnd.set(Ki.radius+T*m,Ki.phi+w*m,Ki.theta+E*m),this.normalizeRotations(),this._needsUpdate=!0,v||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const b=!v||an(this._target.x,this._targetEnd.x,this.restThreshold)&&an(this._target.y,this._targetEnd.y,this.restThreshold)&&an(this._target.z,this._targetEnd.z,this.restThreshold)&&an(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&an(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&an(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(b)}setPosition(e,t,r,i=!1){return this.setLookAt(e,t,r,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,i)}setTarget(e,t,r,i=!1){const s=this.getPosition(Nt),o=this.setLookAt(s.x,s.y,s.z,e,t,r,i);return this._sphericalEnd.phi=Es(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),o}setFocalOffset(e,t,r,i=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,r),this._needsUpdate=!0,i||this._focalOffset.copy(this._focalOffsetEnd);const s=!i||an(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&an(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&an(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}setOrbitPoint(e,t,r){this._camera.updateMatrixWorld(),Js.setFromMatrixColumn(this._camera.matrixWorldInverse,0),Ys.setFromMatrixColumn(this._camera.matrixWorldInverse,1),Tl.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const i=Nt.set(e,t,r),s=i.distanceTo(this._camera.position),o=i.sub(this._camera.position);Js.multiplyScalar(o.x),Ys.multiplyScalar(o.y),Tl.multiplyScalar(o.z),Nt.copy(Js).add(Ys).add(Tl),Nt.z=Nt.z+s,this.dollyTo(s,!1),this.setFocalOffset(-Nt.x,Nt.y,-Nt.z,!1),this.moveTo(e,t,r,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,r,i){if(e===null){this._viewport=null;return}this._viewport=this._viewport||new Mt.Vector4,typeof e=="number"?this._viewport.set(e,t,r,i):this._viewport.copy(e)}getDistanceToFitBox(e,t,r,i=!1){if(Px(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const s=e/t,o=this._camera.getEffectiveFOV()*Ef,a=this._camera.aspect;return((i?s>a:s<a)?t:e/a)*.5/Math.tan(o*.5)+r*.5}getDistanceToFitSphere(e){if(Px(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const t=this._camera.getEffectiveFOV()*Ef,r=Math.atan(Math.tan(t*.5)*this._camera.aspect)*2,i=1<this._camera.aspect?t:r;return e/Math.sin(i*.5)}getTarget(e,t=!0){return(e&&e.isVector3?e:new Mt.Vector3).copy(t?this._targetEnd:this._target)}getPosition(e,t=!0){return(e&&e.isVector3?e:new Mt.Vector3).setFromSpherical(t?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(t?this._targetEnd:this._target)}getSpherical(e,t=!0){return(e&&e instanceof Mt.Spherical?e:new Mt.Spherical).copy(t?this._sphericalEnd:this._spherical)}getFocalOffset(e,t=!0){return(e&&e.isVector3?e:new Mt.Vector3).copy(t?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%nu,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=nu),this._spherical.theta+=nu*Math.round((this._sphericalEnd.theta-this._spherical.theta)/nu)}reset(e=!1){if(!an(this._camera.up.x,this._cameraUp0.x)||!an(this._camera.up.y,this._cameraUp0.y)||!an(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const r=this.getPosition(Nt);this.updateCameraUp(),this.setPosition(r.x,r.y,r.z)}const t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,Cg),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=Nt.subVectors(this._target,this._camera.position).normalize(),t=nn.crossVectors(e,this._camera.up);this._camera.up.crossVectors(t,e).normalize(),this._camera.updateMatrixWorld();const r=this.getPosition(Nt);this.updateCameraUp(),this.setPosition(r.x,r.y,r.z)}update(e){const t=this._sphericalEnd.theta-this._spherical.theta,r=this._sphericalEnd.phi-this._spherical.phi,i=this._sphericalEnd.radius-this._spherical.radius,s=NR.subVectors(this._targetEnd,this._target),o=FR.subVectors(this._focalOffsetEnd,this._focalOffset),a=this._zoomEnd-this._zoom;if(yn(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const h=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=Mg(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,h,1/0,e),this._needsUpdate=!0}if(yn(r))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const h=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=Mg(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,h,1/0,e),this._needsUpdate=!0}if(yn(i))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const h=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=Mg(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,h,this.maxSpeed,e),this._needsUpdate=!0}if(yn(s.x)&&yn(s.y)&&yn(s.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const h=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;DR(this._target,this._targetEnd,this._targetVelocity,h,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(yn(o.x)&&yn(o.y)&&yn(o.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const h=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;DR(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,h,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(yn(a))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const h=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=Mg(this._zoom,this._zoomEnd,this._zoomVelocity,h,1/0,e)}if(this.dollyToCursor){if(Cl(this._camera)&&this._changedDolly!==0){const h=this._spherical.radius-this._lastDistance,p=this._camera,m=this._getCameraDirection(wf),v=Nt.copy(m).cross(p.up).normalize();v.lengthSq()===0&&(v.x=1);const _=nn.crossVectors(v,m),y=this._sphericalEnd.radius*Math.tan(p.getEffectiveFOV()*Ef*.5),S=(this._sphericalEnd.radius-h-this._sphericalEnd.radius)/this._sphericalEnd.radius,E=ru.copy(this._targetEnd).add(v.multiplyScalar(this._dollyControlCoord.x*y*p.aspect)).add(_.multiplyScalar(this._dollyControlCoord.y*y)),w=Nt.copy(this._targetEnd).lerp(E,S),T=this._lastDollyDirection===tu.IN&&this._spherical.radius<=this.minDistance,b=this._lastDollyDirection===tu.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(T||b)){this._sphericalEnd.radius-=h,this._spherical.radius-=h;const B=nn.copy(m).multiplyScalar(-h);w.add(B)}this._boundary.clampPoint(w,w);const R=nn.subVectors(w,this._targetEnd);this._targetEnd.copy(w),this._target.add(R),this._changedDolly-=h,yn(this._changedDolly)&&(this._changedDolly=0)}else if(_a(this._camera)&&this._changedZoom!==0){const h=this._zoom-this._lastZoom,p=this._camera,m=Nt.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(p.near+p.far)/(p.near-p.far)).unproject(p),v=nn.set(0,0,-1).applyQuaternion(p.quaternion),_=ru.copy(m).add(v.multiplyScalar(-m.dot(p.up))),g=-(this._zoom-h-this._zoom)/this._zoom,S=this._getCameraDirection(wf),E=this._targetEnd.dot(S),w=Nt.copy(this._targetEnd).lerp(_,g),T=w.dot(S),b=S.multiplyScalar(T-E);w.sub(b),this._boundary.clampPoint(w,w);const R=nn.subVectors(w,this._targetEnd);this._targetEnd.copy(w),this._target.add(R),this._changedZoom-=h,yn(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const l=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,l),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!yn(this._focalOffset.x)||!yn(this._focalOffset.y)||!yn(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),Js.setFromMatrixColumn(this._camera.matrix,0),Ys.setFromMatrixColumn(this._camera.matrix,1),Tl.setFromMatrixColumn(this._camera.matrix,2),Js.multiplyScalar(this._focalOffset.x),Ys.multiplyScalar(-this._focalOffset.y),Tl.multiplyScalar(this._focalOffset.z),Nt.copy(Js).add(Ys).add(Tl),this._camera.position.add(Nt)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),Nt.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const d=this._needsUpdate;return d&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):d?(this.dispatchEvent({type:"update"}),yn(t,this.restThreshold)&&yn(r,this.restThreshold)&&yn(i,this.restThreshold)&&yn(s.x,this.restThreshold)&&yn(s.y,this.restThreshold)&&yn(s.z,this.restThreshold)&&yn(o.x,this.restThreshold)&&yn(o.y,this.restThreshold)&&yn(o.z,this.restThreshold)&&yn(a,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!d&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=d,this._needsUpdate=!1,d}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:Sf(this.maxDistance),minZoom:this.minZoom,maxZoom:Sf(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:Sf(this.maxPolarAngle),minAzimuthAngle:Sf(this.minAzimuthAngle),maxAzimuthAngle:Sf(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:Nt.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,t=!1){const r=JSON.parse(e);this.enabled=r.enabled,this.minDistance=r.minDistance,this.maxDistance=Af(r.maxDistance),this.minZoom=r.minZoom,this.maxZoom=Af(r.maxZoom),this.minPolarAngle=r.minPolarAngle,this.maxPolarAngle=Af(r.maxPolarAngle),this.minAzimuthAngle=Af(r.minAzimuthAngle),this.maxAzimuthAngle=Af(r.maxAzimuthAngle),this.smoothTime=r.smoothTime,this.draggingSmoothTime=r.draggingSmoothTime,this.dollySpeed=r.dollySpeed,this.truckSpeed=r.truckSpeed,this.dollyToCursor=r.dollyToCursor,this.verticalDragToForward=r.verticalDragToForward,this._target0.fromArray(r.target0),this._position0.fromArray(r.position0),this._zoom0=r.zoom0,this._focalOffset0.fromArray(r.focalOffset0),this.moveTo(r.target[0],r.target[1],r.target[2],t),Ki.setFromVector3(Nt.fromArray(r.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(Ki.theta,Ki.phi,t),this.dollyTo(Ki.radius,t),this.zoomTo(r.zoom,t),this.setFocalOffset(r.focalOffset[0],r.focalOffset[1],r.focalOffset[2],t),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn("camera-controls is already connected.");return}e.setAttribute("data-camera-controls-version",s7),this._addAllEventListeners(e),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(t=>t.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(t=>t.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,t,r){const i=t.lengthSq();if(i===0)return e;const s=nn.copy(t).add(e),a=this._boundary.clampPoint(s,ru).sub(s),l=a.lengthSq();if(l===0)return e.add(t);if(l===i)return e;if(r===0)return e.add(t).add(a);{const c=1+r*l/t.dot(a);return e.add(nn.copy(t).multiplyScalar(c)).add(a.multiplyScalar(1-r))}}_updateNearPlaneCorners(){if(Cl(this._camera)){const e=this._camera,t=e.near,r=e.getEffectiveFOV()*Ef,i=Math.tan(r*.5)*t,s=i*e.aspect;this._nearPlaneCorners[0].set(-s,-i,0),this._nearPlaneCorners[1].set(s,-i,0),this._nearPlaneCorners[2].set(s,i,0),this._nearPlaneCorners[3].set(-s,i,0)}else if(_a(this._camera)){const e=this._camera,t=1/e.zoom,r=e.left*t,i=e.right*t,s=e.top*t,o=e.bottom*t;this._nearPlaneCorners[0].set(r,s,0),this._nearPlaneCorners[1].set(i,s,0),this._nearPlaneCorners[2].set(i,o,0),this._nearPlaneCorners[3].set(r,o,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1)||Px(this._camera,"_collisionTest"))return e;const r=this._getTargetDirection(wf);Ox.lookAt(OR,r,this._camera.up);for(let i=0;i<4;i++){const s=nn.copy(this._nearPlaneCorners[i]);s.applyMatrix4(Ox);const o=ru.addVectors(this._target,s);Tg.set(o,r),Tg.far=this._spherical.radius+1;const a=Tg.intersectObjects(this.colliderMeshes);a.length!==0&&a[0].distance<e&&(e=a[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(t=>{const r=()=>{this.removeEventListener("rest",r),t()};this.addEventListener("rest",r)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e,t=new Mt.Sphere){const r=t,i=r.center;iu.makeEmpty(),e.traverseVisible(o=>{o.isMesh&&iu.expandByObject(o)}),iu.getCenter(i);let s=0;return e.traverseVisible(o=>{if(!o.isMesh)return;const a=o,l=a.geometry.clone();l.applyMatrix4(a.matrixWorld);const d=l.attributes.position;for(let h=0,p=d.count;h<p;h++)Nt.fromBufferAttribute(d,h),s=Math.max(s,i.distanceToSquared(Nt))}),r.radius=Math.sqrt(s),r}};const a7=C.forwardRef((n,e)=>{C.useMemo(()=>{const T={Box3:Cr,MathUtils:{clamp:Mh.clamp},Matrix4:_t,Quaternion:br,Raycaster:Gv,Sphere:xr,Spherical:bB,Vector2:Re,Vector3:X,Vector4:ln};Nx.install({THREE:T}),rw({CameraControlsImpl:Nx})},[]);const{camera:t,domElement:r,makeDefault:i,onStart:s,onEnd:o,onChange:a,regress:l,...c}=n,d=Qi(T=>T.camera),h=Qi(T=>T.gl),p=Qi(T=>T.invalidate),m=Qi(T=>T.events),v=Qi(T=>T.setEvents),_=Qi(T=>T.set),y=Qi(T=>T.get),g=Qi(T=>T.performance),S=t||d,E=r||m.connected||h.domElement,w=C.useMemo(()=>new Nx(S),[S]);return Wv((T,b)=>{w.enabled&&w.update(b)},-1),C.useEffect(()=>(w.connect(E),()=>void w.disconnect()),[E,w]),C.useEffect(()=>{const T=B=>{p(),l&&g.regress(),a&&a(B)},b=B=>{s&&s(B)},R=B=>{o&&o(B)};return w.addEventListener("update",T),w.addEventListener("controlstart",b),w.addEventListener("controlend",R),w.addEventListener("control",T),w.addEventListener("transitionstart",T),w.addEventListener("wake",T),()=>{w.removeEventListener("update",T),w.removeEventListener("controlstart",b),w.removeEventListener("controlend",R),w.removeEventListener("control",T),w.removeEventListener("transitionstart",T),w.removeEventListener("wake",T)}},[w,s,o,p,v,l,a]),C.useEffect(()=>{if(i){const T=y().controls;return _({controls:w}),()=>_({controls:T})}},[i,w]),C.createElement("primitive",Hn({ref:e,object:w},c))}),l7="modulepreload",c7=function(n){return"/"+n},zR={},u7=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){const s=document.getElementsByTagName("link");i=Promise.all(t.map(o=>{if(o=c7(o),o in zR)return;zR[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!r)for(let h=s.length-1;h>=0;h--){const p=s[h];if(p.href===o&&(!a||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const d=document.createElement("link");if(d.rel=a?"stylesheet":l7,a||(d.as="script",d.crossOrigin=""),d.href=o,document.head.appendChild(d),a)return new Promise((h,p)=>{d.addEventListener("load",h),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${o}`)))})}))}return i.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function d7(n,e){const t=C.useRef(),[r]=C.useState(()=>e?e instanceof jt?{current:e}:e:t),[i]=C.useState(()=>new MB(void 0));C.useLayoutEffect(()=>{e&&(r.current=e instanceof jt?e:e.current),i._root=r.current});const s=C.useRef({}),o=C.useMemo(()=>{const a={};return n.forEach(l=>Object.defineProperty(a,l.name,{enumerable:!0,get(){if(r.current)return s.current[l.name]||(s.current[l.name]=i.clipAction(l,r.current))},configurable:!0})),{ref:r,clips:n,actions:a,names:n.map(l=>l.name),mixer:i}},[n]);return Wv((a,l)=>i.update(l)),C.useEffect(()=>{const a=r.current;return()=>{s.current={},i.stopAllAction(),Object.values(o.actions).forEach(l=>{a&&i.uncacheAction(l,a)})}},[n]),o}var pD={exports:{}},f7="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",h7=f7,p7=h7;function mD(){}function gD(){}gD.resetWarningCache=mD;var m7=function(){function n(r,i,s,o,a,l){if(l!==p7){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:gD,resetWarningCache:mD};return t.PropTypes=t,t};pD.exports=m7();var g7=pD.exports;const vn=ld(g7),Fx={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},v7="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",HR=n=>Array.isArray(n);function vD({files:n=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:e="",preset:t=void 0,encoding:r=void 0,extensions:i}={}){var s;let o=null,a=!1,l;if(t){if(!(t in Fx))throw new Error("Preset must be one of: "+Object.keys(Fx).join(", "));n=Fx[t],e=v7}if(a=HR(n),l=HR(n)?"cube":n.startsWith("data:application/exr")?"exr":n.startsWith("data:application/hdr")?"hdr":(s=n.split(".").pop())==null||(s=s.split("?"))==null||(s=s.shift())==null?void 0:s.toLowerCase(),o=a?fB:l==="hdr"?e7:l==="exr"?t7:null,!o)throw new Error("useEnvironment: Unrecognized file extension: "+n);const c=_d(o,a?[n]:n,m=>{m.setPath==null||m.setPath(e),i&&i(m)}),d=a?c[0]:c;d.mapping=a?oo:Xu;const h=3001,p=3e3;return"colorSpace"in d?d.colorSpace=r??a?"srgb":"srgb-linear":d.encoding=r??a?h:p,d}const y7=n=>n.current&&n.current.isScene,_7=n=>y7(n)?n.current:n;function lw(n,e,t,r,i=0){const s=_7(e||t),o=s.background,a=s.environment,l=s.backgroundBlurriness||0;return n!=="only"&&(s.environment=r),n&&(s.background=r),n&&s.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=i),()=>{n!=="only"&&(s.environment=a),n&&(s.background=o),n&&s.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=l)}}function cw({scene:n,background:e=!1,blur:t,map:r}){const i=Qi(s=>s.scene);return C.useLayoutEffect(()=>{if(r)return lw(e,n,i,r,t)},[i,n,r,e,t]),null}function yD({background:n=!1,scene:e,blur:t,...r}){const i=vD(r),s=Qi(o=>o.scene);return C.useLayoutEffect(()=>lw(n,e,s,i,t),[i,n,e,s,t]),null}function x7({children:n,near:e=1,far:t=1e3,resolution:r=256,frames:i=1,map:s,background:o=!1,blur:a,scene:l,files:c,path:d,preset:h=void 0,extensions:p}){const m=Qi(E=>E.gl),v=Qi(E=>E.scene),_=C.useRef(null),[y]=C.useState(()=>new Ch),g=C.useMemo(()=>{const E=new MA(r);return E.texture.type=qr,E},[r]);C.useLayoutEffect(()=>(i===1&&_.current.update(m,y),lw(o,l,v,g.texture,a)),[n,y,g.texture,l,v,o,i,m]);let S=1;return Wv(()=>{(i===1/0||S<i)&&(_.current.update(m,y),S++)}),C.createElement(C.Fragment,null,V6(C.createElement(C.Fragment,null,n,C.createElement("cubeCamera",{ref:_,args:[e,t,g]}),c||h?C.createElement(yD,{background:!0,files:c,preset:h,path:d,extensions:p}):s?C.createElement(cw,{background:!0,map:s,extensions:p}):null),y))}function E7(n){var e,t,r,i;const s=vD(n),o=n.map||s;C.useMemo(()=>rw({GroundProjectedEnvImpl:EW}),[]);const a=C.useMemo(()=>[o],[o]),l=(e=n.ground)==null?void 0:e.height,c=(t=n.ground)==null?void 0:t.radius,d=(r=(i=n.ground)==null?void 0:i.scale)!==null&&r!==void 0?r:1e3;return C.createElement(C.Fragment,null,C.createElement(cw,Hn({},n,{map:o})),C.createElement("groundProjectedEnvImpl",{args:a,scale:d,height:l,radius:c}))}function S7(n){return n.ground?C.createElement(E7,n):n.map?C.createElement(cw,n):n.children?C.createElement(x7,n):C.createElement(yD,n)}function A7(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function _D(...n){return e=>n.forEach(t=>A7(t,e))}function xd(...n){return C.useCallback(_D(...n),n)}const xD=C.forwardRef((n,e)=>{const{children:t,...r}=n,i=C.Children.toArray(t),s=i.find(w7);if(s){const o=s.props.children,a=i.map(l=>l===s?C.Children.count(o)>1?C.Children.only(null):C.isValidElement(o)?o.props.children:null:l);return C.createElement(GE,Hn({},r,{ref:e}),C.isValidElement(o)?C.cloneElement(o,void 0,a):null)}return C.createElement(GE,Hn({},r,{ref:e}),t)});xD.displayName="Slot";const GE=C.forwardRef((n,e)=>{const{children:t,...r}=n;return C.isValidElement(t)?C.cloneElement(t,{...M7(r,t.props),ref:e?_D(e,t.ref):t.ref}):C.Children.count(t)>1?C.Children.only(null):null});GE.displayName="SlotClone";const ED=({children:n})=>C.createElement(C.Fragment,null,n);function w7(n){return C.isValidElement(n)&&n.type===ED}function M7(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...a)=>{s(...a),i(...a)}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}const b7=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],gc=b7.reduce((n,e)=>{const t=C.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?xD:e;return C.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),C.createElement(a,Hn({},o,{ref:i}))});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function C7(n,e){n&&$h.flushSync(()=>n.dispatchEvent(e))}const T7=C.forwardRef((n,e)=>{var t;const{container:r=globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body,...i}=n;return r?EL.createPortal(C.createElement(gc.div,Hn({},i,{ref:e})),r):null}),R7=T7;var GR=Object.prototype.hasOwnProperty;function Dh(n,e){var t,r;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((r=n.length)===e.length)for(;r--&&Dh(n[r],e[r]););return r===-1}if(!t||typeof n=="object"){r=0;for(t in n)if(GR.call(n,t)&&++r&&!GR.call(e,t)||!(t in e)||!Dh(n[t],e[t]))return!1;return Object.keys(e).length===r}}return n!==n&&e!==e}var jv=function(e,t,r,i){this.name=e,this.fn=t,this.args=r,this.modifiers=i};jv.prototype._test=function(e){var t=this.fn;try{ku(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return ku(this.modifiers.slice(),t,this)(e)}catch{return!1}};jv.prototype._check=function(e){try{ku(this.modifiers.slice(),this.fn,this)(e)}catch{if(ku(this.modifiers.slice(),function(r){return r},this)(!1))return}if(!ku(this.modifiers.slice(),this.fn,this)(e))throw null};jv.prototype._testAsync=function(e){var t=this;return new Promise(function(r,i){AD(t.modifiers.slice(),t.fn,t)(e).then(function(s){s?r(e):i(null)}).catch(function(s){return i(s)})})};function SD(n,e){return e===void 0&&(e="simple"),typeof n=="object"?n[e]:n}function ku(n,e,t){if(n.length){var r=n.shift(),i=ku(n,e,t);return r.perform(i,t)}else return SD(e)}function AD(n,e,t){if(n.length){var r=n.shift(),i=AD(n,e,t);return r.performAsync(i,t)}else return function(s){return Promise.resolve(SD(e,"async")(s))}}var P7=function(e,t,r){this.name=e,this.perform=t,this.performAsync=r},uw=function(n){function e(t,r,i,s){for(var o=[],a=arguments.length-4;a-- >0;)o[a]=arguments[a+4];n.call(this,o),n.captureStackTrace&&n.captureStackTrace(this,e),this.rule=t,this.value=r,this.cause=i,this.target=s}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e}(Error),co=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};co.prototype._applyRule=function(e,t){var r=this;return function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return r.chain.push(new jv(t,e.apply(r,i),i,r.nextRuleModifiers)),r.nextRuleModifiers=[],r}};co.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new P7(t,e.simple,e.async)),this};co.prototype._clone=function(){return new co(this.chain.slice(),this.nextRuleModifiers.slice())};co.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})};co.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(r){try{r._check(e)}catch(i){t.push(new uw(r,e,i))}}),t};co.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(r){throw new uw(t,e,r)}})};co.prototype.testAsync=function(e){var t=this;return new Promise(function(r,i){wD(e,t.chain.slice(),r,i)})};function wD(n,e,t,r){if(e.length){var i=e.shift();i._testAsync(n).then(function(){wD(n,e,t,r)},function(s){r(new uw(i,n,s))})}else t(n)}var VR=function(n,e){return e&&typeof n=="string"&&n.trim().length===0?!0:n==null};function I7(n,e){return e===void 0&&(e=!1),{simple:function(t){return VR(t,e)||n.check(t)===void 0},async:function(t){return VR(t,e)||n.testAsync(t)}}}function vi(){return typeof Proxy<"u"?MD(new co):VE(new co)}var Oh={};vi.extend=function(n){Object.assign(Oh,n)};vi.clearCustomRules=function(){Oh={}};function MD(n){return new Proxy(n,{get:function(t,r){if(r in t)return t[r];var i=MD(n._clone());if(r in k0)return i._applyModifier(k0[r],r);if(r in Oh)return i._applyRule(Oh[r],r);if(r in WE)return i._applyRule(WE[r],r)}})}function VE(n){var e=function(i,s){return Object.keys(i).forEach(function(o){s[o]=function(){for(var a=[],l=arguments.length;l--;)a[l]=arguments[l];var c=VE(s._clone()),d=c._applyRule(i[o],o).apply(void 0,a);return d}}),s},t=e(WE,n),r=e(Oh,t);return Object.keys(k0).forEach(function(i){Object.defineProperty(r,i,{get:function(){var s=VE(r._clone());return s._applyModifier(k0[i],i)}})}),r}var k0={not:{simple:function(n){return function(e){return!n(e)}},async:function(n){return function(e){return Promise.resolve(n(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(n){return function(e){return Rg(e).some(function(t){try{return n(t)}catch{return!1}})}},async:function(n){return function(e){return Promise.all(Rg(e).map(function(t){try{return n(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(n){return function(e){return e!==!1&&Rg(e).every(n)}},async:function(n){return function(e){return Promise.all(Rg(e).map(n)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(n,e){return function(t){return WR(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n(t):n(t)}},async:function(n,e){return function(t){return Promise.resolve(n(t)).then(function(r){return WR(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&r:r}).catch(function(){return!1})}}}};function WR(n){return n&&n.name==="schema"&&n.args.length>0&&typeof n.args[0]=="object"}function Rg(n){return typeof n=="string"?n.split(""):n}var WE={equal:function(n){return function(e){return e==n}},exact:function(n){return function(e){return e===n}},number:function(n){return n===void 0&&(n=!0),function(e){return typeof e=="number"&&(n||isFinite(e))}},integer:function(){return function(n){var e=Number.isInteger||L7;return e(n)}},numeric:function(){return function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},string:function(){return su("string")},boolean:function(){return su("boolean")},undefined:function(){return su("undefined")},null:function(){return su("null")},array:function(){return su("array")},object:function(){return su("object")},instanceOf:function(n){return function(e){return e instanceof n}},pattern:function(n){return function(e){return n.test(e)}},lowercase:function(){return function(n){return typeof n=="boolean"||n===n.toLowerCase()&&n.trim()!==""}},uppercase:function(){return function(n){return n===n.toUpperCase()&&n.trim()!==""}},vowel:function(){return function(n){return/^[aeiou]+$/i.test(n)}},consonant:function(){return function(n){return/^(?=[^aeiou])([a-z]+)$/i.test(n)}},first:function(n){return function(e){return e[0]==n}},last:function(n){return function(e){return e[e.length-1]==n}},empty:function(){return function(n){return n.length===0}},length:function(n,e){return function(t){return t.length>=n&&t.length<=(e||n)}},minLength:function(n){return function(e){return e.length>=n}},maxLength:function(n){return function(e){return e.length<=n}},negative:function(){return function(n){return n<0}},positive:function(){return function(n){return n>=0}},between:function(n,e){return function(t){return t>=n&&t<=e}},range:function(n,e){return function(t){return t>=n&&t<=e}},lessThan:function(n){return function(e){return e<n}},lessThanOrEqual:function(n){return function(e){return e<=n}},greaterThan:function(n){return function(e){return e>n}},greaterThanOrEqual:function(n){return function(e){return e>=n}},even:function(){return function(n){return n%2===0}},odd:function(){return function(n){return n%2!==0}},includes:function(n){return function(e){return~e.indexOf(n)}},schema:function(n){return B7(n)},passesAnyOf:function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return function(t){return n.some(function(r){return r.test(t)})}},optional:I7};function su(n){return function(e){return Array.isArray(e)&&n==="array"||e===null&&n==="null"||typeof e===n}}function L7(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}function B7(n){return{simple:function(e){var t=[];if(Object.keys(n).forEach(function(r){var i=n[r];try{i.check((e||{})[r])}catch(s){s.target=r,t.push(s)}}),t.length>0)throw t;return!0},async:function(e){var t=[],r=Object.keys(n).map(function(i){var s=n[i];return s.testAsync((e||{})[i]).catch(function(o){o.target=i,t.push(o)})});return Promise.all(r).then(function(){if(t.length>0)throw t;return!0})}}}var fn="colors",Yr="sizes",it="space",D7={gap:it,gridGap:it,columnGap:it,gridColumnGap:it,rowGap:it,gridRowGap:it,inset:it,insetBlock:it,insetBlockEnd:it,insetBlockStart:it,insetInline:it,insetInlineEnd:it,insetInlineStart:it,margin:it,marginTop:it,marginRight:it,marginBottom:it,marginLeft:it,marginBlock:it,marginBlockEnd:it,marginBlockStart:it,marginInline:it,marginInlineEnd:it,marginInlineStart:it,padding:it,paddingTop:it,paddingRight:it,paddingBottom:it,paddingLeft:it,paddingBlock:it,paddingBlockEnd:it,paddingBlockStart:it,paddingInline:it,paddingInlineEnd:it,paddingInlineStart:it,top:it,right:it,bottom:it,left:it,scrollMargin:it,scrollMarginTop:it,scrollMarginRight:it,scrollMarginBottom:it,scrollMarginLeft:it,scrollMarginX:it,scrollMarginY:it,scrollMarginBlock:it,scrollMarginBlockEnd:it,scrollMarginBlockStart:it,scrollMarginInline:it,scrollMarginInlineEnd:it,scrollMarginInlineStart:it,scrollPadding:it,scrollPaddingTop:it,scrollPaddingRight:it,scrollPaddingBottom:it,scrollPaddingLeft:it,scrollPaddingX:it,scrollPaddingY:it,scrollPaddingBlock:it,scrollPaddingBlockEnd:it,scrollPaddingBlockStart:it,scrollPaddingInline:it,scrollPaddingInlineEnd:it,scrollPaddingInlineStart:it,fontSize:"fontSizes",background:fn,backgroundColor:fn,backgroundImage:fn,borderImage:fn,border:fn,borderBlock:fn,borderBlockEnd:fn,borderBlockStart:fn,borderBottom:fn,borderBottomColor:fn,borderColor:fn,borderInline:fn,borderInlineEnd:fn,borderInlineStart:fn,borderLeft:fn,borderLeftColor:fn,borderRight:fn,borderRightColor:fn,borderTop:fn,borderTopColor:fn,caretColor:fn,color:fn,columnRuleColor:fn,fill:fn,outline:fn,outlineColor:fn,stroke:fn,textDecorationColor:fn,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:Yr,minBlockSize:Yr,maxBlockSize:Yr,inlineSize:Yr,minInlineSize:Yr,maxInlineSize:Yr,width:Yr,minWidth:Yr,maxWidth:Yr,height:Yr,minHeight:Yr,maxHeight:Yr,flexBasis:Yr,gridTemplateColumns:Yr,gridTemplateRows:Yr,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},O7=(n,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,Ed=()=>{const n=Object.create(null);return(e,t,...r)=>{const i=(s=>JSON.stringify(s,O7))(e);return i in n?n[i]:n[i]=t(e,...r)}},Zl=Symbol.for("sxs.internal"),dw=(n,e)=>Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)),$R=n=>{for(const e in n)return!0;return!1},{hasOwnProperty:N7}=Object.prototype,$E=n=>n.includes("-")?n:n.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),F7=/\s+(?![^()]*\))/,ou=n=>e=>n(...typeof e=="string"?String(e).split(F7):[e]),jR={appearance:n=>({WebkitAppearance:n,appearance:n}),backfaceVisibility:n=>({WebkitBackfaceVisibility:n,backfaceVisibility:n}),backdropFilter:n=>({WebkitBackdropFilter:n,backdropFilter:n}),backgroundClip:n=>({WebkitBackgroundClip:n,backgroundClip:n}),boxDecorationBreak:n=>({WebkitBoxDecorationBreak:n,boxDecorationBreak:n}),clipPath:n=>({WebkitClipPath:n,clipPath:n}),content:n=>({content:n.includes('"')||n.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(n)?n:`"${n}"`}),hyphens:n=>({WebkitHyphens:n,hyphens:n}),maskImage:n=>({WebkitMaskImage:n,maskImage:n}),maskSize:n=>({WebkitMaskSize:n,maskSize:n}),tabSize:n=>({MozTabSize:n,tabSize:n}),textSizeAdjust:n=>({WebkitTextSizeAdjust:n,textSizeAdjust:n}),userSelect:n=>({WebkitUserSelect:n,userSelect:n}),marginBlock:ou((n,e)=>({marginBlockStart:n,marginBlockEnd:e||n})),marginInline:ou((n,e)=>({marginInlineStart:n,marginInlineEnd:e||n})),maxSize:ou((n,e)=>({maxBlockSize:n,maxInlineSize:e||n})),minSize:ou((n,e)=>({minBlockSize:n,minInlineSize:e||n})),paddingBlock:ou((n,e)=>({paddingBlockStart:n,paddingBlockEnd:e||n})),paddingInline:ou((n,e)=>({paddingInlineStart:n,paddingInlineEnd:e||n}))},kx=/([\d.]+)([^]*)/,k7=(n,e)=>n.length?n.reduce((t,r)=>(t.push(...e.map(i=>i.includes("&")?i.replace(/&/g,/[ +>|~]/.test(r)&&/&.*&/.test(i)?`:is(${r})`:r):r+" "+i)),t),[]):e,U7=(n,e)=>n in z7&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(t,r,i,s)=>r+(i==="stretch"?`-moz-available${s};${$E(n)}:${r}-webkit-fill-available`:`-moz-fit-content${s};${$E(n)}:${r}fit-content`)+s):String(e),z7={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},jo=n=>n?n+"-":"",bD=(n,e,t)=>n.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(r,i,s,o,a)=>o=="$"==!!s?r:(i||o=="--"?"calc(":"")+"var(--"+(o==="$"?jo(e)+(a.includes("$")?"":jo(t))+a.replace(/\$/g,"-"):a)+")"+(i||o=="--"?"*"+(i||"")+(s||"1")+")":"")),H7=/\s*,\s*(?![^()]*\))/,G7=Object.prototype.toString,Tu=(n,e,t,r,i)=>{let s,o,a;const l=(c,d,h)=>{let p,m;const v=_=>{for(p in _){const S=p.charCodeAt(0)===64,E=S&&Array.isArray(_[p])?_[p]:[_[p]];for(m of E){const w=/[A-Z]/.test(g=p)?g:g.replace(/-[^]/g,b=>b[1].toUpperCase()),T=typeof m=="object"&&m&&m.toString===G7&&(!r.utils[w]||!d.length);if(w in r.utils&&!T){const b=r.utils[w];if(b!==o){o=b,v(b(m)),o=null;continue}}else if(w in jR){const b=jR[w];if(b!==a){a=b,v(b(m)),a=null;continue}}if(S&&(y=p.slice(1)in r.media?"@media "+r.media[p.slice(1)]:p,p=y.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(b,R,B,P,I,F)=>{const $=kx.test(R),Z=.0625*($?-1:1),[U,j]=$?[P,R]:[R,P];return"("+(B[0]==="="?"":B[0]===">"===$?"max-":"min-")+U+":"+(B[0]!=="="&&B.length===1?j.replace(kx,(re,ae,H)=>Number(ae)+Z*(B===">"?1:-1)+H):j)+(I?") and ("+(I[0]===">"?"min-":"max-")+U+":"+(I.length===1?F.replace(kx,(re,ae,H)=>Number(ae)+Z*(I===">"?-1:1)+H):F):"")+")"})),T){const b=S?h.concat(p):[...h],R=S?[...d]:k7(d,p.split(H7));s!==void 0&&i(XR(...s)),s=void 0,l(m,R,b)}else s===void 0&&(s=[[],d,h]),p=S||p.charCodeAt(0)!==36?p:`--${jo(r.prefix)}${p.slice(1).replace(/\$/g,"-")}`,m=T?m:typeof m=="number"?m&&w in V7?String(m)+"px":String(m):bD(U7(w,m??""),r.prefix,r.themeMap[w]),s[0].push(`${S?`${p} `:`${$E(p)}:`}${m}`)}}var y,g};v(c),s!==void 0&&i(XR(...s)),s=void 0};l(n,e,t)},XR=(n,e,t)=>`${t.map(r=>`${r}{`).join("")}${e.length?`${e.join(",")}{`:""}${n.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,V7={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},JR=n=>String.fromCharCode(n+(n>25?39:97)),Ql=n=>(e=>{let t,r="";for(t=Math.abs(e);t>52;t=t/52|0)r=JR(t%52)+r;return JR(t%52)+r})(((e,t)=>{let r=t.length;for(;r;)e=33*e^t.charCodeAt(--r);return e})(5381,JSON.stringify(n))>>>0),Of=["themed","global","styled","onevar","resonevar","allvar","inline"],W7=n=>{if(n.href&&!n.href.startsWith(location.origin))return!1;try{return!!n.cssRules}catch{return!1}},$7=n=>{let e;const t=()=>{const{cssRules:i}=e.sheet;return[].map.call(i,(s,o)=>{const{cssText:a}=s;let l="";if(a.startsWith("--sxs"))return"";if(i[o-1]&&(l=i[o-1].cssText).startsWith("--sxs")){if(!s.cssRules.length)return"";for(const c in e.rules)if(e.rules[c].group===s)return`--sxs{--sxs:${[...e.rules[c].cache].join(" ")}}${a}`;return s.cssRules.length?`${l}${a}`:""}return a}).join("")},r=()=>{if(e){const{rules:a,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const c in a)delete a[c]}const i=Object(n).styleSheets||[];for(const a of i)if(W7(a)){for(let l=0,c=a.cssRules;c[l];++l){const d=Object(c[l]);if(d.type!==1)continue;const h=Object(c[l+1]);if(h.type!==4)continue;++l;const{cssText:p}=d;if(!p.startsWith("--sxs"))continue;const m=p.slice(14,-3).trim().split(/\s+/),v=Of[m[0]];v&&(e||(e={sheet:a,reset:r,rules:{},toString:t}),e.rules[v]={group:h,index:l,cache:new Set(m)})}if(e)break}if(!e){const a=(l,c)=>({type:c,cssRules:[],insertRule(d,h){this.cssRules.splice(h,0,a(d,{import:3,undefined:1}[(d.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,d=>d.cssText).join("")}}`:l}});e={sheet:n?(n.head||n).appendChild(document.createElement("style")).sheet:a("","text/css"),rules:{},reset:r,toString:t}}const{sheet:s,rules:o}=e;for(let a=Of.length-1;a>=0;--a){const l=Of[a];if(!o[l]){const c=Of[a+1],d=o[c]?o[c].index:s.cssRules.length;s.insertRule("@media{}",d),s.insertRule(`--sxs{--sxs:${a}}`,d),o[l]={group:s.cssRules[d+1],index:d,cache:new Set([a])}}j7(o[l])}};return r(),e},j7=n=>{const e=n.group;let t=e.cssRules.length;n.apply=r=>{try{e.insertRule(r,t),++t}catch{}}},bf=Symbol(),X7=Ed(),YR=(n,e)=>X7(n,()=>(...t)=>{let r={type:null,composers:new Set};for(const i of t)if(i!=null)if(i[Zl]){r.type==null&&(r.type=i[Zl].type);for(const s of i[Zl].composers)r.composers.add(s)}else i.constructor!==Object||i.$$typeof?r.type==null&&(r.type=i):r.composers.add(J7(i,n));return r.type==null&&(r.type="span"),r.composers.size||r.composers.add(["PJLV",{},[],[],{},[]]),Y7(n,r,e)}),J7=({variants:n,compoundVariants:e,defaultVariants:t,...r},i)=>{const s=`${jo(i.prefix)}c-${Ql(r)}`,o=[],a=[],l=Object.create(null),c=[];for(const p in t)l[p]=String(t[p]);if(typeof n=="object"&&n)for(const p in n){d=l,h=p,N7.call(d,h)||(l[p]="undefined");const m=n[p];for(const v in m){const _={[p]:String(v)};String(v)==="undefined"&&c.push(p);const y=m[v],g=[_,y,!$R(y)];o.push(g)}}var d,h;if(typeof e=="object"&&e)for(const p of e){let{css:m,...v}=p;m=typeof m=="object"&&m||{};for(const y in v)v[y]=String(v[y]);const _=[v,m,!$R(m)];a.push(_)}return[s,r,o,a,l,c]},Y7=(n,e,t)=>{const[r,i,s,o]=K7(e.composers),a=typeof e.type=="function"||e.type.$$typeof?(h=>{function p(){for(let m=0;m<p[bf].length;m++){const[v,_]=p[bf][m];h.rules[v].apply(_)}return p[bf]=[],null}return p[bf]=[],p.rules={},Of.forEach(m=>p.rules[m]={apply:v=>p[bf].push([m,v])}),p})(t):null,l=(a||t).rules,c=`.${r}${i.length>1?`:where(.${i.slice(1).join(".")})`:""}`,d=h=>{h=typeof h=="object"&&h||Z7;const{css:p,...m}=h,v={};for(const g in s)if(delete m[g],g in h){let S=h[g];typeof S=="object"&&S?v[g]={"@initial":s[g],...S}:(S=String(S),v[g]=S!=="undefined"||o.has(g)?S:s[g])}else v[g]=s[g];const _=new Set([...i]);for(const[g,S,E,w]of e.composers){t.rules.styled.cache.has(g)||(t.rules.styled.cache.add(g),Tu(S,[`.${g}`],[],n,R=>{l.styled.apply(R)}));const T=KR(E,v,n.media),b=KR(w,v,n.media,!0);for(const R of T)if(R!==void 0)for(const[B,P,I]of R){const F=`${g}-${Ql(P)}-${B}`;_.add(F);const $=(I?t.rules.resonevar:t.rules.onevar).cache,Z=I?l.resonevar:l.onevar;$.has(F)||($.add(F),Tu(P,[`.${F}`],[],n,U=>{Z.apply(U)}))}for(const R of b)if(R!==void 0)for(const[B,P]of R){const I=`${g}-${Ql(P)}-${B}`;_.add(I),t.rules.allvar.cache.has(I)||(t.rules.allvar.cache.add(I),Tu(P,[`.${I}`],[],n,F=>{l.allvar.apply(F)}))}}if(typeof p=="object"&&p){const g=`${r}-i${Ql(p)}-css`;_.add(g),t.rules.inline.cache.has(g)||(t.rules.inline.cache.add(g),Tu(p,[`.${g}`],[],n,S=>{l.inline.apply(S)}))}for(const g of String(h.className||"").trim().split(/\s+/))g&&_.add(g);const y=m.className=[..._].join(" ");return{type:e.type,className:y,selector:c,props:m,toString:()=>y,deferredInjector:a}};return dw(d,{className:r,selector:c,[Zl]:e,toString:()=>(t.rules.styled.cache.has(r)||d(),r)})},K7=n=>{let e="";const t=[],r={},i=[];for(const[s,,,,o,a]of n){e===""&&(e=s),t.push(s),i.push(...a);for(const l in o){const c=o[l];(r[l]===void 0||c!=="undefined"||a.includes(c))&&(r[l]=c)}}return[e,t,r,new Set(i)]},KR=(n,e,t,r)=>{const i=[];e:for(let[s,o,a]of n){if(a)continue;let l,c=0,d=!1;for(l in s){const h=s[l];let p=e[l];if(p!==h){if(typeof p!="object"||!p)continue e;{let m,v,_=0;for(const y in p){if(h===String(p[y])){if(y!=="@initial"){const g=y.slice(1);(v=v||[]).push(g in t?t[g]:y.replace(/^@media ?/,"")),d=!0}c+=_,m=!0}++_}if(v&&v.length&&(o={["@media "+v.join(", ")]:o}),!m)continue e}}}(i[c]=i[c]||[]).push([r?"cv":`${l}-${s[l]}`,o,d])}return i},Z7={},Q7=Ed(),q7=(n,e)=>Q7(n,()=>(...t)=>{const r=()=>{for(let i of t){i=typeof i=="object"&&i||{};let s=Ql(i);if(!e.rules.global.cache.has(s)){if(e.rules.global.cache.add(s),"@import"in i){let o=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let a of[].concat(i["@import"]))a=a.includes('"')||a.includes("'")?a:`"${a}"`,e.sheet.insertRule(`@import ${a};`,o++);delete i["@import"]}Tu(i,[],[],n,o=>{e.rules.global.apply(o)})}}return""};return dw(r,{toString:r})}),e$=Ed(),t$=(n,e)=>e$(n,()=>t=>{const r=`${jo(n.prefix)}k-${Ql(t)}`,i=()=>{if(!e.rules.global.cache.has(r)){e.rules.global.cache.add(r);const s=[];Tu(t,[],[],n,a=>s.push(a));const o=`@keyframes ${r}{${s.join("")}}`;e.rules.global.apply(o)}return r};return dw(i,{get name(){return i()},toString:i})}),n$=class{constructor(n,e,t,r){this.token=n==null?"":String(n),this.value=e==null?"":String(e),this.scale=t==null?"":String(t),this.prefix=r==null?"":String(r)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+jo(this.prefix)+jo(this.scale)+this.token}toString(){return this.computedValue}},r$=Ed(),i$=(n,e)=>r$(n,()=>(t,r)=>{r=typeof t=="object"&&t||Object(r);const i=`.${t=(t=typeof t=="string"?t:"")||`${jo(n.prefix)}t-${Ql(r)}`}`,s={},o=[];for(const l in r){s[l]={};for(const c in r[l]){const d=`--${jo(n.prefix)}${l}-${c}`,h=bD(String(r[l][c]),n.prefix,l);s[l][c]=new n$(c,h,l,n.prefix),o.push(`${d}:${h}`)}}const a=()=>{if(o.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const l=`${r===n.theme?":root,":""}.${t}{${o.join(";")}}`;e.rules.themed.apply(l)}return t};return{...s,get className(){return a()},selector:i,toString:a}}),s$=Ed(),o$=Ed(),a$=n=>{const e=(t=>{let r=!1;const i=s$(t,s=>{r=!0;const o="prefix"in(s=typeof s=="object"&&s||{})?String(s.prefix):"",a=typeof s.media=="object"&&s.media||{},l=typeof s.root=="object"?s.root||null:globalThis.document||null,c=typeof s.theme=="object"&&s.theme||{},d={prefix:o,media:a,theme:c,themeMap:typeof s.themeMap=="object"&&s.themeMap||{...D7},utils:typeof s.utils=="object"&&s.utils||{}},h=$7(l),p={css:YR(d,h),globalCss:q7(d,h),keyframes:t$(d,h),createTheme:i$(d,h),reset(){h.reset(),p.theme.toString()},theme:{},sheet:h,config:d,prefix:o,getCssText:h.toString,toString:h.toString};return String(p.theme=p.createTheme(c)),p});return r||i.reset(),i})(n);return e.styled=(({config:t,sheet:r})=>o$(t,()=>{const i=YR(t,r);return(...s)=>{const o=i(...s),a=o[Zl].type,l=q.forwardRef((c,d)=>{const h=c&&c.as||a,{props:p,deferredInjector:m}=o(c);return delete p.as,p.ref=d,m?q.createElement(q.Fragment,null,q.createElement(h,p),q.createElement(m,null)):q.createElement(h,p)});return l.className=o.className,l.displayName=`Styled.${a.displayName||a.name||a}`,l.selector=o.selector,l.toString=()=>o.selector,l[Zl]=o[Zl],l}}))(e),e};function Ro(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function CD(n,e=[]){let t=[];function r(s,o){const a=C.createContext(o),l=t.length;t=[...t,o];function c(h){const{scope:p,children:m,...v}=h,_=(p==null?void 0:p[n][l])||a,y=C.useMemo(()=>v,Object.values(v));return C.createElement(_.Provider,{value:y},m)}function d(h,p){const m=(p==null?void 0:p[n][l])||a,v=C.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,d]}const i=()=>{const s=t.map(o=>C.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return C.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[r,l$(i,...e)]}function l$(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(s)[`__scope${c}`];return{...a,...h}},{});return C.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function Sd(n){const e=C.useRef(n);return C.useEffect(()=>{e.current=n}),C.useMemo(()=>(...t)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...t)},[])}function c$(n,e=globalThis==null?void 0:globalThis.document){const t=Sd(n);C.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[t,e])}const jE="dismissableLayer.update",u$="dismissableLayer.pointerDownOutside",d$="dismissableLayer.focusOutside";let ZR;const f$=C.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),h$=C.forwardRef((n,e)=>{var t;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=n,d=C.useContext(f$),[h,p]=C.useState(null),m=(t=h==null?void 0:h.ownerDocument)!==null&&t!==void 0?t:globalThis==null?void 0:globalThis.document,[,v]=C.useState({}),_=xd(e,B=>p(B)),y=Array.from(d.layers),[g]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),S=y.indexOf(g),E=h?y.indexOf(h):-1,w=d.layersWithOutsidePointerEventsDisabled.size>0,T=E>=S,b=p$(B=>{const P=B.target,I=[...d.branches].some(F=>F.contains(P));!T||I||(s==null||s(B),a==null||a(B),B.defaultPrevented||l==null||l())},m),R=m$(B=>{const P=B.target;[...d.branches].some(F=>F.contains(P))||(o==null||o(B),a==null||a(B),B.defaultPrevented||l==null||l())},m);return c$(B=>{E===d.layers.size-1&&(i==null||i(B),!B.defaultPrevented&&l&&(B.preventDefault(),l()))},m),C.useEffect(()=>{if(h)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(ZR=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),QR(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=ZR)}},[h,m,r,d]),C.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),QR())},[h,d]),C.useEffect(()=>{const B=()=>v({});return document.addEventListener(jE,B),()=>document.removeEventListener(jE,B)},[]),C.createElement(gc.div,Hn({},c,{ref:_,style:{pointerEvents:w?T?"auto":"none":void 0,...n.style},onFocusCapture:Ro(n.onFocusCapture,R.onFocusCapture),onBlurCapture:Ro(n.onBlurCapture,R.onBlurCapture),onPointerDownCapture:Ro(n.onPointerDownCapture,b.onPointerDownCapture)}))});function p$(n,e=globalThis==null?void 0:globalThis.document){const t=Sd(n),r=C.useRef(!1),i=C.useRef(()=>{});return C.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let d=function(){TD(u$,t,c,{discrete:!0})};var l=d;const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=d,e.addEventListener("click",i.current,{once:!0})):d()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function m$(n,e=globalThis==null?void 0:globalThis.document){const t=Sd(n),r=C.useRef(!1);return C.useEffect(()=>{const i=s=>{s.target&&!r.current&&TD(d$,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function QR(){const n=new CustomEvent(jE);document.dispatchEvent(n)}function TD(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?C7(i,s):i.dispatchEvent(s)}const id=globalThis!=null&&globalThis.document?C.useLayoutEffect:()=>{},g$=xF.useId||(()=>{});let v$=0;function y$(n){const[e,t]=C.useState(g$());return id(()=>{n||t(r=>r??String(v$++))},[n]),n||(e?`radix-${e}`:"")}const _$=["top","right","bottom","left"],Ja=Math.min,Ti=Math.max,U0=Math.round,Pg=Math.floor,Ya=n=>({x:n,y:n}),x$={left:"right",right:"left",bottom:"top",top:"bottom"},E$={start:"end",end:"start"};function XE(n,e,t){return Ti(n,Ja(e,t))}function Xo(n,e){return typeof n=="function"?n(e):n}function Jo(n){return n.split("-")[0]}function Ad(n){return n.split("-")[1]}function fw(n){return n==="x"?"y":"x"}function hw(n){return n==="y"?"height":"width"}function wd(n){return["top","bottom"].includes(Jo(n))?"y":"x"}function pw(n){return fw(wd(n))}function S$(n,e,t){t===void 0&&(t=!1);const r=Ad(n),i=pw(n),s=hw(i);let o=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=z0(o)),[o,z0(o)]}function A$(n){const e=z0(n);return[JE(n),e,JE(e)]}function JE(n){return n.replace(/start|end/g,e=>E$[e])}function w$(n,e,t){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function M$(n,e,t,r){const i=Ad(n);let s=w$(Jo(n),t==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(JE)))),s}function z0(n){return n.replace(/left|right|bottom|top/g,e=>x$[e])}function b$(n){return{top:0,right:0,bottom:0,left:0,...n}}function RD(n){return typeof n!="number"?b$(n):{top:n,right:n,bottom:n,left:n}}function H0(n){return{...n,top:n.y,left:n.x,right:n.x+n.width,bottom:n.y+n.height}}function qR(n,e,t){let{reference:r,floating:i}=n;const s=wd(e),o=pw(e),a=hw(o),l=Jo(e),c=s==="y",d=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,p=r[a]/2-i[a]/2;let m;switch(l){case"top":m={x:d,y:r.y-i.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-i.width,y:h};break;default:m={x:r.x,y:r.y}}switch(Ad(e)){case"start":m[o]-=p*(t&&c?-1:1);break;case"end":m[o]+=p*(t&&c?-1:1);break}return m}const C$=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:d,y:h}=qR(c,r,l),p=r,m={},v=0;for(let _=0;_<a.length;_++){const{name:y,fn:g}=a[_],{x:S,y:E,data:w,reset:T}=await g({x:d,y:h,initialPlacement:r,placement:p,strategy:i,middlewareData:m,rects:c,platform:o,elements:{reference:n,floating:e}});d=S??d,h=E??h,m={...m,[y]:{...m[y],...w}},T&&v<=50&&(v++,typeof T=="object"&&(T.placement&&(p=T.placement),T.rects&&(c=T.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):T.rects),{x:d,y:h}=qR(c,p,l)),_=-1)}return{x:d,y:h,placement:p,strategy:i,middlewareData:m}};async function Nh(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:p=!1,padding:m=0}=Xo(e,n),v=RD(m),y=a[p?h==="floating"?"reference":"floating":h],g=H0(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(y)))==null||t?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),S=h==="floating"?{...o.floating,x:r,y:i}:o.reference,E=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(E))?await(s.getScale==null?void 0:s.getScale(E))||{x:1,y:1}:{x:1,y:1},T=H0(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:S,offsetParent:E,strategy:l}):S);return{top:(g.top-T.top+v.top)/w.y,bottom:(T.bottom-g.bottom+v.bottom)/w.y,left:(g.left-T.left+v.left)/w.x,right:(T.right-g.right+v.right)/w.x}}const T$=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=Xo(n,e)||{};if(c==null)return{};const h=RD(d),p={x:t,y:r},m=pw(i),v=hw(m),_=await o.getDimensions(c),y=m==="y",g=y?"top":"left",S=y?"bottom":"right",E=y?"clientHeight":"clientWidth",w=s.reference[v]+s.reference[m]-p[m]-s.floating[v],T=p[m]-s.reference[m],b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let R=b?b[E]:0;(!R||!await(o.isElement==null?void 0:o.isElement(b)))&&(R=a.floating[E]||s.floating[v]);const B=w/2-T/2,P=R/2-_[v]/2-1,I=Ja(h[g],P),F=Ja(h[S],P),$=I,Z=R-_[v]-F,U=R/2-_[v]/2+B,j=XE($,U,Z),re=!l.arrow&&Ad(i)!=null&&U!==j&&s.reference[v]/2-(U<$?I:F)-_[v]/2<0,ae=re?U<$?U-$:U-Z:0;return{[m]:p[m]+ae,data:{[m]:j,centerOffset:U-j-ae,...re&&{alignmentOffset:ae}},reset:re}}}),R$=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:_=!0,...y}=Xo(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const g=Jo(i),S=Jo(a)===a,E=await(l.isRTL==null?void 0:l.isRTL(c.floating)),w=p||(S||!_?[z0(a)]:A$(a));!p&&v!=="none"&&w.push(...M$(a,_,v,E));const T=[a,...w],b=await Nh(e,y),R=[];let B=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&R.push(b[g]),h){const $=S$(i,o,E);R.push(b[$[0]],b[$[1]])}if(B=[...B,{placement:i,overflows:R}],!R.every($=>$<=0)){var P,I;const $=(((P=s.flip)==null?void 0:P.index)||0)+1,Z=T[$];if(Z)return{data:{index:$,overflows:B},reset:{placement:Z}};let U=(I=B.filter(j=>j.overflows[0]<=0).sort((j,re)=>j.overflows[1]-re.overflows[1])[0])==null?void 0:I.placement;if(!U)switch(m){case"bestFit":{var F;const j=(F=B.map(re=>[re.placement,re.overflows.filter(ae=>ae>0).reduce((ae,H)=>ae+H,0)]).sort((re,ae)=>re[1]-ae[1])[0])==null?void 0:F[0];j&&(U=j);break}case"initialPlacement":U=a;break}if(i!==U)return{reset:{placement:U}}}return{}}}};function e2(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function t2(n){return _$.some(e=>n[e]>=0)}const P$=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=Xo(n,e);switch(r){case"referenceHidden":{const s=await Nh(e,{...i,elementContext:"reference"}),o=e2(s,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:t2(o)}}}case"escaped":{const s=await Nh(e,{...i,altBoundary:!0}),o=e2(s,t.floating);return{data:{escapedOffsets:o,escaped:t2(o)}}}default:return{}}}}};async function I$(n,e){const{placement:t,platform:r,elements:i}=n,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Jo(t),a=Ad(t),l=wd(t)==="y",c=["left","top"].includes(o)?-1:1,d=s&&l?-1:1,h=Xo(e,n);let{mainAxis:p,crossAxis:m,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return a&&typeof v=="number"&&(m=a==="end"?v*-1:v),l?{x:m*d,y:p*c}:{x:p*c,y:m*d}}const L$=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await I$(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},B$=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:g,y:S}=y;return{x:g,y:S}}},...l}=Xo(n,e),c={x:t,y:r},d=await Nh(e,l),h=wd(Jo(i)),p=fw(h);let m=c[p],v=c[h];if(s){const y=p==="y"?"top":"left",g=p==="y"?"bottom":"right",S=m+d[y],E=m-d[g];m=XE(S,m,E)}if(o){const y=h==="y"?"top":"left",g=h==="y"?"bottom":"right",S=v+d[y],E=v-d[g];v=XE(S,v,E)}const _=a.fn({...e,[p]:m,[h]:v});return{..._,data:{x:_.x-t,y:_.y-r}}}}},D$=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Xo(n,e),d={x:t,y:r},h=wd(i),p=fw(h);let m=d[p],v=d[h];const _=Xo(a,e),y=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(l){const E=p==="y"?"height":"width",w=s.reference[p]-s.floating[E]+y.mainAxis,T=s.reference[p]+s.reference[E]-y.mainAxis;m<w?m=w:m>T&&(m=T)}if(c){var g,S;const E=p==="y"?"width":"height",w=["top","left"].includes(Jo(i)),T=s.reference[h]-s.floating[E]+(w&&((g=o.offset)==null?void 0:g[h])||0)+(w?0:y.crossAxis),b=s.reference[h]+s.reference[E]+(w?0:((S=o.offset)==null?void 0:S[h])||0)-(w?y.crossAxis:0);v<T?v=T:v>b&&(v=b)}return{[p]:m,[h]:v}}}},O$=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){const{placement:t,rects:r,platform:i,elements:s}=e,{apply:o=()=>{},...a}=Xo(n,e),l=await Nh(e,a),c=Jo(t),d=Ad(t),h=wd(t)==="y",{width:p,height:m}=r.floating;let v,_;c==="top"||c==="bottom"?(v=c,_=d===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(_=c,v=d==="end"?"top":"bottom");const y=m-l[v],g=p-l[_],S=!e.middlewareData.shift;let E=y,w=g;if(h){const b=p-l.left-l.right;w=d||S?Ja(g,b):b}else{const b=m-l.top-l.bottom;E=d||S?Ja(y,b):b}if(S&&!d){const b=Ti(l.left,0),R=Ti(l.right,0),B=Ti(l.top,0),P=Ti(l.bottom,0);h?w=p-2*(b!==0||R!==0?b+R:Ti(l.left,l.right)):E=m-2*(B!==0||P!==0?B+P:Ti(l.top,l.bottom))}await o({...e,availableWidth:w,availableHeight:E});const T=await i.getDimensions(s.floating);return p!==T.width||m!==T.height?{reset:{rects:!0}}:{}}}};function Ka(n){return PD(n)?(n.nodeName||"").toLowerCase():"#document"}function Di(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function qo(n){var e;return(e=(PD(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function PD(n){return n instanceof Node||n instanceof Di(n).Node}function Yo(n){return n instanceof Element||n instanceof Di(n).Element}function uo(n){return n instanceof HTMLElement||n instanceof Di(n).HTMLElement}function n2(n){return typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Di(n).ShadowRoot}function dp(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=us(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(i)}function N$(n){return["table","td","th"].includes(Ka(n))}function mw(n){const e=gw(),t=us(n);return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function F$(n){let e=sd(n);for(;uo(e)&&!Xv(e);){if(mw(e))return e;e=sd(e)}return null}function gw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Xv(n){return["html","body","#document"].includes(Ka(n))}function us(n){return Di(n).getComputedStyle(n)}function Jv(n){return Yo(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function sd(n){if(Ka(n)==="html")return n;const e=n.assignedSlot||n.parentNode||n2(n)&&n.host||qo(n);return n2(e)?e.host:e}function ID(n){const e=sd(n);return Xv(e)?n.ownerDocument?n.ownerDocument.body:n.body:uo(e)&&dp(e)?e:ID(e)}function Fh(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=ID(n),s=i===((r=n.ownerDocument)==null?void 0:r.body),o=Di(i);return s?e.concat(o,o.visualViewport||[],dp(i)?i:[],o.frameElement&&t?Fh(o.frameElement):[]):e.concat(i,Fh(i,[],t))}function LD(n){const e=us(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=uo(n),s=i?n.offsetWidth:t,o=i?n.offsetHeight:r,a=U0(t)!==s||U0(r)!==o;return a&&(t=s,r=o),{width:t,height:r,$:a}}function vw(n){return Yo(n)?n:n.contextElement}function Uu(n){const e=vw(n);if(!uo(e))return Ya(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:s}=LD(e);let o=(s?U0(t.width):t.width)/r,a=(s?U0(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const k$=Ya(0);function BD(n){const e=Di(n);return!gw()||!e.visualViewport?k$:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function U$(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Di(n)?!1:e}function lc(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=vw(n);let o=Ya(1);e&&(r?Yo(r)&&(o=Uu(r)):o=Uu(n));const a=U$(s,t,r)?BD(s):Ya(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,d=i.width/o.x,h=i.height/o.y;if(s){const p=Di(s),m=r&&Yo(r)?Di(r):r;let v=p,_=v.frameElement;for(;_&&r&&m!==v;){const y=Uu(_),g=_.getBoundingClientRect(),S=us(_),E=g.left+(_.clientLeft+parseFloat(S.paddingLeft))*y.x,w=g.top+(_.clientTop+parseFloat(S.paddingTop))*y.y;l*=y.x,c*=y.y,d*=y.x,h*=y.y,l+=E,c+=w,v=Di(_),_=v.frameElement}}return H0({width:d,height:h,x:l,y:c})}const z$=[":popover-open",":modal"];function DD(n){return z$.some(e=>{try{return n.matches(e)}catch{return!1}})}function H$(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const s=i==="fixed",o=qo(r),a=e?DD(e.floating):!1;if(r===o||a&&s)return t;let l={scrollLeft:0,scrollTop:0},c=Ya(1);const d=Ya(0),h=uo(r);if((h||!h&&!s)&&((Ka(r)!=="body"||dp(o))&&(l=Jv(r)),uo(r))){const p=lc(r);c=Uu(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+d.x,y:t.y*c.y-l.scrollTop*c.y+d.y}}function G$(n){return Array.from(n.getClientRects())}function OD(n){return lc(qo(n)).left+Jv(n).scrollLeft}function V$(n){const e=qo(n),t=Jv(n),r=n.ownerDocument.body,i=Ti(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Ti(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+OD(n);const a=-t.scrollTop;return us(r).direction==="rtl"&&(o+=Ti(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function W$(n,e){const t=Di(n),r=qo(n),i=t.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=gw();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function $$(n,e){const t=lc(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,s=uo(n)?Uu(n):Ya(1),o=n.clientWidth*s.x,a=n.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function r2(n,e,t){let r;if(e==="viewport")r=W$(n,t);else if(e==="document")r=V$(qo(n));else if(Yo(e))r=$$(e,t);else{const i=BD(n);r={...e,x:e.x-i.x,y:e.y-i.y}}return H0(r)}function ND(n,e){const t=sd(n);return t===e||!Yo(t)||Xv(t)?!1:us(t).position==="fixed"||ND(t,e)}function j$(n,e){const t=e.get(n);if(t)return t;let r=Fh(n,[],!1).filter(a=>Yo(a)&&Ka(a)!=="body"),i=null;const s=us(n).position==="fixed";let o=s?sd(n):n;for(;Yo(o)&&!Xv(o);){const a=us(o),l=mw(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||dp(o)&&!l&&ND(n,o))?r=r.filter(d=>d!==o):i=a,o=sd(o)}return e.set(n,r),r}function X$(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const o=[...t==="clippingAncestors"?j$(e,this._c):[].concat(t),r],a=o[0],l=o.reduce((c,d)=>{const h=r2(e,d,i);return c.top=Ti(h.top,c.top),c.right=Ja(h.right,c.right),c.bottom=Ja(h.bottom,c.bottom),c.left=Ti(h.left,c.left),c},r2(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function J$(n){const{width:e,height:t}=LD(n);return{width:e,height:t}}function Y$(n,e,t){const r=uo(e),i=qo(e),s=t==="fixed",o=lc(n,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Ya(0);if(r||!r&&!s)if((Ka(e)!=="body"||dp(i))&&(a=Jv(e)),r){const h=lc(e,!0,s,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else i&&(l.x=OD(i));const c=o.left+a.scrollLeft-l.x,d=o.top+a.scrollTop-l.y;return{x:c,y:d,width:o.width,height:o.height}}function i2(n,e){return!uo(n)||us(n).position==="fixed"?null:e?e(n):n.offsetParent}function FD(n,e){const t=Di(n);if(!uo(n)||DD(n))return t;let r=i2(n,e);for(;r&&N$(r)&&us(r).position==="static";)r=i2(r,e);return r&&(Ka(r)==="html"||Ka(r)==="body"&&us(r).position==="static"&&!mw(r))?t:r||F$(n)||t}const K$=async function(n){const e=this.getOffsetParent||FD,t=this.getDimensions;return{reference:Y$(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,...await t(n.floating)}}};function Z$(n){return us(n).direction==="rtl"}const Q$={convertOffsetParentRelativeRectToViewportRelativeRect:H$,getDocumentElement:qo,getClippingRect:X$,getOffsetParent:FD,getElementRects:K$,getClientRects:G$,getDimensions:J$,getScale:Uu,isElement:Yo,isRTL:Z$};function q$(n,e){let t=null,r;const i=qo(n);function s(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:d,width:h,height:p}=n.getBoundingClientRect();if(a||e(),!h||!p)return;const m=Pg(d),v=Pg(i.clientWidth-(c+h)),_=Pg(i.clientHeight-(d+p)),y=Pg(c),S={rootMargin:-m+"px "+-v+"px "+-_+"px "+-y+"px",threshold:Ti(0,Ja(1,l))||1};let E=!0;function w(T){const b=T[0].intersectionRatio;if(b!==l){if(!E)return o();b?o(!1,b):r=setTimeout(()=>{o(!1,1e-7)},100)}E=!1}try{t=new IntersectionObserver(w,{...S,root:i.ownerDocument})}catch{t=new IntersectionObserver(w,S)}t.observe(n)}return o(!0),s}function ej(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=vw(n),d=i||s?[...c?Fh(c):[],...Fh(e)]:[];d.forEach(g=>{i&&g.addEventListener("scroll",t,{passive:!0}),s&&g.addEventListener("resize",t)});const h=c&&a?q$(c,t):null;let p=-1,m=null;o&&(m=new ResizeObserver(g=>{let[S]=g;S&&S.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var E;(E=m)==null||E.observe(e)})),t()}),c&&!l&&m.observe(c),m.observe(e));let v,_=l?lc(n):null;l&&y();function y(){const g=lc(n);_&&(g.x!==_.x||g.y!==_.y||g.width!==_.width||g.height!==_.height)&&t(),_=g,v=requestAnimationFrame(y)}return t(),()=>{var g;d.forEach(S=>{i&&S.removeEventListener("scroll",t),s&&S.removeEventListener("resize",t)}),h==null||h(),(g=m)==null||g.disconnect(),m=null,l&&cancelAnimationFrame(v)}}const tj=B$,nj=R$,rj=O$,ij=P$,s2=T$,sj=D$,oj=(n,e,t)=>{const r=new Map,i={platform:Q$,...t},s={...i.platform,_c:r};return C$(n,e,{...i,platform:s})},aj=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?s2({element:r.current,padding:i}).fn(t):{}:r?s2({element:r,padding:i}).fn(t):{}}}};var r0=typeof document<"u"?C.useLayoutEffect:C.useEffect;function G0(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!G0(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const s=i[r];if(!(s==="_owner"&&n.$$typeof)&&!G0(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function kD(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function o2(n,e){const t=kD(n);return Math.round(e*t)/t}function a2(n){const e=C.useRef(n);return r0(()=>{e.current=n}),e}function lj(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=n,[d,h]=C.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=C.useState(r);G0(p,r)||m(r);const[v,_]=C.useState(null),[y,g]=C.useState(null),S=C.useCallback(ae=>{ae!==b.current&&(b.current=ae,_(ae))},[]),E=C.useCallback(ae=>{ae!==R.current&&(R.current=ae,g(ae))},[]),w=s||v,T=o||y,b=C.useRef(null),R=C.useRef(null),B=C.useRef(d),P=l!=null,I=a2(l),F=a2(i),$=C.useCallback(()=>{if(!b.current||!R.current)return;const ae={placement:e,strategy:t,middleware:p};F.current&&(ae.platform=F.current),oj(b.current,R.current,ae).then(H=>{const Y={...H,isPositioned:!0};Z.current&&!G0(B.current,Y)&&(B.current=Y,$h.flushSync(()=>{h(Y)}))})},[p,e,t,F]);r0(()=>{c===!1&&B.current.isPositioned&&(B.current.isPositioned=!1,h(ae=>({...ae,isPositioned:!1})))},[c]);const Z=C.useRef(!1);r0(()=>(Z.current=!0,()=>{Z.current=!1}),[]),r0(()=>{if(w&&(b.current=w),T&&(R.current=T),w&&T){if(I.current)return I.current(w,T,$);$()}},[w,T,$,I,P]);const U=C.useMemo(()=>({reference:b,floating:R,setReference:S,setFloating:E}),[S,E]),j=C.useMemo(()=>({reference:w,floating:T}),[w,T]),re=C.useMemo(()=>{const ae={position:t,left:0,top:0};if(!j.floating)return ae;const H=o2(j.floating,d.x),Y=o2(j.floating,d.y);return a?{...ae,transform:"translate("+H+"px, "+Y+"px)",...kD(j.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:H,top:Y}},[t,a,j.floating,d.x,d.y]);return C.useMemo(()=>({...d,update:$,refs:U,elements:j,floatingStyles:re}),[d,$,U,j,re])}const cj=C.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...s}=n;return C.createElement(gc.svg,Hn({},s,{ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),n.asChild?t:C.createElement("polygon",{points:"0,0 30,0 15,10"}))}),uj=cj;function dj(n){const[e,t]=C.useState(void 0);return id(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}const UD="Popper",[zD,HD]=CD(UD),[fj,GD]=zD(UD),hj=n=>{const{__scopePopper:e,children:t}=n,[r,i]=C.useState(null);return C.createElement(fj,{scope:e,anchor:r,onAnchorChange:i},t)},pj="PopperAnchor",mj=C.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,s=GD(pj,t),o=C.useRef(null),a=xd(e,o);return C.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:C.createElement(gc.div,Hn({},i,{ref:a}))}),VD="PopperContent",[gj,vj]=zD(VD),yj=C.forwardRef((n,e)=>{var t,r,i,s,o,a,l,c;const{__scopePopper:d,side:h="bottom",sideOffset:p=0,align:m="center",alignOffset:v=0,arrowPadding:_=0,avoidCollisions:y=!0,collisionBoundary:g=[],collisionPadding:S=0,sticky:E="partial",hideWhenDetached:w=!1,updatePositionStrategy:T="optimized",onPlaced:b,...R}=n,B=GD(VD,d),[P,I]=C.useState(null),F=xd(e,Le=>I(Le)),[$,Z]=C.useState(null),U=dj($),j=(t=U==null?void 0:U.width)!==null&&t!==void 0?t:0,re=(r=U==null?void 0:U.height)!==null&&r!==void 0?r:0,ae=h+(m!=="center"?"-"+m:""),H=typeof S=="number"?S:{top:0,right:0,bottom:0,left:0,...S},Y=Array.isArray(g)?g:[g],V=Y.length>0,ee={padding:H,boundary:Y.filter(Sj),altBoundary:V},{refs:ie,floatingStyles:oe,placement:he,isPositioned:Ce,middlewareData:be}=lj({strategy:"fixed",placement:ae,whileElementsMounted:(...Le)=>ej(...Le,{animationFrame:T==="always"}),elements:{reference:B.anchor},middleware:[L$({mainAxis:p+re,alignmentAxis:v}),y&&tj({mainAxis:!0,crossAxis:!1,limiter:E==="partial"?sj():void 0,...ee}),y&&nj({...ee}),rj({...ee,apply:({elements:Le,rects:Ae,availableWidth:ot,availableHeight:Ve})=>{const{width:G,height:k}=Ae.reference,de=Le.floating.style;de.setProperty("--radix-popper-available-width",`${ot}px`),de.setProperty("--radix-popper-available-height",`${Ve}px`),de.setProperty("--radix-popper-anchor-width",`${G}px`),de.setProperty("--radix-popper-anchor-height",`${k}px`)}}),$&&aj({element:$,padding:_}),Aj({arrowWidth:j,arrowHeight:re}),w&&ij({strategy:"referenceHidden",...ee})]}),[Te,Xe]=WD(he),ct=Sd(b);id(()=>{Ce&&(ct==null||ct())},[Ce,ct]);const et=(i=be.arrow)===null||i===void 0?void 0:i.x,st=(s=be.arrow)===null||s===void 0?void 0:s.y,te=((o=be.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[Pe,we]=C.useState();return id(()=>{P&&we(window.getComputedStyle(P).zIndex)},[P]),C.createElement("div",{ref:ie.setFloating,"data-radix-popper-content-wrapper":"",style:{...oe,transform:Ce?oe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Pe,"--radix-popper-transform-origin":[(a=be.transformOrigin)===null||a===void 0?void 0:a.x,(l=be.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:n.dir},C.createElement(gj,{scope:d,placedSide:Te,onArrowChange:Z,arrowX:et,arrowY:st,shouldHideArrow:te},C.createElement(gc.div,Hn({"data-side":Te,"data-align":Xe},R,{ref:F,style:{...R.style,animation:Ce?void 0:"none",opacity:(c=be.hide)!==null&&c!==void 0&&c.referenceHidden?0:void 0}}))))}),_j="PopperArrow",xj={top:"bottom",right:"left",bottom:"top",left:"right"},Ej=C.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,s=vj(_j,r),o=xj[s.placedSide];return C.createElement("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0}},C.createElement(uj,Hn({},i,{ref:t,style:{...i.style,display:"block"}})))});function Sj(n){return n!==null}const Aj=n=>({name:"transformOrigin",options:n,fn(e){var t,r,i,s,o;const{placement:a,rects:l,middlewareData:c}=e,h=((t=c.arrow)===null||t===void 0?void 0:t.centerOffset)!==0,p=h?0:n.arrowWidth,m=h?0:n.arrowHeight,[v,_]=WD(a),y={start:"0%",center:"50%",end:"100%"}[_],g=((r=(i=c.arrow)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0)+p/2,S=((s=(o=c.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+m/2;let E="",w="";return v==="bottom"?(E=h?y:`${g}px`,w=`${-m}px`):v==="top"?(E=h?y:`${g}px`,w=`${l.floating.height+m}px`):v==="right"?(E=`${-m}px`,w=h?y:`${S}px`):v==="left"&&(E=`${l.floating.width+m}px`,w=h?y:`${S}px`),{data:{x:E,y:w}}}});function WD(n){const[e,t="center"]=n.split("-");return[e,t]}const wj=hj,Mj=mj,bj=yj,Cj=Ej;function Tj(n,e){return C.useReducer((t,r)=>{const i=e[t][r];return i??t},n)}const $D=n=>{const{present:e,children:t}=n,r=Rj(e),i=typeof t=="function"?t({present:r.isPresent}):C.Children.only(t),s=xd(r.ref,i.ref);return typeof t=="function"||r.isPresent?C.cloneElement(i,{ref:s}):null};$D.displayName="Presence";function Rj(n){const[e,t]=C.useState(),r=C.useRef({}),i=C.useRef(n),s=C.useRef("none"),o=n?"mounted":"unmounted",[a,l]=Tj(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return C.useEffect(()=>{const c=Ig(r.current);s.current=a==="mounted"?c:"none"},[a]),id(()=>{const c=r.current,d=i.current;if(d!==n){const p=s.current,m=Ig(c);n?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&p!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,l]),id(()=>{if(e){const c=h=>{const m=Ig(r.current).includes(h.animationName);h.target===e&&m&&$h.flushSync(()=>l("ANIMATION_END"))},d=h=>{h.target===e&&(s.current=Ig(r.current))};return e.addEventListener("animationstart",d),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",d),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:C.useCallback(c=>{c&&(r.current=getComputedStyle(c)),t(c)},[])}}function Ig(n){return(n==null?void 0:n.animationName)||"none"}function Pj({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,i]=Ij({defaultProp:e,onChange:t}),s=n!==void 0,o=s?n:r,a=Sd(t),l=C.useCallback(c=>{if(s){const h=typeof c=="function"?c(n):c;h!==n&&a(h)}else i(c)},[s,n,i,a]);return[o,l]}function Ij({defaultProp:n,onChange:e}){const t=C.useState(n),[r]=t,i=C.useRef(r),s=Sd(e);return C.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),t}const Lj=C.forwardRef((n,e)=>C.createElement(gc.span,Hn({},n,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...n.style}}))),Bj=Lj,[Yv,qq]=CD("Tooltip",[HD]),Kv=HD(),Dj="TooltipProvider",YE="tooltip.open",[eee,yw]=Yv(Dj),_w="Tooltip",[Oj,Zv]=Yv(_w),Nj=n=>{const{__scopeTooltip:e,children:t,open:r,defaultOpen:i=!1,onOpenChange:s,disableHoverableContent:o,delayDuration:a}=n,l=yw(_w,n.__scopeTooltip),c=Kv(e),[d,h]=C.useState(null),p=y$(),m=C.useRef(0),v=o??l.disableHoverableContent,_=a??l.delayDuration,y=C.useRef(!1),[g=!1,S]=Pj({prop:r,defaultProp:i,onChange:R=>{R?(l.onOpen(),document.dispatchEvent(new CustomEvent(YE))):l.onClose(),s==null||s(R)}}),E=C.useMemo(()=>g?y.current?"delayed-open":"instant-open":"closed",[g]),w=C.useCallback(()=>{window.clearTimeout(m.current),y.current=!1,S(!0)},[S]),T=C.useCallback(()=>{window.clearTimeout(m.current),S(!1)},[S]),b=C.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{y.current=!0,S(!0)},_)},[_,S]);return C.useEffect(()=>()=>window.clearTimeout(m.current),[]),C.createElement(wj,c,C.createElement(Oj,{scope:e,contentId:p,open:g,stateAttribute:E,trigger:d,onTriggerChange:h,onTriggerEnter:C.useCallback(()=>{l.isOpenDelayed?b():w()},[l.isOpenDelayed,b,w]),onTriggerLeave:C.useCallback(()=>{v?T():window.clearTimeout(m.current)},[T,v]),onOpen:w,onClose:T,disableHoverableContent:v},t))},l2="TooltipTrigger",Fj=C.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=Zv(l2,t),s=yw(l2,t),o=Kv(t),a=C.useRef(null),l=xd(e,a,i.onTriggerChange),c=C.useRef(!1),d=C.useRef(!1),h=C.useCallback(()=>c.current=!1,[]);return C.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),C.createElement(Mj,Hn({asChild:!0},o),C.createElement(gc.button,Hn({"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute},r,{ref:l,onPointerMove:Ro(n.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),d.current=!0)}),onPointerLeave:Ro(n.onPointerLeave,()=>{i.onTriggerLeave(),d.current=!1}),onPointerDown:Ro(n.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Ro(n.onFocus,()=>{c.current||i.onOpen()}),onBlur:Ro(n.onBlur,i.onClose),onClick:Ro(n.onClick,i.onClose)})))}),kj="TooltipPortal",[tee,Uj]=Yv(kj,{forceMount:void 0}),kh="TooltipContent",zj=C.forwardRef((n,e)=>{const t=Uj(kh,n.__scopeTooltip),{forceMount:r=t.forceMount,side:i="top",...s}=n,o=Zv(kh,n.__scopeTooltip);return C.createElement($D,{present:r||o.open},o.disableHoverableContent?C.createElement(jD,Hn({side:i},s,{ref:e})):C.createElement(Hj,Hn({side:i},s,{ref:e})))}),Hj=C.forwardRef((n,e)=>{const t=Zv(kh,n.__scopeTooltip),r=yw(kh,n.__scopeTooltip),i=C.useRef(null),s=xd(e,i),[o,a]=C.useState(null),{trigger:l,onClose:c}=t,d=i.current,{onPointerInTransitChange:h}=r,p=C.useCallback(()=>{a(null),h(!1)},[h]),m=C.useCallback((v,_)=>{const y=v.currentTarget,g={x:v.clientX,y:v.clientY},S=jj(g,y.getBoundingClientRect()),E=Xj(g,S),w=Jj(_.getBoundingClientRect()),T=Kj([...E,...w]);a(T),h(!0)},[h]);return C.useEffect(()=>()=>p(),[p]),C.useEffect(()=>{if(l&&d){const v=y=>m(y,d),_=y=>m(y,l);return l.addEventListener("pointerleave",v),d.addEventListener("pointerleave",_),()=>{l.removeEventListener("pointerleave",v),d.removeEventListener("pointerleave",_)}}},[l,d,m,p]),C.useEffect(()=>{if(o){const v=_=>{const y=_.target,g={x:_.clientX,y:_.clientY},S=(l==null?void 0:l.contains(y))||(d==null?void 0:d.contains(y)),E=!Yj(g,o);S?p():E&&(p(),c())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,d,o,c,p]),C.createElement(jD,Hn({},n,{ref:s}))}),[Gj,Vj]=Yv(_w,{isInside:!1}),jD=C.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=n,l=Zv(kh,t),c=Kv(t),{onClose:d}=l;return C.useEffect(()=>(document.addEventListener(YE,d),()=>document.removeEventListener(YE,d)),[d]),C.useEffect(()=>{if(l.trigger){const h=p=>{const m=p.target;m!=null&&m.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),C.createElement(h$,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d},C.createElement(bj,Hn({"data-state":l.stateAttribute},c,a,{ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),C.createElement(ED,null,r),C.createElement(Gj,{scope:t,isInside:!0},C.createElement(Bj,{id:l.contentId,role:"tooltip"},i||r))))}),Wj="TooltipArrow",$j=C.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,i=Kv(t);return Vj(Wj,t).isInside?null:C.createElement(Cj,Hn({},i,r,{ref:e}))});function jj(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),i=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,r,i,s)){case s:return"left";case i:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Xj(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function Jj(n){const{top:e,right:t,bottom:r,left:i}=n;return[{x:i,y:e},{x:t,y:e},{x:t,y:r},{x:i,y:r}]}function Yj(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,c=e[o].x,d=e[o].y;l>r!=d>r&&t<(c-a)*(r-l)/(d-l)+a&&(i=!i)}return i}function Kj(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),Zj(e)}function Zj(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const i=n[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}const Qj=Nj,qj=Fj,eX=zj,tX=$j;function nX(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function hn(n,e){if(n==null)return{};var t=nX(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}let On;(function(n){n[n.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",n[n.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",n[n.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",n[n.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",n[n.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",n[n.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",n[n.THEME_ERROR=6]="THEME_ERROR",n[n.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",n[n.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",n[n.EMPTY_KEY=9]="EMPTY_KEY"})(On||(On={}));const rX={[On.UNSUPPORTED_INPUT]:(n,e)=>[`An input with type \`${n}\` input was found at path \`${e}\` but it's not supported yet.`],[On.NO_COMPONENT_FOR_TYPE]:(n,e)=>[`Type \`${n}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[On.UNKNOWN_INPUT]:(n,e)=>[`input at path \`${n}\` is not recognized.`,e],[On.DUPLICATE_KEYS]:(n,e,t)=>[`Key \`${n}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[On.ALREADY_REGISTERED_TYPE]:n=>[`Type ${n} has already been registered. You can't register a component with the same type.`],[On.CLIPBOARD_ERROR]:n=>["Error copying the value",n],[On.THEME_ERROR]:(n,e)=>[`Error accessing the theme \`${n}.${e}\` value.`],[On.PATH_DOESNT_EXIST]:n=>[`Error getting the value at path \`${n}\`. There is probably an error in your \`render\` function.`],[On.PATH_DOESNT_EXIST]:n=>[`Error accessing the value at path \`${n}\``],[On.INPUT_TYPE_OVERRIDE]:(n,e,t)=>[`Input at path \`${n}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[On.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function XD(n,e,...t){const[r,...i]=rX[e](...t);console[n]("LEVA: "+r,...i)}const Io=XD.bind(null,"warn"),iX=XD.bind(null,"log"),sX=["value"],oX=["schema"],aX=["value"],JD=[],cc={};function c2(n){let{value:e}=n,t=hn(n,sX);for(let r of JD){const i=r(e,t);if(i)return i}}function ea(n,e){let{schema:t}=e,r=hn(e,oX);if(n in cc){Io(On.ALREADY_REGISTERED_TYPE,n);return}JD.push((i,s)=>t(i,s)&&n),cc[n]=r}function Ux(n,e,t,r){const{normalize:i}=cc[n];if(i)return i(e,t,r);if(typeof e!="object"||!("value"in e))return{value:e};const{value:s}=e,o=hn(e,aX);return{value:s,settings:o}}function lX(n,e,t,r,i,s){const{sanitize:o}=cc[n];return o?o(e,t,r,i,s):e}function u2(n,e,t){const{format:r}=cc[n];return r?r(e,t):e}function cX(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function d2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function St(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?d2(Object(t),!0).forEach(function(r){cX(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):d2(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const Za=(n,e,t)=>n>t?t:n<e?e:n,uX=n=>{if(n===""||typeof n=="number")return n;try{const e=xa(n);if(!isNaN(e))return e}catch{}return parseFloat(n)},dX=Math.log(10);function f2(n){let e=Math.abs(+String(n).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/dX)+1,r=Math.floor(Math.log10(Math.abs(n))),i=Math.pow(10,r-t);return Math.max(i,.001)}const V0=(n,e,t)=>t===e?0:(Za(n,e,t)-e)/(t-e),W0=(n,e,t)=>n*(t-e)+e,fX=()=>"_"+Math.random().toString(36).substr(2,9),h2=/\(([0-9+\-*/^ .]+)\)/,p2=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,m2=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,g2=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,v2=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,y2=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function xa(n){if(isNaN(Number(n)))if(h2.test(n)){const e=n.replace(h2,(t,r)=>String(xa(r)));return xa(e)}else if(p2.test(n)){const e=n.replace(p2,(t,r,i)=>String(Math.pow(Number(r),Number(i))));return xa(e)}else if(m2.test(n)){const e=n.replace(m2,(t,r,i)=>String(Number(r)*Number(i)));return xa(e)}else if(g2.test(n)){const e=n.replace(g2,(t,r,i)=>{if(i!=0)return String(Number(r)/Number(i));throw new Error("Division by zero")});return xa(e)}else if(v2.test(n)){const e=n.replace(v2,(t,r,i)=>String(Number(r)+Number(i)));return xa(e)}else if(y2.test(n)){const e=n.replace(y2,(t,r,i)=>String(Number(r)-Number(i)));return xa(e)}else return Number(n);return Number(n)}function hX(n,e){return e.reduce((t,r)=>(n&&n.hasOwnProperty(r)&&(t[r]=n[r]),t),{})}function pX(n,e){const t=St({},n);return e.forEach(r=>r in n&&delete t[r]),t}function mX(n,e){return n.reduce((t,r,i)=>Object.assign(t,{[e[i]]:r}),{})}function YD(n){return Object.prototype.toString.call(n)==="[object Object]"}const gX=n=>YD(n)&&Object.keys(n).length===0;let as;(function(n){n.BUTTON="BUTTON",n.BUTTON_GROUP="BUTTON_GROUP",n.MONITOR="MONITOR",n.FOLDER="FOLDER"})(as||(as={}));let Bs;(function(n){n.SELECT="SELECT",n.IMAGE="IMAGE",n.NUMBER="NUMBER",n.COLOR="COLOR",n.STRING="STRING",n.BOOLEAN="BOOLEAN",n.INTERVAL="INTERVAL",n.VECTOR3D="VECTOR3D",n.VECTOR2D="VECTOR2D"})(Bs||(Bs={}));const vX=["type","__customInput"],yX=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],_X=["type"];function KD(n,e,t={},r){var i,s;if(typeof n!="object"||Array.isArray(n))return{type:r,input:n,options:St({key:e,label:e,optional:!1,disabled:!1,order:0},t)};if("__customInput"in n){const{type:T,__customInput:b}=n,R=hn(n,vX);return KD(b,e,R,T)}const{render:o,label:a,optional:l,order:c=0,disabled:d,hint:h,onChange:p,onEditStart:m,onEditEnd:v,transient:_}=n,y=hn(n,yX),g=St({render:o,key:e,label:a??e,hint:h,transient:_??!!p,onEditStart:m,onEditEnd:v,disabled:d,optional:l,order:c},t);let{type:S}=y,E=hn(y,_X);if(S=r??S,S in as)return{type:S,input:E,options:g};let w;return r&&YD(E)&&"value"in E?w=E.value:w=gX(E)?void 0:E,{type:S,input:w,options:St(St({},g),{},{onChange:p,optional:(i=g.optional)!==null&&i!==void 0?i:!1,disabled:(s=g.disabled)!==null&&s!==void 0?s:!1})}}function xX(n,e,t,r){const i=KD(n,e),{type:s,input:o,options:a}=i;if(s)return s in as?i:{type:s,input:Ux(s,o,t,r),options:a};let l=c2(o);return l?{type:l,input:Ux(l,o,t,r),options:a}:(l=c2({value:o}),l?{type:l,input:Ux(l,{value:o},t,r),options:a}:!1)}function _2(n,e,t,r,i){const{value:s,type:o,settings:a}=n;n.value=ZD({type:o,value:s,settings:a},e,t,r),n.fromPanel=i}const EX=function(e,t,r){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=r};function ZD({type:n,value:e,settings:t},r,i,s){const o=n!=="SELECT"&&typeof r=="function"?r(e):r;let a;try{a=lX(n,o,t,e,i,s)}catch(l){throw new EX(`The value \`${r}\` did not result in a correct value.`,e,l)}return Dh(a,e)?e:a}const QD=(n,e,t=!1)=>{let r=0;return function(){const i=arguments,s=t&&!r,o=()=>n.apply(this,i);window.clearTimeout(r),r=window.setTimeout(o,e),s&&o()}},qD=n=>n.shiftKey?5:n.altKey?1/5:1;function SX(n,e){const t=console.error;console.error=()=>{},EL.render(n,e),console.error=t}const AX=["value"],wX=["min","max"],MX=n=>{if(typeof n=="number")return!0;if(typeof n=="string"){const e=parseFloat(n);return isNaN(e)?!1:n.substring((""+e).length).trim().length<4}return!1},eO=(n,{min:e=-1/0,max:t=1/0,suffix:r})=>{const i=parseFloat(n);if(n===""||isNaN(i))throw Error("Invalid number");const s=Za(i,e,t);return r?s+r:s},bX=(n,{pad:e=0,suffix:t})=>{const r=parseFloat(n).toFixed(e);return t?r+t:r},tO=n=>{let{value:e}=n,t=hn(n,AX);const{min:r=-1/0,max:i=1/0}=t,s=hn(t,wX);let o=parseFloat(e);const a=typeof e=="string"?e.substring((""+o).length):void 0;o=Za(o,r,i);let l=t.step;l||(Number.isFinite(r)?Number.isFinite(i)?l=+(Math.abs(i-r)/100).toPrecision(1):l=+(Math.abs(o-r)/100).toPrecision(1):Number.isFinite(i)&&(l=+(Math.abs(i-o)/100).toPrecision(1)));const c=l?f2(l)*10:f2(o);l=l||c/10;const d=Math.round(Za(Math.log10(1/c),0,2));return{value:a?o+a:o,settings:St({initialValue:o,step:l,pad:d,min:r,max:i,suffix:a},s)}},nO=(n,{step:e,initialValue:t})=>{const r=Math.round((n-t)/e);return t+r*e};var rO=Object.freeze({__proto__:null,schema:MX,sanitize:eO,format:bX,normalize:tO,sanitizeStep:nO});function Jn(){return Jn=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Jn.apply(this,arguments)}const iO=C.createContext({});function Wr(){return C.useContext(iO)}const xw=C.createContext(null),sO=C.createContext(null),oO=C.createContext(null);function fp(){return C.useContext(sO)}function CX(){return C.useContext(oO)}const aO=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function Lg(n,e){const[t,r]=n.split(" "),i={};return t!=="none"&&(i.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),r&&(i.backgroundColor=r),i}const Cf={$inputStyle:()=>n=>Lg(n,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>n=>Lg(n,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>n=>Lg(n,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>n=>Lg(n,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:xt,css:nee,createTheme:TX,globalCss:RX,keyframes:ree}=a$({prefix:"leva",theme:aO(),utils:St(St({},Cf),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:n=>({"&:focus":Cf.$focusStyle()(n)}),$focusWithin:n=>({"&:focus-within":Cf.$focusStyle()(n)}),$hover:n=>({"&:hover":Cf.$hoverStyle()(n)}),$active:n=>({"&:active":Cf.$activeStyle()(n)})})}),PX=RX({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function IX(n){const e=aO();if(!n)return{theme:e,className:""};Object.keys(n).forEach(r=>{Object.assign(e[r],n[r])});const t=TX(e);return{theme:e,className:t.className}}function Uo(n,e){const{theme:t}=C.useContext(xw);if(!(n in t)||!(e in t[n]))return Io(On.THEME_ERROR,n,e),"";let r=e;for(;;){let i=t[n][r];if(typeof i=="string"&&i.charAt(0)==="$")r=i.substr(1);else return i}}const lO=xt("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),cO=xt("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${lO}`]:{paddingLeft:0}}),LX=xt(cO,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),BX=xt("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),DX=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],OX=["onUpdate"];function Ew(n){let{innerLabel:e,value:t,onUpdate:r,onChange:i,onKeyDown:s,type:o,id:a,inputType:l="text",rows:c=0}=n,d=hn(n,DX);const{id:h,emitOnEditStart:p,emitOnEditEnd:m,disabled:v}=Wr(),_=a||h,y=C.useRef(null),g=c>0,S=g?"textarea":"input",E=C.useCallback(b=>R=>{const B=R.currentTarget.value;b(B)},[]);q.useEffect(()=>{const b=y.current,R=E(B=>{r(B),m()});return b==null||b.addEventListener("blur",R),()=>b==null?void 0:b.removeEventListener("blur",R)},[E,r,m]);const w=C.useCallback(b=>{b.key==="Enter"&&E(r)(b)},[E,r]),T=Object.assign({as:S},g?{rows:c}:{},d);return q.createElement(BX,{textArea:g},e&&typeof e=="string"?q.createElement(cO,null,e):e,q.createElement(lO,Jn({levaType:o,ref:y,id:_,type:l,autoComplete:"off",spellCheck:"false",value:t,onChange:E(i),onFocus:()=>p(),onKeyPress:w,onKeyDown:s,disabled:v},T)))}function NX(n){let{onUpdate:e}=n,t=hn(n,OX);const r=C.useCallback(s=>e(uX(s)),[e]),i=C.useCallback(s=>{const o=s.key==="ArrowUp"?1:s.key==="ArrowDown"?-1:0;if(o){s.preventDefault();const a=s.altKey?.1:s.shiftKey?10:1;e(l=>parseFloat(l)+o*a)}},[e]);return q.createElement(Ew,Jn({},t,{onUpdate:r,onKeyDown:i,type:"number"}))}const $0=xt("div",{}),KE=xt("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),FX=xt("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${KE}::after`]:{opacity:.6},[`${$0}:hover > & + ${KE}::after`]:{opacity:.6},[`${$0}:hover > & > svg`]:{opacity:1}}),uO=xt("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${$0}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),dO=xt("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${uO} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),fO=xt(dO,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),kX=xt("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),UX=xt("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),ZE=xt("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),zX=xt("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${ZE}`]:{pointerEvents:"auto"}}}}}),hO=xt("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),HX=xt("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),GX=xt(tX,{fill:"$toolTipBackground"});function Sw({children:n}){const{className:e}=C.useContext(xw);return q.createElement(R7,{className:e},n)}const VX=["align"];function WX(){const{id:n,disable:e,disabled:t}=Wr();return q.createElement(q.Fragment,null,q.createElement(UX,{id:n+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),q.createElement("label",{htmlFor:n+"__disable"}))}function $X(n){const{id:e,optional:t,hint:r}=Wr(),i=n.htmlFor||(e?{htmlFor:e}:null),s=!r&&typeof n.children=="string"?{title:n.children}:null;return q.createElement(q.Fragment,null,t&&q.createElement(WX,null),r!==void 0?q.createElement(Qj,null,q.createElement(qj,{asChild:!0},q.createElement(ZE,Jn({},i,n))),q.createElement(eX,{side:"top",sideOffset:2},q.createElement(HX,null,r,q.createElement(GX,null)))):q.createElement(ZE,Jn({},i,s,n)))}function Fs(n){let{align:e}=n,t=hn(n,VX);const{value:r,label:i,key:s,disabled:o}=Wr(),{hideCopyButton:a}=CX(),l=!a&&s!==void 0,[c,d]=C.useState(!1),h=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[s]:r??""})),d(!0)}catch{Io(On.CLIPBOARD_ERROR,{[s]:r})}};return q.createElement(kX,{align:e,onPointerLeave:()=>d(!1)},q.createElement($X,t),l&&!o&&q.createElement("div",{title:`Click to copy ${typeof i=="string"?i:s} value`},c?q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},q.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),q.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):q.createElement("svg",{onClick:h,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},q.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),q.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const jX=["toggled"],XX=xt("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function Aw(n){let{toggled:e}=n,t=hn(n,jX);return q.createElement(XX,Jn({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),q.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const JX=["input"];function fs(n){let{input:e}=n,t=hn(n,JX);return e?q.createElement(fO,t):q.createElement(dO,t)}function pO({value:n,type:e,settings:t,setValue:r}){const[i,s]=C.useState(u2(e,n,t)),o=C.useRef(n),a=C.useRef(t);a.current=t;const l=C.useCallback(d=>s(u2(e,d,a.current)),[e]),c=C.useCallback(d=>{try{r(d)}catch(h){const{type:p,previousValue:m}=h;if(p!=="LEVA_ERROR")throw h;l(m)}},[l,r]);return C.useEffect(()=>{Dh(n,o.current)||l(n),o.current=n},[n,l]),{displayValue:i,onChange:s,onUpdate:c}}function hp(n,e){const{emitOnEditStart:t,emitOnEditEnd:r}=Wr();return iW(i=>{i.first&&(document.body.classList.add("leva__panel__dragged"),t==null||t());const s=n(i);return i.last&&(document.body.classList.remove("leva__panel__dragged"),r==null||r()),s},e)}function YX(n){const e=C.useRef(null),t=C.useRef(null),r=C.useRef(!1);return C.useEffect(()=>{const i=QD(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,n(e.current,t.current)},250);return window.addEventListener("resize",i),r.current||(i(),r.current=!0),()=>window.removeEventListener("resize",i)},[n]),C.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function mO(){const n=C.useRef(null),e=C.useRef({x:0,y:0}),t=C.useCallback(r=>{Object.assign(e.current,r),n.current&&(n.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[n,t]}const KX=["__refCount"],zx=(n,e)=>{if(!n[e])return null;const t=n[e];return hn(t,KX)};function ZX(n){const e=fp(),[t,r]=C.useState(zx(e.getData(),n)),i=C.useCallback(c=>e.setValueAtPath(n,c,!0),[n,e]),s=C.useCallback(c=>e.setSettingsAtPath(n,c),[n,e]),o=C.useCallback(c=>e.disableInputAtPath(n,c),[n,e]),a=C.useCallback(()=>e.emitOnEditStart(n),[n,e]),l=C.useCallback(()=>e.emitOnEditEnd(n),[n,e]);return C.useEffect(()=>{r(zx(e.getData(),n));const c=e.useStore.subscribe(d=>zx(d.data,n),r,{equalityFn:up});return()=>c()},[e,n]),[t,{set:i,setSettings:s,disable:o,storeId:e.storeId,emitOnEditStart:a,emitOnEditEnd:l}]}const QX=xt("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),gO=xt("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),QE=xt("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),vO=xt("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),yO=xt("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function qX({value:n,min:e,max:t,onDrag:r,step:i,initialValue:s}){const o=C.useRef(null),a=C.useRef(null),l=C.useRef(0),c=Uo("sizes","scrubberWidth"),d=hp(({event:p,first:m,xy:[v],movement:[_],memo:y})=>{if(m){const{width:S,left:E}=o.current.getBoundingClientRect();l.current=S-parseFloat(c),y=(p==null?void 0:p.target)===a.current?n:W0((v-E)/S,e,t)}const g=y+W0(_/l.current,0,t-e);return r(nO(g,{step:i,initialValue:s})),y}),h=V0(n,e,t);return q.createElement(vO,Jn({ref:o},d()),q.createElement(gO,null,q.createElement(yO,{style:{left:0,right:`${(1-h)*100}%`}})),q.createElement(QE,{ref:a,style:{left:`calc(${h} * (100% - ${c}))`}}))}const eJ=q.memo(({label:n,onUpdate:e,step:t,innerLabelTrim:r})=>{const[i,s]=C.useState(!1),o=hp(({active:a,delta:[l],event:c,memo:d=0})=>(s(a),d+=l/2,Math.abs(d)>=1&&(e(h=>parseFloat(h)+Math.floor(d)*t*qD(c)),d=0),d));return q.createElement(LX,Jn({dragging:i,title:n.length>1?n:""},o()),n.slice(0,r))});function _O({label:n,id:e,displayValue:t,onUpdate:r,onChange:i,settings:s,innerLabelTrim:o=1}){const a=o>0&&q.createElement(eJ,{label:n,step:s.step,onUpdate:r,innerLabelTrim:o});return q.createElement(NX,{id:e,value:String(t),onUpdate:r,onChange:i,innerLabel:a})}function tJ(){const n=Wr(),{label:e,value:t,onUpdate:r,settings:i,id:s}=n,{min:o,max:a}=i,l=a!==1/0&&o!==-1/0;return q.createElement(fs,{input:!0},q.createElement(Fs,null,e),q.createElement(QX,{hasRange:l},l&&q.createElement(qX,Jn({value:parseFloat(t),onDrag:r},i)),q.createElement(_O,Jn({},n,{id:s,label:"value",innerLabelTrim:l?0:1}))))}const{sanitizeStep:nJ}=rO,rJ=hn(rO,["sanitizeStep"]);var iJ=St({component:tJ},rJ);const sJ=(n,e)=>vi().schema({options:vi().passesAnyOf(vi().object(),vi().array())}).test(e),oJ=(n,{values:e})=>{if(e.indexOf(n)<0)throw Error("Selected value doesn't match Select options");return n},aJ=(n,{values:e})=>e.indexOf(n),lJ=n=>{let{value:e,options:t}=n,r,i;return Array.isArray(t)?(i=t,r=t.map(s=>String(s))):(i=Object.values(t),r=Object.keys(t)),"value"in n?i.includes(e)||(r.unshift(String(e)),i.unshift(e)):e=i[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:r,values:i}}};var cJ=Object.freeze({__proto__:null,schema:sJ,sanitize:oJ,format:aJ,normalize:lJ});const uJ=xt("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),qE=xt("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),dJ=xt("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${qE}:focus + &`]:{$focusStyle:""},[`${qE}:hover + &`]:{$hoverStyle:""}});function fJ({displayValue:n,value:e,onUpdate:t,id:r,settings:i,disabled:s}){const{keys:o,values:a}=i,l=C.useRef();return e===a[n]&&(l.current=o[n]),q.createElement(uJ,null,q.createElement(qE,{id:r,value:n,onChange:c=>t(a[Number(c.currentTarget.value)]),disabled:s},o.map((c,d)=>q.createElement("option",{key:c,value:d},c))),q.createElement(dJ,null,l.current),q.createElement(Aw,{toggled:!0}))}function hJ(){const{label:n,value:e,displayValue:t,onUpdate:r,id:i,disabled:s,settings:o}=Wr();return q.createElement(fs,{input:!0},q.createElement(Fs,null,n),q.createElement(fJ,{id:i,value:e,displayValue:t,onUpdate:r,settings:o,disabled:s}))}var pJ=St({component:hJ},cJ);const mJ=n=>vi().string().test(n),gJ=n=>{if(typeof n!="string")throw Error("Invalid string");return n},vJ=({value:n,editable:e=!0,rows:t=!1})=>({value:n,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}});var yJ=Object.freeze({__proto__:null,schema:mJ,sanitize:gJ,normalize:vJ});const _J=["displayValue","onUpdate","onChange","editable"],xJ=xt("div",{whiteSpace:"pre-wrap"});function EJ(n){let{displayValue:e,onUpdate:t,onChange:r,editable:i=!0}=n,s=hn(n,_J);return i?q.createElement(Ew,Jn({value:e,onUpdate:t,onChange:r},s)):q.createElement(xJ,null,e)}function SJ(){const{label:n,settings:e,displayValue:t,onUpdate:r,onChange:i}=Wr();return q.createElement(fs,{input:!0},q.createElement(Fs,null,n),q.createElement(EJ,Jn({displayValue:t,onUpdate:r,onChange:i},e)))}var AJ=St({component:SJ},yJ);const wJ=n=>vi().boolean().test(n),MJ=n=>{if(typeof n!="boolean")throw Error("Invalid boolean");return n};var bJ=Object.freeze({__proto__:null,schema:wJ,sanitize:MJ});const CJ=xt("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function TJ({value:n,onUpdate:e,id:t,disabled:r}){return q.createElement(CJ,null,q.createElement("input",{id:t,type:"checkbox",checked:n,onChange:i=>e(i.currentTarget.checked),disabled:r}),q.createElement("label",{htmlFor:t},q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},q.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function RJ(){const{label:n,value:e,onUpdate:t,disabled:r,id:i}=Wr();return q.createElement(fs,{input:!0},q.createElement(Fs,null,n),q.createElement(TJ,{value:e,onUpdate:t,id:i,disabled:r}))}var PJ=St({component:RJ},bJ);const IJ=["locked"];function LJ({value:n,id:e,valueKey:t,settings:r,onUpdate:i,innerLabelTrim:s}){const o=C.useRef(n[t]);o.current=n[t];const a=C.useCallback(c=>i({[t]:ZD({type:"NUMBER",value:o.current,settings:r},c)}),[i,r,t]),l=pO({type:"NUMBER",value:n[t],settings:r,setValue:a});return q.createElement(_O,{id:e,label:t,value:n[t],displayValue:l.displayValue,onUpdate:l.onUpdate,onChange:l.onChange,settings:r,innerLabelTrim:s})}const BJ=xt("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function DJ(n){let{locked:e}=n,t=hn(n,IJ);return q.createElement("svg",Jn({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?q.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):q.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function ww({value:n,onUpdate:e,settings:t,innerLabelTrim:r}){const{id:i,setSettings:s}=Wr(),{lock:o,locked:a}=t;return q.createElement(BJ,{withLock:o},o&&q.createElement(DJ,{locked:a,onClick:()=>s({locked:!a})}),Object.keys(n).map((l,c)=>q.createElement(LJ,{id:c===0?i:`${i}.${l}`,key:l,valueKey:l,value:n,settings:t[l],onUpdate:e,innerLabelTrim:r})))}const xO=(n,e)=>{const t={};let r=0,i=1/0;Object.entries(n).forEach(([s,o])=>{t[s]=tO(St({value:o},e[s])).settings,r=Math.max(r,t[s].step),i=Math.min(i,t[s].pad)});for(let s in t){const{step:o,min:a,max:l}=e[s]||{};!isFinite(o)&&(!isFinite(a)||!isFinite(l))&&(t[s].step=r,t[s].pad=i)}return t},OJ=["lock"],NJ=["value"];function FJ(n){const e=vi().array().length(n).every.number(),t=r=>{if(!r||typeof r!="object")return!1;const i=Object.values(r);return i.length===n&&i.every(s=>isFinite(s))};return r=>e.test(r)||t(r)}function kJ(n){return Array.isArray(n)?"array":"object"}function Zf(n,e,t){return kJ(n)===e?n:e==="array"?Object.values(n):mX(n,t)}const UJ=(n,e,t)=>{const r=Zf(n,"object",e.keys);for(let o in r)r[o]=eO(r[o],e[o]);const i=Object.keys(r);let s={};if(i.length===e.keys.length)s=r;else{const o=Zf(t,"object",e.keys);if(i.length===1&&e.locked){const a=i[0],l=r[a],c=o[a],d=c!==0?l/c:1;for(let h in o)h===a?s[a]=l:s[h]=o[h]*d}else s=St(St({},o),r)}return Zf(s,e.format,e.keys)},zJ=(n,e)=>Zf(n,"object",e.keys),HJ=n=>!!n&&("step"in n||"min"in n||"max"in n);function GJ(n,e,t=[]){const{lock:r=!1}=e,i=hn(e,OJ),s=Array.isArray(n)?"array":"object",o=s==="object"?Object.keys(n):t,a=Zf(n,"object",o),l=HJ(i)?o.reduce((d,h)=>Object.assign(d,{[h]:i}),{}):i,c=xO(a,l);return{value:s==="array"?n:a,settings:St(St({},c),{},{format:s,keys:o,lock:r,locked:!1})}}function EO(n){return{schema:FJ(n.length),normalize:e=>{let{value:t}=e,r=hn(e,NJ);return GJ(t,r,n)},format:(e,t)=>zJ(e,t),sanitize:(e,t,r)=>UJ(e,t,r)}}var VJ={grad:.9,turn:360,rad:360/(2*Math.PI)},bo=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},yr=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},ss=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},SO=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},x2=function(n){return{r:ss(n.r,0,255),g:ss(n.g,0,255),b:ss(n.b,0,255),a:ss(n.a)}},Hx=function(n){return{r:yr(n.r),g:yr(n.g),b:yr(n.b),a:yr(n.a,3)}},WJ=/^#([0-9a-f]{3,8})$/i,Bg=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},AO=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=Math.max(e,t,r),o=s-Math.min(e,t,r),a=o?s===e?(t-r)/o:s===t?2+(r-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},wO=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var s=Math.floor(e),o=r*(1-t),a=r*(1-(e-s)*t),l=r*(1-(1-e+s)*t),c=s%6;return{r:255*[r,a,o,o,l,r][c],g:255*[l,r,r,a,o,o][c],b:255*[o,o,l,r,r,a][c],a:i}},E2=function(n){return{h:SO(n.h),s:ss(n.s,0,100),l:ss(n.l,0,100),a:ss(n.a)}},S2=function(n){return{h:yr(n.h),s:yr(n.s),l:yr(n.l),a:yr(n.a,3)}},A2=function(n){return wO((t=(e=n).s,{h:e.h,s:(t*=((r=e.l)<50?r:100-r)/100)>0?2*t/(r+t)*100:0,v:r+t,a:e.a}));var e,t,r},Qf=function(n){return{h:(e=AO(n)).h,s:(i=(200-(t=e.s))*(r=e.v)/100)>0&&i<200?t*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,t,r,i},$J=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,jJ=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,XJ=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,JJ=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,eS={string:[[function(n){var e=WJ.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?yr(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?yr(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=XJ.exec(n)||JJ.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:x2({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=$J.exec(n)||jJ.exec(n);if(!e)return null;var t,r,i=E2({h:(t=e[1],r=e[2],r===void 0&&(r="deg"),Number(t)*(VJ[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return A2(i)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=i===void 0?1:i;return bo(e)&&bo(t)&&bo(r)?x2({r:Number(e),g:Number(t),b:Number(r),a:Number(s)}):null},"rgb"],[function(n){var e=n.h,t=n.s,r=n.l,i=n.a,s=i===void 0?1:i;if(!bo(e)||!bo(t)||!bo(r))return null;var o=E2({h:Number(e),s:Number(t),l:Number(r),a:Number(s)});return A2(o)},"hsl"],[function(n){var e=n.h,t=n.s,r=n.v,i=n.a,s=i===void 0?1:i;if(!bo(e)||!bo(t)||!bo(r))return null;var o=function(a){return{h:SO(a.h),s:ss(a.s,0,100),v:ss(a.v,0,100),a:ss(a.a)}}({h:Number(e),s:Number(t),v:Number(r),a:Number(s)});return wO(o)},"hsv"]]},w2=function(n,e){for(var t=0;t<e.length;t++){var r=e[t][0](n);if(r)return[r,e[t][1]]}return[null,void 0]},MO=function(n){return typeof n=="string"?w2(n.trim(),eS.string):typeof n=="object"&&n!==null?w2(n,eS.object):[null,void 0]},YJ=function(n){return MO(n)[1]},Gx=function(n,e){var t=Qf(n);return{h:t.h,s:ss(t.s+100*e,0,100),l:t.l,a:t.a}},Vx=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},M2=function(n,e){var t=Qf(n);return{h:t.h,s:t.s,l:ss(t.l+100*e,0,100),a:t.a}},tS=function(){function n(e){this.parsed=MO(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return yr(Vx(this.rgba),2)},n.prototype.isDark=function(){return Vx(this.rgba)<.5},n.prototype.isLight=function(){return Vx(this.rgba)>=.5},n.prototype.toHex=function(){return e=Hx(this.rgba),t=e.r,r=e.g,i=e.b,o=(s=e.a)<1?Bg(yr(255*s)):"","#"+Bg(t)+Bg(r)+Bg(i)+o;var e,t,r,i,s,o},n.prototype.toRgb=function(){return Hx(this.rgba)},n.prototype.toRgbString=function(){return e=Hx(this.rgba),t=e.r,r=e.g,i=e.b,(s=e.a)<1?"rgba("+t+", "+r+", "+i+", "+s+")":"rgb("+t+", "+r+", "+i+")";var e,t,r,i,s},n.prototype.toHsl=function(){return S2(Qf(this.rgba))},n.prototype.toHslString=function(){return e=S2(Qf(this.rgba)),t=e.h,r=e.s,i=e.l,(s=e.a)<1?"hsla("+t+", "+r+"%, "+i+"%, "+s+")":"hsl("+t+", "+r+"%, "+i+"%)";var e,t,r,i,s},n.prototype.toHsv=function(){return e=AO(this.rgba),{h:yr(e.h),s:yr(e.s),v:yr(e.v),a:yr(e.a,3)};var e},n.prototype.invert=function(){return Qr({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),Qr(Gx(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),Qr(Gx(this.rgba,-e))},n.prototype.grayscale=function(){return Qr(Gx(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),Qr(M2(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),Qr(M2(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?Qr({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):yr(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=Qf(this.rgba);return typeof e=="number"?Qr({h:e,s:t.s,l:t.l,a:t.a}):yr(t.h)},n.prototype.isEqual=function(e){return this.toHex()===Qr(e).toHex()},n}(),Qr=function(n){return n instanceof tS?n:new tS(n)},b2=[],KJ=function(n){n.forEach(function(e){b2.indexOf(e)<0&&(e(tS,eS),b2.push(e))})};function ZJ(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in t)r[t[i]]=i;var s={};n.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,c=r[this.toHex()];if(c)return c;if(o!=null&&o.closest){var d=this.toRgb(),h=1/0,p="black";if(!s.length)for(var m in t)s[m]=new n(t[m]).toRgb();for(var v in t){var _=(a=d,l=s[v],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));_<h&&(h=_,p=v)}return p}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":t[a];return l?new n(l).toRgb():null},"name"])}function Md(){return(Md=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}function Mw(n,e){if(n==null)return{};var t,r,i={},s=Object.keys(n);for(r=0;r<s.length;r++)e.indexOf(t=s[r])>=0||(i[t]=n[t]);return i}function nS(n){var e=C.useRef(n),t=C.useRef(function(r){e.current&&e.current(r)});return e.current=n,t.current}var od=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n<e?e:n},qf=function(n){return"touches"in n},rS=function(n){return n&&n.ownerDocument.defaultView||self},C2=function(n,e,t){var r=n.getBoundingClientRect(),i=qf(e)?function(s,o){for(var a=0;a<s.length;a++)if(s[a].identifier===o)return s[a];return s[0]}(e.touches,t):e;return{left:od((i.pageX-(r.left+rS(n).pageXOffset))/r.width),top:od((i.pageY-(r.top+rS(n).pageYOffset))/r.height)}},T2=function(n){!qf(n)&&n.preventDefault()},bw=q.memo(function(n){var e=n.onMove,t=n.onKey,r=Mw(n,["onMove","onKey"]),i=C.useRef(null),s=nS(e),o=nS(t),a=C.useRef(null),l=C.useRef(!1),c=C.useMemo(function(){var m=function(y){T2(y),(qf(y)?y.touches.length>0:y.buttons>0)&&i.current?s(C2(i.current,y,a.current)):_(!1)},v=function(){return _(!1)};function _(y){var g=l.current,S=rS(i.current),E=y?S.addEventListener:S.removeEventListener;E(g?"touchmove":"mousemove",m),E(g?"touchend":"mouseup",v)}return[function(y){var g=y.nativeEvent,S=i.current;if(S&&(T2(g),!function(w,T){return T&&!qf(w)}(g,l.current)&&S)){if(qf(g)){l.current=!0;var E=g.changedTouches||[];E.length&&(a.current=E[0].identifier)}S.focus(),s(C2(S,g,a.current)),_(!0)}},function(y){var g=y.which||y.keyCode;g<37||g>40||(y.preventDefault(),o({left:g===39?.05:g===37?-.05:0,top:g===40?.05:g===38?-.05:0}))},_]},[o,s]),d=c[0],h=c[1],p=c[2];return C.useEffect(function(){return p},[p]),q.createElement("div",Md({},r,{onTouchStart:d,onMouseDown:d,className:"react-colorful__interactive",ref:i,onKeyDown:h,tabIndex:0,role:"slider"}))}),pp=function(n){return n.filter(Boolean).join(" ")},Cw=function(n){var e=n.color,t=n.left,r=n.top,i=r===void 0?.5:r,s=pp(["react-colorful__pointer",n.className]);return q.createElement("div",{className:s,style:{top:100*i+"%",left:100*t+"%"}},q.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},ei=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t},bO=function(n){var e=n.s,t=n.v,r=n.a,i=(200-e)*t/100;return{h:ei(n.h),s:ei(i>0&&i<200?e*t/100/(i<=100?i:200-i)*100:0),l:ei(i/2),a:ei(r,2)}},iS=function(n){var e=bO(n);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},Wx=function(n){var e=bO(n);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},CO=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var s=Math.floor(e),o=r*(1-t),a=r*(1-(e-s)*t),l=r*(1-(1-e+s)*t),c=s%6;return{r:ei(255*[r,a,o,o,l,r][c]),g:ei(255*[l,r,r,a,o,o][c]),b:ei(255*[o,o,l,r,r,a][c]),a:ei(i,2)}},TO=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=Math.max(e,t,r),o=s-Math.min(e,t,r),a=o?s===e?(t-r)/o:s===t?2+(r-e)/o:4+(e-t)/o:0;return{h:ei(60*(a<0?a+6:a)),s:ei(s?o/s*100:0),v:ei(s/255*100),a:i}},RO=q.memo(function(n){var e=n.hue,t=n.onChange,r=pp(["react-colorful__hue",n.className]);return q.createElement("div",{className:r},q.createElement(bw,{onMove:function(i){t({h:360*i.left})},onKey:function(i){t({h:od(e+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":ei(e),"aria-valuemax":"360","aria-valuemin":"0"},q.createElement(Cw,{className:"react-colorful__hue-pointer",left:e/360,color:iS({h:e,s:100,v:100,a:1})})))}),PO=q.memo(function(n){var e=n.hsva,t=n.onChange,r={backgroundColor:iS({h:e.h,s:100,v:100,a:1})};return q.createElement("div",{className:"react-colorful__saturation",style:r},q.createElement(bw,{onMove:function(i){t({s:100*i.left,v:100-100*i.top})},onKey:function(i){t({s:od(e.s+100*i.left,0,100),v:od(e.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+ei(e.s)+"%, Brightness "+ei(e.v)+"%"},q.createElement(Cw,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:iS(e)})))}),Tw=function(n,e){if(n===e)return!0;for(var t in n)if(n[t]!==e[t])return!1;return!0};function IO(n,e,t){var r=nS(t),i=C.useState(function(){return n.toHsva(e)}),s=i[0],o=i[1],a=C.useRef({color:e,hsva:s});C.useEffect(function(){if(!n.equal(e,a.current.color)){var c=n.toHsva(e);a.current={hsva:c,color:e},o(c)}},[e,n]),C.useEffect(function(){var c;Tw(s,a.current.hsva)||n.equal(c=n.fromHsva(s),a.current.color)||(a.current={hsva:s,color:c},r(c))},[s,n,r]);var l=C.useCallback(function(c){o(function(d){return Object.assign({},d,c)})},[]);return[s,l]}var QJ=typeof window<"u"?C.useLayoutEffect:C.useEffect,qJ=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},R2=new Map,LO=function(n){QJ(function(){var e=n.current?n.current.ownerDocument:document;if(e!==void 0&&!R2.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,R2.set(e,t);var r=qJ();r&&t.setAttribute("nonce",r),e.head.appendChild(t)}},[])},eY=function(n){var e=n.className,t=n.colorModel,r=n.color,i=r===void 0?t.defaultColor:r,s=n.onChange,o=Mw(n,["className","colorModel","color","onChange"]),a=C.useRef(null);LO(a);var l=IO(t,i,s),c=l[0],d=l[1],h=pp(["react-colorful",e]);return q.createElement("div",Md({},o,{ref:a,className:h}),q.createElement(PO,{hsva:c,onChange:d}),q.createElement(RO,{hue:c.h,onChange:d,className:"react-colorful__last-control"}))},tY=function(n){var e=n.className,t=n.hsva,r=n.onChange,i={backgroundImage:"linear-gradient(90deg, "+Wx(Object.assign({},t,{a:0}))+", "+Wx(Object.assign({},t,{a:1}))+")"},s=pp(["react-colorful__alpha",e]),o=ei(100*t.a);return q.createElement("div",{className:s},q.createElement("div",{className:"react-colorful__alpha-gradient",style:i}),q.createElement(bw,{onMove:function(a){r({a:a.left})},onKey:function(a){r({a:od(t.a+a.left)})},"aria-label":"Alpha","aria-valuetext":o+"%","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"},q.createElement(Cw,{className:"react-colorful__alpha-pointer",left:t.a,color:Wx(t)})))},nY=function(n){var e=n.className,t=n.colorModel,r=n.color,i=r===void 0?t.defaultColor:r,s=n.onChange,o=Mw(n,["className","colorModel","color","onChange"]),a=C.useRef(null);LO(a);var l=IO(t,i,s),c=l[0],d=l[1],h=pp(["react-colorful",e]);return q.createElement("div",Md({},o,{ref:a,className:h}),q.createElement(PO,{hsva:c,onChange:d}),q.createElement(RO,{hue:c.h,onChange:d}),q.createElement(tY,{hsva:c,onChange:d,className:"react-colorful__last-control"}))},rY={defaultColor:{r:0,g:0,b:0,a:1},toHsva:TO,fromHsva:CO,equal:Tw},iY=function(n){return q.createElement(nY,Md({},n,{colorModel:rY}))},sY={defaultColor:{r:0,g:0,b:0},toHsva:function(n){return TO({r:n.r,g:n.g,b:n.b,a:1})},fromHsva:function(n){return{r:(e=CO(n)).r,g:e.g,b:e.b};var e},equal:Tw},oY=function(n){return q.createElement(eY,Md({},n,{colorModel:sY}))};function bd(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(n,e||[])).next())})}function Cd(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(t=0)),t;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function aY(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}function lY(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(aY(arguments[e]));return n}var cY=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function mp(n,e){var t=uY(n);if(typeof t.path!="string"){var r=n.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof r=="string"&&r.length>0?r:n.name,writable:!1,configurable:!1,enumerable:!0})}return t}function uY(n){var e=n.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!n.type){var r=e.split(".").pop().toLowerCase(),i=cY.get(r);i&&Object.defineProperty(n,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return n}var dY=[".DS_Store","Thumbs.db"];function fY(n){return bd(this,void 0,void 0,function(){return Cd(this,function(e){return j0(n)&&hY(n)?[2,vY(n.dataTransfer,n.type)]:pY(n)?[2,mY(n)]:Array.isArray(n)&&n.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,gY(n)]:[2,[]]})})}function hY(n){return j0(n.dataTransfer)}function pY(n){return j0(n)&&j0(n.target)}function j0(n){return typeof n=="object"&&n!==null}function mY(n){return sS(n.target.files).map(function(e){return mp(e)})}function gY(n){return bd(this,void 0,void 0,function(){var e;return Cd(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(r){return r.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(r){return mp(r)})]}})})}function vY(n,e){return bd(this,void 0,void 0,function(){var t,r;return Cd(this,function(i){switch(i.label){case 0:return n===null?[2,[]]:n.items?(t=sS(n.items).filter(function(s){return s.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(yY))]):[3,2];case 1:return r=i.sent(),[2,P2(BO(r))];case 2:return[2,P2(sS(n.files).map(function(s){return mp(s)}))]}})})}function P2(n){return n.filter(function(e){return dY.indexOf(e.name)===-1})}function sS(n){if(n===null)return[];for(var e=[],t=0;t<n.length;t++){var r=n[t];e.push(r)}return e}function yY(n){if(typeof n.webkitGetAsEntry!="function")return I2(n);var e=n.webkitGetAsEntry();return e&&e.isDirectory?DO(e):I2(n)}function BO(n){return n.reduce(function(e,t){return lY(e,Array.isArray(t)?BO(t):[t])},[])}function I2(n){var e=n.getAsFile();if(!e)return Promise.reject(n+" is not a File");var t=mp(e);return Promise.resolve(t)}function _Y(n){return bd(this,void 0,void 0,function(){return Cd(this,function(e){return[2,n.isDirectory?DO(n):xY(n)]})})}function DO(n){var e=n.createReader();return new Promise(function(t,r){var i=[];function s(){var o=this;e.readEntries(function(a){return bd(o,void 0,void 0,function(){var l,c,d;return Cd(this,function(h){switch(h.label){case 0:if(a.length)return[3,5];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return l=h.sent(),t(l),[3,4];case 3:return c=h.sent(),r(c),[3,4];case 4:return[3,6];case 5:d=Promise.all(a.map(_Y)),i.push(d),s(),h.label=6;case 6:return[2]}})})},function(a){r(a)})}s()})}function xY(n){return bd(this,void 0,void 0,function(){return Cd(this,function(e){return[2,new Promise(function(t,r){n.file(function(i){var s=mp(i,n.fullPath);t(s)},function(i){r(i)})})]})})}var EY=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(","),r=n.name||"",i=(n.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return t.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?r.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):i===a})}return!0};function L2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function B2(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?L2(Object(t),!0).forEach(function(r){OO(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):L2(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function OO(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function D2(n,e){return MY(n)||wY(n,e)||AY(n,e)||SY()}function SY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AY(n,e){if(n){if(typeof n=="string")return O2(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return O2(n,e)}}function O2(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function wY(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,o,a;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw a}}return r}}function MY(n){if(Array.isArray(n))return n}var bY="file-invalid-type",CY="file-too-large",TY="file-too-small",RY="too-many-files",PY=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:bY,message:"File type must be ".concat(t)}},N2=function(e){return{code:CY,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},F2=function(e){return{code:TY,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},IY={code:RY,message:"Too many files"};function NO(n,e){var t=n.type==="application/x-moz-file"||EY(n,e);return[t,t?null:PY(e)]}function FO(n,e,t){if(Tf(n.size))if(Tf(e)&&Tf(t)){if(n.size>t)return[!1,N2(t)];if(n.size<e)return[!1,F2(e)]}else{if(Tf(e)&&n.size<e)return[!1,F2(e)];if(Tf(t)&&n.size>t)return[!1,N2(t)]}return[!0,null]}function Tf(n){return n!=null}function LY(n){var e=n.files,t=n.accept,r=n.minSize,i=n.maxSize,s=n.multiple,o=n.maxFiles;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(a){var l=NO(a,t),c=D2(l,1),d=c[0],h=FO(a,r,i),p=D2(h,1),m=p[0];return d&&m})}function X0(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function Dg(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function k2(n){n.preventDefault()}function BY(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function DY(n){return n.indexOf("Edge/")!==-1}function OY(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return BY(n)||DY(n)}function Ks(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return e.some(function(a){return!X0(r)&&a&&a.apply(void 0,[r].concat(s)),X0(r)})}}function NY(){return"showOpenFilePicker"in window}function FY(n){return n=typeof n=="string"?n.split(","):n,[{description:"everything",accept:Array.isArray(n)?n.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return B2(B2({},e),{},OO({},t,[]))},{}):{}}]}function kY(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function UY(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}var zY=["children"],HY=["open"],GY=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],VY=["refKey","onChange","onClick"];function WY(n){return XY(n)||jY(n)||kO(n)||$Y()}function $Y(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jY(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function XY(n){if(Array.isArray(n))return oS(n)}function $x(n,e){return KY(n)||YY(n,e)||kO(n,e)||JY()}function JY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kO(n,e){if(n){if(typeof n=="string")return oS(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return oS(n,e)}}function oS(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function YY(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,o,a;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw a}}return r}}function KY(n){if(Array.isArray(n))return n}function U2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Dn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?U2(Object(t),!0).forEach(function(r){aS(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):U2(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function aS(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function J0(n,e){if(n==null)return{};var t=ZY(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function ZY(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}var Rw=C.forwardRef(function(n,e){var t=n.children,r=J0(n,zY),i=zO(r),s=i.open,o=J0(i,HY);return C.useImperativeHandle(e,function(){return{open:s}},[s]),q.createElement(C.Fragment,null,t(Dn(Dn({},o),{},{open:s})))});Rw.displayName="Dropzone";var UO={disabled:!1,getFilesFromEvent:fY,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};Rw.defaultProps=UO;Rw.propTypes={children:vn.func,accept:vn.oneOfType([vn.string,vn.arrayOf(vn.string)]),multiple:vn.bool,preventDropOnDocument:vn.bool,noClick:vn.bool,noKeyboard:vn.bool,noDrag:vn.bool,noDragEventsBubbling:vn.bool,minSize:vn.number,maxSize:vn.number,maxFiles:vn.number,disabled:vn.bool,getFilesFromEvent:vn.func,onFileDialogCancel:vn.func,onFileDialogOpen:vn.func,useFsAccessApi:vn.bool,onDragEnter:vn.func,onDragLeave:vn.func,onDragOver:vn.func,onDrop:vn.func,onDropAccepted:vn.func,onDropRejected:vn.func,validator:vn.func};var lS={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function zO(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Dn(Dn({},UO),n),t=e.accept,r=e.disabled,i=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,a=e.multiple,l=e.maxFiles,c=e.onDragEnter,d=e.onDragLeave,h=e.onDragOver,p=e.onDrop,m=e.onDropAccepted,v=e.onDropRejected,_=e.onFileDialogCancel,y=e.onFileDialogOpen,g=e.useFsAccessApi,S=e.preventDropOnDocument,E=e.noClick,w=e.noKeyboard,T=e.noDrag,b=e.noDragEventsBubbling,R=e.validator,B=C.useMemo(function(){return typeof y=="function"?y:z2},[y]),P=C.useMemo(function(){return typeof _=="function"?_:z2},[_]),I=C.useRef(null),F=C.useRef(null),$=C.useReducer(QY,lS),Z=$x($,2),U=Z[0],j=Z[1],re=U.isFocused,ae=U.isFileDialogActive,H=U.draggedFiles,Y=C.useRef(typeof window<"u"&&window.isSecureContext&&g&&NY()),V=function(){!Y.current&&ae&&setTimeout(function(){if(F.current){var me=F.current.files;me.length||(j({type:"closeDialog"}),P())}},300)};C.useEffect(function(){return window.addEventListener("focus",V,!1),function(){window.removeEventListener("focus",V,!1)}},[F,ae,P,Y]);var ee=C.useRef([]),ie=function(me){I.current&&I.current.contains(me.target)||(me.preventDefault(),ee.current=[])};C.useEffect(function(){return S&&(document.addEventListener("dragover",k2,!1),document.addEventListener("drop",ie,!1)),function(){S&&(document.removeEventListener("dragover",k2),document.removeEventListener("drop",ie))}},[I,S]);var oe=C.useCallback(function(fe){fe.preventDefault(),fe.persist(),Ae(fe),ee.current=[].concat(WY(ee.current),[fe.target]),Dg(fe)&&Promise.resolve(i(fe)).then(function(me){X0(fe)&&!b||(j({draggedFiles:me,isDragActive:!0,type:"setDraggedFiles"}),c&&c(fe))})},[i,c,b]),he=C.useCallback(function(fe){fe.preventDefault(),fe.persist(),Ae(fe);var me=Dg(fe);if(me&&fe.dataTransfer)try{fe.dataTransfer.dropEffect="copy"}catch{}return me&&h&&h(fe),!1},[h,b]),Ce=C.useCallback(function(fe){fe.preventDefault(),fe.persist(),Ae(fe);var me=ee.current.filter(function(Ne){return I.current&&I.current.contains(Ne)}),Ue=me.indexOf(fe.target);Ue!==-1&&me.splice(Ue,1),ee.current=me,!(me.length>0)&&(j({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),Dg(fe)&&d&&d(fe))},[I,d,b]),be=C.useCallback(function(fe,me){var Ue=[],Ne=[];fe.forEach(function(He){var lt=NO(He,t),pt=$x(lt,2),Ie=pt[0],Ht=pt[1],Ct=FO(He,o,s),ft=$x(Ct,2),Ye=ft[0],Ze=ft[1],gt=R?R(He):null;if(Ie&&Ye&&!gt)Ue.push(He);else{var wt=[Ht,Ze];gt&&(wt=wt.concat(gt)),Ne.push({file:He,errors:wt.filter(function(Rt){return Rt})})}}),(!a&&Ue.length>1||a&&l>=1&&Ue.length>l)&&(Ue.forEach(function(He){Ne.push({file:He,errors:[IY]})}),Ue.splice(0)),j({acceptedFiles:Ue,fileRejections:Ne,type:"setFiles"}),p&&p(Ue,Ne,me),Ne.length>0&&v&&v(Ne,me),Ue.length>0&&m&&m(Ue,me)},[j,a,t,o,s,l,p,m,v,R]),Te=C.useCallback(function(fe){fe.preventDefault(),fe.persist(),Ae(fe),ee.current=[],Dg(fe)&&Promise.resolve(i(fe)).then(function(me){X0(fe)&&!b||be(me,fe)}),j({type:"reset"})},[i,be,b]),Xe=C.useCallback(function(){if(Y.current){j({type:"openDialog"}),B();var fe={multiple:a,types:FY(t)};window.showOpenFilePicker(fe).then(function(me){return i(me)}).then(function(me){be(me,null),j({type:"closeDialog"})}).catch(function(me){kY(me)?(P(me),j({type:"closeDialog"})):UY(me)&&(Y.current=!1,F.current&&(F.current.value=null,F.current.click()))});return}F.current&&(j({type:"openDialog"}),B(),F.current.value=null,F.current.click())},[j,B,P,g,be,t,a]),ct=C.useCallback(function(fe){!I.current||!I.current.isEqualNode(fe.target)||(fe.key===" "||fe.key==="Enter"||fe.keyCode===32||fe.keyCode===13)&&(fe.preventDefault(),Xe())},[I,Xe]),et=C.useCallback(function(){j({type:"focus"})},[]),st=C.useCallback(function(){j({type:"blur"})},[]),te=C.useCallback(function(){E||(OY()?setTimeout(Xe,0):Xe())},[E,Xe]),Pe=function(me){return r?null:me},we=function(me){return w?null:Pe(me)},Le=function(me){return T?null:Pe(me)},Ae=function(me){b&&me.stopPropagation()},ot=C.useMemo(function(){return function(){var fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},me=fe.refKey,Ue=me===void 0?"ref":me,Ne=fe.role,He=fe.onKeyDown,lt=fe.onFocus,pt=fe.onBlur,Ie=fe.onClick,Ht=fe.onDragEnter,Ct=fe.onDragOver,ft=fe.onDragLeave,Ye=fe.onDrop,Ze=J0(fe,GY);return Dn(Dn(aS({onKeyDown:we(Ks(He,ct)),onFocus:we(Ks(lt,et)),onBlur:we(Ks(pt,st)),onClick:Pe(Ks(Ie,te)),onDragEnter:Le(Ks(Ht,oe)),onDragOver:Le(Ks(Ct,he)),onDragLeave:Le(Ks(ft,Ce)),onDrop:Le(Ks(Ye,Te)),role:typeof Ne=="string"&&Ne!==""?Ne:"button"},Ue,I),!r&&!w?{tabIndex:0}:{}),Ze)}},[I,ct,et,st,te,oe,he,Ce,Te,w,T,r]),Ve=C.useCallback(function(fe){fe.stopPropagation()},[]),G=C.useMemo(function(){return function(){var fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},me=fe.refKey,Ue=me===void 0?"ref":me,Ne=fe.onChange,He=fe.onClick,lt=J0(fe,VY),pt=aS({accept:t,multiple:a,type:"file",style:{display:"none"},onChange:Pe(Ks(Ne,Te)),onClick:Pe(Ks(He,Ve)),tabIndex:-1},Ue,F);return Dn(Dn({},pt),lt)}},[F,t,a,Te,r]),k=H.length,de=k>0&&LY({files:H,accept:t,minSize:o,maxSize:s,multiple:a,maxFiles:l}),De=k>0&&!de;return Dn(Dn({},U),{},{isDragAccept:de,isDragReject:De,isFocused:re&&!r,getRootProps:ot,getInputProps:G,rootRef:I,inputRef:F,open:Pe(Xe)})}function QY(n,e){switch(e.type){case"focus":return Dn(Dn({},n),{},{isFocused:!0});case"blur":return Dn(Dn({},n),{},{isFocused:!1});case"openDialog":return Dn(Dn({},lS),{},{isFileDialogActive:!0});case"closeDialog":return Dn(Dn({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,r=e.draggedFiles;return Dn(Dn({},n),{},{draggedFiles:r,isDragActive:t});case"setFiles":return Dn(Dn({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return Dn({},lS);default:return n}}function z2(){}/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var qY=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var eK=qY;function H2(n){return eK(n)===!0&&Object.prototype.toString.call(n)==="[object Object]"}var HO=function(e){var t,r;return!(H2(e)===!1||(t=e.constructor,typeof t!="function")||(r=t.prototype,H2(r)===!1)||r.hasOwnProperty("isPrototypeOf")===!1)};/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var tK=HO,Pw=function(e){return tK(e)||typeof e=="function"||Array.isArray(e)};/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var nK=function(e,t,r){for(var i in e)if(t.call(r,e[i],i,e)===!1)break},rK=Pw,iK=nK;function GO(n,e){for(var t=arguments.length,r=0;++r<t;){var i=arguments[r];cS(i)&&iK(i,sK,n)}return n}function sK(n,e){if(oK(e)){var t=this[e];cS(n)&&cS(t)?GO(t,n):this[e]=n}}function cS(n){return rK(n)&&!Array.isArray(n)}function oK(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var aK=GO;/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var lK=function(n,e,t,r,i){if(!cK(n)||!e)return n;if(e=Og(e),t&&(e+="."+Og(t)),r&&(e+="."+Og(r)),i&&(e+="."+Og(i)),e in n)return n[e];for(var s=e.split("."),o=s.length,a=-1;n&&++a<o;){for(var l=s[a];l[l.length-1]==="\\";)l=l.slice(0,-1)+"."+s[++a];n=n[l]}return n};function cK(n){return n!==null&&(typeof n=="object"||typeof n=="function")}function Og(n){return n?Array.isArray(n)?n.join("."):n:""}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var uK=function(n,e){if(n===null||typeof n>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return n;for(var t=Object.prototype.propertyIsEnumerable,r=Object(n),i=arguments.length,s=0;++s<i;)for(var o=Object(arguments[s]),a=Object.getOwnPropertySymbols(o),l=0;l<a.length;l++){var c=a[l];t.call(o,c)&&(r[c]=o[c])}return r},dK=Pw,fK=uK,hK=Object.assign||function(n){if(n===null||typeof n>"u")throw new TypeError("Cannot convert undefined or null to object");G2(n)||(n={});for(var e=1;e<arguments.length;e++){var t=arguments[e];mK(t)&&(t=gK(t)),G2(t)&&(pK(n,t),fK(n,t))}return n};function pK(n,e){for(var t in e)vK(e,t)&&(n[t]=e[t])}function mK(n){return n&&typeof n=="string"}function gK(n){var e={};for(var t in n)e[t]=n[t];return e}function G2(n){return n&&typeof n=="object"||dK(n)}function vK(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var yK=hK,_K=function(n,e,t){if(typeof n!="string")throw new TypeError("expected a string");typeof e=="function"&&(t=e,e=null),typeof e=="string"&&(e={sep:e});var r=yK({sep:"."},e),i=r.quotes||['"',"'","`"],s;r.brackets===!0?s={"<":">","(":")","[":"]","{":"}"}:r.brackets&&(s=r.brackets);var o=[],a=[],l=[""],c=r.sep,d=n.length,h=-1,p;function m(){if(s&&a.length)return s[a[a.length-1]]}for(;++h<d;){var v=n[h],_=n[h+1],y={val:v,idx:h,arr:l,str:n};if(o.push(y),v==="\\"){y.val=EK(r,n,h)===!0?v+_:_,y.escaped=!0,typeof t=="function"&&t(y),l[l.length-1]+=y.val,h++;continue}if(s&&s[v]){a.push(v);var g=m(),S=h+1;if(n.indexOf(g,S+1)!==-1)for(;a.length&&S<d;){var E=n[++S];if(E==="\\"){E++;continue}if(i.indexOf(E)!==-1){S=uS(n,E,S+1);continue}if(g=m(),a.length&&n.indexOf(g,S+1)===-1)break;if(s[E]){a.push(E);continue}g===E&&a.pop()}if(p=S,p===-1){l[l.length-1]+=v;continue}v=n.slice(h,p+1),y.val=v,y.idx=h=p}if(i.indexOf(v)!==-1){if(p=uS(n,v,h+1),p===-1){l[l.length-1]+=v;continue}xK(v,r)===!0?v=n.slice(h,p+1):v=n.slice(h+1,p),y.val=v,y.idx=h=p}if(typeof t=="function"&&(t(y,o),v=y.val,h=y.idx),y.val===c&&y.split!==!1){l.push("");continue}l[l.length-1]+=y.val}return l};function uS(n,e,t,r){var i=n.indexOf(e,t);return n.charAt(i-1)==="\\"?uS(n,e,i+1):i}function xK(n,e){return e.keepDoubleQuotes===!0&&n==='"'||e.keepSingleQuotes===!0&&n==="'"?!0:e.keepQuotes}function EK(n,e,t){return typeof n.keepEscaping=="function"?n.keepEscaping(e,t):n.keepEscaping===!0||e[t+1]==="\\"}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var SK=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")},V2=SK,AK=function(e){V2(e)||(e={});for(var t=arguments.length,r=1;r<t;r++){var i=arguments[r];V2(i)&&wK(e,i)}return e};function wK(n,e){for(var t in e)MK(e,t)&&(n[t]=e[t])}function MK(n,e){return Object.prototype.hasOwnProperty.call(n,e)}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var bK=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")};/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var CK=_K,TK=AK,W2=HO,$2=bK,RK=function(n,e,t){if(!$2(n)||(Array.isArray(e)&&(e=[].concat.apply([],e).join(".")),typeof e!="string"))return n;for(var r=CK(e,{sep:".",brackets:!0}).filter(PK),i=r.length,s=-1,o=n;++s<i;){var a=r[s];if(s!==i-1){$2(o[a])||(o[a]={}),o=o[a];continue}W2(o[a])&&W2(t)?o[a]=TK({},o[a],t):o[a]=t}return n};function PK(n){return n!=="__proto__"&&n!=="constructor"&&n!=="prototype"}var jx=Pw,j2=aK,IK=lK,X2=RK,LK=function(e,t,r){if(!jx(e))throw new TypeError("expected an object");if(typeof t!="string"||r==null)return j2.apply(null,arguments);if(typeof r=="string")return X2(e,t,r),e;var i=IK(e,t);return jx(r)&&jx(i)&&(r=j2({},i,r)),X2(e,t,r),e};const BK=ld(LK),Iw=(...n)=>n.filter(Boolean).join(".");function DK(n){const e=n.split(".");return[e.pop(),e.join(".")||void 0]}function OK(n,e){return Object.entries(hX(n,e)).reduce((t,[,{value:r,disabled:i,key:s}])=>(t[s]=i?void 0:r,t),{})}function NK(n,e){const t=C.useRef();return(e?Dh:up)(n,t.current)||(t.current=n),t.current}function VO(n,e){return C.useMemo(n,NK(e,!0))}function FK(n){const e=C.useRef(null),t=C.useRef(null),r=C.useRef(!0);return C.useLayoutEffect(()=>{n||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),C.useEffect(()=>{if(r.current){r.current=!1;return}let i;const s=e.current,o=()=>{n&&(s.style.removeProperty("height"),s.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};s.addEventListener("transitionend",o,{once:!0});const{height:a}=t.current.getBoundingClientRect();return s.style.height=a+"px",n||(s.style.overflow="hidden",i=window.setTimeout(()=>s.style.height="0px",50)),()=>{s.removeEventListener("transitionend",o),clearTimeout(i)}},[n]),{wrapperRef:e,contentRef:t}}const kK=n=>{const[e,t]=C.useState(n.getVisiblePaths());return C.useEffect(()=>{t(n.getVisiblePaths());const r=n.useStore.subscribe(n.getVisiblePaths,t,{equalityFn:up});return()=>r()},[n]),e};function UK(n,e,t){return n.useStore(i=>{const s=St(St({},t),i.data);return OK(s,e)},up)}function WO(n=3){const e=C.useRef(null),t=C.useRef(null),[r,i]=C.useState(!1),s=C.useCallback(()=>i(!0),[]),o=C.useCallback(()=>i(!1),[]);return C.useLayoutEffect(()=>{if(r){const{bottom:a,top:l,left:c}=e.current.getBoundingClientRect(),{height:d}=t.current.getBoundingClientRect(),h=a+d>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=c+"px",h==="down"?t.current.style.top=a+n+"px":t.current.style.bottom=window.innerHeight-l+n+"px"}},[n,r]),{popinRef:e,wrapperRef:t,shown:r,show:s,hide:o}}KJ([ZJ]);const zK={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};vi.extend({color:()=>n=>Qr(n).isValid()});const HK=n=>vi().color().test(n);function $O(n,{format:e,hasAlpha:t,isString:r}){const i=zK[e]+(r&&e!=="hex"?"String":""),s=n[i]();return typeof s=="object"&&!t?pX(s,["a"]):s}const jO=(n,e)=>{const t=Qr(n);if(!t.isValid())throw Error("Invalid color");return $O(t,e)},GK=(n,e)=>$O(Qr(n),St(St({},e),{},{isString:!0,format:"hex"})),VK=({value:n})=>{const e=YJ(n),t=e==="name"?"hex":e,r=typeof n=="object"?"a"in n:e==="hex"&&n.length===8||/^(rgba)|(hsla)|(hsva)/.test(n),i={format:t,hasAlpha:r,isString:typeof n=="string"};return{value:jO(n,i),settings:i}};var WK=Object.freeze({__proto__:null,schema:HK,sanitize:jO,format:GK,normalize:VK});const $K=xt("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),jK=xt("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),XK=xt("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function J2(n,e){return e!=="rgb"?Qr(n).toRgb():n}function JK({value:n,displayValue:e,settings:t,onUpdate:r}){const{emitOnEditStart:i,emitOnEditEnd:s}=Wr(),{format:o,hasAlpha:a}=t,{popinRef:l,wrapperRef:c,shown:d,show:h,hide:p}=WO(),m=C.useRef(0),[v,_]=C.useState(()=>J2(n,o)),y=a?iY:oY,g=()=>{_(J2(n,o)),h(),i()},S=()=>{p(),s(),window.clearTimeout(m.current)},E=()=>{m.current=window.setTimeout(S,500)};return C.useEffect(()=>()=>window.clearTimeout(m.current),[]),q.createElement(q.Fragment,null,q.createElement($K,{ref:l,active:d,onClick:()=>g(),style:{color:e}}),d&&q.createElement(Sw,null,q.createElement(hO,{onPointerUp:S}),q.createElement(XK,{ref:c,onMouseEnter:()=>window.clearTimeout(m.current),onMouseLeave:w=>w.buttons===0&&E()},q.createElement(y,{color:v,onChange:r}))))}function YK(){const{value:n,displayValue:e,label:t,onChange:r,onUpdate:i,settings:s}=Wr();return q.createElement(fs,{input:!0},q.createElement(Fs,null,t),q.createElement(jK,null,q.createElement(JK,{value:n,displayValue:e,onChange:r,onUpdate:i,settings:s}),q.createElement(Ew,{value:e,onChange:r,onUpdate:i})))}var KK=St({component:YK},WK);function ZK(){const{label:n,displayValue:e,onUpdate:t,settings:r}=Wr();return q.createElement(fs,{input:!0},q.createElement(Fs,null,n),q.createElement(ww,{value:e,settings:r,onUpdate:t}))}var QK=St({component:ZK},EO(["x","y","z"]));const qK=xt("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),eZ=xt("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function tZ({value:n,settings:e,onUpdate:t}){const r=C.useRef(),i=C.useRef(0),s=C.useRef(0),o=C.useRef(1),[a,l]=C.useState(!1),[c,d]=C.useState(!1),[h,p]=mO(),m=C.useRef(null),v=C.useRef(null);C.useLayoutEffect(()=>{if(a){const{top:$,left:Z,width:U,height:j}=m.current.getBoundingClientRect();v.current.style.left=Z+U/2+"px",v.current.style.top=$+j/2+"px"}},[a]);const{keys:[_,y],joystick:g}=e,S=g==="invertY"?1:-1,{[_]:{step:E},[y]:{step:w}}=e,T=Uo("sizes","joystickWidth"),b=Uo("sizes","joystickHeight"),R=parseFloat(T)*.8/2,B=parseFloat(b)*.8/2,P=C.useCallback(()=>{r.current||(d(!0),i.current&&p({x:i.current*R}),s.current&&p({y:s.current*-B}),r.current=window.setInterval(()=>{t($=>{const Z=E*i.current*o.current,U=S*w*s.current*o.current;return Array.isArray($)?{[_]:$[0]+Z,[y]:$[1]+U}:{[_]:$[_]+Z,[y]:$[y]+U}})},16))},[R,B,t,p,E,w,_,y,S]),I=C.useCallback(()=>{window.clearTimeout(r.current),r.current=void 0,d(!1)},[]);C.useEffect(()=>{function $(Z){o.current=qD(Z)}return window.addEventListener("keydown",$),window.addEventListener("keyup",$),()=>{window.clearTimeout(r.current),window.removeEventListener("keydown",$),window.removeEventListener("keyup",$)}},[]);const F=hp(({first:$,active:Z,delta:[U,j],movement:[re,ae]})=>{$&&l(!0);const H=Za(re,-R,R),Y=Za(ae,-B,B);i.current=Math.abs(re)>Math.abs(H)?Math.sign(re-H):0,s.current=Math.abs(ae)>Math.abs(Y)?Math.sign(Y-ae):0;let V=n[_],ee=n[y];Z?(i.current||(V+=U*E*o.current,p({x:H})),s.current||(ee-=S*j*w*o.current,p({y:Y})),i.current||s.current?P():I(),t({[_]:V,[y]:ee})):(l(!1),i.current=0,s.current=0,p({x:0,y:0}),I())});return q.createElement(qK,Jn({ref:m},F()),a&&q.createElement(Sw,null,q.createElement(eZ,{ref:v,isOutOfBounds:c},q.createElement("div",null),q.createElement("span",{ref:h}))))}const nZ=xt("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function rZ(){const{label:n,displayValue:e,onUpdate:t,settings:r}=Wr();return q.createElement(fs,{input:!0},q.createElement(Fs,null,n),q.createElement(nZ,{withJoystick:!!r.joystick},r.joystick&&q.createElement(tZ,{value:e,settings:r,onUpdate:t}),q.createElement(ww,{value:e,settings:r,onUpdate:t})))}const iZ=["joystick"],XO=EO(["x","y"]),sZ=n=>{let{joystick:e=!0}=n,t=hn(n,iZ);const{value:r,settings:i}=XO.normalize(t);return{value:r,settings:St(St({},i),{},{joystick:e})}};var oZ=St(St({component:rZ},XO),{},{normalize:sZ});const aZ=n=>{if(n!==void 0){if(n instanceof File)try{return URL.createObjectURL(n)}catch{return}if(typeof n=="string"&&n.indexOf("blob:")===0)return n;throw Error("Invalid image format [undefined | blob |File].")}},lZ=(n,e)=>typeof e=="object"&&"image"in e,cZ=({image:n})=>({value:n});var uZ=Object.freeze({__proto__:null,sanitize:aZ,schema:lZ,normalize:cZ});const dZ=xt("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),fZ=xt("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),hZ=xt("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),pZ=xt("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),mZ=xt("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),gZ=xt("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function vZ(){const{label:n,value:e,onUpdate:t,disabled:r}=Wr(),{popinRef:i,wrapperRef:s,shown:o,show:a,hide:l}=WO(),c=C.useCallback(v=>{v.length&&t(v[0])},[t]),d=C.useCallback(v=>{v.stopPropagation(),t(void 0)},[t]),{getRootProps:h,getInputProps:p,isDragAccept:m}=zO({maxFiles:1,accept:"image/*",onDrop:c,disabled:r});return q.createElement(fs,{input:!0},q.createElement(Fs,null,n),q.createElement(dZ,null,q.createElement(hZ,{ref:i,hasImage:!!e,onPointerDown:()=>!!e&&a(),onPointerUp:l,style:{backgroundImage:e?`url(${e})`:"none"}}),o&&!!e&&q.createElement(Sw,null,q.createElement(hO,{onPointerUp:l,style:{cursor:"pointer"}}),q.createElement(pZ,{ref:s,style:{backgroundImage:`url(${e})`}})),q.createElement(fZ,h({isDragAccept:m}),q.createElement("input",p()),q.createElement(mZ,null,m?"drop image":"click or drop")),q.createElement(gZ,{onClick:d,disabled:!e})))}var yZ=St({component:vZ},uZ);const Y2=vi().number(),_Z=(n,e)=>vi().array().length(2).every.number().test(n)&&vi().schema({min:Y2,max:Y2}).test(e),Y0=n=>({min:n[0],max:n[1]}),JO=(n,{bounds:[e,t]},r)=>{const i=Array.isArray(n)?Y0(n):n,s={min:r[0],max:r[1]},{min:o,max:a}=St(St({},s),i);return[Za(Number(o),e,Math.max(e,a)),Za(Number(a),Math.min(t,o),t)]},xZ=({value:n,min:e,max:t})=>{const r={min:e,max:t},i=xO(Y0(n),{min:r,max:r}),s=[e,t],o=St(St({},i),{},{bounds:s});return{value:JO(Y0(n),o,n),settings:o}};var EZ=Object.freeze({__proto__:null,schema:_Z,format:Y0,sanitize:JO,normalize:xZ});const SZ=["value","bounds","onDrag"],AZ=["bounds"],wZ=xt("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function MZ(n){let{value:e,bounds:[t,r],onDrag:i}=n,s=hn(n,SZ);const o=C.useRef(null),a=C.useRef(null),l=C.useRef(null),c=C.useRef(0),d=Uo("sizes","scrubberWidth"),h=hp(({event:v,first:_,xy:[y],movement:[g],memo:S={}})=>{if(_){const{width:w,left:T}=o.current.getBoundingClientRect();c.current=w-parseFloat(d);const b=(v==null?void 0:v.target)===a.current||(v==null?void 0:v.target)===l.current;S.pos=W0((y-T)/w,t,r);const R=Math.abs(S.pos-e.min)-Math.abs(S.pos-e.max);S.key=R<0||R===0&&S.pos<=e.min?"min":"max",b&&(S.pos=e[S.key])}const E=S.pos+W0(g/c.current,0,r-t);return i({[S.key]:nJ(E,s[S.key])}),S}),p=`calc(${V0(e.min,t,r)} * (100% - ${d} - 8px) + 4px)`,m=`calc(${1-V0(e.max,t,r)} * (100% - ${d} - 8px) + 4px)`;return q.createElement(vO,Jn({ref:o},h()),q.createElement(gO,null,q.createElement(yO,{style:{left:p,right:m}})),q.createElement(QE,{position:"left",ref:a,style:{left:p}}),q.createElement(QE,{position:"right",ref:l,style:{right:m}}))}function bZ(){const{label:n,displayValue:e,onUpdate:t,settings:r}=Wr(),i=hn(r,AZ);return q.createElement(q.Fragment,null,q.createElement(fs,{input:!0},q.createElement(Fs,null,n),q.createElement(wZ,null,q.createElement(MZ,Jn({value:e},r,{onDrag:t})),q.createElement(ww,{value:e,settings:i,onUpdate:t,innerLabelTrim:0}))))}var CZ=St({component:bZ},EZ);const TZ=()=>{const n=new Map;return{on:(e,t)=>{let r=n.get(e);r===void 0&&(r=new Set,n.set(e,r)),r.add(t)},off:(e,t)=>{const r=n.get(e);r!==void 0&&(r.delete(t),r.size===0&&n.delete(e))},emit:(e,...t)=>{const r=n.get(e);if(r!==void 0)for(const i of r)i(...t)}}},RZ=["type","value"],PZ=["onChange","transient","onEditStart","onEditEnd"],IZ=function(){const e=Vv(sW(()=>({data:{}}))),t=TZ();this.storeId=fX(),this.useStore=e;const r={},i=new Set;this.getVisiblePaths=()=>{const o=this.getData(),a=Object.keys(o),l=[];Object.entries(r).forEach(([d,h])=>{h.render&&a.some(p=>p.indexOf(d)===0)&&!h.render(this.get)&&l.push(d+".")});const c=[];return i.forEach(d=>{d in o&&o[d].__refCount>0&&l.every(h=>d.indexOf(h)===-1)&&(!o[d].render||o[d].render(this.get))&&c.push(d)}),c},this.setOrderedPaths=o=>{o.forEach(a=>i.add(a))},this.orderPaths=o=>(this.setOrderedPaths(o),o),this.disposePaths=o=>{e.setState(a=>{const l=a.data;return o.forEach(c=>{if(c in l){const d=l[c];d.__refCount--,d.__refCount===0&&d.type in as&&delete l[c]}}),{data:l}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=o=>r[o]||{},this.getData=()=>e.getState().data,this.addData=(o,a)=>{e.setState(l=>{const c=l.data;return Object.entries(o).forEach(([d,h])=>{let p=c[d];if(p){const{type:m,value:v}=h,_=hn(h,RZ);m!==p.type?Io(On.INPUT_TYPE_OVERRIDE,m):((p.__refCount===0||a)&&Object.assign(p,_),p.__refCount++)}else c[d]=St(St({},h),{},{__refCount:1})}),{data:c}})},this.setValueAtPath=(o,a,l)=>{e.setState(c=>{const d=c.data;return _2(d[o],a,o,this,l),{data:d}})},this.setSettingsAtPath=(o,a)=>{e.setState(l=>{const c=l.data;return c[o].settings=St(St({},c[o].settings),a),{data:c}})},this.disableInputAtPath=(o,a)=>{e.setState(l=>{const c=l.data;return c[o].disabled=a,{data:c}})},this.set=(o,a)=>{e.setState(l=>{const c=l.data;return Object.entries(o).forEach(([d,h])=>{try{_2(c[d],h,void 0,void 0,a)}catch{}}),{data:c}})},this.getInput=o=>{try{return this.getData()[o]}catch{Io(On.PATH_DOESNT_EXIST,o)}},this.get=o=>{var a;return(a=this.getInput(o))===null||a===void 0?void 0:a.value},this.emitOnEditStart=o=>{t.emit(`onEditStart:${o}`,this.get(o),o,St(St({},this.getInput(o)),{},{get:this.get}))},this.emitOnEditEnd=o=>{t.emit(`onEditEnd:${o}`,this.get(o),o,St(St({},this.getInput(o)),{},{get:this.get}))},this.subscribeToEditStart=(o,a)=>{const l=`onEditStart:${o}`;return t.on(l,a),()=>t.off(l,a)},this.subscribeToEditEnd=(o,a)=>{const l=`onEditEnd:${o}`;return t.on(l,a),()=>t.off(l,a)};const s=(o,a,l)=>{const c={};return Object.entries(o).forEach(([d,h])=>{if(d==="")return Io(On.EMPTY_KEY);let p=Iw(a,d);if(h.type===as.FOLDER){const m=s(h.schema,p,l);Object.assign(c,m),p in r||(r[p]=h.settings)}else if(d in l)Io(On.DUPLICATE_KEYS,d,p,l[d].path);else{const m=xX(h,d,p,c);if(m){const{type:v,options:_,input:y}=m,{onChange:g,transient:S,onEditStart:E,onEditEnd:w}=_,T=hn(_,PZ);c[p]=St(St(St({type:v},T),y),{},{fromPanel:!0}),l[d]={path:p,onChange:g,transient:S,onEditStart:E,onEditEnd:w}}else Io(On.UNKNOWN_INPUT,p,h)}}),c};this.getDataFromSchema=o=>{const a={};return[s(o,"",a),a]}},YO=new IZ,LZ={collapsed:!1};function BZ(n,e){return{type:as.FOLDER,schema:n,settings:St(St({},LZ),e)}}const DZ={disabled:!1};function K2(n,e){return{type:as.BUTTON,onClick:n,settings:St(St({},DZ),e)}}const Z2=n=>"__levaInput"in n,OZ=(n,e)=>{const t={},r=e?e.toLowerCase():null;return n.forEach(i=>{const[s,o]=DK(i);(!r||s.toLowerCase().indexOf(r)>-1)&&BK(t,o,{[s]:{__levaInput:!0,path:i}})}),t},NZ=["type","label","path","valueKey","value","settings","setValue","disabled"];function FZ(n){let{type:e,label:t,path:r,valueKey:i,value:s,settings:o,setValue:a,disabled:l}=n,c=hn(n,NZ);const{displayValue:d,onChange:h,onUpdate:p}=pO({type:e,value:s,settings:o,setValue:a}),m=cc[e].component;return m?q.createElement(iO.Provider,{value:St({key:i,path:r,id:""+r,label:t,displayValue:d,value:s,onChange:h,onUpdate:p,settings:o,setValue:a,disabled:l},c)},q.createElement(zX,{disabled:l},q.createElement(m,null))):(Io(On.NO_COMPONENT_FOR_TYPE,e,r),null)}const kZ=xt("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function UZ({onClick:n,settings:e,label:t}){const r=fp();return q.createElement(fs,null,q.createElement(kZ,{disabled:e.disabled,onClick:()=>n(r.get)},t))}const zZ=xt("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),HZ=xt("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),GZ=({label:n,opts:e})=>{let t=typeof n=="string"&&n.trim()===""?null:n,r=e;return typeof e.opts=="object"&&(r.label!==void 0&&(t=e.label),r=e.opts),{label:t,opts:r}};function VZ(n){const{label:e,opts:t}=GZ(n),r=fp();return q.createElement(fs,{input:!!e},e&&q.createElement(Fs,null,e),q.createElement(zZ,null,Object.entries(t).map(([i,s])=>q.createElement(HZ,{key:i,onClick:()=>s(r.get)},i))))}const WZ=xt("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),KO=100;function $Z(n,e){n.push(e),n.length>KO&&n.shift()}const jZ=C.forwardRef(function({initialValue:n},e){const t=Uo("colors","highlight3"),r=Uo("colors","elevation2"),i=Uo("colors","highlight1"),[s,o]=C.useMemo(()=>[Qr(i).alpha(.4).toRgbString(),Qr(i).alpha(.1).toRgbString()],[i]),a=C.useRef([n]),l=C.useRef(n),c=C.useRef(n),d=C.useRef(),h=C.useCallback((v,_)=>{if(!v)return;const{width:y,height:g}=v,S=new Path2D,E=y/KO,w=g*.05;for(let R=0;R<a.current.length;R++){const B=V0(a.current[R],l.current,c.current),P=E*R,I=g-B*(g-w*2)-w;S.lineTo(P,I)}_.clearRect(0,0,y,g);const T=new Path2D(S);T.lineTo(E*(a.current.length+1),g),T.lineTo(0,g),T.lineTo(0,0);const b=_.createLinearGradient(0,0,0,g);b.addColorStop(0,s),b.addColorStop(1,o),_.fillStyle=b,_.fill(T),_.strokeStyle=r,_.lineJoin="round",_.lineWidth=14,_.stroke(S),_.strokeStyle=t,_.lineWidth=2,_.stroke(S)},[t,r,s,o]),[p,m]=YX(h);return C.useImperativeHandle(e,()=>({frame:v=>{(l.current===void 0||v<l.current)&&(l.current=v),(c.current===void 0||v>c.current)&&(c.current=v),$Z(a.current,v),d.current=requestAnimationFrame(()=>h(p.current,m.current))}}),[p,m,h]),C.useEffect(()=>()=>cancelAnimationFrame(d.current),[]),q.createElement(WZ,{ref:p})}),Q2=n=>Number.isFinite(n)?n.toPrecision(2):n.toString(),XZ=C.forwardRef(function({initialValue:n},e){const[t,r]=C.useState(Q2(n));return C.useImperativeHandle(e,()=>({frame:i=>r(Q2(i))}),[]),q.createElement("div",null,t)});function q2(n){return typeof n=="function"?n():n.current}function JZ({label:n,objectOrFn:e,settings:t}){const r=C.useRef(),i=C.useRef(q2(e));return C.useEffect(()=>{const s=window.setInterval(()=>{var o;document.hidden||(o=r.current)===null||o===void 0||o.frame(q2(e))},t.interval);return()=>window.clearInterval(s)},[e,t.interval]),q.createElement(fs,{input:!0},q.createElement(Fs,{align:"top"},n),t.graph?q.createElement(jZ,{ref:r,initialValue:i.current}):q.createElement(XZ,{ref:r,initialValue:i.current}))}const YZ=["type","label","key"],KZ={[as.BUTTON]:UZ,[as.BUTTON_GROUP]:VZ,[as.MONITOR]:JZ},ZZ=q.memo(({path:n})=>{const[e,{set:t,setSettings:r,disable:i,storeId:s,emitOnEditStart:o,emitOnEditEnd:a}]=ZX(n);if(!e)return null;const{type:l,label:c,key:d}=e,h=hn(e,YZ);if(l in as){const p=KZ[l];return q.createElement(p,Jn({label:c,path:n},h))}return l in cc?q.createElement(FZ,Jn({key:s+n,type:l,label:c,storeId:s,path:n,valueKey:d,setValue:t,setSettings:r,disable:i,emitOnEditStart:o,emitOnEditEnd:a},h)):(iX(On.UNSUPPORTED_INPUT,l,n),null)});function QZ({toggle:n,toggled:e,name:t}){return q.createElement(FX,{onClick:()=>n()},q.createElement(Aw,{toggled:e}),q.createElement("div",null,t))}const qZ=({name:n,path:e,tree:t})=>{const r=fp(),i=Iw(e,n),{collapsed:s,color:o}=r.getFolderSettings(i),[a,l]=C.useState(!s),c=C.useRef(null),d=Uo("colors","folderWidgetColor"),h=Uo("colors","folderTextColor");return C.useLayoutEffect(()=>{c.current.style.setProperty("--leva-colors-folderWidgetColor",o||d),c.current.style.setProperty("--leva-colors-folderTextColor",o||h)},[o,d,h]),q.createElement($0,{ref:c},q.createElement(QZ,{name:n,toggled:a,toggle:()=>l(p=>!p)}),q.createElement(ZO,{parent:i,tree:t,toggled:a}))},ZO=q.memo(({isRoot:n=!1,fill:e=!1,flat:t=!1,parent:r,tree:i,toggled:s})=>{const{wrapperRef:o,contentRef:a}=FK(s),l=fp(),c=([h,p])=>{var m;return(Z2(p)?(m=l.getInput(p.path))===null||m===void 0?void 0:m.order:l.getFolderSettings(Iw(r,h)).order)||0},d=Object.entries(i).sort((h,p)=>c(h)-c(p));return q.createElement(KE,{ref:o,isRoot:n,fill:e,flat:t},q.createElement(uO,{ref:a,isRoot:n,toggled:s},d.map(([h,p])=>Z2(p)?q.createElement(ZZ,{key:p.path,valueKey:p.valueKey,path:p.path}):q.createElement(qZ,{key:h,name:h,path:r,tree:p}))))}),eQ=xt("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${fO}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),QO=40,K0=xt("i",{$flexCenter:"",width:QO,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),tQ=xt("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),nQ=xt("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${K0}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),rQ=xt("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),iQ=xt("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:QO}}}}),sQ=q.forwardRef(({setFilter:n,toggle:e},t)=>{const[r,i]=C.useState(""),s=C.useMemo(()=>QD(n,250),[n]),o=()=>{n(""),i("")},a=l=>{const c=l.currentTarget.value;e(!0),i(c)};return C.useEffect(()=>{s(r)},[r,s]),q.createElement(q.Fragment,null,q.createElement(rQ,{ref:t,value:r,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:l=>l.stopPropagation(),onChange:a}),q.createElement(K0,{onClick:()=>o(),style:{visibility:r?"visible":"hidden"}},q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},q.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function oQ({setFilter:n,onDrag:e,onDragStart:t,onDragEnd:r,toggle:i,toggled:s,title:o,drag:a,filterEnabled:l,from:c}){const[d,h]=C.useState(!1),p=C.useRef(null);C.useEffect(()=>{var v,_;d?(v=p.current)===null||v===void 0||v.focus():(_=p.current)===null||_===void 0||_.blur()},[d]);const m=hp(({offset:[v,_],first:y,last:g})=>{e({x:v,y:_}),y&&t({x:v,y:_}),g&&r({x:v,y:_})},{filterTaps:!0,from:({offset:[v,_]})=>[(c==null?void 0:c.x)||v,(c==null?void 0:c.y)||_]});return C.useEffect(()=>{const v=_=>{_.key==="L"&&_.shiftKey&&_.metaKey&&h(y=>!y)};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[]),q.createElement(q.Fragment,null,q.createElement(tQ,{mode:a?"drag":void 0},q.createElement(K0,{active:!s,onClick:()=>i()},q.createElement(Aw,{toggled:s,width:12,height:8})),q.createElement(iQ,Jn({},a?m():{},{drag:a,filterEnabled:l}),o===void 0&&a?q.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},q.createElement("circle",{cx:"2",cy:"2",r:"2"}),q.createElement("circle",{cx:"14",cy:"2",r:"2"}),q.createElement("circle",{cx:"26",cy:"2",r:"2"}),q.createElement("circle",{cx:"2",cy:"12",r:"2"}),q.createElement("circle",{cx:"14",cy:"12",r:"2"}),q.createElement("circle",{cx:"26",cy:"12",r:"2"})):o),l&&q.createElement(K0,{active:d,onClick:()=>h(v=>!v)},q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},q.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),q.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),q.createElement(nQ,{toggled:d},q.createElement(sQ,{ref:p,setFilter:n,toggle:i})))}const aQ=["store","hidden","theme","collapsed"];function lQ(n){let{store:e,hidden:t=!1,theme:r,collapsed:i=!1}=n,s=hn(n,aQ);const o=VO(()=>IX(r),[r]),[a,l]=C.useState(!i),c=typeof i=="object"?!i.collapsed:a,d=C.useMemo(()=>typeof i=="object"?h=>{typeof h=="function"?i.onChange(!h(!i.collapsed)):i.onChange(!h)}:l,[i]);return!e||t?null:q.createElement(xw.Provider,{value:o},q.createElement(cQ,Jn({store:e},s,{toggled:c,setToggle:d,rootClass:o.className})))}const cQ=q.memo(({store:n,rootClass:e,fill:t=!1,flat:r=!1,neverHide:i=!1,oneLineLabels:s=!1,titleBar:o={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:a=!1,toggled:l,setToggle:c})=>{var d,h;const p=kK(n),[m,v]=C.useState(""),_=C.useMemo(()=>OZ(p,m),[p,m]),[y,g]=mO(),S=i||p.length>0,E=typeof o=="object"&&o.title||void 0,w=typeof o=="object"&&(d=o.drag)!==null&&d!==void 0?d:!0,T=typeof o=="object"&&(h=o.filter)!==null&&h!==void 0?h:!0,b=typeof o=="object"&&o.position||void 0,R=typeof o=="object"&&o.onDrag||void 0,B=typeof o=="object"&&o.onDragStart||void 0,P=typeof o=="object"&&o.onDragEnd||void 0;return q.useEffect(()=>{g({x:b==null?void 0:b.x,y:b==null?void 0:b.y})},[b,g]),PX(),q.createElement(oO.Provider,{value:{hideCopyButton:a}},q.createElement(eQ,{ref:y,className:e,fill:t,flat:r,oneLineLabels:s,hideTitleBar:!o,style:{display:S?"block":"none"}},o&&q.createElement(oQ,{onDrag:I=>{g(I),R==null||R(I)},onDragStart:I=>B==null?void 0:B(I),onDragEnd:I=>P==null?void 0:P(I),setFilter:v,toggle:I=>c(F=>I??!F),toggled:l,title:E,drag:w,filterEnabled:T,from:b}),S&&q.createElement(sO.Provider,{value:n},q.createElement(ZO,{isRoot:!0,fill:t,flat:r,tree:_,toggled:l}))))}),uQ=["isRoot"];let Z0=!1,Vl=null;function qO(n){let{isRoot:e=!1}=n,t=hn(n,uQ);return C.useEffect(()=>(Z0=!0,!e&&Vl&&(Vl.remove(),Vl=null),()=>{e||(Z0=!1)}),[e]),q.createElement(lQ,Jn({store:YO},t))}function dQ(n){C.useEffect(()=>{n&&!Z0&&(Vl||(Vl=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(Vl),SX(q.createElement(qO,{isRoot:!0}),Vl))),Z0=!0)},[n])}function fQ(n,e,t,r,i){let s,o,a,l,c;return typeof n=="string"?(o=n,s=e,Array.isArray(t)?c=t:t&&("store"in t?(l=t,c=r):(a=t,Array.isArray(r)?c=r:(l=r,c=i)))):(s=n,Array.isArray(e)?c=e:(l=e,c=t)),{schema:s,folderName:o,folderSettings:a,hookSettings:l,deps:c||[]}}function eP(n,e,t,r,i){const{folderName:s,schema:o,folderSettings:a,hookSettings:l,deps:c}=fQ(n,e,t,r,i),d=typeof o=="function",h=C.useRef(!1),p=C.useRef(!0),m=VO(()=>{h.current=!0;const F=typeof o=="function"?o():o;return s?{[s]:BZ(F,a)}:F},c),v=!(l!=null&&l.store);dQ(v);const[_]=C.useState(()=>(l==null?void 0:l.store)||YO),[y,g]=C.useMemo(()=>_.getDataFromSchema(m),[_,m]),[S,E,w,T,b]=C.useMemo(()=>{const F=[],$=[],Z={},U={},j={};return Object.values(g).forEach(({path:re,onChange:ae,onEditStart:H,onEditEnd:Y,transient:V})=>{F.push(re),ae?(Z[re]=ae,V||$.push(re)):$.push(re),H&&(U[re]=H),Y&&(j[re]=Y)}),[F,$,Z,U,j]},[g]),R=C.useMemo(()=>_.orderPaths(S),[S,_]),B=UK(_,E,y),P=C.useCallback(F=>{const $=Object.entries(F).reduce((Z,[U,j])=>Object.assign(Z,{[g[U].path]:j}),{});_.set($,!1)},[_,g]),I=C.useCallback(F=>_.get(g[F].path),[_,g]);return C.useEffect(()=>{const F=!p.current&&h.current;return _.addData(y,F),p.current=!1,h.current=!1,()=>_.disposePaths(R)},[_,R,y]),C.useEffect(()=>{const F=[];return Object.entries(w).forEach(([$,Z])=>{Z(_.get($),$,St({initial:!0,get:_.get},_.getInput($)));const U=_.useStore.subscribe(j=>{const re=j.data[$];return[re.disabled?void 0:re.value,re]},([j,re])=>Z(j,$,St({initial:!1,get:_.get},re)),{equalityFn:up});F.push(U)}),()=>F.forEach($=>$())},[_,w]),C.useEffect(()=>{const F=[];return Object.entries(T).forEach(([$,Z])=>F.push(_.subscribeToEditStart($,Z))),Object.entries(b).forEach(([$,Z])=>F.push(_.subscribeToEditEnd($,Z))),()=>F.forEach($=>$())},[T,b,_]),d?[B,P,I]:B}ea(Bs.SELECT,pJ);ea(Bs.IMAGE,yZ);ea(Bs.NUMBER,iJ);ea(Bs.COLOR,KK);ea(Bs.STRING,AJ);ea(Bs.BOOLEAN,PJ);ea(Bs.INTERVAL,CZ);ea(Bs.VECTOR3D,QK);ea(Bs.VECTOR2D,oZ);var Xx={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const hQ=()=>{if(Xx.VITE_BACKEND_URL)return console.log("[API Config] Using production backend URL:",Xx.VITE_BACKEND_URL),Xx.VITE_BACKEND_URL;const t=`http://${window.location.hostname}:3002`;return console.log("[API Config] Using development backend URL:",t),t},ad=hQ(),eN=C.createContext(),pQ=({children:n})=>{const[e,t]=C.useState(!1),[r,i]=C.useState(null),[s,o]=C.useState([]),[a,l]=C.useState(),[c,d]=C.useState(!1),[h,p]=C.useState(""),[m,v]=C.useState(""),[_,y]=C.useState(null),[g,S]=C.useState([]),[E,w]=C.useState(""),[T,b]=C.useState("english"),R=C.useRef("english");C.useEffect(()=>{R.current=T},[T]);const B=C.useRef([]),P=()=>{B.current=[],console.log("Recording initiated, chunks cleared")},I=ae=>{ae.data&&ae.data.size>0&&(B.current.push(ae.data),console.log(`Chunk received: ${ae.data.size} bytes. Total chunks: ${B.current.length}`))},F=async ae=>{const H=new FileReader;H.readAsDataURL(ae),H.onloadend=async function(){const Y=H.result.split(",")[1];d(!0),console.log("=== Frontend: Sending audio to STS endpoint ==="),console.log("Selected language (from ref):",R.current);try{const V={audio:Y,language:R.current};console.log("Request body (language field):",V.language);const ee=await fetch(`${ad}/sts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)});if(console.log("Response status:",ee.status),!ee.ok){const he=await ee.text();throw console.error("Error response from server:",he),new Error(`Server error: ${ee.status} - ${he}`)}const ie=await ee.json();console.log("=== Frontend: Received response ==="),console.log("Full response:",ie),ie.userMessage&&(console.log("Transcribed user message:",ie.userMessage),w(ie.userMessage));let oe=[];Array.isArray(ie)?oe=ie:ie.messages&&Array.isArray(ie.messages)?oe=ie.messages:ie.error&&(console.error("Error in response:",ie.error),oe=[{text:ie.errorMessage||"Sorry, there was an error processing your request.",facialExpression:"sad",animation:"SadIdle"}]),console.log("Extracted messages:",oe),console.log("Messages count:",oe.length),ie.images&&Array.isArray(ie.images)?(console.log("Setting current images (STS):",ie.images),S(ie.images)):console.log("No images in STS response"),oe.length>0?(console.log("Adding messages to queue:",oe),o(he=>[...he,...oe])):(console.warn("No messages found in response!"),o(he=>[...he,{text:"I'm sorry, I didn't receive a proper response. Please try again.",facialExpression:"sad",animation:"SadIdle"}]))}catch(V){console.error("=== Frontend: Error in sendAudioData ==="),console.error("Error:",V),console.error("Error message:",V.message),o(ee=>[...ee,{text:"Sorry, there was an error processing your voice message. Please try again.",facialExpression:"sad",animation:"SadIdle"}])}finally{d(!1),console.log("=== Frontend: Request completed ===")}}};C.useEffect(()=>{if(typeof window<"u"){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){console.warn("MediaDevices API not available. Voice recording will be disabled. This is common on mobile browsers over HTTP - HTTPS is required for microphone access.");return}navigator.mediaDevices.getUserMedia({audio:!0}).then(ae=>{const H=MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?"audio/webm;codecs=opus":MediaRecorder.isTypeSupported("audio/webm")?"audio/webm":"audio/mp4";console.log(`Using MIME type for recording: ${H}`);const Y=new MediaRecorder(ae,{mimeType:H});Y.onstart=P,Y.ondataavailable=I,Y.onstop=async()=>{console.log(`Recording stopped. Total chunks to process: ${B.current.length}`);const V=new Blob(B.current,{type:H});if(console.log(`Final audio blob size: ${V.size} bytes`),console.log(`Sending audio for language: ${R.current}`),V.size===0){console.error("Recorded audio blob is empty!");return}try{await F(V)}catch(ee){console.error("Failed to send audio data:",ee)}},i(Y)}).catch(ae=>{console.error("Error accessing microphone:",ae)})}},[]);const $=()=>{r&&(r.start(),t(!0))},Z=()=>{r&&(r.stop(),t(!1))},U=async(ae,H=T)=>{d(!0),console.log("=== Frontend: Sending TTS request ==="),console.log("Message:",ae),console.log("Language:",H||T);try{const Y=await fetch(`${ad}/tts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:ae,language:H||T})});if(console.log("Response status:",Y.status),!Y.ok){const ie=await Y.text();console.error("Error response from server:",ie);let oe="Sorry, there was an error processing your request.";try{oe=JSON.parse(ie).error||oe}catch{oe=ie||oe}throw new Error(`Server error: ${Y.status} - ${oe}`)}const V=await Y.json();console.log("=== Frontend: Received TTS response ==="),console.log("Full response:",V);let ee=[];Array.isArray(V)?ee=V:V.messages&&Array.isArray(V.messages)?ee=V.messages:V.error&&(console.error("Error in response:",V.error),ee=[{text:V.errorMessage||V.error||"Sorry, there was an error processing your request.",facialExpression:"sad",animation:"SadIdle"}]),V.images&&Array.isArray(V.images)?(console.log("Setting current images (TTS):",V.images),S(V.images)):console.log("No images in TTS response"),ee.length>0?(console.log("Adding messages to queue:",ee),o(ie=>[...ie,...ee])):(console.warn("No messages found in TTS response!"),o(ie=>[...ie,{text:"I'm sorry, I didn't receive a proper response. Please try again.",facialExpression:"sad",animation:"SadIdle"}]))}catch(Y){console.error("=== Frontend: Error in tts ==="),console.error("Error:",Y),console.error("Error message:",Y.message),o(V=>[...V,{text:`Sorry, there was an error: ${Y.message}. Please check if the backend server is running.`,facialExpression:"sad",animation:"SadIdle"}])}finally{d(!1),console.log("=== Frontend: TTS request completed ===")}},j=()=>{console.log("Message played, moving to next message"),o(ae=>{const H=ae.slice(1);return console.log("Remaining messages:",H.length),H})},re=()=>{_&&(_.pause(),y(null)),o([]),l(null)};return C.useEffect(()=>{if(!_||!h){v("");return}const ae=h.split(/\s+/);let H=-1,Y=null;const V=()=>{if(!_||!h){Y&&(cancelAnimationFrame(Y),Y=null);return}const he=_.currentTime||0,Ce=_.duration;if(!Ce||Ce===0||isNaN(Ce)){Y=requestAnimationFrame(V);return}const be=Math.min(Math.max(he/Ce,0),1),Te=Math.floor(be*ae.length);if(Te!==H)if(H=Te,Te>=ae.length)v(h);else if(Te>0){const Xe=ae.slice(0,Te).join(" ");v(Xe)}else v("");!_.ended&&!_.paused?Y=requestAnimationFrame(V):_.ended&&v(h)},ee=()=>{v(""),H=-1,Y=requestAnimationFrame(V)},ie=()=>{!Y&&!_.paused&&(Y=requestAnimationFrame(V))},oe=()=>{v(h),Y&&(cancelAnimationFrame(Y),Y=null)};if(_.addEventListener("play",ee),_.addEventListener("timeupdate",ie),_.addEventListener("ended",oe),_.readyState>=2)_.paused?v(""):Y=requestAnimationFrame(V);else{const he=()=>{_.paused||(Y=requestAnimationFrame(V))};_.addEventListener("loadeddata",he,{once:!0})}return()=>{_.removeEventListener("play",ee),_.removeEventListener("timeupdate",ie),_.removeEventListener("ended",oe),Y&&cancelAnimationFrame(Y)}},[_,h]),C.useEffect(()=>{if(s.length>0){console.log("Setting current message:",s[0]),l(s[0]);let ae=s[0].text||"";if(ae.includes('"messages"')&&ae.includes('"text"'))try{let H=ae.replace(/```json\s*/g,"").replace(/```\s*/g,"");H=H.replace(/^`+|`+$/g,"");const Y=JSON.parse(H);Y.messages&&Array.isArray(Y.messages)&&Y.messages[0]&&Y.messages[0].text&&(ae=Y.messages[0].text)}catch(H){console.warn("Failed to parse message text as JSON:",H)}p(ae),v("")}else console.log("No more messages"),l(null),setTimeout(()=>{p(""),v("")},1e3)},[s]),N.jsx(eN.Provider,{value:{startRecording:$,stopRecording:Z,recording:e,tts:U,message:a,onMessagePlayed:j,loading:c,currentMessageText:h,displayedCaptionText:m,stopAudio:re,setCurrentAudio:y,messages:s,setLoading:d,setMessages:o,currentImages:g,lastUserMessage:E,setLastUserMessage:w,selectedLanguage:T,setSelectedLanguage:b},children:n})},Lw=()=>{const n=C.useContext(eN);if(!n)throw new Error("useSpeech must be used within a SpeechProvider");return n},tP={default:{},smile:{browInnerUp:.17,eyeSquintLeft:.4,eyeSquintRight:.44,noseSneerLeft:.1700000727403593,noseSneerRight:.14000002836874015,mouthPressLeft:.61,mouthPressRight:.41000000000000003},funnyFace:{jawLeft:.63,mouthPucker:.53,noseSneerLeft:1,noseSneerRight:.39,mouthLeft:1,eyeLookUpLeft:1,eyeLookUpRight:1,cheekPuff:.9999924982764238,mouthDimpleLeft:.414743888682652,mouthRollLower:.32,mouthSmileLeft:.35499733688813034,mouthSmileRight:.35499733688813034},sad:{mouthFrownLeft:1,mouthFrownRight:1,mouthShrugLower:.78341,browInnerUp:.452,eyeSquintLeft:.72,eyeSquintRight:.75,eyeLookDownLeft:.5,eyeLookDownRight:.5,jawForward:1},surprised:{eyeWideLeft:.5,eyeWideRight:.5,jawOpen:0,mouthFunnel:.2,browInnerUp:1},angry:{browDownLeft:1,browDownRight:1,eyeSquintLeft:1,eyeSquintRight:1,jawForward:1,jawLeft:1,mouthShrugLower:1,noseSneerLeft:1,noseSneerRight:.42,eyeLookDownLeft:.16,eyeLookDownRight:.16,cheekSquintLeft:1,cheekSquintRight:1,mouthClose:.23,mouthFunnel:.63,mouthDimpleRight:1},crazy:{browInnerUp:.9,jawForward:1,noseSneerLeft:.5700000000000001,noseSneerRight:.51,eyeLookDownLeft:.39435766259644545,eyeLookUpRight:.4039761421719682,eyeLookInLeft:.9618479575523053,eyeLookInRight:.9618479575523053,jawOpen:.9618479575523053,mouthDimpleLeft:.9618479575523053,mouthDimpleRight:.9618479575523053,mouthStretchLeft:.27893590769016857,mouthStretchRight:.2885543872656917,mouthSmileLeft:.5578718153803371,mouthSmileRight:.38473918302092225,tongueOut:.9618479575523053}},au={A:"viseme_PP",B:"viseme_kk",C:"viseme_I",D:"viseme_AA",E:"viseme_O",F:"viseme_U",G:"viseme_FF",H:"viseme_TH",X:"viseme_PP"},Jx=["mouthOpen","viseme_sil","viseme_PP","viseme_FF","viseme_TH","viseme_DD","viseme_kk","viseme_CH","viseme_SS","viseme_nn","viseme_RR","viseme_aa","viseme_E","viseme_I","viseme_O","viseme_U","mouthSmile","browDownLeft","browDownRight","browInnerUp","browOuterUpLeft","browOuterUpRight","eyeSquintLeft","eyeSquintRight","eyeWideLeft","eyeWideRight","jawForward","jawLeft","jawRight","mouthFrownLeft","mouthFrownRight","mouthPucker","mouthShrugLower","mouthShrugUpper","noseSneerLeft","noseSneerRight","mouthLowerDownLeft","mouthLowerDownRight","mouthLeft","mouthRight","eyeLookDownLeft","eyeLookDownRight","eyeLookUpLeft","eyeLookUpRight","eyeLookInLeft","eyeLookInRight","eyeLookOutLeft","eyeLookOutRight","cheekPuff","cheekSquintLeft","cheekSquintRight","jawOpen","mouthClose","mouthFunnel","mouthDimpleLeft","mouthDimpleRight","mouthStretchLeft","mouthStretchRight","mouthRollLower","mouthRollUpper","mouthPressLeft","mouthPressRight","mouthUpperUpLeft","mouthUpperUpRight","mouthSmileLeft","mouthSmileRight","tongueOut","eyeBlinkLeft","eyeBlinkRight"];function mQ(n){const{nodes:e,materials:t,scene:r}=ac("/models/avatar.glb"),{animations:i}=ac("/models/animations.glb"),{message:s,onMessagePlayed:o,setCurrentAudio:a}=Lw(),[l,c]=C.useState(),[d,h]=C.useState(!1);C.useEffect(()=>{if(!s){y("Idle");return}if(T(s.facialExpression||"default"),y(s.animation||"TalkingOne"),console.log("Setting lipsync data:",s.lipsync),s.lipsync&&s.lipsync.mouthCues&&console.log(`Lip sync has ${s.lipsync.mouthCues.length} mouth cues`),c(s.lipsync),s.audio)try{const B=s.audioFormat||"mp3",P=B==="wav"?"audio/wav":"audio/mpeg";console.log(`Creating audio with format: ${B} (MIME: ${P})`);const I=new Audio(`data:${P};base64,${s.audio}`);I.addEventListener("loadedmetadata",()=>{console.log(`Audio duration: ${I.duration}`)}),I.addEventListener("play",()=>{console.log("Audio started playing")});const F=()=>{console.log("Audio ready, duration:",I.duration,"format:",B),I.play().catch($=>{console.error("Error playing audio:",$);const Z=B==="wav"?"mp3":"wav",U=Z==="wav"?"audio/wav":"audio/mpeg";console.log(`Trying fallback format: ${Z}`);const j=new Audio(`data:${U};base64,${s.audio}`);j.addEventListener("canplay",()=>{j.play().catch(re=>{console.error(`${Z} format also failed:`,re),o()})},{once:!0}),j.addEventListener("error",()=>{console.error("Both formats failed"),o()}),R(j),a(j),j.onended=()=>{console.log("Audio finished playing"),o()}})};I.addEventListener("canplay",F,{once:!0}),I.addEventListener("error",$=>{console.error(`${B} audio error, trying alternative format:`,$);const Z=B==="wav"?"mp3":"wav",U=Z==="wav"?"audio/wav":"audio/mpeg",j=new Audio(`data:${U};base64,${s.audio}`);j.addEventListener("canplay",()=>{j.play().catch(re=>{console.error(`${Z} format also failed:`,re),o()})},{once:!0}),j.addEventListener("error",()=>{console.error("Both formats failed"),o()}),R(j),a(j),j.onended=()=>{console.log("Audio finished playing"),o()}}),R(I),a(I),I.load(),I.onended=()=>{console.log("Audio finished playing"),o()}}catch(B){console.error("Error creating audio:",B),o()}else console.log("No audio data, calling onMessagePlayed after delay"),setTimeout(o,2e3)},[s]);const p=C.useRef(),{actions:m,mixer:v}=d7(i,p),[_,y]=C.useState(i.find(B=>B.name==="Idle")?"Idle":i[0].name);C.useEffect(()=>{if(m[_])return console.log("Playing animation:",_),m[_].reset().fadeIn(v.stats.actions.inUse===0?0:.5).play(),()=>{m[_]&&(console.log("Stopping animation:",_),m[_].fadeOut(.5))};console.warn("Animation not found:",_)},[_]);const g=(B,P,I=.1)=>{r.traverse(F=>{if(F.isSkinnedMesh&&F.morphTargetDictionary){const $=F.morphTargetDictionary[B];if($===void 0||F.morphTargetInfluences[$]===void 0)return;const Z=F.morphTargetInfluences[$];Math.abs(Z-P)<.001?F.morphTargetInfluences[$]=P:F.morphTargetInfluences[$]=Mh.lerp(Z,P,I)}})},[S,E]=C.useState(!1),[w,T]=C.useState("default"),[b,R]=C.useState();return Wv(()=>{if(d)return;Jx.forEach(P=>{const I=tP[w];P==="eyeBlinkLeft"||P==="eyeBlinkRight"||(I&&I[P]?g(P,I[P],.1):g(P,0,.1))}),g("eyeBlinkLeft",S?1:0,.5),g("eyeBlinkRight",S?1:0,.5);const B=[];if(s&&l&&b)try{const P=b.readyState>=2,I=!b.paused&&!b.ended;if(P&&I){const F=b.currentTime;if(!isNaN(F)&&isFinite(F)&&F>=0){let $=null;if(l.mouthCues&&Array.isArray(l.mouthCues)&&l.mouthCues.length>0){for(let Z=0;Z<l.mouthCues.length;Z++){const U=l.mouthCues[Z];if(U&&typeof U.start=="number"&&typeof U.end=="number"&&U.value&&F>=U.start&&F<=U.end){const j=au[U.value];if(j){$=j,B.push(j);const re=(F-U.start)/(U.end-U.start),ae=re<.5?2*re*re:1-Math.pow(-2*re+2,2)/2;g(j,ae,.3)}else console.warn(`Viseme mapping not found for: ${U.value}`);break}}if(B.length===0&&l.mouthCues.length>0){const Z=l.mouthCues[l.mouthCues.length-1];if(F>Z.end&&F<Z.end+.3){const U=au[Z.value];U&&(g(U,.4,.2),B.push(U))}}}else if(Array.isArray(l)&&l.length>0)for(let Z=0;Z<l.length;Z++){const U=l[Z];if(U&&typeof U.start=="number"&&typeof U.end=="number"&&U.value&&F>=U.start&&F<=U.end){const j=au[U.value];j&&($=j,B.push(j),g(j,1,.7));break}}!$&&F>0&&B.length===0&&g("viseme_PP",.2,.2)}}}catch(P){console.error("Error processing lipsync:",P),Object.values(au).forEach(I=>{g(I,0,.1)})}else Object.values(au).forEach(P=>{g(P,0,.1)});Object.values(au).forEach(P=>{B.includes(P)||g(P,0,.15)})}),eP("FacialExpressions",{animation:{value:_,options:i.map(B=>B.name),onChange:B=>y(B)},facialExpression:{value:w,options:Object.keys(tP),onChange:B=>T(B)},setupMode:K2(()=>{h(!d)}),logMorphTargetValues:K2(()=>{const B={};Object.values(e).forEach(P=>{P.morphTargetInfluences&&P.morphTargetDictionary&&Jx.forEach(I=>{if(I==="eyeBlinkLeft"||I==="eyeBlinkRight")return;const F=P.morphTargetInfluences[P.morphTargetDictionary[I]];F>.01&&(B[I]=F)})}),console.log(JSON.stringify(B,null,2))})}),eP("MorphTarget",()=>Object.assign({},...Jx.map(B=>({[B]:{label:B,value:0,min:0,max:1,onChange:P=>{g(B,P,.1)}}})))),C.useEffect(()=>{let B;const P=()=>{B=setTimeout(()=>{E(!0),setTimeout(()=>{E(!1),P()},200)},Mh.randInt(1e3,5e3))};return P(),()=>clearTimeout(B)},[]),N.jsxs("group",{...n,dispose:null,ref:p,position:[0,-.5,0],children:[N.jsx("primitive",{object:e.Hips}),N.jsx("skinnedMesh",{name:"EyeLeft",geometry:e.EyeLeft.geometry,material:t.Wolf3D_Eye,skeleton:e.EyeLeft.skeleton,morphTargetDictionary:e.EyeLeft.morphTargetDictionary,morphTargetInfluences:e.EyeLeft.morphTargetInfluences}),N.jsx("skinnedMesh",{name:"EyeRight",geometry:e.EyeRight.geometry,material:t.Wolf3D_Eye,skeleton:e.EyeRight.skeleton,morphTargetDictionary:e.EyeRight.morphTargetDictionary,morphTargetInfluences:e.EyeRight.morphTargetInfluences}),N.jsx("skinnedMesh",{name:"Wolf3D_Head",geometry:e.Wolf3D_Head.geometry,material:t.Wolf3D_Skin,skeleton:e.Wolf3D_Head.skeleton,morphTargetDictionary:e.Wolf3D_Head.morphTargetDictionary,morphTargetInfluences:e.Wolf3D_Head.morphTargetInfluences}),N.jsx("skinnedMesh",{name:"Wolf3D_Teeth",geometry:e.Wolf3D_Teeth.geometry,material:t.Wolf3D_Teeth,skeleton:e.Wolf3D_Teeth.skeleton,morphTargetDictionary:e.Wolf3D_Teeth.morphTargetDictionary,morphTargetInfluences:e.Wolf3D_Teeth.morphTargetInfluences}),N.jsx("skinnedMesh",{geometry:e.Wolf3D_Glasses.geometry,material:t.Wolf3D_Glasses,skeleton:e.Wolf3D_Glasses.skeleton}),N.jsx("skinnedMesh",{geometry:e.Wolf3D_Headwear.geometry,material:t.Wolf3D_Headwear,skeleton:e.Wolf3D_Headwear.skeleton}),N.jsx("skinnedMesh",{geometry:e.Wolf3D_Body.geometry,material:t.Wolf3D_Body,skeleton:e.Wolf3D_Body.skeleton}),N.jsx("skinnedMesh",{geometry:e.Wolf3D_Outfit_Bottom.geometry,material:t.Wolf3D_Outfit_Bottom,skeleton:e.Wolf3D_Outfit_Bottom.skeleton}),N.jsx("skinnedMesh",{geometry:e.Wolf3D_Outfit_Footwear.geometry,material:t.Wolf3D_Outfit_Footwear,skeleton:e.Wolf3D_Outfit_Footwear.skeleton}),N.jsx("skinnedMesh",{geometry:e.Wolf3D_Outfit_Top.geometry,material:t.Wolf3D_Outfit_Top,skeleton:e.Wolf3D_Outfit_Top.skeleton})]})}ac.preload("/models/avatar.glb");ac.preload("/models/avatar.glb");const gQ=()=>{const n=C.useRef();return C.useEffect(()=>{n.current.setLookAt(0,2.2,5,0,1,0,!0)},[]),N.jsxs(N.Fragment,{children:[N.jsx(a7,{ref:n}),N.jsx(S7,{preset:"sunset"}),N.jsx(mQ,{})]})},vQ=({chatHistory:n,onClose:e})=>{const{tts:t,stopAudio:r}=Lw(),[i,s]=C.useState(null),[o,a]=C.useState(0),[l,c]=C.useState({}),[d,h]=C.useState(!1),[p,m]=C.useState(!1),[v,_]=C.useState(""),[y,g]=C.useState(!1),[S,E]=C.useState(""),w=async()=>{if(!n||n.length===0){_("No conversation history available for testing");return}m(!0),_("");try{const Z=await fetch(`${ad}/retention-test/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chatHistory:n})});if(!Z.ok)throw new Error(`Failed to generate test: ${Z.statusText}`);const U=await Z.json();s(U),a(0),c({}),h(!1),E("")}catch(Z){console.error("Error generating test:",Z),_("Failed to generate test. Please try again.")}finally{m(!1)}},T=(Z,U)=>{d||c(j=>({...j,[Z]:U}))},b=async()=>{if(!i)return;if(!i.questions.every(j=>l[j.id])){_("Please answer all questions before submitting");return}h(!0);const U={testTitle:i.testTitle,questions:i.questions.map(j=>({id:j.id,question:j.question,selectedAnswer:l[j.id],correctAnswer:j.correctAnswer,isCorrect:l[j.id]===j.correctAnswer,explanation:j.explanation,topic:j.topic})),score:R()};await B(U)},R=()=>{if(!i)return 0;const Z=i.questions.filter(U=>l[U.id]===U.correctAnswer).length;return Math.round(Z/i.questions.length*100)},B=async Z=>{g(!0),_("");try{const U=await fetch(`${ad}/retention-test/feedback`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({testResults:Z,chatHistory:n})});if(!U.ok)throw new Error(`Failed to generate feedback: ${U.statusText}`);const j=await U.json();E(j.feedback),t(j.feedback)}catch(U){console.error("Error generating feedback:",U),_("Failed to generate feedback. Please try again.")}finally{g(!1)}},P=()=>{s(null),a(0),c({}),h(!1),E(""),_(""),r()};if(C.useEffect(()=>{w()},[]),C.useEffect(()=>()=>{r()},[]),p)return N.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:N.jsx("div",{className:"bg-gray-800 rounded-lg p-8 max-w-2xl w-full mx-4",children:N.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[N.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mb-4"}),N.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:"Generating Your Retention Test"}),N.jsx("p",{className:"text-gray-300",children:"Creating personalized questions based on your conversation..."})]})})});if(v)return N.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:N.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 max-w-2xl w-full mx-4",children:[N.jsxs("div",{className:"flex justify-between items-center mb-4",children:[N.jsx("h2",{className:"text-2xl font-bold text-white",children:"Retention Test"}),N.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white",children:N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),N.jsxs("div",{className:"bg-red-900 bg-opacity-50 border border-red-700 rounded-lg p-4 mb-6",children:[N.jsxs("div",{className:"flex items-center text-red-200",children:[N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:N.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),N.jsx("span",{className:"font-medium",children:"Error"})]}),N.jsx("p",{className:"mt-2 text-red-100",children:v})]}),N.jsx("div",{className:"flex justify-end space-x-3",children:N.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Close"})})]})});if(!i)return null;const I=i.questions[o],F=o===i.questions.length-1,$=o===0;return N.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:N.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[N.jsxs("div",{className:"flex justify-between items-center mb-6",children:[N.jsxs("div",{children:[N.jsx("h2",{className:"text-2xl font-bold text-white",children:i.testTitle}),N.jsx("p",{className:"text-gray-400",children:"Test your knowledge based on our conversation"})]}),N.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white",children:N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),S?N.jsxs("div",{className:"space-y-6",children:[N.jsxs("div",{className:"bg-purple-900 bg-opacity-30 border border-purple-700 rounded-lg p-6",children:[N.jsxs("div",{className:"flex items-center mb-4",children:[N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-purple-400 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),N.jsx("h3",{className:"text-xl font-bold text-white",children:"Your Test Results"})]}),N.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[N.jsxs("div",{className:"bg-purple-800 rounded-lg p-4 text-center",children:[N.jsxs("div",{className:"text-3xl font-bold text-white",children:[R(),"%"]}),N.jsx("div",{className:"text-purple-200",children:"Overall Score"})]}),N.jsxs("div",{className:"bg-blue-800 rounded-lg p-4 text-center",children:[N.jsx("div",{className:"text-3xl font-bold text-white",children:i.questions.filter(Z=>l[Z.id]===Z.correctAnswer).length}),N.jsx("div",{className:"text-blue-200",children:"Correct Answers"})]}),N.jsxs("div",{className:"bg-amber-800 rounded-lg p-4 text-center",children:[N.jsx("div",{className:"text-3xl font-bold text-white",children:i.questions.filter(Z=>l[Z.id]!==Z.correctAnswer).length}),N.jsx("div",{className:"text-amber-200",children:"Incorrect Answers"})]})]}),N.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[N.jsx("h4",{className:"text-lg font-semibold text-white mb-3",children:"Personalized Feedback"}),N.jsx("div",{className:"prose prose-invert max-w-none",children:N.jsx("p",{className:"text-gray-200 whitespace-pre-wrap",children:S})})]})]}),N.jsxs("div",{className:"flex justify-between",children:[N.jsxs("button",{onClick:P,className:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center",children:[N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Retake Test"]}),N.jsx("button",{onClick:e,className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Close"})]})]}):d?N.jsxs("div",{className:"space-y-6",children:[N.jsx("h3",{className:"text-xl font-bold text-white",children:"Review Your Answers"}),N.jsx("div",{className:"space-y-4",children:i.questions.map((Z,U)=>{const j=l[Z.id],re=j===Z.correctAnswer;return N.jsxs("div",{className:`border rounded-lg p-4 ${re?"border-green-500 bg-green-900 bg-opacity-20":"border-red-500 bg-red-900 bg-opacity-20"}`,children:[N.jsxs("div",{className:"flex items-start mb-3",children:[N.jsx("div",{className:`flex-shrink-0 h-6 w-6 rounded-full flex items-center justify-center mr-3 ${re?"bg-green-500":"bg-red-500"}`,children:N.jsx("span",{className:"text-white text-sm font-bold",children:U+1})}),N.jsxs("div",{children:[N.jsx("h4",{className:"font-medium text-white",children:Z.question}),N.jsxs("div",{className:"mt-2 text-sm",children:[N.jsx("span",{className:"text-gray-400",children:"Topic: "}),N.jsx("span",{className:"text-gray-200",children:Z.topic})]})]})]}),N.jsxs("div",{className:"ml-9 space-y-2",children:[N.jsxs("div",{className:"flex items-center",children:[N.jsx("span",{className:"text-sm font-medium text-gray-400 mr-2",children:"Your answer:"}),N.jsx("span",{className:`font-medium ${re?"text-green-400":"text-red-400"}`,children:j||"Not answered"})]}),!re&&N.jsxs("div",{className:"flex items-center",children:[N.jsx("span",{className:"text-sm font-medium text-gray-400 mr-2",children:"Correct answer:"}),N.jsx("span",{className:"font-medium text-green-400",children:Z.correctAnswer})]}),N.jsx("div",{className:"mt-3 p-3 bg-gray-700 rounded-lg",children:N.jsx("p",{className:"text-gray-200 text-sm whitespace-pre-wrap",children:Z.explanation})})]})]},Z.id)})}),N.jsx("div",{className:"flex justify-end",children:N.jsx("button",{onClick:b,disabled:y,className:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center disabled:opacity-50",children:y?N.jsxs(N.Fragment,{children:[N.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[N.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),N.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating Feedback..."]}):"Get Personalized Feedback"})})]}):N.jsxs("div",{className:"space-y-6",children:[N.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2.5",children:N.jsx("div",{className:"bg-indigo-600 h-2.5 rounded-full",style:{width:`${(o+1)/i.questions.length*100}%`}})}),N.jsxs("div",{className:"flex justify-between text-sm text-gray-400",children:[N.jsxs("span",{children:["Question ",o+1," of ",i.questions.length]}),N.jsx("span",{children:i.questions[o].topic})]}),N.jsxs("div",{className:"bg-gray-700 rounded-lg p-6",children:[N.jsx("h3",{className:"text-xl font-medium text-white mb-6",children:I.question}),N.jsx("div",{className:"space-y-3",children:I.options.map(Z=>{const U=l[I.id]===Z.id;return N.jsx("button",{onClick:()=>T(I.id,Z.id),className:`w-full text-left p-4 rounded-lg transition-colors ${U?"bg-indigo-600 border-indigo-500":"bg-gray-600 hover:bg-gray-500 border-gray-500"} border`,children:N.jsxs("div",{className:"flex items-center",children:[N.jsx("div",{className:`flex-shrink-0 h-6 w-6 rounded-full border flex items-center justify-center mr-4 ${U?"border-indigo-300":"border-gray-400"}`,children:U&&N.jsx("div",{className:"h-3 w-3 rounded-full bg-indigo-300"})}),N.jsx("span",{className:"text-white",children:Z.text})]})},Z.id)})})]}),N.jsxs("div",{className:"flex justify-between",children:[N.jsxs("button",{onClick:()=>a(Z=>Math.max(0,Z-1)),disabled:$,className:`px-6 py-3 rounded-lg transition-colors flex items-center ${$?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-gray-600 text-white hover:bg-gray-500"}`,children:[N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Previous"]}),F?N.jsxs("button",{onClick:b,disabled:!l[I.id],className:`px-6 py-3 rounded-lg transition-colors flex items-center ${l[I.id]?"bg-green-600 text-white hover:bg-green-700":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:["Submit Test",N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]}):N.jsxs("button",{onClick:()=>a(Z=>Math.min(i.questions.length-1,Z+1)),disabled:!l[I.id],className:`px-6 py-3 rounded-lg transition-colors flex items-center ${l[I.id]?"bg-indigo-600 text-white hover:bg-indigo-700":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:["Next",N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})]})})},yQ=n=>{var t,r;if(!n)return"";let e=n;if(e=e.replace(/```json\s*/g,"").replace(/```\s*/g,""),e=e.replace(/^`+|`+$/g,""),e.trim().startsWith("{")&&e.includes('"text"'))try{const i=JSON.parse(e);if((r=(t=i.messages)==null?void 0:t[0])!=null&&r.text)return i.messages[0].text}catch{}return e},_Q=({hidden:n,...e})=>{const t=C.useRef(),r=C.useRef(),{tts:i,loading:s,message:o,startRecording:a,stopRecording:l,recording:c,currentMessageText:d,displayedCaptionText:h,stopAudio:p,messages:m,currentImages:v,lastUserMessage:_,setLastUserMessage:y,selectedLanguage:g,setSelectedLanguage:S}=Lw(),[E,w]=C.useState([]),[T,b]=C.useState(!1),[R,B]=C.useState([]),[P,I]=C.useState(!1),[F,$]=C.useState(!1),[Z,U]=C.useState(""),[j,re]=C.useState(!1);C.useEffect(()=>{console.log("Current images updated:",v)},[v]),C.useEffect(()=>{if(o&&o.text){const V={id:Date.now()+Math.random(),text:o.text,sender:"ai",timestamp:new Date};w(ee=>ee.some(oe=>oe.sender==="ai"&&oe.text===o.text&&Math.abs(new Date(oe.timestamp).getTime()-new Date().getTime())<5e3)?ee:[...ee,V])}},[o]);const ae=async()=>{const V=t.current.value.trim();if(!V)return;const ee={id:Date.now(),text:V,sender:"user",timestamp:new Date};w(ie=>[...ie,ee]),t.current.value="",i(V)};C.useEffect(()=>{if(m&&Array.isArray(m)&&m.length>0){const V=m.filter(ee=>ee&&ee.text).map(ee=>({id:Date.now()+Math.random(),text:ee.text,sender:"ai",timestamp:new Date}));V.length>0&&w(ee=>{const ie=new Set(ee.filter(he=>he.sender==="ai").map(he=>he.text)),oe=V.filter(he=>!ie.has(he.text));return oe.length>0?[...ee,...oe]:ee})}},[m]),C.useEffect(()=>{_&&_.trim()!==""&&w(V=>{if(!V.some(ie=>ie.sender==="user"&&ie.text===_)){const ie={id:Date.now()+Math.random(),text:_,sender:"user",timestamp:new Date};return y(""),[...V,ie]}return V})},[_,y]);const H=async V=>{const ee=V.target.files[0];if(ee){I(!0);try{const ie=new FormData;ie.append("file",ee);const oe=await fetch(`${ad}/api/documents/upload`,{method:"POST",body:ie});if(!oe.ok){let Te=`HTTP error! status: ${oe.status}`;try{const Xe=await oe.json();Te=Xe.errorMessage||Xe.error||Te}catch{const ct=await oe.text();ct&&(Te=ct)}throw new Error(Te)}const he=await oe.json();B(Te=>[...Te,he]);const Ce={id:Date.now(),text:`Uploaded document: ${he.filename||ee.name}`,sender:"user",timestamp:new Date};if(w(Te=>[...Te,Ce]),he.summary){const Te={id:Date.now()+1,text:`Document Summary:

${he.summary}`,sender:"ai",timestamp:new Date};w(Xe=>[...Xe,Te])}const be=he.summary?`I've uploaded a document named "${he.filename}". Here's a summary of it:

${he.summary}

Can you provide a detailed explanation of what this document is about?`:`I've uploaded a document named "${he.filename}". Can you explain what this document is about?`;i(be)}catch(ie){console.error("=== Document Upload Error ==="),console.error("Error:",ie),console.error("Error message:",ie.message),console.error("Error stack:",ie.stack);const oe={id:Date.now(),text:`Failed to upload document: ${ie.message}`,sender:"system",timestamp:new Date};w(he=>[...he,oe]),alert(`Document upload failed: ${ie.message}

Please check:
1. File type is supported (.txt, .pdf, .docx)
2. File size is under 10MB
3. Backend server is running

Check browser console and backend logs for more details.`)}finally{I(!1),r.current&&(r.current.value="")}}},Y=async()=>{if(E.length===0){U("The conversation is empty.");return}$(!0),U("");try{const V=await fetch(`${ad}/summary`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chatHistory:E})});if(!V.ok)throw new Error(`HTTP error! status: ${V.status}`);const ee=await V.json();U(ee.summary)}catch(V){console.error("Error generating summary:",V),U("Sorry, I couldn't generate a summary of the conversation. Please try again.")}finally{$(!1)}};return n?null:N.jsxs("div",{className:"fixed top-0 left-0 right-0 bottom-0 z-10 flex pointer-events-none",children:[N.jsx("input",{type:"file",ref:r,onChange:H,accept:".pdf,.docx,.txt",className:"hidden",id:"documentUpload"}),N.jsxs("div",{className:"absolute left-1/2 transform -translate-x-1/2 top-4 bg-black bg-opacity-70 backdrop-blur-md text-white px-3 py-2 rounded-lg pointer-events-auto z-20 shadow-lg border border-white/20",children:[N.jsx("label",{className:"text-xs font-semibold mb-1 block text-center",children:" Language"}),N.jsxs("select",{value:g,onChange:V=>{S(V.target.value),console.log("Language changed to:",V.target.value)},className:"bg-white bg-opacity-30 text-white text-sm font-medium px-2 py-1 rounded border border-white/40 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400 cursor-pointer hover:bg-opacity-40 transition-all min-w-[100px]",children:[N.jsx("option",{value:"english",className:"bg-gray-800 text-white",children:"English"}),N.jsx("option",{value:"hindi",className:"bg-gray-800 text-white",children:"Hindi"}),N.jsx("option",{value:"telugu",className:"bg-gray-800 text-white",children:"Telugu"})]})]}),N.jsx("button",{onClick:()=>b(!T),className:"absolute left-4 top-32 bg-black bg-opacity-50 backdrop-blur-md text-white p-3 rounded-lg pointer-events-auto z-20 hover:bg-opacity-70 transition-all",children:N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.076-4.076a1.526 1.526 0 011.037-.443 48.282 48.282 0 005.68-.494c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z"})})}),N.jsx("button",{onClick:()=>document.getElementById("documentUpload").click(),disabled:P,className:"absolute left-4 top-48 bg-black bg-opacity-50 backdrop-blur-md text-white p-3 rounded-lg pointer-events-auto z-20 hover:bg-opacity-70 transition-all disabled:opacity-50",children:P?N.jsxs("svg",{className:"animate-spin h-6 w-6 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[N.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),N.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9zM15 9h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75H15a.75.75 0 01-.75-.75v-.75A.75.75 0 0115 9zm-3 3.75a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 01-.75.75h-.75a.75.75 0 01-.75-.75v-.75z"})})}),T&&N.jsxs("div",{className:"absolute left-0 top-0 h-full bg-gray-900 pointer-events-auto z-40 w-1/4 min-w-[320px] max-w-[400px] flex flex-col shadow-2xl border-r border-gray-700",children:[N.jsxs("div",{className:"flex-shrink-0 p-4 border-b border-gray-600 bg-gray-800",children:[N.jsxs("div",{className:"flex justify-between items-center mb-4",children:[N.jsx("h2",{className:"text-xl font-bold text-white",children:"Conversation"}),N.jsx("button",{onClick:()=>b(!1),className:"text-white hover:text-gray-300 transition-colors",children:N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),E.length>0&&N.jsx("div",{className:"mb-4",children:N.jsx("button",{onClick:Y,disabled:F,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 text-white p-2 rounded-lg pointer-events-auto transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:F?N.jsxs(N.Fragment,{children:[N.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[N.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),N.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),N.jsx("span",{children:"Generating Summary..."})]}):N.jsxs(N.Fragment,{children:[N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z"})}),N.jsx("span",{children:"Summarize Chat"})]})})}),Z&&N.jsxs("div",{className:"mb-4 bg-purple-900 bg-opacity-50 rounded-lg border border-purple-500 flex flex-col max-h-[200px]",children:[N.jsxs("div",{className:"flex justify-between items-center p-3 border-b border-purple-600 flex-shrink-0",children:[N.jsx("h3",{className:"font-bold text-purple-200",children:"Chat Summary"}),N.jsx("button",{onClick:()=>U(""),className:"text-gray-300 hover:text-white transition-colors",children:N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),N.jsx("div",{className:"overflow-y-auto p-3 scrollbar-thin scrollbar-thumb-purple-600 scrollbar-track-transparent",children:N.jsx("p",{className:"text-white text-sm whitespace-pre-wrap",children:Z})})]})]}),N.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-900 scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-transparent",children:N.jsx("div",{className:"space-y-4",children:E.length>0?[...E].sort((V,ee)=>{const ie=V.timestamp instanceof Date?V.timestamp.getTime():new Date(V.timestamp).getTime(),oe=ee.timestamp instanceof Date?ee.timestamp.getTime():new Date(ee.timestamp).getTime();return ie-oe}).map(V=>N.jsxs("div",{className:`p-3 rounded-lg max-w-full ${V.sender==="user"?"bg-blue-600 ml-auto":V.sender==="system"?"bg-yellow-600":"bg-gray-700"}`,children:[N.jsx("div",{className:"font-semibold text-sm mb-1 text-white",children:V.sender==="user"?"You":V.sender==="system"?"System":"Assistant"}),N.jsx("div",{className:"text-white break-words whitespace-pre-wrap",children:V.text}),N.jsx("div",{className:"text-xs text-gray-300 mt-1",children:V.timestamp instanceof Date?V.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):V.timestamp?new Date(V.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},V.id)):N.jsxs("div",{className:"text-gray-300 text-center py-8 px-4",children:[N.jsx("p",{className:"text-lg mb-2",children:"No conversation yet."}),N.jsx("p",{className:"text-sm",children:"Start by typing a message or uploading a document!"})]})})})]}),(d||h)&&N.jsx("div",{className:"fixed bottom-8 left-1/2 transform -translate-x-1/2 z-30 pointer-events-none px-4 w-full max-w-3xl",children:N.jsx("div",{className:"relative animate-cinematicFadeIn",children:N.jsx("div",{className:"inline-block px-4 py-2 rounded-sm",style:{backgroundColor:"rgba(0, 0, 0, 0.75)",backdropFilter:"blur(4px)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.5)"},children:N.jsxs("p",{className:"text-lg md:text-xl font-normal leading-relaxed text-center break-words text-white",style:{textShadow:"0 1px 2px rgba(0, 0, 0, 0.8), 0 0 4px rgba(0, 0, 0, 0.5)",letterSpacing:"0.01em",lineHeight:"1.4",fontFamily:"system-ui, -apple-system, sans-serif"},children:[yQ(h||d),h&&h.length<d.length&&N.jsx("span",{className:"inline-block w-0.5 h-5 bg-white ml-1 animate-pulse align-middle"})]})})})}),N.jsxs("div",{className:"flex-1 flex flex-col justify-between p-4",children:[N.jsxs("div",{className:"self-start backdrop-blur-md bg-white bg-opacity-50 p-4 rounded-lg",children:[N.jsx("h1",{className:"font-black text-xl text-gray-700",children:"Adam"}),N.jsx("p",{className:"text-gray-600",children:s?"Loading...":"Type a message and press enter to chat with the AI."}),P&&N.jsx("p",{className:"text-gray-600 mt-2",children:"Uploading document..."})]}),j&&N.jsx(vQ,{chatHistory:E,onClose:()=>re(!1)}),v&&v.length>0&&N.jsx("div",{className:"absolute right-4 top-32 bg-black bg-opacity-50 backdrop-blur-md p-4 rounded-lg pointer-events-auto z-10",style:{maxWidth:"350px",maxHeight:"calc(100vh - 250px)",overflowY:"auto"},children:N.jsx("div",{className:"flex flex-col gap-3",children:v.map((V,ee)=>{const ie=typeof V=="string"?V:V.url;return N.jsx("div",{className:"relative overflow-hidden rounded-lg shadow-lg",style:{backgroundColor:"#1a1a1a"},children:N.jsx("img",{src:ie,alt:`Related image ${ee+1}`,className:"w-full object-cover transition-transform hover:scale-105",style:{height:"200px",display:"block"},onLoad:oe=>{console.log(`Image ${ee+1} loaded successfully:`,ie)},onError:oe=>{console.error(`Image ${ee+1} failed to load:`,ie),oe.target.src=`https://picsum.photos/350/200?random=${Date.now()}_${ee}`}})},`img-${ee}-${ie}`)})})}),N.jsx("div",{className:"w-full flex flex-col items-end justify-center gap-4"}),N.jsxs("div",{className:"flex items-center gap-2 pointer-events-auto max-w-screen-sm w-full mx-auto",children:[N.jsx("button",{onClick:c?l:a,className:`bg-gray-500 hover:bg-gray-600 text-white p-4 px-4 font-semibold uppercase rounded-md ${c?"bg-red-500 hover:bg-red-600":""} ${s||o?"cursor-not-allowed opacity-30":""}`,children:N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 0 1-3-3V4.5a3 3 0 1 1 6 0v8.25a3 3 0 0 1-3 3Z"})})}),N.jsx("input",{className:"w-full placeholder:text-gray-800 placeholder:italic p-4 rounded-md bg-opacity-50 bg-white backdrop-blur-md",placeholder:"Type a message...",ref:t,onKeyDown:V=>{V.key==="Enter"&&ae()}}),N.jsx("button",{disabled:s||o,onClick:ae,className:`bg-gray-500 hover:bg-gray-600 text-white p-4 px-10 font-semibold uppercase rounded-md ${s||o?"cursor-not-allowed opacity-30":""}`,children:"Send"}),o&&N.jsx("button",{onClick:p,className:"bg-red-500 hover:bg-red-600 text-white p-4 px-4 font-semibold uppercase rounded-md",children:N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 017.5 5.25h9a2.25 2.25 0 012.25 2.25v9a2.25 2.25 0 01-2.25 2.25h-9a2.25 2.25 0 01-2.25-2.25v-9z"})})})]})]})]})};var nP="popstate";function xQ(n={}){function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return dS("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Uh(i)}return SQ(e,t,null,n)}function Rn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ds(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function EQ(){return Math.random().toString(36).substring(2,10)}function rP(n,e){return{usr:n.state,key:n.key,idx:e}}function dS(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Td(e):e,state:t,key:e&&e.key||r||EQ()}}function Uh({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Td(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function SQ(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,c=d();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function d(){return(o.state||{idx:null}).idx}function h(){a="POP";let y=d(),g=y==null?null:y-c;c=y,l&&l({action:a,location:_.location,delta:g})}function p(y,g){a="PUSH";let S=dS(_.location,y,g);t&&t(S,y),c=d()+1;let E=rP(S,c),w=_.createHref(S);try{o.pushState(E,"",w)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(w)}s&&l&&l({action:a,location:_.location,delta:1})}function m(y,g){a="REPLACE";let S=dS(_.location,y,g);t&&t(S,y),c=d();let E=rP(S,c),w=_.createHref(S);o.replaceState(E,"",w),s&&l&&l({action:a,location:_.location,delta:0})}function v(y){return AQ(y)}let _={get action(){return a},get location(){return n(i,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(nP,h),l=y,()=>{i.removeEventListener(nP,h),l=null}},createHref(y){return e(i,y)},createURL:v,encodeLocation(y){let g=v(y);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:m,go(y){return o.go(y)}};return _}function AQ(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Rn(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Uh(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function tN(n,e,t="/"){return wQ(n,e,t,!1)}function wQ(n,e,t,r){let i=typeof e=="string"?Td(e):e,s=Ko(i.pathname||"/",t);if(s==null)return null;let o=nN(n);MQ(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=NQ(s);a=DQ(o[l],c,r)}return a}function nN(n,e=[],t=[],r="",i=!1){let s=(o,a,l=i,c)=>{let d={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(r)&&l)return;Rn(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length)}let h=zo([r,d.relativePath]),p=t.concat(d);o.children&&o.children.length>0&&(Rn(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),nN(o.children,e,p,h,l)),!(o.path==null&&!o.index)&&e.push({path:h,score:LQ(h,o.index),routesMeta:p})};return n.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let c of rN(o.path))s(o,a,!0,c)}),e}function rN(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=rN(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function MQ(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:BQ(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var bQ=/^:[\w-]+$/,CQ=3,TQ=2,RQ=1,PQ=10,IQ=-2,iP=n=>n==="*";function LQ(n,e){let t=n.split("/"),r=t.length;return t.some(iP)&&(r+=IQ),e&&(r+=TQ),t.filter(i=>!iP(i)).reduce((i,s)=>i+(bQ.test(s)?CQ:s===""?RQ:PQ),r)}function BQ(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function DQ(n,e,t=!1){let{routesMeta:r}=n,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=Q0({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),p=l.route;if(!h&&c&&t&&!r[r.length-1].route.index&&(h=Q0({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:zo([s,h.pathname]),pathnameBase:HQ(zo([s,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(s=zo([s,h.pathnameBase]))}return o}function Q0(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=OQ(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,{paramName:d,isOptional:h},p)=>{if(d==="*"){let v=a[p]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const m=a[p];return h&&!m?c[d]=void 0:c[d]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:n}}function OQ(n,e=!1,t=!0){ds(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function NQ(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ds(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ko(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var FQ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kQ=n=>FQ.test(n);function UQ(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Td(n):n,s;if(t)if(kQ(t))s=t;else{if(t.includes("//")){let o=t;t=t.replace(/\/\/+/g,"/"),ds(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${t}`)}t.startsWith("/")?s=sP(t.substring(1),"/"):s=sP(t,e)}else s=e;return{pathname:s,search:GQ(r),hash:VQ(i)}}function sP(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Yx(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function zQ(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Bw(n){let e=zQ(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Dw(n,e,t,r=!1){let i;typeof n=="string"?i=Td(n):(i={...n},Rn(!i.pathname||!i.pathname.includes("?"),Yx("?","pathname","search",i)),Rn(!i.pathname||!i.pathname.includes("#"),Yx("#","pathname","hash",i)),Rn(!i.search||!i.search.includes("#"),Yx("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=t;else{let h=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;i.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=UQ(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}var zo=n=>n.join("/").replace(/\/\/+/g,"/"),HQ=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),GQ=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,VQ=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function WQ(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function $Q(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var iN=["POST","PUT","PATCH","DELETE"];new Set(iN);var jQ=["GET",...iN];new Set(jQ);var Rd=C.createContext(null);Rd.displayName="DataRouter";var Qv=C.createContext(null);Qv.displayName="DataRouterState";C.createContext(!1);var sN=C.createContext({isTransitioning:!1});sN.displayName="ViewTransition";var XQ=C.createContext(new Map);XQ.displayName="Fetchers";var JQ=C.createContext(null);JQ.displayName="Await";var hs=C.createContext(null);hs.displayName="Navigation";var gp=C.createContext(null);gp.displayName="Location";var ho=C.createContext({outlet:null,matches:[],isDataRoute:!1});ho.displayName="Route";var Ow=C.createContext(null);Ow.displayName="RouteError";function YQ(n,{relative:e}={}){Rn(Pd(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=C.useContext(hs),{hash:i,pathname:s,search:o}=vp(n,{relative:e}),a=s;return t!=="/"&&(a=s==="/"?t:zo([t,s])),r.createHref({pathname:a,search:o,hash:i})}function Pd(){return C.useContext(gp)!=null}function il(){return Rn(Pd(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(gp).location}var oN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function aN(n){C.useContext(hs).static||C.useLayoutEffect(n)}function Nw(){let{isDataRoute:n}=C.useContext(ho);return n?lq():KQ()}function KQ(){Rn(Pd(),"useNavigate() may be used only in the context of a <Router> component.");let n=C.useContext(Rd),{basename:e,navigator:t}=C.useContext(hs),{matches:r}=C.useContext(ho),{pathname:i}=il(),s=JSON.stringify(Bw(r)),o=C.useRef(!1);return aN(()=>{o.current=!0}),C.useCallback((l,c={})=>{if(ds(o.current,oN),!o.current)return;if(typeof l=="number"){t.go(l);return}let d=Dw(l,JSON.parse(s),i,c.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:zo([e,d.pathname])),(c.replace?t.replace:t.push)(d,c.state,c)},[e,t,s,i,n])}C.createContext(null);function vp(n,{relative:e}={}){let{matches:t}=C.useContext(ho),{pathname:r}=il(),i=JSON.stringify(Bw(t));return C.useMemo(()=>Dw(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function ZQ(n,e){return lN(n,e)}function lN(n,e,t,r,i){var S;Rn(Pd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=C.useContext(hs),{matches:o}=C.useContext(ho),a=o[o.length-1],l=a?a.params:{},c=a?a.pathname:"/",d=a?a.pathnameBase:"/",h=a&&a.route;{let E=h&&h.path||"";cN(c,!h||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let p=il(),m;if(e){let E=typeof e=="string"?Td(e):e;Rn(d==="/"||((S=E.pathname)==null?void 0:S.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${E.pathname}" was given in the \`location\` prop.`),m=E}else m=p;let v=m.pathname||"/",_=v;if(d!=="/"){let E=d.replace(/^\//,"").split("/");_="/"+v.replace(/^\//,"").split("/").slice(E.length).join("/")}let y=tN(n,{pathname:_});ds(h||y!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),ds(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=nq(y&&y.map(E=>Object.assign({},E,{params:Object.assign({},l,E.params),pathname:zo([d,s.encodeLocation?s.encodeLocation(E.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?d:zo([d,s.encodeLocation?s.encodeLocation(E.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathnameBase])})),o,t,r,i);return e&&g?C.createElement(gp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},g):g}function QQ(){let n=aq(),e=WQ(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:s},"ErrorBoundary")," or"," ",C.createElement("code",{style:s},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),t?C.createElement("pre",{style:i},t):null,o)}var qQ=C.createElement(QQ,null),eq=class extends C.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?C.createElement(ho.Provider,{value:this.props.routeContext},C.createElement(Ow.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function tq({routeContext:n,match:e,children:t}){let r=C.useContext(Rd);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(ho.Provider,{value:n},t)}function nq(n,e=[],t=null,r=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,o=t==null?void 0:t.errors;if(o!=null){let d=s.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);Rn(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let a=!1,l=-1;if(t)for(let d=0;d<s.length;d++){let h=s[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(l=d),h.route.id){let{loaderData:p,errors:m}=t,v=h.route.loader&&!p.hasOwnProperty(h.route.id)&&(!m||m[h.route.id]===void 0);if(h.route.lazy||v){a=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}let c=t&&r?(d,h)=>{var p,m;r(d,{location:t.location,params:((m=(p=t.matches)==null?void 0:p[0])==null?void 0:m.params)??{},unstable_pattern:$Q(t.matches),errorInfo:h})}:void 0;return s.reduceRight((d,h,p)=>{let m,v=!1,_=null,y=null;t&&(m=o&&h.route.id?o[h.route.id]:void 0,_=h.route.errorElement||qQ,a&&(l<0&&p===0?(cN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,y=null):l===p&&(v=!0,y=h.route.hydrateFallbackElement||null)));let g=e.concat(s.slice(0,p+1)),S=()=>{let E;return m?E=_:v?E=y:h.route.Component?E=C.createElement(h.route.Component,null):h.route.element?E=h.route.element:E=d,C.createElement(tq,{match:h,routeContext:{outlet:d,matches:g,isDataRoute:t!=null},children:E})};return t&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?C.createElement(eq,{location:t.location,revalidation:t.revalidation,component:_,error:m,children:S(),routeContext:{outlet:null,matches:g,isDataRoute:!0},onError:c}):S()},null)}function Fw(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rq(n){let e=C.useContext(Rd);return Rn(e,Fw(n)),e}function iq(n){let e=C.useContext(Qv);return Rn(e,Fw(n)),e}function sq(n){let e=C.useContext(ho);return Rn(e,Fw(n)),e}function kw(n){let e=sq(n),t=e.matches[e.matches.length-1];return Rn(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function oq(){return kw("useRouteId")}function aq(){var r;let n=C.useContext(Ow),e=iq("useRouteError"),t=kw("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function lq(){let{router:n}=rq("useNavigate"),e=kw("useNavigate"),t=C.useRef(!1);return aN(()=>{t.current=!0}),C.useCallback(async(i,s={})=>{ds(t.current,oN),t.current&&(typeof i=="number"?await n.navigate(i):await n.navigate(i,{fromRouteId:e,...s}))},[n,e])}var oP={};function cN(n,e,t){!e&&!oP[n]&&(oP[n]=!0,ds(!1,t))}C.memo(cq);function cq({routes:n,future:e,state:t,unstable_onError:r}){return lN(n,void 0,t,r,e)}function uq({to:n,replace:e,state:t,relative:r}){Rn(Pd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=C.useContext(hs);ds(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=C.useContext(ho),{pathname:o}=il(),a=Nw(),l=Dw(n,Bw(s),o,r==="path"),c=JSON.stringify(l);return C.useEffect(()=>{a(JSON.parse(c),{replace:e,state:t,relative:r})},[a,c,r,e,t]),null}function i0(n){Rn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function dq({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:s=!1,unstable_useTransitions:o}){Rn(!Pd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=n.replace(/^\/*/,"/"),l=C.useMemo(()=>({basename:a,navigator:i,static:s,unstable_useTransitions:o,future:{}}),[a,i,s,o]);typeof t=="string"&&(t=Td(t));let{pathname:c="/",search:d="",hash:h="",state:p=null,key:m="default"}=t,v=C.useMemo(()=>{let _=Ko(c,a);return _==null?null:{location:{pathname:_,search:d,hash:h,state:p,key:m},navigationType:r}},[a,c,d,h,p,m,r]);return ds(v!=null,`<Router basename="${a}"> is not able to match the URL "${c}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:C.createElement(hs.Provider,{value:l},C.createElement(gp.Provider,{children:e,value:v}))}function fq({children:n,location:e}){return ZQ(fS(n),e)}function fS(n,e=[]){let t=[];return C.Children.forEach(n,(r,i)=>{if(!C.isValidElement(r))return;let s=[...e,i];if(r.type===C.Fragment){t.push.apply(t,fS(r.props.children,s));return}Rn(r.type===i0,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Rn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=fS(r.props.children,s)),t.push(o)}),t}var s0="get",o0="application/x-www-form-urlencoded";function qv(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function hq(n){return qv(n)&&n.tagName.toLowerCase()==="button"}function pq(n){return qv(n)&&n.tagName.toLowerCase()==="form"}function mq(n){return qv(n)&&n.tagName.toLowerCase()==="input"}function gq(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function vq(n,e){return n.button===0&&(!e||e==="_self")&&!gq(n)}var Ng=null;function yq(){if(Ng===null)try{new FormData(document.createElement("form"),0),Ng=!1}catch{Ng=!0}return Ng}var _q=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Kx(n){return n!=null&&!_q.has(n)?(ds(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${o0}"`),null):n}function xq(n,e){let t,r,i,s,o;if(pq(n)){let a=n.getAttribute("action");r=a?Ko(a,e):null,t=n.getAttribute("method")||s0,i=Kx(n.getAttribute("enctype"))||o0,s=new FormData(n)}else if(hq(n)||mq(n)&&(n.type==="submit"||n.type==="image")){let a=n.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=n.getAttribute("formaction")||a.getAttribute("action");if(r=l?Ko(l,e):null,t=n.getAttribute("formmethod")||a.getAttribute("method")||s0,i=Kx(n.getAttribute("formenctype"))||Kx(a.getAttribute("enctype"))||o0,s=new FormData(a,n),!yq()){let{name:c,type:d,value:h}=n;if(d==="image"){let p=c?`${c}.`:"";s.append(`${p}x`,"0"),s.append(`${p}y`,"0")}else c&&s.append(c,h)}}else{if(qv(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=s0,r=null,i=o0,o=n}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Uw(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Eq(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Ko(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function Sq(n,e){if(n.id in e)return e[n.id];try{let t=await u7(()=>import(n.module),__vite__mapDeps([]));return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Aq(n){return n!=null&&typeof n.page=="string"}function wq(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Mq(n,e,t){let r=await Promise.all(n.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await Sq(s,t);return o.links?o.links():[]}return[]}));return Rq(r.flat(1).filter(wq).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function aP(n,e,t,r,i,s){let o=(l,c)=>t[c]?l.route.id!==t[c].route.id:!0,a=(l,c)=>{var d;return t[c].pathname!==l.pathname||((d=t[c].route.path)==null?void 0:d.endsWith("*"))&&t[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>o(l,c)||a(l,c)):s==="data"?e.filter((l,c)=>{var h;let d=r.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let p=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((h=t[0])==null?void 0:h.params)||{},nextUrl:new URL(n,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function bq(n,e,{includeHydrateFallback:t}={}){return Cq(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function Cq(n){return[...new Set(n)]}function Tq(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function Rq(n,e){let t=new Set,r=new Set(e);return n.reduce((i,s)=>{if(e&&!Aq(s)&&s.as==="script"&&s.href&&r.has(s.href))return i;let a=JSON.stringify(Tq(s));return t.has(a)||(t.add(a),i.push({key:a,link:s})),i},[])}function uN(){let n=C.useContext(Rd);return Uw(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function Pq(){let n=C.useContext(Qv);return Uw(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var zw=C.createContext(void 0);zw.displayName="FrameworkContext";function dN(){let n=C.useContext(zw);return Uw(n,"You must render this element inside a <HydratedRouter> element"),n}function Iq(n,e){let t=C.useContext(zw),[r,i]=C.useState(!1),[s,o]=C.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:d,onTouchStart:h}=e,p=C.useRef(null);C.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let _=g=>{g.forEach(S=>{o(S.isIntersecting)})},y=new IntersectionObserver(_,{threshold:.5});return p.current&&y.observe(p.current),()=>{y.disconnect()}}},[n]),C.useEffect(()=>{if(r){let _=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(_)}}},[r]);let m=()=>{i(!0)},v=()=>{i(!1),o(!1)};return t?n!=="intent"?[s,p,{}]:[s,p,{onFocus:Rf(a,m),onBlur:Rf(l,v),onMouseEnter:Rf(c,m),onMouseLeave:Rf(d,v),onTouchStart:Rf(h,m)}]:[!1,p,{}]}function Rf(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function Lq({page:n,...e}){let{router:t}=uN(),r=C.useMemo(()=>tN(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?C.createElement(Dq,{page:n,matches:r,...e}):null}function Bq(n){let{manifest:e,routeModules:t}=dN(),[r,i]=C.useState([]);return C.useEffect(()=>{let s=!1;return Mq(n,e,t).then(o=>{s||i(o)}),()=>{s=!0}},[n,e,t]),r}function Dq({page:n,matches:e,...t}){let r=il(),{manifest:i,routeModules:s}=dN(),{basename:o}=uN(),{loaderData:a,matches:l}=Pq(),c=C.useMemo(()=>aP(n,e,l,i,r,"data"),[n,e,l,i,r]),d=C.useMemo(()=>aP(n,e,l,i,r,"assets"),[n,e,l,i,r]),h=C.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let v=new Set,_=!1;if(e.forEach(g=>{var E;let S=i.routes[g.route.id];!S||!S.hasLoader||(!c.some(w=>w.route.id===g.route.id)&&g.route.id in a&&((E=s[g.route.id])!=null&&E.shouldRevalidate)||S.hasClientLoader?_=!0:v.add(g.route.id))}),v.size===0)return[];let y=Eq(n,o,"data");return _&&v.size>0&&y.searchParams.set("_routes",e.filter(g=>v.has(g.route.id)).map(g=>g.route.id).join(",")),[y.pathname+y.search]},[o,a,r,i,c,e,n,s]),p=C.useMemo(()=>bq(d,i),[d,i]),m=Bq(d);return C.createElement(C.Fragment,null,h.map(v=>C.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...t})),p.map(v=>C.createElement("link",{key:v,rel:"modulepreload",href:v,...t})),m.map(({key:v,link:_})=>C.createElement("link",{key:v,nonce:t.nonce,..._})))}function Oq(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var fN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{fN&&(window.__reactRouterVersion="7.10.1")}catch{}function Nq({basename:n,children:e,unstable_useTransitions:t,window:r}){let i=C.useRef();i.current==null&&(i.current=xQ({window:r,v5Compat:!0}));let s=i.current,[o,a]=C.useState({action:s.action,location:s.location}),l=C.useCallback(c=>{t===!1?a(c):C.startTransition(()=>a(c))},[t]);return C.useLayoutEffect(()=>s.listen(l),[s,l]),C.createElement(dq,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:s,unstable_useTransitions:t===!0})}var hN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pN=C.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h,...p},m){let{basename:v,unstable_useTransitions:_}=C.useContext(hs),y=typeof c=="string"&&hN.test(c),g,S=!1;if(typeof c=="string"&&y&&(g=c,fN))try{let I=new URL(window.location.href),F=c.startsWith("//")?new URL(I.protocol+c):new URL(c),$=Ko(F.pathname,v);F.origin===I.origin&&$!=null?c=$+F.search+F.hash:S=!0}catch{ds(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=YQ(c,{relative:i}),[w,T,b]=Iq(r,p),R=zq(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:h,unstable_useTransitions:_});function B(I){e&&e(I),I.defaultPrevented||R(I)}let P=C.createElement("a",{...p,...b,href:g||E,onClick:S||s?e:B,ref:Oq(m,T),target:l,"data-discover":!y&&t==="render"?"true":void 0});return w&&!y?C.createElement(C.Fragment,null,P,C.createElement(Lq,{page:E})):P});pN.displayName="Link";var Fq=C.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...c},d){let h=vp(o,{relative:c.relative}),p=il(),m=C.useContext(Qv),{navigator:v,basename:_}=C.useContext(hs),y=m!=null&&$q(h)&&a===!0,g=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,S=p.pathname,E=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;t||(S=S.toLowerCase(),E=E?E.toLowerCase():null,g=g.toLowerCase()),E&&_&&(E=Ko(E,_)||E);const w=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let T=S===g||!i&&S.startsWith(g)&&S.charAt(w)==="/",b=E!=null&&(E===g||!i&&E.startsWith(g)&&E.charAt(g.length)==="/"),R={isActive:T,isPending:b,isTransitioning:y},B=T?e:void 0,P;typeof r=="function"?P=r(R):P=[r,T?"active":null,b?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let I=typeof s=="function"?s(R):s;return C.createElement(pN,{...c,"aria-current":B,className:P,ref:d,style:I,to:o,viewTransition:a},typeof l=="function"?l(R):l)});Fq.displayName="NavLink";var kq=C.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:s,method:o=s0,action:a,onSubmit:l,relative:c,preventScrollReset:d,viewTransition:h,...p},m)=>{let{unstable_useTransitions:v}=C.useContext(hs),_=Vq(),y=Wq(a,{relative:c}),g=o.toLowerCase()==="get"?"get":"post",S=typeof a=="string"&&hN.test(a),E=w=>{if(l&&l(w),w.defaultPrevented)return;w.preventDefault();let T=w.nativeEvent.submitter,b=(T==null?void 0:T.getAttribute("formmethod"))||o,R=()=>_(T||w.currentTarget,{fetcherKey:e,method:b,navigate:t,replace:i,state:s,relative:c,preventScrollReset:d,viewTransition:h});v&&t!==!1?C.startTransition(()=>R()):R()};return C.createElement("form",{ref:m,method:g,action:y,onSubmit:r?l:E,...p,"data-discover":!S&&n==="render"?"true":void 0})});kq.displayName="Form";function Uq(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mN(n){let e=C.useContext(Rd);return Rn(e,Uq(n)),e}function zq(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:s,viewTransition:o,unstable_useTransitions:a}={}){let l=Nw(),c=il(),d=vp(n,{relative:s});return C.useCallback(h=>{if(vq(h,e)){h.preventDefault();let p=t!==void 0?t:Uh(c)===Uh(d),m=()=>l(n,{replace:p,state:r,preventScrollReset:i,relative:s,viewTransition:o});a?C.startTransition(()=>m()):m()}},[c,l,d,t,r,e,n,i,s,o,a])}var Hq=0,Gq=()=>`__${String(++Hq)}__`;function Vq(){let{router:n}=mN("useSubmit"),{basename:e}=C.useContext(hs),t=oq(),r=n.fetch,i=n.navigate;return C.useCallback(async(s,o={})=>{let{action:a,method:l,encType:c,formData:d,body:h}=xq(s,e);if(o.navigate===!1){let p=o.fetcherKey||Gq();await r(p,t,o.action||a,{preventScrollReset:o.preventScrollReset,formData:d,body:h,formMethod:o.method||l,formEncType:o.encType||c,flushSync:o.flushSync})}else await i(o.action||a,{preventScrollReset:o.preventScrollReset,formData:d,body:h,formMethod:o.method||l,formEncType:o.encType||c,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,i,e,t])}function Wq(n,{relative:e}={}){let{basename:t}=C.useContext(hs),r=C.useContext(ho);Rn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...vp(n||".",{relative:e})},o=il();if(n==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(d=>d==="")){a.delete("index"),l.filter(h=>h).forEach(h=>a.append("index",h));let d=a.toString();s.search=d?`?${d}`:""}}return(!n||n===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:zo([t,s.pathname])),Uh(s)}function $q(n,{relative:e}={}){let t=C.useContext(sN);Rn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=mN("useViewTransitionState"),i=vp(n,{relative:e});if(!t.isTransitioning)return!1;let s=Ko(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=Ko(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Q0(i.pathname,o)!=null||Q0(i.pathname,s)!=null}const jq=()=>{const[n,e]=C.useState(!0),[t,r]=C.useState(""),[i,s]=C.useState(""),[o,a]=C.useState(""),[l,c]=C.useState(!1),[d,h]=C.useState(""),p=Nw(),m=async v=>{v.preventDefault(),c(!0),h("");try{await new Promise(_=>setTimeout(_,1500)),p("/avatar")}catch{h("An error occurred. Please try again.")}finally{c(!1)}};return C.useEffect(()=>{const v=()=>{document.querySelectorAll(".scroll-animate").forEach(y=>{y.getBoundingClientRect().top<window.innerHeight-150&&y.classList.add("active")})};return window.addEventListener("scroll",v),v(),()=>window.removeEventListener("scroll",v)},[]),N.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-black text-white overflow-x-hidden",children:[N.jsxs("section",{className:"relative min-h-screen flex flex-col justify-center items-center px-4 scroll-animate",children:[N.jsxs("div",{className:"absolute inset-0 z-0",children:[N.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob"}),N.jsx("div",{className:"absolute top-1/3 right-1/4 w-64 h-64 bg-yellow-500 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000"}),N.jsx("div",{className:"absolute bottom-1/4 left-1/2 w-64 h-64 bg-pink-500 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-4000"})]}),N.jsxs("div",{className:"relative z-10 text-center max-w-4xl mx-auto",children:[N.jsxs("h1",{className:"text-5xl md:text-7xl font-bold mb-6 leading-tight",children:[N.jsx("span",{className:"block",children:"Meet Your"}),N.jsx("span",{className:"block bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-600",children:"AI Digital Human"})]}),N.jsx("p",{className:"text-xl md:text-2xl text-gray-300 mb-10 max-w-2xl mx-auto",children:"Experience the future of human-AI interaction with our lifelike digital avatar powered by Google Gemini AI"}),N.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[N.jsx("button",{onClick:()=>document.getElementById("features").scrollIntoView({behavior:"smooth"}),className:"px-8 py-4 bg-white text-black font-semibold rounded-full hover:bg-gray-200 transition-all duration-300 transform hover:scale-105",children:"Explore Features"}),N.jsx("button",{onClick:()=>document.getElementById("auth-modal").classList.remove("hidden"),className:"px-8 py-4 bg-transparent border-2 border-white text-white font-semibold rounded-full hover:bg-white hover:text-black transition-all duration-300",children:"Get Started"})]})]}),N.jsx("div",{className:"absolute bottom-10 animate-bounce",children:N.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})})]}),N.jsx("section",{id:"features",className:"py-20 px-4 scroll-animate",children:N.jsxs("div",{className:"max-w-6xl mx-auto",children:[N.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-center mb-16",children:["Revolutionary ",N.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-600",children:"Features"})]}),N.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[N.jsxs("div",{className:"bg-gray-800 bg-opacity-50 backdrop-blur-lg rounded-2xl p-8 border border-gray-700 hover:border-purple-500 transition-all duration-500 transform hover:-translate-y-2",children:[N.jsx("div",{className:"w-16 h-16 bg-purple-600 rounded-xl flex items-center justify-center mb-6",children:N.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})})}),N.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Natural Conversations"}),N.jsx("p",{className:"text-gray-300",children:"Engage in lifelike conversations with our AI-powered avatar that understands context, emotion, and nuance."})]}),N.jsxs("div",{className:"bg-gray-800 bg-opacity-50 backdrop-blur-lg rounded-2xl p-8 border border-gray-700 hover:border-yellow-500 transition-all duration-500 transform hover:-translate-y-2",children:[N.jsx("div",{className:"w-16 h-16 bg-yellow-600 rounded-xl flex items-center justify-center mb-6",children:N.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),N.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Expressive Avatar"}),N.jsx("p",{className:"text-gray-300",children:"Our 3D avatar displays realistic facial expressions and lip-syncing for an immersive conversational experience."})]}),N.jsxs("div",{className:"bg-gray-800 bg-opacity-50 backdrop-blur-lg rounded-2xl p-8 border border-gray-700 hover:border-pink-500 transition-all duration-500 transform hover:-translate-y-2",children:[N.jsx("div",{className:"w-16 h-16 bg-pink-600 rounded-xl flex items-center justify-center mb-6",children:N.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),N.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Secure & Private"}),N.jsx("p",{className:"text-gray-300",children:"Your conversations are encrypted and never stored. We prioritize your privacy and data security."})]})]})]})}),N.jsx("section",{className:"py-20 px-4 bg-gray-900 bg-opacity-50 scroll-animate",children:N.jsxs("div",{className:"max-w-6xl mx-auto",children:[N.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-center mb-16",children:["How It ",N.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-600",children:"Works"})]}),N.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-10",children:[N.jsx("div",{className:"flex-1",children:N.jsxs("div",{className:"relative",children:[N.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500 to-pink-600 rounded-2xl transform rotate-6"}),N.jsx("div",{className:"relative bg-gray-800 rounded-2xl p-1",children:N.jsx("div",{className:"bg-black rounded-xl aspect-video flex items-center justify-center",children:N.jsxs("div",{className:"text-center",children:[N.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-purple-500 to-pink-600 rounded-full flex items-center justify-center mx-auto mb-4",children:N.jsxs("svg",{className:"w-12 h-12 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),N.jsx("p",{className:"text-gray-300",children:"Interactive Demo"})]})})})]})}),N.jsx("div",{className:"flex-1",children:N.jsxs("div",{className:"space-y-8",children:[N.jsxs("div",{className:"flex items-start",children:[N.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-purple-600 rounded-full flex items-center justify-center mr-4",children:N.jsx("span",{className:"text-white font-bold",children:"1"})}),N.jsxs("div",{children:[N.jsx("h3",{className:"text-xl font-bold mb-2",children:"Sign Up & Customize"}),N.jsx("p",{className:"text-gray-300",children:"Create your account and personalize your digital human with various appearance and personality options."})]})]}),N.jsxs("div",{className:"flex items-start",children:[N.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-pink-600 rounded-full flex items-center justify-center mr-4",children:N.jsx("span",{className:"text-white font-bold",children:"2"})}),N.jsxs("div",{children:[N.jsx("h3",{className:"text-xl font-bold mb-2",children:"Start Conversing"}),N.jsx("p",{className:"text-gray-300",children:"Begin chatting with your AI companion through text or voice. Experience natural, contextual conversations."})]})]}),N.jsxs("div",{className:"flex items-start",children:[N.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-yellow-600 rounded-full flex items-center justify-center mr-4",children:N.jsx("span",{className:"text-white font-bold",children:"3"})}),N.jsxs("div",{children:[N.jsx("h3",{className:"text-xl font-bold mb-2",children:"Learn & Grow"}),N.jsx("p",{className:"text-gray-300",children:"Take retention tests, get personalized feedback, and continuously improve your knowledge with our AI tutor."})]})]})]})})]})]})}),N.jsx("section",{className:"py-20 px-4 scroll-animate",children:N.jsxs("div",{className:"max-w-6xl mx-auto",children:[N.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-center mb-16",children:["What Users ",N.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-600",children:"Say"})]}),N.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[N.jsxs("div",{className:"bg-gray-800 bg-opacity-50 backdrop-blur-lg rounded-2xl p-8 border border-gray-700",children:[N.jsxs("div",{className:"flex items-center mb-4",children:[N.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-600 rounded-full flex items-center justify-center text-white font-bold mr-4",children:"JD"}),N.jsxs("div",{children:[N.jsx("h4",{className:"font-bold",children:"John Doe"}),N.jsx("p",{className:"text-gray-400 text-sm",children:"Educator"})]})]}),N.jsx("p",{className:"text-gray-300 italic",children:'"This AI avatar has transformed how I engage with my students. The retention tests and personalized feedback have significantly improved learning outcomes."'}),N.jsx("div",{className:"flex mt-4",children:[...Array(5)].map((v,_)=>N.jsx("svg",{className:"w-5 h-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:N.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},_))})]}),N.jsxs("div",{className:"bg-gray-800 bg-opacity-50 backdrop-blur-lg rounded-2xl p-8 border border-gray-700",children:[N.jsxs("div",{className:"flex items-center mb-4",children:[N.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-yellow-500 to-pink-600 rounded-full flex items-center justify-center text-white font-bold mr-4",children:"AS"}),N.jsxs("div",{children:[N.jsx("h4",{className:"font-bold",children:"Alex Smith"}),N.jsx("p",{className:"text-gray-400 text-sm",children:"Developer"})]})]}),N.jsx("p",{className:"text-gray-300 italic",children:`"The natural conversation flow and expressive avatar make this feel like talking to a real person. It's incredible how lifelike the interactions are."`}),N.jsx("div",{className:"flex mt-4",children:[...Array(5)].map((v,_)=>N.jsx("svg",{className:"w-5 h-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:N.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},_))})]}),N.jsxs("div",{className:"bg-gray-800 bg-opacity-50 backdrop-blur-lg rounded-2xl p-8 border border-gray-700",children:[N.jsxs("div",{className:"flex items-center mb-4",children:[N.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-blue-600 rounded-full flex items-center justify-center text-white font-bold mr-4",children:"MJ"}),N.jsxs("div",{children:[N.jsx("h4",{className:"font-bold",children:"Maria Johnson"}),N.jsx("p",{className:"text-gray-400 text-sm",children:"Student"})]})]}),N.jsx("p",{className:"text-gray-300 italic",children:'"The retention tests helped me identify my weak areas and the personalized feedback gave me actionable steps to improve. My grades have never been better!"'}),N.jsx("div",{className:"flex mt-4",children:[...Array(5)].map((v,_)=>N.jsx("svg",{className:"w-5 h-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:N.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},_))})]})]})]})}),N.jsx("section",{className:"py-20 px-4 bg-gradient-to-r from-purple-900 to-pink-900 scroll-animate",children:N.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[N.jsxs("h2",{className:"text-4xl md:text-5xl font-bold mb-6",children:["Ready to Meet Your ",N.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-yellow-300 to-white",children:"Digital Human?"})]}),N.jsx("p",{className:"text-xl text-gray-200 mb-10 max-w-2xl mx-auto",children:"Join thousands of users experiencing the future of AI interaction today."}),N.jsx("button",{onClick:()=>document.getElementById("auth-modal").classList.remove("hidden"),className:"px-10 py-5 bg-white text-black font-bold text-lg rounded-full hover:bg-gray-200 transition-all duration-300 transform hover:scale-105 shadow-2xl",children:"Get Started Now"})]})}),N.jsx("footer",{className:"py-12 px-4 border-t border-gray-800",children:N.jsxs("div",{className:"max-w-6xl mx-auto",children:[N.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[N.jsxs("div",{className:"mb-6 md:mb-0",children:[N.jsx("h3",{className:"text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-600",children:"Digital Human"}),N.jsx("p",{className:"text-gray-400 mt-2",children:"The future of human-AI interaction"})]}),N.jsxs("div",{className:"flex space-x-6",children:[N.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:N.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:N.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})}),N.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:N.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:N.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})}),N.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:N.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:N.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})})})]})]}),N.jsx("div",{className:"mt-8 pt-8 border-t border-gray-800 text-center text-gray-400",children:N.jsx("p",{children:" 2023 Digital Human. All rights reserved."})})]})}),N.jsx("div",{id:"auth-modal",className:"hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:N.jsx("div",{className:"bg-gray-900 rounded-2xl max-w-md w-full overflow-hidden border border-gray-700",children:N.jsxs("div",{className:"p-6",children:[N.jsxs("div",{className:"flex justify-between items-center mb-6",children:[N.jsx("h3",{className:"text-2xl font-bold",children:n?"Welcome Back":"Create Account"}),N.jsx("button",{onClick:()=>document.getElementById("auth-modal").classList.add("hidden"),className:"text-gray-400 hover:text-white",children:N.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),d&&N.jsx("div",{className:"mb-4 p-3 bg-red-900 bg-opacity-50 border border-red-700 rounded-lg",children:N.jsx("p",{className:"text-red-200 text-sm",children:d})}),N.jsxs("form",{onSubmit:m,children:[!n&&N.jsxs("div",{className:"mb-4",children:[N.jsx("label",{htmlFor:"name",className:"block text-gray-300 mb-2",children:"Full Name"}),N.jsx("input",{type:"text",id:"name",value:o,onChange:v=>a(v.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Enter your full name",required:!0})]}),N.jsxs("div",{className:"mb-4",children:[N.jsx("label",{htmlFor:"email",className:"block text-gray-300 mb-2",children:"Email Address"}),N.jsx("input",{type:"email",id:"email",value:t,onChange:v=>r(v.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Enter your email",required:!0})]}),N.jsxs("div",{className:"mb-6",children:[N.jsx("label",{htmlFor:"password",className:"block text-gray-300 mb-2",children:"Password"}),N.jsx("input",{type:"password",id:"password",value:i,onChange:v=>s(v.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Enter your password",required:!0})]}),N.jsx("button",{type:"submit",disabled:l,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold py-3 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-300 disabled:opacity-50",children:l?N.jsxs("div",{className:"flex items-center justify-center",children:[N.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[N.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),N.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):n?"Sign In":"Sign Up"})]}),N.jsx("div",{className:"mt-6 text-center",children:N.jsxs("p",{className:"text-gray-400",children:[n?"Don't have an account? ":"Already have an account? ",N.jsx("button",{onClick:()=>e(!n),className:"text-purple-400 hover:text-purple-300 font-medium",children:n?"Sign Up":"Sign In"})]})})]})})}),N.jsx("style",{jsx:!0,children:`
        @keyframes blob {
          0% {
            transform: translate(0px, 0px) scale(1);
          }
          33% {
            transform: translate(30px, -50px) scale(1.1);
          }
          66% {
            transform: translate(-20px, 20px) scale(0.9);
          }
          100% {
            transform: translate(0px, 0px) scale(1);
          }
        }
        
        .animate-blob {
          animation: blob 7s infinite;
        }
        
        .animation-delay-2000 {
          animation-delay: 2s;
        }
        
        .animation-delay-4000 {
          animation-delay: 4s;
        }
        
        .scroll-animate {
          opacity: 0;
          transform: translateY(20px);
          transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        
        .scroll-animate.active {
          opacity: 1;
          transform: translateY(0);
        }
      `})]})};function Xq(){return N.jsx(Nq,{children:N.jsxs(fq,{children:[N.jsx(i0,{path:"/",element:N.jsx(jq,{})}),N.jsx(i0,{path:"/avatar",element:N.jsxs(N.Fragment,{children:[N.jsx(dV,{}),N.jsx(qO,{collapsed:!0,hidden:!0}),N.jsx(_Q,{}),N.jsx(lV,{shadows:!0,camera:{position:[0,0,0],fov:10},children:N.jsx(gQ,{})})]})}),N.jsx(i0,{path:"*",element:N.jsx(uq,{to:"/",replace:!0})})]})})}Zx.createRoot(document.getElementById("root")).render(N.jsx(q.StrictMode,{children:N.jsx(pQ,{children:N.jsx(Xq,{})})}));
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
